"use strict";(self.webpackChunksen_swap=self.webpackChunksen_swap||[]).push([[722],{14532:function(e,n,t){t.r(n),t.d(n,{Page:function(){return Mn},Widget:function(){return Bn},widgetConfig:function(){return zn}});var r,a=t(55754),s=t(49142),i=t(78589),o=t(15861),u=t(29439),c=t(87757),l=t.n(c),d=t(1413),f=t(92950),p=t(76907),v=t.n(p),h=t(21111),m=t.n(h),x=t(34559),b=t(45263),g=function(e){var n=e.chartData,t=void 0===n?[]:n,r=e.labels,a=void 0===r?[]:r,s=e.type,i=void 0===s?"line":s,o=e.configs,c=e.disableAxe,l=void 0!==c&&c,p=e.chartId,h=void 0===p?"sen_chart":p,g=(o||{}).backgroundColor,y=(0,f.useState)(!1),w=(0,u.Z)(y,2),k=w[0],j=w[1],Z=(0,f.useCallback)((function(e,n,t){return{labels:n,datasets:[(0,d.Z)((0,d.Z)({},o),{},{data:e,backgroundColor:t})]}}),[o]),C=(0,f.useRef)(null),I=(0,f.useCallback)((function(){var e,n;if(!C||!g)return"#dadada";var t=null===C||void 0===C||null===(e=C.current)||void 0===e||null===(n=e.canvas)||void 0===n?void 0:n.getContext("2d"),r=null===t||void 0===t?void 0:t.createLinearGradient(0,0,0,180);return null===r||void 0===r||r.addColorStop(0,g),null===r||void 0===r||r.addColorStop(1,"".concat(g,"00")),"line"===i?r:g}),[g,i]);return(0,f.useEffect)((function(){var e,n=C.current,r=null===n||void 0===n||null===(e=n.data.datasets)||void 0===e?void 0:e.find((function(e){return e.data})),s=m()(null===r||void 0===r?void 0:r.data,t);n&&!s&&(n.data=Z(t,a,I()),null===n||void 0===n||n.update())}),[t,Z,I,a]),(0,b.jsx)("canvas",{id:h,height:"180px",ref:function(e){if(e){var n=e.getContext("2d");n&&!k&&(C.current=new(v())(n,{type:i,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!l}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!l,beginAtZero:!0,maxTicksLimit:8,callback:function(e,n,t){return(0,x.uR)(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:function(e,n){var t=document.getElementById(h);t&&(t.style.cursor=n[0]?"pointer":"default")}}}}),j(!0))}}})},y=t(45987),w=t(65191),k=["icons","defaultIcon"],j=function(e){var n=e.icons,t=void 0===n?[]:n,r=e.defaultIcon,a=void 0===r?(0,b.jsx)(w.Z,{name:"help-outline"}):r,s=(0,y.Z)(e,k);return(0,b.jsx)(i.Avatar.Group,{children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,b.jsx)(i.Avatar,(0,d.Z)((0,d.Z)({src:e,style:{backgroundColor:"#2D3355",border:"none"}},s),{},{children:a}),n)}))})},Z=t(20418),C=t(35105),I=t(21995),A=t.n(I),T={address:"",chainId:0,decimals:0,name:"",symbol:"TOKEN",extensions:void 0,logoURI:"",tags:[]},S=new Z.Z,R=(function(){var e=(0,o.Z)(l().mark((function e(n){var t,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S&&n){e.next=2;break}return e.abrupt("return");case 2:return t=n.map(function(){var e=(0,o.Z)(l().mark((function e(n){var t,r,a,s,i,o,u,c,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.findByAddress(n);case 2:if((t=e.sent)||(t=T),a=(r=t).address,s=r.symbol,i=r.decimals,o=r.extensions,u=null===o||void 0===o?void 0:o.coingeckoId){e.next=8;break}return e.abrupt("return",{address:a,symbol:s,decimals:i,price:0});case 8:return e.next=10,(0,C.l)(u);case 10:return c=e.sent,d=c.price,e.abrupt("return",{address:a,symbol:s,decimals:i,price:d});case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.next=5,Promise.all(t);case 5:return r=e.sent,a=new Map,r.forEach((function(e){a.set(e.address,e)})),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,o.Z)(l().mark((function e(n){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A()({method:"get",url:"https://api.coingecko.com/api/v3/coins/".concat(n,"/market_chart?vs_currency=usd&days=max&interval=daily")});case 3:return t=e.sent,r=t.data.prices,e.abrupt("return",r.map((function(e){return{time:e[0],val:e[1]}})));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}()),D=t(4550),P=t.n(D),M="#5D6CCF",z=0,B=14,E="TVL",O="transparent",N={week:7,day:1,month:30,year:365},L="UNKN",W=function(){var e,n,t,r,s,c,d,p,v,h=(0,f.useState)("week"),m=(0,u.Z)(h,2),x=m[0],y=m[1],w=(0,f.useState)([]),k=(0,u.Z)(w,2),Z=k[0],C=k[1],I={borderColor:O,borderRadius:z,pointRadius:z,tooltip:E,pointHitRadius:B,pointHoverRadius:z,backgroundColor:M},A=(0,a.useSelector)((function(e){return e.bid})),T=(0,a.useSelector)((function(e){return e.ask})),S=(0,f.useMemo)((function(){var e,n;return[null===(e=A.mintInfo)||void 0===e?void 0:e.logoURI,null===(n=T.mintInfo)||void 0===n?void 0:n.logoURI]}),[null===(e=T.mintInfo)||void 0===e?void 0:e.logoURI,null===(n=A.mintInfo)||void 0===n?void 0:n.logoURI]),D=(0,f.useMemo)((function(){var e,n;return[(null===(e=A.mintInfo)||void 0===e?void 0:e.symbol)||L,(null===(n=T.mintInfo)||void 0===n?void 0:n.symbol)||L]}),[null===(t=T.mintInfo)||void 0===t?void 0:t.symbol,null===(r=A.mintInfo)||void 0===r?void 0:r.symbol]),W=(0,f.useCallback)((0,o.Z)(l().mark((function e(){var n,t,r,a,s,i,o,c,d,f,p,v,h,m,b,g,y,w,k;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=T.mintInfo)||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.coingeckoId,i=null===(r=A.mintInfo)||void 0===r||null===(a=r.extensions)||void 0===a?void 0:a.coingeckoId,s&&i){e.next=4;break}return e.abrupt("return",C([]));case 4:return e.next=6,Promise.all([R(s),R(i)]);case 6:o=e.sent,c=(0,u.Z)(o,2),d=c[0],f=c[1],p=N[x]||7,v=10,h=[],m=f.length-1;case 14:if(!(m>=0)){e.next=27;break}if(b=f[m],g=d[d.length-1-(f.length-1-m)],b&&g){e.next=19;break}return e.abrupt("break",27);case 19:if(!(h.length>=v)){e.next=21;break}return e.abrupt("break",27);case 21:y=+Number(b.val/g.val).toFixed(8),(w=f.length-1-m)>-1&&w%p===0&&(k=P()(b.time).format("DD/MM"),h.unshift({label:k,val:y}));case 24:m--,e.next=14;break;case 27:C(h);case 28:case"end":return e.stop()}}),e)}))),[null===(s=T.mintInfo)||void 0===s||null===(c=s.extensions)||void 0===c?void 0:c.coingeckoId,null===(d=A.mintInfo)||void 0===d||null===(p=d.extensions)||void 0===p?void 0:p.coingeckoId,x]);return(0,f.useEffect)((function(){W()}),[W]),(0,b.jsx)(i.Card,{bordered:!1,className:"card-swap",bodyStyle:{paddingTop:28},children:(0,b.jsxs)(i.Row,{gutter:[24,24],children:[(0,b.jsx)(i.Col,{flex:"auto",children:(0,b.jsxs)(i.Space,{direction:"vertical",size:20,children:[(0,b.jsxs)(i.Space,{size:4,align:"baseline",children:[(0,b.jsx)(j,{icons:S,size:24}),(0,b.jsx)(i.Typography.Text,{children:D.join("/")})]}),(0,b.jsx)(i.Typography.Title,{level:2,children:null===(v=Z[Z.length-1])||void 0===v?void 0:v.val})]})}),(0,b.jsx)(i.Col,{children:(0,b.jsxs)(i.Radio.Group,{defaultValue:"week",onChange:function(e){return y(e.target.value)},children:[(0,b.jsx)(i.Radio.Button,{value:"day",children:"Day"}),(0,b.jsx)(i.Radio.Button,{value:"week",children:"Week"}),(0,b.jsx)(i.Radio.Button,{value:"month",children:"Month"})]})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(g,{chartData:Z.map((function(e){return e.val})),labels:Z.map((function(e){return e.label})),configs:I})})]})})},_=t(95418),F=BigInt(1e9),U=function(e){var n=e.hops,t=e.onCallback,r=void 0===t?function(){}:t,c=e.disabled,d=void 0!==c&&c,p=e.wrapAmount,v=void 0===p?BigInt(0):p,h=(0,f.useState)(!1),m=(0,u.Z)(h,2),g=m[0],y=m[1],w=(0,a.useSelector)((function(e){return e.bid})),k=(0,a.useSelector)((function(e){return e.ask})),j=(0,a.useSelector)((function(e){return e.settings})).slippage,Z=(0,s.useWallet)().wallet.address,C=(0,f.useCallback)((0,o.Z)(l().mark((function e(){var t,r,a,s,i,u,c,d,f,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.sentre,r=t.swap,a=t.splt,s=t.wallet){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Promise.all(n.map(function(){var e=(0,o.Z)(l().mark((function e(n){var t,r,s,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.srcMintInfo.address,r=n.dstMintInfo.address,s=n.poolData.address,e.next=3,a.deriveAssociatedAddress(Z,t);case 3:return i=e.sent,e.next=6,a.deriveAssociatedAddress(Z,r);case 6:return o=e.sent,e.abrupt("return",{poolAddress:s,srcAddress:i,dstAddress:o});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 5:return i=e.sent,u=n[0].srcMintInfo.decimals,c=_.utils.decimalize(w.amount,u),d=n[n.length-1].dstMintInfo.decimals,f=_.utils.decimalize(k.amount,d),p=f*(F-_.utils.decimalize(j,9))/F,e.next=13,r.route(c,p,i,s);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)}))),[n,w,k,j,Z]),I=function(){var e=(0,o.Z)(l().mark((function e(){var n,t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:if(n=window.sentre,t=n.swap,r=n.wallet){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.wrapSol(v,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,o.Z)(l().mark((function e(){var n,t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,I();case 4:return e.next=6,C();case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:return n=e.t0,t=n.txId,window.notify({type:"success",description:"Swap successfully. Click to view details.",onClick:function(){return window.open((0,x.kU)(t||""),"_blank")}}),e.abrupt("return",r());case 15:return e.prev=15,e.t1=e.catch(0),e.abrupt("return",window.notify({type:"error",description:e.t1.message}));case 18:return e.prev=18,y(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,15,18,21]])})));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)(i.Button,{type:"primary",onClick:A,disabled:d,loading:g,block:!0,children:"Swap"})},q=t(37762),Y=t(93433),G=t(15671),K=new Z.Z,Q=function e(){(0,G.Z)(this,e),this.hops=[],this.amounts=[],this.amount=""},V=function(e,n){var t=n.mint_a,r=n.mint_b,a=n.reserve_a,s=n.reserve_b;if(e===t)return a;if(e===r)return s;throw new Error("Cannot find reserves")},H=function(e){var n=new Map,t=function(t){var r=e[t];if(1!==(null===r||void 0===r?void 0:r.state))return"continue";[r.mint_a,r.mint_b].forEach((function(e){var a;n.has(e)||n.set(e,new Map),null===(a=n.get(e))||void 0===a||a.set(t,r)}))};for(var r in e)t(r);return n},J=function e(n,t,r,a,s){var i=s.pools,o=s.mints;if(3!==i.length){var u=t.get(r);null===u||void 0===u||u.forEach((function(s,u){if(!i.includes(u)){var c=s.mint_b;if(s.mint_a!==r&&(c=s.mint_a),!o.includes(c)){var l={pools:[].concat((0,Y.Z)(i),[u]),mints:[].concat((0,Y.Z)(o),[c])};c!==a?e(n,t,c,a,l):n.push(l)}}}))}},X=function(){var e=(0,o.Z)(l().mark((function e(n,t,r,a){var s,i,o,u,c,f,p,v,h,m,x,b,g,y,w,k;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===(s=r.mintInfo)||void 0===s?void 0:s.address,u=null===(i=a.mintInfo)||void 0===i?void 0:i.address,_.account.isAddress(o)&&_.account.isAddress(u)){e.next=4;break}return e.abrupt("return",[]);case 4:c=[],f=o,p="",v=(0,q.Z)(t),e.prev=8,v.s();case 10:if((h=v.n()).done){e.next=30;break}if(m=h.value,x=n[m],b=x.mint_a,g=x.mint_b,f===b||f===g){e.next=16;break}return e.abrupt("return",[]);case 16:return p=f===b?g:b,e.next=19,K.findByAddress(f);case 19:return y=e.sent,e.next=22,K.findByAddress(p);case 22:if(w=e.sent,y&&w){e.next=25;break}return e.abrupt("return",[]);case 25:k={poolData:(0,d.Z)({address:m},x),srcMintInfo:y,dstMintInfo:w},f=p,c.push(k);case 28:e.next=10;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(8),v.e(e.t0);case 35:return e.prev=35,v.f(),e.finish(35);case 38:return e.abrupt("return",c);case 39:case"end":return e.stop()}}),e,null,[[8,32,35,38]])})));return function(n,t,r,a){return e.apply(this,arguments)}}(),$=function(){var e=(0,o.Z)(l().mark((function e(n,t,r,a){var s,i,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new Q,i=(0,q.Z)(t),e.prev=2,u=l().mark((function e(){var t,i,u,c,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.value,e.next=3,X(n,t.pools,r,a);case 3:i=e.sent,u=r.amount,c=new Array,i.forEach((function(e){c.push(u),u=te(u,e)})),d=Number(s.amount),Number(u)>d&&(s={hops:i,amounts:c,amount:u});case 9:case"end":return e.stop()}}),e)})),i.s();case 5:if((o=i.n()).done){e.next=9;break}return e.delegateYield(u(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),i.e(e.t1);case 14:return e.prev=14,i.f(),e.finish(14);case 17:return e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(n,t,r,a){return e.apply(this,arguments)}}(),ee=function(){var e=(0,o.Z)(l().mark((function e(n,t,r,a){var s,i,o,u,c,d,f,p,v,h,m,x;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new Q,i=(0,q.Z)(t),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=37;break}return u=o.value,e.next=8,X(n,u.pools,r,a);case 8:c=e.sent,d=(0,Y.Z)(c).reverse(),f=a.amount,p=new Array,v=(0,q.Z)(d),e.prev=13,v.s();case 15:if((h=v.n()).done){e.next=23;break}if(m=h.value,f=re(f,m),!(Number(f)<0)){e.next=20;break}return e.abrupt("break",23);case 20:p.unshift(f);case 21:e.next=15;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(13),v.e(e.t0);case 28:return e.prev=28,v.f(),e.finish(28);case 31:if(!(Number(f)<0)){e.next=33;break}return e.abrupt("continue",35);case 33:(!(x=Number(s.amount))||Number(f)<x)&&(s={hops:c,amounts:p,amount:f});case 35:e.next=4;break;case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(2),i.e(e.t1);case 42:return e.prev=42,i.f(),e.finish(42);case 45:return e.abrupt("return",s);case 46:case"end":return e.stop()}}),e,null,[[2,39,42,45],[13,25,28,31]])})));return function(n,t,r,a){return e.apply(this,arguments)}}(),ne=_.Swap.oracle,te=function(e,n){var t=n.srcMintInfo,r=t.address,a=t.decimals,s=n.dstMintInfo,i=s.address,o=s.decimals,u=n.poolData,c=u.fee_ratio,l=u.tax_ratio,d=V(r,n.poolData),f=V(i,n.poolData);if(!d||!f)return"0";var p=ne.swap(_.utils.decimalize(e,a),d,f,c,l).askAmount;return _.utils.undecimalize(p,o)},re=function(e,n){var t=n.srcMintInfo,r=t.address,a=t.decimals,s=n.dstMintInfo,i=s.address,o=s.decimals,u=n.poolData,c=u.fee_ratio,l=u.tax_ratio,d=V(r,n.poolData),f=V(i,n.poolData),p=ne.inverseSwap(_.utils.decimalize(e,o),d,f,c,l);return _.utils.undecimalize(p,a)},ae=function(e){var n=e.icons,t=void 0===n?["",""]:n,r=e.size,a=void 0===r?24:r,s=e.defaultIcon,o=void 0===s?(0,b.jsx)(w.Z,{size:a,name:"help-outline"}):s;return(0,b.jsx)(i.Space,{children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,b.jsxs)(f.Fragment,{children:[(0,b.jsx)(i.Avatar,{src:e,size:a,children:o}),t.length>n+1&&(0,b.jsx)(w.Z,{name:"chevron-forward-outline"})]},n)}))})},se=function(e){var n,t,r=e.bidData,a=e.askData,s=(0,x.uR)(Number(null===r||void 0===r?void 0:r.amount)/Number(null===a||void 0===a?void 0:a.amount)).format("0,0.[000000]"),o="".concat(null===r||void 0===r||null===(n=r.mintInfo)||void 0===n?void 0:n.symbol,"/").concat(null===a||void 0===a||null===(t=a.mintInfo)||void 0===t?void 0:t.symbol);return(0,b.jsxs)(i.Space,{children:[(0,b.jsx)(i.Typography.Text,{children:s}),(0,b.jsx)(i.Typography.Text,{children:o})]})},ie=function(e){var n=e.value,t=void 0!==n&&n,r=e.onChange,a=void 0===r?function(){}:r,s=e.priceRate,o=void 0===s?(0,b.jsx)(f.Fragment,{}):s;return(0,b.jsxs)(i.Space,{size:4,children:[(0,b.jsx)(i.Button,{type:"text",onClick:function(){return a(!t)},shape:"circle",icon:(0,b.jsx)(w.Z,{name:"swap-horizontal-outline"})}),(0,b.jsx)(i.Typography.Text,{children:o})]})},oe=function(e){var n=e.label,t=void 0===n?"":n,r=e.content,a=void 0===r?"":r;return(0,b.jsxs)(i.Row,{children:[(0,b.jsx)(i.Col,{flex:"auto",children:(0,b.jsx)(i.Typography.Text,{type:"secondary",children:t})}),(0,b.jsx)(i.Col,{children:(0,b.jsx)("span",{children:a})})]})},ue=function(){var e=(0,f.useState)(!1),n=(0,u.Z)(e,2),t=n[0],r=n[1],s=(0,a.useSelector)((function(e){return e.settings})).slippage,o=(0,a.useSelector)((function(e){return e.route})).route,c=(0,a.useSelector)((function(e){return e.bid})),l=(0,a.useSelector)((function(e){return e.ask})),d=c.mintInfo,p=null===o||void 0===o?void 0:o.hops.at(-1),v=(null===o||void 0===o?void 0:o.amounts.at(-1))||"",h=(0,f.useMemo)((function(){return p?_.utils.undecimalize(function(e,n){var t=n.srcMintInfo,r=t.address,a=t.decimals,s=n.dstMintInfo.address,i=n.poolData,o=i.fee_ratio,u=i.tax_ratio,c=V(r,n.poolData),l=V(s,n.poolData);return ne.slippage(_.utils.decimalize(e,a),c,l,o,u)}(v,p),9):0}),[v,p]),m=(0,f.useMemo)((function(){if(null!==o&&void 0!==o&&o.hops){var e,n=[(d||{}).logoURI],t=(0,q.Z)(null===o||void 0===o?void 0:o.hops);try{for(t.s();!(e=t.n()).done;){var r=e.value.dstMintInfo.logoURI;r&&n.push(r)}}catch(a){t.e(a)}finally{t.f()}return n}}),[d,null===o||void 0===o?void 0:o.hops]),g=(0,f.useCallback)((function(){return c.amount&&l.amount?t?(0,b.jsx)(se,{bidData:l,askData:c}):(0,b.jsx)(se,{bidData:c,askData:l}):(0,b.jsx)(f.Fragment,{})}),[l,c,t]);return(0,f.useEffect)((function(){g()}),[g]),(0,b.jsxs)(i.Row,{gutter:[12,12],children:[(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(oe,{label:"Price impart",content:(0,b.jsx)(i.Typography.Text,{type:"danger",children:(0,x.uR)(Number(h)).format("0.[0000]%")})})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(oe,{label:"Price",content:(0,b.jsx)(ie,{priceRate:g(),value:t,onChange:r})})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(oe,{label:"Slippage toleance",content:(0,x.uR)(s).format("0.[00]%")})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(oe,{label:"Protocol Fee",content:"0.25%"})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(oe,{label:"Route",content:(0,b.jsx)(ae,{icons:m})})})]})},ce=function(){var e=(0,a.useSelector)((function(e){return e.route})).route,n=(0,a.useSelector)((function(e){return e.bid})),t=n.amount,r=n.mintInfo,o=n.accountAddress,u=(0,a.useSelector)((function(e){return e.ask})).amount,c=(0,s.useAccount)().accounts,l=(null===e||void 0===e?void 0:e.hops)||[],d=(0,f.useMemo)((function(){var e=(c[o]||{}).amount||BigInt(0);if(!r||!Number(t)||r.address!==_.DEFAULT_WSOL)return BigInt(0);var n=_.utils.decimalize(t,r.decimals);return n<=e?BigInt(0):n-e}),[c,o,t,r]),p=!l.length||!parseFloat(t)||parseFloat(t)<0||!parseFloat(u)||parseFloat(u)<0;return(0,b.jsx)(i.Card,{bordered:!1,children:(0,b.jsxs)(i.Row,{gutter:[24,24],children:[(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(i.Typography.Title,{level:5,children:"Review & Swap"})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(ue,{})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(U,{hops:l,wrapAmount:d,disabled:p})})]})})},le=function(e){var n=(0,s.useMint)().tokenProvider,t=(0,s.usePool)().pools,r=(0,f.useState)([]),a=(0,u.Z)(r,2),i=a[0],c=a[1],d=(0,f.useCallback)((0,o.Z)(l().mark((function r(){var a,s,i,o,u,d;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return",c([void 0]));case 2:return r.next=4,n.findByAddress(e);case 4:if(!(a=r.sent)){r.next=7;break}return r.abrupt("return",c([a]));case 7:if(s=Object.values(t).find((function(n){return n.mint_lpt===e}))){r.next=10;break}return r.abrupt("return",c([void 0]));case 10:return i=s.mint_a,o=s.mint_b,r.next=13,n.findByAddress(i);case 13:return u=r.sent,r.next=16,n.findByAddress(o);case 16:return d=r.sent,r.abrupt("return",c([u,d]));case 18:case"end":return r.stop()}}),r)}))),[e,t,n]);return(0,f.useEffect)((function(){d()}),[d]),i},de=function(e){var n=e.mintAddress,t=e.size,r=void 0===t?24:t,a=e.icon,s=void 0===a?(0,b.jsx)(w.Z,{name:"diamond-outline"}):a,o=le(n);return(0,b.jsx)(i.Avatar.Group,{style:{display:"block"},children:o.map((function(e,n){return(0,b.jsx)(i.Avatar,{src:null===e||void 0===e?void 0:e.logoURI,size:r,style:{backgroundColor:"#2D3355",border:"none"},children:s},(null===e||void 0===e?void 0:e.address)||n)}))})},fe=function(e){var n=e.mintAddress,t=le(n),r=(0,f.useMemo)((function(){return t.map((function(e){return e?e.symbol:"UNKN"})).join(" / ")}),[t]);return(0,b.jsx)("span",{children:r})},pe={address:"",icon:"",name:"TOKEN",price:0,priceChange:0,rank:0,symbol:"TOKEN",totalVolume:0},ve=function(e){var n=(0,f.useState)(pe),t=(0,u.Z)(n,2),r=t[0],a=t[1],i=(0,s.useMint)().tokenProvider,c=(0,f.useCallback)((0,o.Z)(l().mark((function n(){var t,r,s,o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",a(pe));case 2:return n.prev=2,n.next=5,i.findByAddress(e);case 5:return r=n.sent,s=null===r||void 0===r||null===(t=r.extensions)||void 0===t?void 0:t.coingeckoId,n.next=9,(0,C.l)(s);case 9:return o=n.sent,n.abrupt("return",a(o));case 13:return n.prev=13,n.t0=n.catch(2),n.abrupt("return",a(pe));case 16:case"end":return n.stop()}}),n,null,[[2,13]])}))),[e,i]);return(0,f.useEffect)((function(){c()}),[c]),r},he=function(e){var n=e.mintAddress,t=void 0===n?"":n,r=e.tvl,a=void 0===r?"":r,s=e.symbol,o=void 0===s?"":s,u=e.price,c=e.format,l=void 0===c?"0,0.[00]a":c;return(0,b.jsxs)(i.Space,{direction:"vertical",size:4,children:[(0,b.jsx)(de,{mintAddress:t}),(0,b.jsxs)(i.Space,{children:[(0,b.jsx)(i.Typography.Text,{children:"TVL:"}),(0,b.jsx)(i.Typography.Title,{level:5,children:(0,x.uR)(a).format(l)}),(0,b.jsx)(i.Typography.Title,{level:5,children:o})]}),(0,b.jsxs)(i.Typography.Text,{className:"caption",type:"secondary",children:["~ $",(0,x.uR)(u).format(l)]})]})},me=function(){var e=(0,a.useSelector)((function(e){return e.route})).route,n=(0,a.useSelector)((function(e){return e.ask.mintInfo})),t=(0,a.useSelector)((function(e){return e.bid.mintInfo})),r=ve(null===n||void 0===n?void 0:n.address),s=ve(null===t||void 0===t?void 0:t.address),o=(null===e||void 0===e?void 0:e.hops.at(-1))||{},u=o.dstMintInfo,c=o.poolData,l=(null===e||void 0===e?void 0:e.hops[0])||{},d=l.srcMintInfo,p=l.poolData,v=function(e,n){return _.account.isAddress(e)&&n?V(e,n):BigInt(0)},h=(0,f.useMemo)((function(){if(null===u||void 0===u||!u.decimals)return 0;var e=v(null===u||void 0===u?void 0:u.address,c);return Number(_.utils.undecimalize(e,u.decimals))}),[null===u||void 0===u?void 0:u.address,null===u||void 0===u?void 0:u.decimals,c]),m=(0,f.useMemo)((function(){if(null===d||void 0===d||!d.decimals)return 0;var e=v(null===d||void 0===d?void 0:d.address,p);return Number(_.utils.undecimalize(e,d.decimals))}),[null===d||void 0===d?void 0:d.address,null===d||void 0===d?void 0:d.decimals,p]);return(0,b.jsx)(i.Card,{bordered:!1,children:(0,b.jsxs)(i.Row,{gutter:[16,16],wrap:!1,children:[(0,b.jsx)(i.Col,{span:11,children:(0,b.jsx)(he,{mintAddress:null===t||void 0===t?void 0:t.address,tvl:m,symbol:null===t||void 0===t?void 0:t.symbol,price:m*s.price})}),(0,b.jsx)(i.Col,{children:(0,b.jsx)(i.Divider,{type:"vertical",style:{height:"100%"}})}),(0,b.jsx)(i.Col,{span:11,children:(0,b.jsx)(he,{mintAddress:null===n||void 0===n?void 0:n.address,tvl:h,symbol:null===n||void 0===n?void 0:n.symbol,price:h*r.price})})]})})},xe=t(36498),be=function(e){var n=e.onChange,t=e.isSupportedMint,r=e.disabled,a=void 0!==r&&r,c=(0,f.useState)(""),d=(0,u.Z)(c,2),p=d[0],v=d[1],h=(0,s.useMint)().tokenProvider,m=(0,f.useCallback)((0,o.Z)(l().mark((function e(){var r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p&&!(p.length<3)){e.next=2;break}return e.abrupt("return",n(null));case 2:return e.next=4,h.find(p);case 4:return r=e.sent,a=r.filter((function(e){var n=e.address;return t(n)})),e.abrupt("return",n(a));case 7:case"end":return e.stop()}}),e)}))),[p,h,n,t]);return(0,f.useEffect)((function(){m()}),[m]),(0,b.jsx)(i.Card,{className:"card-child",bodyStyle:{padding:8},bordered:!1,children:(0,b.jsx)(i.Input,{placeholder:"Search",value:p,size:"small",bordered:!1,suffix:(0,b.jsx)(i.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:p?function(){return v("")}:function(){},icon:(0,b.jsx)(w.Z,{name:p?"close-outline":"search-outline"}),disabled:a}),onChange:function(e){return v(e.target.value)},disabled:a})})},ge=function(e){var n=e.logoURI,t=e.symbol,r=e.name,a=e.onClick,s=e.active,o=void 0!==s&&s;return(0,b.jsx)(i.Card,{className:"card-child",bodyStyle:{padding:"8px 16px",cursor:"pointer"},bordered:o,onClick:a,hoverable:!0,children:(0,b.jsx)(i.Row,{gutter:[16,16],children:(0,b.jsx)(i.Col,{span:24,children:(0,b.jsxs)(i.Space,{size:12,style:{marginLeft:-4},children:[(0,b.jsx)(i.Avatar,{src:n,size:32,style:{backgroundColor:"#2D3355",border:"none"},children:(0,b.jsx)(w.Z,{name:"diamond-outline"})}),(0,b.jsx)(i.Typography.Text,{style:{margin:0},children:t}),(0,b.jsx)(i.Divider,{type:"vertical",style:{margin:0}}),(0,b.jsx)(i.Typography.Text,{type:"secondary",style:{margin:0,fontSize:12},children:r})]})})})})},ye=function(e){var n=e.value,t=e.onChange,r=(0,f.useState)([]),a=(0,u.Z)(r,2),c=a[0],d=a[1],p=(0,s.usePool)().pools,v=(0,s.useMint)().tokenProvider,h=(0,f.useMemo)((function(){return p?Object.keys(p).map((function(e){var n=p[e];return[n.mint_a,n.mint_b]})).flat().filter((function(e,n,t){return t.indexOf(e)===n})):[]}),[p]),m=(0,f.useCallback)((function(e){return h.includes(e)}),[h]),x=(0,f.useCallback)(function(){var e=(0,o.Z)(l().mark((function e(n){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return",d(n));case 2:return e.next=4,v.all();case 4:return t=e.sent,r=t.filter((function(e){var n=e.address;return m(n)})),e.abrupt("return",d(r));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[v,m]),g=(0,f.useCallback)((function(e){var n=null===e||void 0===e?void 0:e.address;return _.account.isAddress(n)?Object.keys(p).filter((function(e){var t=p[e];return[t.mint_a,t.mint_b].includes(n)})):[]}),[p]),y=(0,f.useMemo)((function(){return(0,b.jsx)(i.Row,{gutter:[16,16],children:c.map((function(e,r){var a=e.logoURI,s=e.symbol,o=e.name,u=e.address,c=(n.mintInfo||{}).address;return(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(xe.ZP,{height:48,overflow:!0,children:(0,b.jsx)(ge,{logoURI:a,symbol:s,name:o,onClick:function(){return function(e){var n=g(e);return t({mintInfo:e,poolAddress:void 0,poolAddresses:n})}(e)},active:c===u})})},o+r)}))})}),[g,t,c,n]);return(0,b.jsxs)(i.Row,{gutter:[16,16],children:[(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(i.Typography.Title,{level:5,children:"Token Selection"})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(be,{onChange:x,isSupportedMint:m})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsxs)(i.Row,{gutter:[16,16],style:{height:300,overflow:"auto"},children:[(0,b.jsx)(i.Col,{span:24,children:y}),(0,b.jsx)(i.Col,{span:24})]})})]})},we=function(e){var n=e.value,t=e.onChange,r=(0,f.useState)(!1),a=(0,u.Z)(r,2),s=a[0],o=a[1];(0,f.useEffect)((function(){s&&setTimeout(xe.be,500)}),[s]);var c=(null===n||void 0===n?void 0:n.mintInfo)||{},l=c.logoURI,d=c.symbol;return(0,b.jsxs)(f.Fragment,{children:[(0,b.jsxs)(i.Space,{style:{cursor:"pointer"},onClick:function(){return o(!0)},children:[(0,b.jsx)(i.Avatar,{size:24,src:l,style:{backgroundColor:"#2D3355",border:"none"},children:(0,b.jsx)(w.Z,{name:"diamond-outline"})}),(0,b.jsx)(i.Typography.Text,{type:"secondary",style:{margin:0},children:d||"TOKEN"}),(0,b.jsx)(i.Divider,{type:"vertical",style:{marginLeft:4}})]}),(0,b.jsx)(i.Modal,{visible:s,onCancel:function(){return o(!1)},closeIcon:(0,b.jsx)(w.Z,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,b.jsx)(i.Row,{gutter:[16,16],children:(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(ye,{value:n,onChange:function(e){return o(!1),t(e)}})})})})]})},ke=t(19289),je=["prioritized","reset"],Ze=(0,ke.createAsyncThunk)("".concat("bid","/updateBidData"),function(){var e=(0,o.Z)(l().mark((function e(n,t){var r,a,s,i,o,u,c,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.prioritized,a=n.reset,s=(0,y.Z)(n,je),i=t.getState,o=i(),u=o.bid.priority,c=o.ask.priority,Number(s.amount)<0&&(s.amount=void 0),f=a?0:r?c+1:u,e.abrupt("return",(0,d.Z)((0,d.Z)({},s),{},{priority:f}));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Ce=(0,ke.createSlice)({name:"bid",initialState:{amount:"",accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:function(e){e.addCase(Ze.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}}).reducer,Ie=["max","onChange"],Ae=(0,f.forwardRef)((function(e,n){var t,a=e.max,s=e.onChange,o=(0,y.Z)(e,Ie),c=(0,f.useState)(""),l=(0,u.Z)(c,2),p=l[0],v=l[1],h=(0,f.useState)(null),m=(0,u.Z)(h,2),x=m[0],g=m[1],k=(0,f.useRef)(n),j=(0,f.useCallback)((function(e){var n=function(e){r&&(clearTimeout(r),r=void 0),v(e),r=setTimeout((function(){return v("")}),500)};return/^\d*(\.\d*)?$/.test(e)?a&&parseFloat(e)>parseFloat(a)?n("Not enough balance"):s(e):n("Invalid character")}),[a,s]);return null===k||void 0===k||null===(t=k.current)||void 0===t||t.setSelectionRange(x,x),(0,b.jsx)(i.Tooltip,{title:(0,b.jsxs)(i.Space,{children:[(0,b.jsx)(w.Z,{name:"warning"}),p]}),visible:!!p,children:(0,b.jsx)(i.Input,(0,d.Z)((0,d.Z)({},o),{},{onChange:function(e){g(e.target.selectionStart),j(e.target.value||"")},ref:k}))})})),Te={accountAddress:"",poolAddresses:[]},Se=function(e){var n=(0,s.useWallet)().wallet,t=(0,s.useMint)().tokenProvider,r=(0,s.usePool)().pools,a=(0,f.useState)(Te),i=(0,u.Z)(a,2),c=i[0],d=i[1],p=(0,f.useCallback)((0,o.Z)(l().mark((function a(){var s,i,o,u;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(_.account.isAddress(e)){a.next=2;break}return a.abrupt("return",d(Te));case 2:return a.next=4,t.findByAddress(e);case 4:return s=a.sent,i=window.sentre.splt,a.next=8,i.deriveAssociatedAddress(n.address,e);case 8:o=a.sent,u=Object.keys(r).filter((function(n){var t=r[n];return[t.mint_a,t.mint_b].includes(e)})),d({accountAddress:o,mintInfo:s,poolAddress:"",poolAddresses:u});case 11:case"end":return a.stop()}}),a)}))),[e,r,t,n.address]);return(0,f.useEffect)((function(){p()}),[p]),c},Re=function(e){var n=(0,f.useState)(0),t=(0,u.Z)(n,2),r=t[0],a=t[1],i=(0,s.useMint)(),c=i.tokenProvider,d=i.getMint,p=(0,f.useCallback)((0,o.Z)(l().mark((function n(){var t,r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",a(0));case 2:return n.next=4,c.findByAddress(e);case 4:if(!(t=n.sent)){n.next=7;break}return n.abrupt("return",a(t.decimals));case 7:return n.prev=7,n.next=10,d({address:e});case 10:return r=n.sent,n.abrupt("return",a(r[e].decimals));case 14:n.prev=14,n.t0=n.catch(7);case 16:return n.abrupt("return",a(0));case 17:case"end":return n.stop()}}),n,null,[[7,14]])}))),[d,e,c]);return(0,f.useEffect)((function(){p()}),[p]),r},De=function(e){var n=(0,s.useAccount)().accounts,t=(0,s.useWallet)().wallet,r=(0,f.useMemo)((function(){return e===t.address?{amount:t.lamports,mint:"11111111111111111111111111111111"}:n[e]||{}}),[e,n,t.address,t.lamports]),a=r.amount,i=r.mint,o=Re(i);return(0,f.useMemo)((function(){return{balance:_.utils.undecimalize(a,o),mint:i,amount:a,decimals:o}}),[a,o,i])},Pe=t(63805);var Me={appId:"sen_swap",url:"https://descartesnetwork.github.io/sen-swap/index.js",senhub:"senhub@https://descartesnetwork.github.io/senhub/index.js"},ze={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}},Be={devnet:{bidDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ"},testnet:{bidDefault:"",askDefault:""},mainnet:{bidDefault:"",askDefault:""}},Ee={manifest:{development:(0,d.Z)({},Me),staging:(0,d.Z)({},Me),production:(0,d.Z)({},Me)}[Pe.OB],sol:ze[Pe.ef],swap:Be[Pe.ef]},Oe="#F9575E",Ne=function(){var e,n,t,r=(0,a.useDispatch)(),u=(0,s.useWallet)().wallet,c=u.address,p=u.lamports,v=(0,a.useSelector)((function(e){return e.bid})),h=De(v.accountAddress),m=h.balance,g=h.decimals,y=h.mint,k=h.amount,j=ve(null===(e=v.mintInfo)||void 0===e?void 0:e.address),Z=Se(Ee.swap.bidDefault);(0,f.useEffect)((function(){r(Ze(Z))}),[r,Z]);var I=(0,f.useMemo)((function(){return{mintInfo:v.mintInfo,poolAddresses:v.poolAddresses}}),[v]),A=(0,f.useMemo)((function(){if(y!==_.DEFAULT_WSOL)return m;var e=_.utils.decimalize(.01,g),n=p+k-e;return n<=k?_.utils.undecimalize(k,g):_.utils.undecimalize(n,g)}),[k,m,g,p,y]),T=(0,f.useCallback)((function(e){return r(Ze({amount:e,prioritized:!0}))}),[r]),S=function(){var e=(0,o.Z)(l().mark((function e(n){var t,a,s,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.sentre.splt,a=n.mintInfo||{},s=a.address,_.account.isAddress(s)){e.next=4;break}return e.abrupt("return",r(Ze((0,d.Z)({},n))));case 4:return e.next=6,t.deriveAssociatedAddress(c,s);case 6:return i=e.sent,e.abrupt("return",r(Ze((0,d.Z)({accountAddress:i},n))));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),R=j.price*Number(v.amount);return(0,b.jsxs)(i.Row,{gutter:[8,8],children:[(0,b.jsx)(i.Col,{flex:"auto",children:(0,b.jsx)(i.Typography.Text,{children:"From"})}),(0,b.jsx)(i.Col,{children:(0,b.jsxs)(i.Space,{size:4,children:[(0,b.jsx)(i.Typography.Text,{type:"secondary",children:"Supported"}),(0,b.jsx)(i.Tag,{style:{margin:0,borderRadius:4,color:(0,C.p)(Oe)},color:(0,C.p)(Oe,.2),children:"Wormhole Bridge"})]})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(Ae,{placeholder:"0",value:v.amount,onChange:T,size:"large",prefix:(0,b.jsx)(we,{value:I,onChange:S}),suffix:(0,b.jsx)(i.Button,{type:"text",size:"small",style:{fontSize:12,marginRight:-7},onClick:function(){return T(m)},children:"MAX"}),max:A})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsxs)(i.Row,{gutter:[4,4],style:{fontSize:12,marginLeft:2},children:[(0,b.jsx)(i.Col,{flex:"auto",children:j.price?(0,b.jsx)(i.Tooltip,{title:"The estimation is based on CoinGecko API.",children:(0,b.jsxs)(i.Space,{size:4,children:[(0,b.jsx)(w.Z,{name:"information-circle-outline"}),(0,b.jsxs)(i.Typography.Text,{type:"secondary",children:[(0,x.uR)(v.amount).format("0,0.[0000]")," ",(null===(n=I.mintInfo)||void 0===n?void 0:n.symbol)||"TOKEN"," ~ $",(0,x.uR)(R).format("0,0.[00]a")]})]})}):null}),(0,b.jsx)(i.Col,{children:(0,b.jsxs)(i.Typography.Text,{type:"secondary",children:["Available: ",(0,x.uR)(A||0).format("0,0.[00]")," ",(null===(t=I.mintInfo)||void 0===t?void 0:t.symbol)||"TOKEN"]})})]})})]})},Le=["prioritized","reset"],We=(0,ke.createAsyncThunk)("".concat("ask","/updateAskData"),function(){var e=(0,o.Z)(l().mark((function e(n,t){var r,a,s,i,o,u,c,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.prioritized,a=n.reset,s=(0,y.Z)(n,Le),i=t.getState,o=i(),u=o.bid.priority,c=o.ask.priority,f=a?0:r?u+1:c,e.abrupt("return",(0,d.Z)((0,d.Z)({},s),{},{priority:f}));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),_e=(0,ke.createSlice)({name:"ask",initialState:{amount:"",accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:function(e){e.addCase(We.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}}).reducer,Fe=function(){var e,n,t,r=(0,a.useDispatch)(),u=(0,s.useWallet)().wallet,c=(0,a.useSelector)((function(e){return e.ask})),p=De(c.accountAddress).balance,v=ve(null===(e=c.mintInfo)||void 0===e?void 0:e.address),h=Se(Ee.swap.askDefault);(0,f.useEffect)((function(){r(We(h))}),[r,h]);var m=(0,f.useMemo)((function(){return{mintInfo:c.mintInfo,poolAddresses:c.poolAddresses}}),[c]),g=function(){var e=(0,o.Z)(l().mark((function e(n){var t,a,s,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.sentre.splt,a=n.mintInfo||{},s=a.address,_.account.isAddress(s)){e.next=4;break}return e.abrupt("return",r(We((0,d.Z)({},n))));case 4:return e.next=6,t.deriveAssociatedAddress(u.address,s);case 6:i=e.sent,r(We((0,d.Z)({accountAddress:i},n)));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=v.price*Number(c.amount);return(0,b.jsxs)(i.Row,{gutter:[8,8],children:[(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(i.Typography.Text,{children:"To"})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(Ae,{placeholder:"0",value:c.amount,onChange:function(e){return r(We({amount:e,prioritized:!0}))},size:"large",prefix:(0,b.jsx)(we,{value:m,onChange:g})})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsxs)(i.Row,{gutter:[4,4],style:{fontSize:12,marginLeft:2},children:[(0,b.jsx)(i.Col,{flex:"auto",children:v.price?(0,b.jsx)(i.Tooltip,{title:"The estimation is based on CoinGecko API.",children:(0,b.jsxs)(i.Space,{size:4,children:[(0,b.jsx)(w.Z,{name:"information-circle-outline"}),(0,b.jsxs)(i.Typography.Text,{type:"secondary",children:[(0,x.uR)(c.amount).format("0,0.[0000]")," ",(null===(n=m.mintInfo)||void 0===n?void 0:n.symbol)||"TOKEN"," ~ $",(0,x.uR)(y).format("0,0.[0]a")]})]})}):null}),(0,b.jsx)(i.Col,{children:(0,b.jsxs)(i.Typography.Text,{type:"secondary",children:["Available: ",(0,x.uR)(p||0).format("0,0.[00]")," ",(null===(t=m.mintInfo)||void 0===t?void 0:t.symbol)||"TOKEN"]})})]})})]})};var Ue,qe=t.p+"static/media/sen.f2d012c907167ba613b035621b6423cb.svg",Ye=function(e){var n=e.spacing,t=void 0===n?4:n,r=e.iconSize,a=void 0===r?20:r;return(0,b.jsxs)(i.Space,{size:t,children:[(0,b.jsx)(i.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:"Powered by"}),(0,b.jsx)(i.Avatar,{src:qe,size:a})]})},Ge=function(e){var n=e.label,t=e.value,r=e.onClick,a=e.active,s=void 0!==a&&a;return(0,b.jsx)(i.Typography.Text,{style:{cursor:"pointer",color:s?"#F9575E":"inherit"},onClick:function(){return r(t)},children:n})},Ke=function(e){var n=e.value,t=e.onChange;return(0,b.jsxs)(i.Row,{gutter:[8,8],children:[(0,b.jsx)(i.Col,{span:24,children:(0,b.jsxs)(i.Row,{gutter:[8,8],wrap:!1,children:[(0,b.jsx)(i.Col,{flex:"auto",children:(0,b.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Slippage Tolerance"})}),(0,b.jsx)(i.Col,{children:(0,b.jsx)(i.Tooltip,{placement:"right",title:(0,b.jsxs)("span",{children:["Your transaction will be canceled if the confirmed price breaks the limited range of"," ",(0,b.jsx)("strong",{style:{color:"#f9575e"},children:"".concat(100*n,"%.")})]}),children:(0,b.jsx)(i.Button,{type:"text",shape:"circle",size:"small",icon:(0,b.jsx)(w.Z,{name:"information-circle-outline"})})})})]})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(i.Row,{gutter:[8,8],wrap:!1,justify:"space-between",children:[.001,.005,.01,.05,1].map((function(e,r){return(0,b.jsx)(i.Col,{children:(0,b.jsx)(Ge,{label:1===e?"Freely":"".concat(100*e,"%"),value:e,onClick:t,active:e===n})},r)}))})})]})},Qe="settings",Ve=(0,ke.createAsyncThunk)("".concat(Qe,"/updateSettings"),function(){var e=(0,o.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.Z)({},n));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),He=(0,ke.createSlice)({name:Qe,initialState:{slippage:.01},reducers:{},extraReducers:function(e){e.addCase(Ve.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}}).reducer,Je=function(){var e=(0,a.useDispatch)(),n=(0,a.useSelector)((function(e){return e.settings}));return(0,b.jsx)(i.Popover,{placement:"bottomRight",overlayInnerStyle:{width:300},content:(0,b.jsxs)(i.Row,{gutter:[8,8],children:[(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(i.Typography.Title,{level:5,children:"Settings"})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(Ke,{value:n.slippage,onChange:function(t){return e(Ve((0,d.Z)((0,d.Z)({},n),{},{slippage:t})))}})})]}),trigger:"click",children:(0,b.jsx)(i.Button,{type:"text",shape:"circle",size:"small",icon:(0,b.jsx)(w.Z,{name:"settings-outline"})})})},Xe=function(){return(0,b.jsxs)(i.Row,{gutter:[4,4],justify:"end",align:"middle",children:[(0,b.jsx)(i.Col,{children:(0,b.jsx)(Ye,{})}),(0,b.jsx)(i.Col,{children:(0,b.jsx)(i.Divider,{type:"vertical",style:{padding:0}})}),(0,b.jsx)(i.Col,{children:(0,b.jsx)(Je,{})})]})},$e="route",en={route:{amount:"",amounts:[],hops:[]}},nn=(0,ke.createAsyncThunk)("".concat($e,"/updateRouteInfo"),function(){var e=(0,o.Z)(l().mark((function e(n,t){var r,a,s,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.route,a=t.getState,s=a(),i=s.route,r){e.next=5;break}return e.abrupt("return",{route:i});case 5:return e.abrupt("return",{route:r});case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),tn=(0,ke.createSlice)({name:$e,initialState:en,reducers:{},extraReducers:function(e){e.addCase(nn.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}}).reducer,rn=["amount","priority"],an=["amount","priority"],sn=function(){var e=(0,a.useDispatch)(),n=(0,f.useState)(new Q),t=(0,u.Z)(n,2),r=t[0],c=t[1],p=(0,a.useSelector)((function(e){return e.bid})),v=(0,a.useSelector)((function(e){return e.ask})),h=(0,s.usePool)().pools,m=(0,f.useCallback)((0,o.Z)(l().mark((function n(){var t,r,a,s,i,o,u,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=p.amount,r=p.priority,a=(0,y.Z)(p,rn),s=v.amount,i=v.priority,o=(0,y.Z)(v,an),u=r>i?t:s,c=r>i?We:Ze,n.next=6,e(Ze((0,d.Z)((0,d.Z)({},o),{},{amount:"",reset:!0})));case 6:return n.next=8,e(We((0,d.Z)((0,d.Z)({},a),{},{amount:"",reset:!0})));case 8:return n.next=10,e(c({amount:u,prioritized:!0}));case 10:case"end":return n.stop()}}),n)}))),[e,v,p]),x=(0,f.useCallback)((0,o.Z)(l().mark((function e(){var n,t,r,a,s,i,o,u,f,m,x,b,g,y,w,k;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.poolAddresses,t=p.mintInfo,r=p.amount,a=p.priority,s=v.poolAddresses,i=v.mintInfo,o=v.amount,u=v.priority,f=(t||{}).address,m=n.map((function(e){return(0,d.Z)({address:e},h[e])})),x=(i||{}).address,b=s.map((function(e){return(0,d.Z)({address:e},h[e])})),g=new Q,(Number(r)||Number(o))&&_.account.isAddress(f)&&_.account.isAddress(x)&&m.length&&b.length&&t){e.next=9;break}return e.abrupt("return",c(g));case 9:if(y=new Array,w={mints:[f],pools:[]},k=H(h),J(y,k,f,x,w),y.length){e.next=15;break}return e.abrupt("return",c(g));case 15:if(!(u<a)){e.next=21;break}return e.next=18,$(h,y,p,v);case 18:g=e.sent,e.next=24;break;case 21:return e.next=23,ee(h,y,p,v);case 23:g=e.sent;case 24:return e.abrupt("return",c(g));case 25:case"end":return e.stop()}}),e)}))),[v,p,h]),g=(0,f.useCallback)((function(){var n=p.priority,t=v.priority;t<n&&e(We({amount:r.amount})),n<t&&e(Ze({amount:r.amount})),e(nn({route:(0,d.Z)({},r)}))}),[v.priority,r,p.priority,e]);return(0,f.useEffect)((function(){g()}),[g]),(0,f.useEffect)((function(){x()}),[x]),(0,b.jsxs)(i.Row,{gutter:[24,24],children:[(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(i.Row,{gutter:[8,8],justify:"end",align:"middle",wrap:!1,children:(0,b.jsx)(i.Col,{children:(0,b.jsx)(Xe,{})})})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(Ne,{})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(i.Row,{gutter:[8,8],justify:"center",children:(0,b.jsx)(i.Col,{children:(0,b.jsx)(i.Button,{size:"small",icon:(0,b.jsx)(w.Z,{name:"git-compare-outline"}),onClick:m})})})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(Fe,{})})]})},on=function(){return(0,b.jsxs)(i.Row,{gutter:[24,24],children:[(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(i.Card,{bordered:!1,className:"card-swap",children:(0,b.jsx)(sn,{})})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(ce,{})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(me,{})})]})},un={success:[20,224,65],pending:[212,177,6],error:[215,35,17],failed:[215,35,17]},cn=function(e){var n=e.tag,t=function(e){var t=un[n];return"rgba(".concat(t[0],",  ").concat(t[1],", ").concat(t[2],",").concat(e||1,")")};return(0,b.jsx)(i.Tag,{style:{margin:0,borderRadius:4,color:t(),textTransform:"capitalize"},color:t(.1),children:n})},ln=[{title:"TIME",dataIndex:"time"},{title:"TRANSACTION",dataIndex:"transactionId",render:function(e){return(0,b.jsxs)(i.Space,{align:"baseline",children:[(0,b.jsx)(i.Typography.Text,{onClick:function(){return window.open((0,x.kU)(e),"_blank")},style:{fontWeight:700,cursor:"pointer"},children:(0,x.Xn)(e,3,"...")}),(0,b.jsx)(i.Button,{type:"text",size:"small",onClick:function(){return window.open((0,x.kU)(e),"_blank")},icon:(0,b.jsx)(w.Z,{name:"open-outline"})})]})}},{title:"AMOUNT",dataIndex:"amount",width:400,render:function(e,n){return(0,b.jsxs)(i.Space,{size:8,children:[n.amountFrom,(0,b.jsx)(fe,{mintAddress:n.from}),(0,b.jsx)(de,{mintAddress:n.from}),(0,b.jsx)(w.Z,{name:"arrow-forward-outline"}),n.amountTo,(0,b.jsx)(fe,{mintAddress:n.to}),(0,b.jsx)(de,{mintAddress:n.to})]})}},{title:"STATUS",dataIndex:"status",width:100,render:function(e){return(0,b.jsx)(cn,{tag:"success"})}}],dn=t(43144),fn=function e(){(0,G.Z)(this,e),this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]},pn=function e(){(0,G.Z)(this,e),this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"},vn=function e(){(0,G.Z)(this,e),this.source=void 0,this.destination=void 0,this.amount="0"},hn=t(71256),mn=700,xn=function(){function e(){(0,G.Z)(this,e),this.conn=window.sentre.splt.connection}return(0,dn.Z)(e,[{key:"fetchSignatures",value:function(){var e=(0,o.Z)(l().mark((function e(n,t){var r,a,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=s.length>2&&void 0!==s[2]?s[2]:mn)>mn&&(r=mn),a={limit:r,before:t},e.abrupt("return",this.conn.getConfirmedSignaturesForAddress2(n,a));case 4:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"fetchConfirmTransaction",value:function(){var e=(0,o.Z)(l().mark((function e(n){var t,r,a,s,i,o,u,c,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],150,r=[],a=0;a<=n.length/150;a++)s=150*a,i=n.slice(s,s+150),r.push(this.conn.getParsedConfirmedTransactions(i));return e.next=6,Promise.all(r);case 6:o=e.sent,u=(0,q.Z)(o);try{for(u.s();!(c=u.n()).done;)d=c.value,t=t.concat(d)}catch(l){u.e(l)}finally{u.f()}return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=(0,o.Z)(l().mark((function e(n,t){var r,a,s,i,o,u,c,d,f,p,v,h,m,x;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(new Date).getTime()/1e3,a=t.secondFrom,s=t.secondTo,i=t.lastSignature,o=t.limit,a=Math.floor(a||0),s=Math.floor(s||r),u=new hn.PublicKey(n),c=[],d=!1;case 7:if(d){e.next=42;break}return e.next=10,this.fetchSignatures(u,i,o);case 10:if(null!==(f=e.sent)&&void 0!==f&&f.length&&!d){e.next=13;break}return e.abrupt("break",42);case 13:p=(0,q.Z)(f),e.prev=14,p.s();case 16:if((v=p.n()).done){e.next=28;break}if(h=v.value,(m=h.blockTime)&&!(m>s)){e.next=21;break}return e.abrupt("continue",26);case 21:if(!(m<a)){e.next=24;break}return d=!0,e.abrupt("break",28);case 24:i=h.signature,c.push(h.signature);case 26:e.next=16;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(14),p.e(e.t0);case 33:return e.prev=33,p.f(),e.finish(33);case 36:if(!(o&&c.length>=o)){e.next=38;break}return e.abrupt("break",42);case 38:if(!((null===f||void 0===f?void 0:f.length)<mn)){e.next=40;break}return e.abrupt("break",42);case 40:e.next=7;break;case 42:return e.next=44,this.fetchConfirmTransaction(c);case 44:return x=e.sent,e.abrupt("return",x);case 46:case"end":return e.stop()}}),e,this,[[14,30,33,36]])})));return function(n,t){return e.apply(this,arguments)}}()}]),e}();!function(e){e.Transfer="transfer"}(Ue||(Ue={}));var bn,gn=1e3;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(bn||(bn={}));var yn=function(){function e(){(0,G.Z)(this,e),this.milliSeconds=(new Date).valueOf()}return(0,dn.Z)(e,[{key:"setMilliSeconds",value:function(e){this.milliSeconds=e}},{key:"format",value:function(e){var n=new Date(this.milliSeconds);return P()(n).format(e)}},{key:"subtractDay",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=P()(this.milliSeconds).subtract(n,"days").valueOf(),r=e.fromSeconds(t/gn);return r}},{key:"addDay",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=P()(this.milliSeconds).add(n,"days").valueOf(),r=e.fromSeconds(t/gn);return r}},{key:"seconds",value:function(){return(this.milliSeconds-this.milliSeconds%gn)/gn}},{key:"ymd",value:function(){return Number(this.format(bn.YMD))}}],[{key:"fromSeconds",value:function(n){var t=new e,r=n*gn;return t.setMilliSeconds(r),t}},{key:"fromYmd",value:function(n){var t=new e,r=P()(n,bn.YMD).valueOf();return t.setMilliSeconds(r),t}},{key:"getListDate",value:function(n,t){for(var r=[],a=e.fromYmd(n),s=e.fromYmd(t);a.ymd()<=s.ymd();)r.push(a.ymd()),a=a.addDay();return r}},{key:"today",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn.YMD;return P()().format(e)}}]),e}(),wn=function(){function e(){(0,G.Z)(this,e),this.solana=void 0,this.solana=new xn}return(0,dn.Z)(e,[{key:"collect",value:function(){var e=(0,o.Z)(l().mark((function e(n,t){var r,a,s,i,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.solana.fetchTransactions(n,t);case 2:r=e.sent,a=[],s=(0,q.Z)(r);try{for(s.s();!(i=s.n()).done;)o=i.value,(u=this.parseTransLog(o))&&a.push(u)}catch(c){s.e(c)}finally{s.f()}return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"parseTransLog",value:function(e){var n,t,r=e.blockTime,a=e.meta,s=e.transaction;if(r&&a){var i=a.postTokenBalances,o=a.preTokenBalances,u=a.err,c=a.postBalances,l=a.preBalances,d=s.signatures,f=s.message;if(null===u){var p=(null===(n=a.innerInstructions)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.instructions)||[],v=f.instructions[0]||[],h=new fn;h.signature=d[0],h.blockTime=r,h.time=yn.fromSeconds(r).ymd(),h.programId=v.programId.toString();var m=this.parseAccountInfo(f.accountKeys,i||[],o||[],c,l);return this.isParsedInstruction(v)?(h.programTransfer=this.parseAction([v],m),h):(h.actionTransfers=this.parseAction(p,m),h.programInfo={programId:v.programId.toString(),data:v.data},h)}}}},{key:"isParsedInstruction",value:function(e){return void 0!==e.parsed}},{key:"parseAction",value:function(e,n){var t,r=[],a=(0,q.Z)(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(this.isParsedInstruction(s)){var i=s.parsed||{};if(i.type===Ue.Transfer){var o=i.info,u=this.parseActionTransfer(o,n);u&&r.push(u)}}}}catch(c){a.e(c)}finally{a.f()}return r}},{key:"parseActionTransfer",value:function(e,n){var t=e.source,r=e.destination,a=e.amount,s=e.lamports,i=a||s.toString();if(i&&n.has(t)&&n.has(r)){var o=new vn;return o.source=n.get(t),o.destination=n.get(r),o.amount=i,o}}},{key:"parseAccountInfo",value:function(e,n,t,r,a){var s,i=new Map,o=(0,q.Z)(n);try{for(o.s();!(s=o.n()).done;){var u=s.value,c=u.accountIndex,l=u.mint,d=u.uiTokenAmount,f=new pn;f.address=e[c].pubkey.toString(),f.postBalance=d.amount,f.mint=l,f.decimals=d.decimals,i.set(f.address,f)}}catch(y){o.e(y)}finally{o.f()}var p,v=(0,q.Z)(t);try{for(v.s();!(p=v.n()).done;){var h=p.value,m=h.accountIndex,x=h.uiTokenAmount,b=e[m].pubkey.toString(),g=i.get(b)||new pn;g.preBalance=x.amount,i.set(g.address,g)}}catch(y){v.e(y)}finally{v.f()}return e.forEach((function(e,n){var t=e.pubkey.toString();if(!_.account.isAssociatedAddress(t)){var s=i.get(t)||new pn;s.address=t,s.mint="11111111111111111111111111111111",s.postBalance=String(r[n]||0),s.preBalance=String(a[n]||0),s.decimals=9,i.set(s.address,s)}})),i}}]),e}(),kn=t(31633),jn="history",Zn=(0,ke.createAsyncThunk)("".concat(jn,"/fetchHistorySwap"),function(){var e=(0,o.Z)(l().mark((function e(n,t){var r,a,s,i,o,u,c,d,f,p,v,h,m,x,b,g,y,w,k,j;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.lastSignature,s=n.isLoadMore,i=t.getState,o=kn.Z.sol.swapAddress,u=i(),c=u.history.historySwap,e.next=6,null===(r=window.sentre.wallet)||void 0===r?void 0:r.getAddress();case 6:if(d=e.sent){e.next=9;break}throw Error("Loggin first");case 9:return f={limit:20,lastSignature:a},p=new wn,e.next=13,p.collect(d,f);case 13:v=e.sent,h=[],s&&(h=(0,Y.Z)(c)),m=(0,q.Z)(v),e.prev=17,m.s();case 19:if((x=m.n()).done){e.next=41;break}if(b=x.value,g={},y=b.actionTransfers,w=y[0],k=y.at(-1),b.programId===o){e.next=28;break}return e.abrupt("continue",39);case 28:if(w.destination&&null!==k&&void 0!==k&&k.destination){e.next=30;break}return e.abrupt("continue",39);case 30:j=new Date(1e3*b.blockTime),g.time=P()(j).format("DD MMM, YYYY hh:mm"),g.amountFrom=Number(_.utils.undecimalize(BigInt(w.amount),w.destination.decimals)),g.amountTo=Number(_.utils.undecimalize(BigInt(k.amount),k.destination.decimals)),g.from=w.destination.mint,g.to=k.destination.mint,g.transactionId=b.signature,g.key=b.signature,h.push(g);case 39:e.next=19;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(17),m.e(e.t0);case 46:return e.prev=46,m.f(),e.finish(46);case 49:return e.abrupt("return",{historySwap:h});case 50:case"end":return e.stop()}}),e,null,[[17,43,46,49]])})));return function(n,t){return e.apply(this,arguments)}}()),Cn=(0,ke.createSlice)({name:jn,initialState:{historySwap:[]},reducers:{},extraReducers:function(e){e.addCase(Zn.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}}).reducer,In=function(){var e=(0,f.useState)(5),n=(0,u.Z)(e,2),t=n[0],r=n[1],s=(0,f.useState)(!1),c=(0,u.Z)(s,2),d=c[0],p=c[1],v=(0,a.useSelector)((function(e){return e.history})).historySwap,h=(0,a.useDispatch)(),m=(0,f.useCallback)((0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,h(Zn({})).unwrap();case 3:p(!1);case 4:case"end":return e.stop()}}),e)}))),[h]);(0,f.useEffect)((function(){return m(),function(){return p(!1)}}),[m]);return(0,b.jsx)(i.Card,{bordered:!1,style:{height:472},children:(0,b.jsxs)(i.Row,{gutter:[16,24],children:[(0,b.jsx)(i.Col,{flex:"auto",children:(0,b.jsx)(i.Typography.Title,{level:5,children:"Swap history"})}),(0,b.jsx)(i.Col,{children:(0,b.jsx)(i.Button,{onClick:function(){m(),r(5)},children:"Refresh"})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsxs)(i.Row,{justify:"center",gutter:[16,9],children:[(0,b.jsx)(i.Col,{span:24,style:{height:336},children:(0,b.jsx)(i.Table,{columns:ln,dataSource:v.slice(0,t),loading:d,pagination:!1,rowClassName:function(e,n){return n%2?"odd-row":"even-row"},scroll:{x:800,y:280}})}),(0,b.jsx)(i.Col,{children:(0,b.jsx)(i.Button,{onClick:function(){var e=v.slice(0,t).length;if(v.length-e<=10){var n,a=null===(n=v.at(-1))||void 0===n?void 0:n.transactionId;h(Zn({lastSignature:a,isLoadMore:!0}))}r(t+5)},type:"text",icon:(0,b.jsx)(w.Z,{name:"chevron-down-outline"}),disabled:t>=v.length,children:"View more"})})]})})]})})},An=function(){return(0,b.jsxs)(i.Row,{gutter:[24,24],children:[(0,b.jsx)(i.Col,{lg:8,md:12,xs:24,children:(0,b.jsx)(on,{})}),(0,b.jsx)(i.Col,{lg:16,md:12,xs:24,children:(0,b.jsxs)(i.Row,{gutter:[24,24],children:[(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(W,{})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(In,{})})]})})]})},Tn=function(){var e,n,t,r,s=(0,a.useSelector)((function(e){return e.bid})),o=(0,a.useSelector)((function(e){return e.ask}));return(0,b.jsxs)(i.Row,{gutter:[16,24],children:[(0,b.jsx)(i.Col,{span:24,children:(0,b.jsxs)(i.Row,{align:"middle",justify:"space-between",children:[(0,b.jsx)(i.Col,{children:(0,b.jsxs)(i.Space,{direction:"vertical",children:[(0,b.jsx)(i.Typography.Text,{children:"From"}),(0,b.jsx)(i.Typography.Text,{children:(0,b.jsxs)(i.Space,{children:[(0,b.jsx)(i.Avatar,{src:null===(e=s.mintInfo)||void 0===e?void 0:e.logoURI}),null===(n=s.mintInfo)||void 0===n?void 0:n.symbol]})}),(0,b.jsx)(i.Typography.Title,{level:4,children:s.amount})]})}),(0,b.jsx)(i.Col,{children:(0,b.jsx)(w.Z,{name:"arrow-forward-outline",style:{fontSize:24}})}),(0,b.jsx)(i.Col,{children:(0,b.jsxs)(i.Space,{direction:"vertical",children:[(0,b.jsx)(i.Typography.Text,{children:"To"}),(0,b.jsxs)(i.Space,{children:[(0,b.jsx)(i.Avatar,{src:null===(t=o.mintInfo)||void 0===t?void 0:t.logoURI}),null===(r=o.mintInfo)||void 0===r?void 0:r.symbol]}),(0,b.jsx)(i.Typography.Title,{level:4,children:o.amount})]})})]})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(i.Divider,{style:{margin:0}})}),(0,b.jsx)(i.Col,{children:(0,b.jsx)(ue,{})})]})},Sn=function(){var e=(0,f.useState)(!1),n=(0,u.Z)(e,2),t=n[0],r=n[1],o=(0,a.useSelector)((function(e){return e.route})).route,c=(0,a.useSelector)((function(e){return e.bid})),l=(0,a.useSelector)((function(e){return e.ask})),d=(0,s.useAccount)().accounts,p=(0,f.useMemo)((function(){var e=c.mintInfo,n=d[c.accountAddress],t=(null===n||void 0===n?void 0:n.amount)||BigInt(0);if(!e||!Number(c.amount))return BigInt(0);if(e.address!==_.DEFAULT_WSOL)return BigInt(0);var r=_.utils.decimalize(c.amount,e.decimals);return r<=t?BigInt(0):r-t}),[d,c.accountAddress,c.amount,c.mintInfo]),v=!(null!==o&&void 0!==o&&o.hops.length)||!parseFloat(c.amount)||parseFloat(c.amount)<0||!parseFloat(null===l||void 0===l?void 0:l.amount)||parseFloat(null===l||void 0===l?void 0:l.amount)<0;return(0,b.jsxs)(i.Row,{gutter:[24,24],style:{padding:"16px 4px"},children:[(0,b.jsx)(i.Col,{span:24,children:(0,b.jsx)(sn,{})}),(0,b.jsx)(i.Col,{span:24,children:(0,b.jsxs)(i.Row,{align:"bottom",children:[(0,b.jsx)(i.Col,{flex:"auto",children:(0,b.jsx)(i.Popover,{placement:"bottomLeft",content:(0,b.jsx)(i.Row,{style:{width:307},children:(0,b.jsx)(i.Col,{children:(0,b.jsx)(ue,{})})}),trigger:"click",children:(0,b.jsxs)(i.Space,{style:{cursor:"pointer"},direction:"vertical",children:[(0,b.jsxs)(i.Space,{children:[(0,b.jsx)(i.Typography.Text,{children:(0,b.jsx)(w.Z,{name:"information-circle-outline",style:{color:"#7A7B85"}})}),(0,b.jsx)(i.Typography.Text,{type:"secondary",children:"Price impact"})]}),(0,b.jsxs)(i.Space,{children:[(0,b.jsx)(i.Typography.Text,{style:{color:"#D72311"},children:(0,b.jsx)(w.Z,{name:"arrow-down-outline"})}),(0,b.jsx)(i.Typography.Text,{style:{color:"#D72311"},children:"1.4%"})]})]})})}),(0,b.jsx)(i.Col,{children:(0,b.jsx)(i.Button,{onClick:function(){return r(!0)},size:"large",block:!0,type:"primary",disabled:v,children:"Review & Swap"})})]})}),(0,b.jsx)(i.Modal,{title:(0,b.jsx)(i.Typography.Title,{level:4,children:" Confirm swap"}),onCancel:function(){return r(!1)},footer:(0,b.jsx)(U,{hops:(null===o||void 0===o?void 0:o.hops)||[],wrapAmount:p,disabled:v,onCallback:function(){return r(!1)}}),visible:t,children:(0,b.jsx)(Tn,{})})]})},Rn=t(85912),Dn=(0,ke.configureStore)({middleware:function(e){return e(Rn.h)},devTools:(0,Rn.$)("myapp"),reducer:{ask:_e,bid:Ce,settings:He,route:tn,history:Cn}}),Pn=Ee.manifest.appId,Mn=function(){return(0,b.jsx)(s.UIProvider,{appId:Pn,children:(0,b.jsx)(s.MintProvider,{children:(0,b.jsx)(s.PoolProvider,{children:(0,b.jsx)(s.AccountProvider,{children:(0,b.jsx)(s.WalletProvider,{children:(0,b.jsx)(a.Provider,{store:Dn,children:(0,b.jsx)(An,{})})})})})})})},zn={size:"small",type:"solid"},Bn=function(){return(0,b.jsx)(s.UIProvider,{appId:Pn,children:(0,b.jsx)(s.MintProvider,{children:(0,b.jsx)(s.PoolProvider,{children:(0,b.jsx)(s.AccountProvider,{children:(0,b.jsx)(s.WalletProvider,{children:(0,b.jsx)(a.Provider,{store:Dn,children:(0,b.jsx)(Sn,{})})})})})})})}},31633:function(e,n,t){var r=t(63805),a=t(77566),s=t(77330),i={sol:a.Z[r.ef],register:s.Z[r.OB]};n.Z=i},65090:function(e,n,t){var r=t(4942),a=t(15861),s=t(87757),i=t.n(s),o=t(19289),u=t(95418),c="accounts",l=(0,o.createAsyncThunk)("".concat(c,"/getAccounts"),function(){var e=(0,a.Z)(i().mark((function e(n){var t,r,a,s,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.owner,u.account.isAddress(t)){e.next=3;break}throw new Error("Invalid owner/wallet address");case 3:return r=window.sentre.splt,a=u.account.fromAddress(t),e.next=7,r.connection.getTokenAccountsByOwner(a,{programId:r.spltProgramId});case 7:return s=e.sent,o=s.value,c={},o.forEach((function(e){var n=e.pubkey,t=e.account.data,a=n.toBase58(),s=r.parseAccountData(t);return c[a]=s})),e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),d=(0,o.createAsyncThunk)("".concat(c,"/getAccount"),function(){var e=(0,a.Z)(i().mark((function e(n,t){var a,s,o,c,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.address,s=t.getState,u.account.isAddress(a)){e.next=4;break}throw new Error("Invalid account address");case 4:if(o=s(),!(c=o.accounts[a])){e.next=7;break}return e.abrupt("return",(0,r.Z)({},a,c));case 7:return l=window.sentre.splt,e.next=10,l.getAccountData(a);case 10:return d=e.sent,e.abrupt("return",(0,r.Z)({},a,d));case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),f=(0,o.createAsyncThunk)("".concat(c,"/upsetAccount"),function(){var e=(0,a.Z)(i().mark((function e(n){var t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,a=n.data,u.account.isAddress(t)){e.next=3;break}throw new Error("Invalid address");case 3:if(a){e.next=5;break}throw new Error("Data is empty");case 5:return e.abrupt("return",(0,r.Z)({},t,a));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),p=(0,o.createAsyncThunk)("".concat(c,"/deleteAccount"),function(){var e=(0,a.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,u.account.isAddress(t)){e.next=3;break}throw new Error("Invalid address");case 3:return e.abrupt("return",{address:t});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),v=(0,o.createSlice)({name:c,initialState:{},reducers:{},extraReducers:function(e){e.addCase(l.fulfilled,(function(e,n){return n.payload})).addCase(d.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(f.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(p.fulfilled,(function(e,n){delete e[n.payload.address]}))}});n.ZP=v.reducer},87358:function(e,n,t){var r=t(19289),a=t(85912),s=t(87482),i=t(5105),o=t(58851),u=t(21028),c=t(65090),l=t(33015),d=t(92871),f=t(33361),p=(0,r.configureStore)({middleware:function(e){return e(a.h)},devTools:(0,a.$)("sentre"),reducer:{ui:s.ZP,flags:i.Z,page:o.ZP,wallet:u.ZP,accounts:c.ZP,mints:l.ZP,pools:d.ZP,search:f.ZP}});n.Z=p},33015:function(e,n,t){t.d(n,{ih:function(){return l}});var r=t(4942),a=t(15861),s=t(87757),i=t.n(s),o=t(19289),u=t(95418),c="mints",l=(0,o.createAsyncThunk)("".concat(c,"/getMint"),function(){var e=(0,a.Z)(i().mark((function e(n,t){var a,s,o,c,l,d,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.address,s=n.force,o=void 0!==s&&s,c=t.getState,u.account.isAddress(a)){e.next=4;break}throw new Error("Invalid mint address");case 4:if(o){e.next=8;break}if(l=c(),!(d=l.accounts[a])){e.next=8;break}return e.abrupt("return",(0,r.Z)({},a,d));case 8:return f=window.sentre.splt,e.next=11,f.getMintData(a);case 11:return p=e.sent,e.abrupt("return",(0,r.Z)({},a,p));case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),d=(0,o.createAsyncThunk)("".concat(c,"/upsetMint"),function(){var e=(0,a.Z)(i().mark((function e(n){var t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,a=n.data,u.account.isAddress(t)){e.next=3;break}throw new Error("Invalid address");case 3:if(a){e.next=5;break}throw new Error("Data is empty");case 5:return e.abrupt("return",(0,r.Z)({},t,a));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),f=(0,o.createAsyncThunk)("".concat(c,"/deleteMint"),function(){var e=(0,a.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,u.account.isAddress(t)){e.next=3;break}throw new Error("Invalid address");case 3:return e.abrupt("return",{address:t});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),p=(0,o.createSlice)({name:c,initialState:{},reducers:{},extraReducers:function(e){e.addCase(l.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(d.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(f.fulfilled,(function(e,n){delete e[n.payload.address]}))}});n.ZP=p.reducer},58851:function(e,n,t){var r=t(93433),a=t(1413),s=t(15861),i=t(87757),o=t.n(i),u=t(19289),c=t(95418),l=t(3007),d=t(31633).Z.register,f=d.senreg,p=d.extra,v=function(e,n){return n&&Array.isArray(n)?n.filter((function(n){return e[n]})):[]},h=function(){var e=(0,s.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(f);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),m="page",x={register:{},appIds:[],widgetIds:[]},b=(0,u.createAsyncThunk)("".concat(m,"/loadRegister"),(0,s.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return n=e.sent,e.abrupt("return",{register:(0,a.Z)((0,a.Z)({},n),p)});case 4:case"end":return e.stop()}}),e)})))),g=(0,u.createAsyncThunk)("".concat(m,"/installManifest"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var s,i,u,l,d,f,p,v,h,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.getState,i=s(),u=i.wallet.address,l=i.page,d=l.appIds,f=l.widgetIds,p=l.register,c.account.isAddress(u)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:if(!d.includes(n.appId)){e.next=6;break}throw new Error("Cannot run sandbox for an installed application.");case 6:return(v=(0,r.Z)(d)).push(n.appId),h=(0,r.Z)(f),n.supportedViews.includes("widget")&&h.push(n.appId),(m=(0,a.Z)({},p))[n.appId]=n,e.abrupt("return",{appIds:v,widgetIds:h,register:m});case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),y=(0,u.createAsyncThunk)("".concat(m,"/loadPage"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var r,a,s,i,u,d,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getState,a=r(),s=a.wallet.address,i=a.page.register,c.account.isAddress(s)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:return u=new l.Z(s).createInstance("sentre"),e.t0=v,e.t1=i,e.next=9,u.getItem("appIds");case 9:if(e.t2=e.sent,e.t2){e.next=12;break}e.t2=x.appIds;case 12:return e.t3=e.t2,d=(0,e.t0)(e.t1,e.t3),e.t4=v,e.t5=i,e.next=18,u.getItem("widgetIds");case 18:if(e.t6=e.sent,e.t6){e.next=21;break}e.t6=x.widgetIds;case 21:return e.t7=e.t6,f=(0,e.t4)(e.t5,e.t7),e.abrupt("return",{appIds:d,widgetIds:f});case 24:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),w=(0,u.createAsyncThunk)("".concat(m,"/updatePage"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var r,a,s,i,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getState,a=r(),s=a.wallet.address,i=a.page.register,c.account.isAddress(s)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:return n=v(i,n),u=new l.Z(s),e.next=8,u.createInstance("sentre").setItem("appIds",n);case 8:return e.abrupt("return",{appIds:n});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),k=(0,u.createAsyncThunk)("".concat(m,"/installApp"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var a,s,i,u,d,f,p,v,h,m,x,b;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getState,u=i(),d=u.wallet.address,f=u.page,p=f.register,v=f.appIds,h=f.widgetIds,c.account.isAddress(d)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:if(!v.includes(n)){e.next=6;break}return e.abrupt("return",{});case 6:return(m=(0,r.Z)(v)).push(n),x=null!==(a=p[n])&&void 0!==a&&null!==(s=a.supportedViews)&&void 0!==s&&s.includes("widget")?[].concat((0,r.Z)(h),[n]):(0,r.Z)(h),b=new l.Z(d),e.next=12,b.createInstance("sentre").setItem("appIds",m);case 12:return e.next=14,b.createInstance("sentre").setItem("widgetIds",x);case 14:return e.abrupt("return",{appIds:m,widgetIds:x});case 15:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),j=(0,u.createAsyncThunk)("".concat(m,"/uninstallApp"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var r,a,s,i,u,d,f,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getState,a=r(),s=a.wallet.address,i=a.page,u=i.appIds,d=i.widgetIds,c.account.isAddress(s)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:if(u.includes(n)){e.next=6;break}return e.abrupt("return",{});case 6:return f=u.filter((function(e){return e!==n})),p=d.filter((function(e){return e!==n})),v=new l.Z(s),e.next=11,v.createInstance("sentre").setItem("appIds",f);case 11:return e.next=13,v.createInstance("sentre").setItem("widgetIds",p);case 13:return e.next=15,v.dropInstance(n);case 15:return e.abrupt("return",{appIds:f,widgetIds:p});case 16:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Z=(0,u.createAsyncThunk)("".concat(m,"/updateDashboard"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var r,a,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getState,a=r(),s=a.wallet.address,c.account.isAddress(s)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:return i=new l.Z(s),e.next=7,i.createInstance("sentre").setItem("widgetIds",n);case 7:return e.abrupt("return",{widgetIds:n});case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),C=(0,u.createAsyncThunk)("".concat(m,"/addWidgets"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var a,s,i,u,d,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getState,s=a(),i=s.wallet.address,u=s.page.widgetIds,c.account.isAddress(i)){e.next=4;break}throw new Error("Wallet is not connected yet");case 4:return d=[].concat((0,r.Z)(u),(0,r.Z)(n)),f=new l.Z(i),e.next=8,f.createInstance("sentre").setItem("widgetIds",d);case 8:return e.abrupt("return",{widgetIds:d});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),I=(0,u.createAsyncThunk)("".concat(m,"/removeWidget"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var r,a,s,i,u,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getState,a=r(),s=a.wallet.address,i=a.page.widgetIds,c.account.isAddress(s)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:if(i.includes(n)){e.next=6;break}return e.abrupt("return",{});case 6:return u=i.filter((function(e){return e!==n})),d=new l.Z(s),e.next=10,d.createInstance("sentre").setItem("widgetIds",u);case 10:return e.abrupt("return",{widgetIds:u});case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),A=(0,u.createSlice)({name:m,initialState:x,reducers:{},extraReducers:function(e){e.addCase(b.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(g.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(y.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(w.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(k.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(j.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(Z.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(C.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(I.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}});n.ZP=A.reducer},92871:function(e,n,t){var r=t(4942),a=t(15861),s=t(87757),i=t.n(s),o=t(19289),u=t(95418),c=t(31633).Z.sol.taxmanAddress,l="pools",d=(0,o.createAsyncThunk)("".concat(l,"/getPools"),(0,a.Z)(i().mark((function e(){var n,t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.sentre.swap,e.next=3,n.connection.getProgramAccounts(n.swapProgramId,{filters:[{dataSize:257},{memcmp:{bytes:c,offset:65}}]});case 3:return t=e.sent,r={},t.forEach((function(e){var t=e.pubkey,a=e.account.data,s=t.toBase58(),i=n.parsePoolData(a);r[s]=i})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))),f=(0,o.createAsyncThunk)("".concat(l,"/getPool"),function(){var e=(0,a.Z)(i().mark((function e(n,t){var a,s,o,c,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.address,s=t.getState,u.account.isAddress(a)){e.next=4;break}throw new Error("Invalid pool address");case 4:if(o=s(),!(c=o.pools[a])){e.next=7;break}return e.abrupt("return",(0,r.Z)({},a,c));case 7:return l=window.sentre.swap,e.next=10,l.getPoolData(a);case 10:return d=e.sent,e.abrupt("return",(0,r.Z)({},a,d));case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),p=(0,o.createAsyncThunk)("".concat(l,"/upsetPool"),function(){var e=(0,a.Z)(i().mark((function e(n){var t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,a=n.data,u.account.isAddress(t)){e.next=3;break}throw new Error("Invalid pool address");case 3:if(a){e.next=5;break}throw new Error("Data is empty");case 5:return e.abrupt("return",(0,r.Z)({},t,a));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),v=(0,o.createSlice)({name:l,initialState:{},reducers:{},extraReducers:function(e){e.addCase(d.fulfilled,(function(e,n){return n.payload})).addCase(f.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(p.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}});n.ZP=v.reducer},33361:function(e,n,t){var r=t(15861),a=t(87757),s=t.n(a),i=t(19289),o="search",u=(0,i.createAsyncThunk)("".concat(o,"/setValue"),function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{value:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),c=(0,i.createAsyncThunk)("".concat(o,"/setLoading"),function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{loading:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l=(0,i.createAsyncThunk)("".concat(o,"/setDisabled"),function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{disabled:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),d=(0,i.createSlice)({name:o,initialState:{value:"",loading:!1,disabled:!1},reducers:{},extraReducers:function(e){e.addCase(u.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(c.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(l.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}});n.ZP=d.reducer},87482:function(e,n,t){var r=t(15861),a=t(87757),s=t.n(a),i=t(19289),o=function(){var e=window.innerWidth;return e<576?"xs":e<768?"sm":e<992?"md":e<1200?"lg":e<1400?"xl":"xxl"},u="ui",c={theme:function(){var e=(new Date).getHours();return e>=6&&e<18?"light":"dark"}(),width:window.innerWidth,infix:o(),touchable:"ontouchstart"in window||navigator.maxTouchPoints>0,visibleActionCenter:!1},l=(0,i.createAsyncThunk)("".concat(u,"/setTheme"),function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{theme:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),d=(0,i.createAsyncThunk)("".concat(u,"/resize"),(0,r.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.innerWidth,t=o(),e.abrupt("return",{width:n,infix:t});case 3:case"end":return e.stop()}}),e)})))),f=(0,i.createAsyncThunk)("".concat(u,"/setVisibleActionCenter"),function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{visibleActionCenter:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),p=(0,i.createSlice)({name:u,initialState:c,reducers:{},extraReducers:function(e){e.addCase(l.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(d.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(f.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}});n.ZP=p.reducer},21028:function(e,n,t){var r=t(15861),a=t(87757),s=t.n(a),i=t(19289),o=t(95418),u=t(31633),c=function(){var e=(0,r.Z)(s().mark((function e(n){var t,r,a,i,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.Z.sol,r=t.node,a=t.spltAddress,i=t.splataAddress,c=t.swapAddress,window.sentre={wallet:n,lamports:new o.Lamports(r),splt:new o.SPLT(a,i,r),swap:new o.Swap(c,a,i,r)};case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,r.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==(n=window.sentre)&&void 0!==n&&n.wallet&&window.sentre.wallet.disconnect(),e.next=3,c(void 0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d="wallet",f={visible:!1,address:"",lamports:BigInt(0)},p=(0,i.createAsyncThunk)("".concat(d,"/openWallet"),(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{visible:!0});case 1:case"end":return e.stop()}}),e)})))),v=(0,i.createAsyncThunk)("".concat(d,"/closeWallet"),(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{visible:!1});case 1:case"end":return e.stop()}}),e)})))),h=(0,i.createAsyncThunk)("".concat(d,"/connectWallet"),function(){var e=(0,r.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("Invalid wallet instance");case 2:return e.next=4,c(n);case 4:return e.next=6,n.getAddress();case 6:return t=e.sent,e.next=9,window.sentre.lamports.getLamports(t);case 9:return r=e.sent,e.abrupt("return",{address:t,lamports:BigInt(r),visible:!1});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),m=(0,i.createAsyncThunk)("".concat(d,"/updateWallet"),function(){var e=(0,r.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.lamports,e.abrupt("return",{lamports:t});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),x=(0,i.createAsyncThunk)("".concat(d,"/disconnectWallet"),(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))),b=(0,i.createSlice)({name:d,initialState:f,reducers:{},extraReducers:function(e){e.addCase(p.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(v.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(h.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(m.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(x.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}});n.ZP=b.reducer},21411:function(e,n,t){t.d(n,{R:function(){return d}});var r=t(15861),a=t(15671),s=t(43144),i=t(87757),o=t.n(i),u=t(15822),c=t(85964),l=t(67751),d=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,null,[{key:"getSingleFlight",value:function(e){var n=JSON.stringify(e);if(this.mapInstance.has(n)){var t=this.mapInstance.get(n);if(t)return t}var r=new f(e);return this.mapInstance.set(n,r),r}},{key:"load",value:function(){var n=(0,r.Z)(o().mark((function n(t,r){var a,s,i,u=arguments;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},"object"===typeof t&&(t=JSON.stringify(t)),s=e.getSingleFlight(a),e.mapInstance.set(t,s),i=new c.g(t),n.abrupt("return",s.load(i,r));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}]),e}();d.mapInstance=new Map;var f=function(){function e(n){(0,a.Z)(this,e),this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(u.Dt,n)}return(0,s.Z)(e,[{key:"load",value:function(){var e=(0,r.Z)(o().mark((function e(n,t){var r,a,s,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=l.U.get(n.key))){e.next=3;break}return e.abrupt("return",Promise.resolve(r));case 3:return a=!1,(s=this.mapRequestCalling.get(n.key))||(s=n,a=!0,this.mapRequestCalling.set(s.key,s)),e.abrupt("return",new Promise((function(e,n){if(!s)return n("Not found request!");s.add(e,n),a&&i.fetch(s,t)})));case 7:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(e,n){var t=this;if(!this.validateLimit())return this.addRequestQueue(e,n);this.createTimeLogs(),n().then((function(n){l.U.set(e.key,n,t.config.cache),e.resolves(n)})).catch((function(n){e.rejects(n)})).finally((function(){t.mapRequestCalling.delete(e.key),t.fetchRequestQueue(n)}))}},{key:"fetchRequestQueue",value:function(e){if(this.validateLimit()){var n=this.requestQueue.shift();n&&this.load(n,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}}},{key:"addRequestQueue",value:function(e,n){var t,r=this;this.requestQueue.push(e),this.intervalRequest=setInterval((function(){r.fetchRequestQueue(n)}),null===(t=this.config.limit)||void 0===t?void 0:t.time)}},{key:"validateLimit",value:function(){if(!this.config.limit)return!1;var e=this.timeLogs[0]||0,n=(new Date).getTime();return this.timeLogs.length<this.config.limit.calls||n-e>this.config.limit.time}},{key:"createTimeLogs",value:function(){var e;if(this.config.limit){var n=(new Date).getTime();this.timeLogs.push(n),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}}]),e}()},63805:function(e,n,t){t.d(n,{OB:function(){return a},ef:function(){return s}});var r=t(53933),a="production",s=function(){switch(r.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}}()},34559:function(e,n,t){t.d(n,{sA:function(){return o},Xn:function(){return u},kU:function(){return c},uR:function(){return l}});var r=t(95418),a=t(16200),s=t.n(a),i=t(63805),o=function(e){return new Promise((function(n){return setTimeout(n,e)}))},u=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.substring(0,n)+t+e.substring(e.length-n,e.length)},c=function(e){return r.account.isAddress(e)?"https://explorer.solana.com/address/".concat(e,"?cluster=").concat(i.ef):"https://explorer.solana.com/tx/".concat(e,"?cluster=").concat(i.ef)},l=function(e){return e?s()(e):s()("0")}}}]);
//# sourceMappingURL=722.1b63fd60.chunk.js.map