"use strict";(self.webpackChunksenswap=self.webpackChunksenswap||[]).push([[89],{44193:function(e,n,t){t.r(n),t.d(n,{Page:function(){return ln},Widget:function(){return fn},widgetConfig:function(){return pn}});var r,a=t(55754),s=t(49142),i=t(78589),o=t(1413),c=t(29439),u=t(92950),d=t(76907),l=t.n(d),p=t(21111),f=t.n(p),h=t(34559),v=t(45263),x=function(e){var n=e.chartData,t=void 0===n?[]:n,r=e.labels,a=void 0===r?[]:r,s=e.type,i=void 0===s?"line":s,d=e.configs,p=e.disableAxe,x=void 0!==p&&p,m=e.chartId,g=void 0===m?"sen_chart":m,w=(d||{}).backgroundColor,y=(0,u.useState)(!1),b=(0,c.Z)(y,2),j=b[0],k=b[1],C=(0,u.useCallback)((function(e,n,t){return{labels:n,datasets:[(0,o.Z)((0,o.Z)({},d),{},{data:e,backgroundColor:t})]}}),[d]),Z=(0,u.useRef)(null),A=(0,u.useCallback)((function(){var e,n;if(!Z||!w)return"#dadada";var t=null===Z||void 0===Z||null===(e=Z.current)||void 0===e||null===(n=e.canvas)||void 0===n?void 0:n.getContext("2d"),r=null===t||void 0===t?void 0:t.createLinearGradient(0,0,0,180);return null===r||void 0===r||r.addColorStop(0,w),null===r||void 0===r||r.addColorStop(1,"".concat(w,"00")),"line"===i?r:w}),[w,i]);return(0,u.useEffect)((function(){var e,n=Z.current,r=null===n||void 0===n||null===(e=n.data.datasets)||void 0===e?void 0:e.find((function(e){return e.data})),s=f()(null===r||void 0===r?void 0:r.data,t);n&&!s&&(n.data=C(t,a,A()),null===n||void 0===n||n.update())}),[t,C,A,a]),(0,v.jsx)("canvas",{id:g,height:"180px",ref:function(e){if(e){var n=e.getContext("2d");n&&!j&&(Z.current=new(l())(n,{type:i,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!x}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!x,beginAtZero:!0,maxTicksLimit:8,callback:function(e,n,t){return(0,h.uR)(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:function(e,n){var t=document.getElementById(g);t&&(t.style.cursor=n[0]?"pointer":"default")}}}}),k(!0))}}})},m=t(45987),g=t(65191),w=["icons","defaultIcon"],y=function(e){var n=e.icons,t=void 0===n?[]:n,r=e.defaultIcon,a=void 0===r?(0,v.jsx)(g.Z,{name:"help-outline"}):r,s=(0,m.Z)(e,w);return(0,v.jsx)(i.Avatar.Group,{children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,v.jsx)(i.Avatar,(0,o.Z)((0,o.Z)({src:e,style:{backgroundColor:"#2D3355",border:"none"}},s),{},{children:a}),n)}))})},b="#5D6CCF",j=0,k=14,C="TVL",Z="transparent",A="UNKN",I=function(){var e,n,t,r,s={borderColor:Z,borderRadius:j,pointRadius:j,tooltip:C,pointHitRadius:k,pointHoverRadius:j,backgroundColor:b},o=(0,a.useSelector)((function(e){return e.bid})),c=(0,a.useSelector)((function(e){return e.ask})),d=(0,u.useMemo)((function(){var e,n;return[null===(e=o.mintInfo)||void 0===e?void 0:e.logoURI,null===(n=c.mintInfo)||void 0===n?void 0:n.logoURI]}),[null===(e=c.mintInfo)||void 0===e?void 0:e.logoURI,null===(n=o.mintInfo)||void 0===n?void 0:n.logoURI]),l=(0,u.useMemo)((function(){var e,n;return[(null===(e=o.mintInfo)||void 0===e?void 0:e.symbol)||A,(null===(n=c.mintInfo)||void 0===n?void 0:n.symbol)||A]}),[null===(t=c.mintInfo)||void 0===t?void 0:t.symbol,null===(r=o.mintInfo)||void 0===r?void 0:r.symbol]);return(0,v.jsx)(i.Card,{bordered:!1,className:"card-swap",bodyStyle:{paddingTop:28},children:(0,v.jsxs)(i.Row,{gutter:[24,24],children:[(0,v.jsx)(i.Col,{flex:"auto",children:(0,v.jsxs)(i.Space,{direction:"vertical",size:20,children:[(0,v.jsxs)(i.Space,{size:4,align:"baseline",children:[(0,v.jsx)(y,{icons:d,size:24}),(0,v.jsx)(i.Typography.Text,{children:l.join("/")})]}),(0,v.jsx)(i.Typography.Title,{level:2,children:"0.24 "})]})}),(0,v.jsx)(i.Col,{children:(0,v.jsxs)(i.Radio.Group,{defaultValue:"week",children:[(0,v.jsx)(i.Radio.Button,{value:"day",children:"Day"}),(0,v.jsx)(i.Radio.Button,{value:"week",children:"Week"}),(0,v.jsx)(i.Radio.Button,{value:"month",children:"Month"}),(0,v.jsx)(i.Radio.Button,{value:"year",children:"Year"})]})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(x,{chartData:[12,123,141,2,512,12,113],labels:["01/12","02/12","03/12","04/12","05/12"],configs:s})})]})})},T=t(95418),S=t(15861),R=t(87757),P=t.n(R),z=BigInt(1e9),O=function(e){var n=e.hops,t=e.onCallback,r=void 0===t?function(){}:t,o=e.disabled,d=void 0!==o&&o,l=e.wrapAmount,p=void 0===l?BigInt(0):l,f=(0,u.useState)(!1),x=(0,c.Z)(f,2),m=x[0],g=x[1],w=(0,a.useSelector)((function(e){return e.bid})),y=(0,a.useSelector)((function(e){return e.ask})),b=(0,a.useSelector)((function(e){return e.settings})).slippage,j=(0,s.useWallet)().wallet.address,k=(0,u.useCallback)((0,S.Z)(P().mark((function e(){var t,r,a,s,i,o,c,u,d,l;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.sentre,r=t.swap,a=t.splt,s=t.wallet){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Promise.all(n.map(function(){var e=(0,S.Z)(P().mark((function e(n){var t,r,s,i,o;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.srcMintInfo.address,r=n.dstMintInfo.address,s=n.poolData.address,e.next=3,a.deriveAssociatedAddress(j,t);case 3:return i=e.sent,e.next=6,a.deriveAssociatedAddress(j,r);case 6:return o=e.sent,e.abrupt("return",{poolAddress:s,srcAddress:i,dstAddress:o});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 5:return i=e.sent,o=n[0].srcMintInfo.decimals,c=T.utils.decimalize(w.amount,o),u=n[n.length-1].dstMintInfo.decimals,d=T.utils.decimalize(y.amount,u),l=d*(z-T.utils.decimalize(b,9))/z,e.next=13,r.route(c,l,i,s);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)}))),[n,w,y,b,j]),C=function(){var e=(0,S.Z)(P().mark((function e(){var n,t,r;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:if(n=window.sentre,t=n.swap,r=n.wallet){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.wrapSol(p,r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,S.Z)(P().mark((function e(){var n,t;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,C();case 4:return e.next=6,k();case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:return n=e.t0,t=n.txId,window.notify({type:"success",description:"Swap successfully. Click to view details.",onClick:function(){return window.open((0,h.kU)(t||""),"_blank")}}),e.abrupt("return",r());case 15:return e.prev=15,e.t1=e.catch(0),e.abrupt("return",window.notify({type:"error",description:e.t1.message}));case 18:return e.prev=18,g(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,15,18,21]])})));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(i.Button,{type:"primary",onClick:Z,disabled:d,loading:m,block:!0,children:"Swap"})},E=t(37762),M=t(93433),B=t(15671),D=t(20418),N=new D.Z,L=function e(){(0,B.Z)(this,e),this.hops=[],this.amounts=[],this.amount=""},W=function(e,n){var t=n.mint_a,r=n.mint_b,a=n.reserve_a,s=n.reserve_b;if(e===t)return a;if(e===r)return s;throw new Error("Cannot find reserves")},_=function(e,n){var t=e.point,r=n.point;return t<r?1:t>r?-1:0},U=function(e){var n=new Map,t=function(t){var r=e[t];if(1!==(null===r||void 0===r?void 0:r.state))return"continue";[r.mint_a,r.mint_b].forEach((function(e){var a;n.has(e)||n.set(e,new Map),null===(a=n.get(e))||void 0===a||a.set(t,r)}))};for(var r in e)t(r);return n},F=function e(n,t,r,a,s){var i=s.pools,o=s.mints;if(3!==i.length){var c=t.get(r);null===c||void 0===c||c.forEach((function(s,c){if(!i.includes(c)){var u=s.mint_b;if(s.mint_a!==r&&(u=s.mint_a),!o.includes(u)){var d={pools:[].concat((0,M.Z)(i),[c]),mints:[].concat((0,M.Z)(o),[u])};u!==a?e(n,t,u,a,d):n.push(d)}}}))}},q=function(){var e=(0,S.Z)(P().mark((function e(n,t,r,a){var s,i,c,u,d,l,p,f,h,v,x,m,g,w,y,b;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null===(s=r.mintInfo)||void 0===s?void 0:s.address,u=null===(i=a.mintInfo)||void 0===i?void 0:i.address,T.account.isAddress(c)&&T.account.isAddress(u)){e.next=4;break}return e.abrupt("return",[]);case 4:d=[],l=c,p="",f=(0,E.Z)(t),e.prev=8,f.s();case 10:if((h=f.n()).done){e.next=30;break}if(v=h.value,x=n[v],m=x.mint_a,g=x.mint_b,l===m||l===g){e.next=16;break}return e.abrupt("return",[]);case 16:return p=l===m?g:m,e.next=19,N.findByAddress(l);case 19:return w=e.sent,e.next=22,N.findByAddress(p);case 22:if(y=e.sent,w&&y){e.next=25;break}return e.abrupt("return",[]);case 25:b={poolData:(0,o.Z)({address:v},x),srcMintInfo:w,dstMintInfo:y},l=p,d.push(b);case 28:e.next=10;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(8),f.e(e.t0);case 35:return e.prev=35,f.f(),e.finish(35);case 38:return e.abrupt("return",d);case 39:case"end":return e.stop()}}),e,null,[[8,32,35,38]])})));return function(n,t,r,a){return e.apply(this,arguments)}}(),V=function(){var e=(0,S.Z)(P().mark((function e(n,t,r,a){var s,i,o,c;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new L,i=(0,E.Z)(t),e.prev=2,c=P().mark((function e(){var t,i,c,u,d;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.value,e.next=3,q(n,t.pools,r,a);case 3:i=e.sent,c=r.amount,u=new Array,i.forEach((function(e){u.push(c),c=H(c,e)})),d=Number(s.amount),Number(c)>d&&(s={hops:i,amounts:u,amount:c});case 9:case"end":return e.stop()}}),e)})),i.s();case 5:if((o=i.n()).done){e.next=9;break}return e.delegateYield(c(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),i.e(e.t1);case 14:return e.prev=14,i.f(),e.finish(14);case 17:return e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(n,t,r,a){return e.apply(this,arguments)}}(),G=function(){var e=(0,S.Z)(P().mark((function e(n,t,r,a){var s,i,o,c,u,d,l,p,f,h,v,x;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new L,i=(0,E.Z)(t),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=37;break}return c=o.value,e.next=8,q(n,c.pools,r,a);case 8:u=e.sent,d=(0,M.Z)(u).reverse(),l=a.amount,p=new Array,f=(0,E.Z)(d),e.prev=13,f.s();case 15:if((h=f.n()).done){e.next=23;break}if(v=h.value,l=K(l,v),!(Number(l)<0)){e.next=20;break}return e.abrupt("break",23);case 20:p.unshift(l);case 21:e.next=15;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(13),f.e(e.t0);case 28:return e.prev=28,f.f(),e.finish(28);case 31:if(!(Number(l)<0)){e.next=33;break}return e.abrupt("continue",35);case 33:(!(x=Number(s.amount))||Number(l)<x)&&(s={hops:u,amounts:p,amount:l});case 35:e.next=4;break;case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(2),i.e(e.t1);case 42:return e.prev=42,i.f(),e.finish(42);case 45:return e.abrupt("return",s);case 46:case"end":return e.stop()}}),e,null,[[2,39,42,45],[13,25,28,31]])})));return function(n,t,r,a){return e.apply(this,arguments)}}(),Q=T.Swap.oracle,H=function(e,n){var t=n.srcMintInfo,r=t.address,a=t.decimals,s=n.dstMintInfo,i=s.address,o=s.decimals,c=n.poolData,u=c.fee_ratio,d=c.tax_ratio,l=W(r,n.poolData),p=W(i,n.poolData);if(!l||!p)return"0";var f=Q.swap(T.utils.decimalize(e,a),l,p,u,d).askAmount;return T.utils.undecimalize(f,o)},K=function(e,n){var t=n.srcMintInfo,r=t.address,a=t.decimals,s=n.dstMintInfo,i=s.address,o=s.decimals,c=n.poolData,u=c.fee_ratio,d=c.tax_ratio,l=W(r,n.poolData),p=W(i,n.poolData),f=Q.inverseSwap(T.utils.decimalize(e,o),l,p,u,d);return T.utils.undecimalize(f,a)},J=function(e){var n=e.label,t=void 0===n?"":n,r=e.content,a=void 0===r?"":r;return(0,v.jsxs)(i.Row,{children:[(0,v.jsx)(i.Col,{flex:"auto",children:(0,v.jsx)(i.Typography.Text,{type:"secondary",children:t})}),(0,v.jsx)(i.Col,{children:(0,v.jsx)("span",{children:a})})]})},$=function(e){var n=e.icons,t=void 0===n?["",""]:n,r=e.size,a=void 0===r?24:r,s=e.defaultIcon,o=void 0===s?(0,v.jsx)(g.Z,{size:a,name:"help-outline"}):s;return(0,v.jsx)(i.Space,{children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,v.jsxs)(u.Fragment,{children:[(0,v.jsx)(i.Avatar,{src:e,size:a,children:o}),t.length>n+1&&(0,v.jsx)(g.Z,{name:"chevron-forward-outline"})]},n)}))})},Y=function(){var e=(0,a.useSelector)((function(e){return e.route})).route,n=(0,a.useSelector)((function(e){return e.bid})),t=(0,s.useAccount)().accounts,r=n.mintInfo,o=(0,u.useMemo)((function(){var e=t[n.accountAddress],a=(null===e||void 0===e?void 0:e.amount)||BigInt(0);if(!r||!Number(n.amount))return BigInt(0);if(r.address!==T.DEFAULT_WSOL)return BigInt(0);var s=T.utils.decimalize(n.amount,r.decimals);return s<=a?BigInt(0):s-a}),[t,n.accountAddress,n.amount,r]),c=null===e||void 0===e?void 0:e.hops.at(-1),d=(null===e||void 0===e?void 0:e.amounts.at(-1))||"",l=(0,u.useMemo)((function(){return c?T.utils.undecimalize(function(e,n){var t=n.srcMintInfo,r=t.address,a=t.decimals,s=n.dstMintInfo.address,i=n.poolData,o=i.fee_ratio,c=i.tax_ratio,u=W(r,n.poolData),d=W(s,n.poolData);return Q.slippage(T.utils.decimalize(e,a),u,d,o,c)}(d,c),9):0}),[d,c]),p=(0,u.useMemo)((function(){if(null!==e&&void 0!==e&&e.hops){var n,t=[(r||{}).logoURI],a=(0,E.Z)(null===e||void 0===e?void 0:e.hops);try{for(a.s();!(n=a.n()).done;){var s=n.value.dstMintInfo.logoURI;s&&t.push(s)}}catch(i){a.e(i)}finally{a.f()}return t}}),[r,null===e||void 0===e?void 0:e.hops]);return console.log(e,o,null===e||void 0===e?void 0:e.hops.at(-1),"route"),(0,v.jsxs)(i.Row,{gutter:[12,12],children:[(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(J,{label:"Price impart",content:"".concat((0,h.uR)(100*Number(l)).format("0.[0000]"),"%")})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(J,{label:"Price",content:"0 SOL = 0 ETH"})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(J,{label:"Inverse price",content:"0 SOL = 0 ETH"})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(J,{label:"Slippage toleance",content:" 0.5%"})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(J,{label:"Protocol Fee",content:"0.25%"})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(J,{label:"Route",content:(0,v.jsx)($,{icons:p})})})]})},X=function(){var e=(0,a.useSelector)((function(e){return e.route})).route,n=(0,a.useSelector)((function(e){return e.bid})),t=(0,a.useSelector)((function(e){return e.ask})),r=(0,s.useAccount)().accounts,o=(0,u.useMemo)((function(){var e=n.mintInfo,t=r[n.accountAddress],a=(null===t||void 0===t?void 0:t.amount)||BigInt(0);if(!e||!Number(n.amount))return BigInt(0);if(e.address!==T.DEFAULT_WSOL)return BigInt(0);var s=T.utils.decimalize(n.amount,e.decimals);return s<=a?BigInt(0):s-a}),[r,n.accountAddress,n.amount,n.mintInfo]),c=!(null!==e&&void 0!==e&&e.hops.length)||!parseFloat(n.amount)||parseFloat(n.amount)<0||!parseFloat(null===t||void 0===t?void 0:t.amount)||parseFloat(null===t||void 0===t?void 0:t.amount)<0;return(0,v.jsx)(i.Card,{bordered:!1,children:(0,v.jsxs)(i.Row,{gutter:[24,24],children:[(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(i.Typography.Title,{level:5,children:"Review & Swap"})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(Y,{})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(O,{hops:(null===e||void 0===e?void 0:e.hops)||[],wrapAmount:o,disabled:c})})]})})},ee=t(35105),ne={address:"",chainId:0,decimals:0,name:"",symbol:"TOKEN",extensions:void 0,logoURI:"",tags:[]},te=new D.Z,re={getMintInfos:function(){var e=(0,S.Z)(P().mark((function e(n){var t,r,a;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te&&n){e.next=2;break}return e.abrupt("return");case 2:return t=n.map(function(){var e=(0,S.Z)(P().mark((function e(n){var t,r,a,s,i,o,c,u,d;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.findByAddress(n);case 2:if((t=e.sent)||(t=ne),a=(r=t).address,s=r.symbol,i=r.decimals,o=r.extensions,c=null===o||void 0===o?void 0:o.coingeckoId){e.next=8;break}return e.abrupt("return",{address:a,symbol:s,decimals:i,price:0});case 8:return e.next=10,(0,ee.l)(c);case 10:return u=e.sent,d=u.price,e.abrupt("return",{address:a,symbol:s,decimals:i,price:d});case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.next=5,Promise.all(t);case 5:return r=e.sent,a=new Map,r.forEach((function(e){a.set(e.address,e)})),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},ae=re,se=t(19289),ie=["prioritized","reset"],oe="sen-swap",ce=(0,se.createAsyncThunk)("".concat(oe,"/updateBidData"),function(){var e=(0,S.Z)(P().mark((function e(n,t){var r,a,s,i,c,u,d,l;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.prioritized,a=n.reset,s=(0,m.Z)(n,ie),i=t.getState,c=i(),u=c.bid.priority,d=c.ask.priority,Number(s.amount)<0&&(s.amount=void 0),l=a?0:r?d+1:u,e.abrupt("return",(0,o.Z)((0,o.Z)({},s),{},{priority:l}));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),ue=(0,se.createSlice)({name:oe,initialState:{amount:"",accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:function(e){e.addCase(ce.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}}).reducer,de=t(36498),le=function(e){var n=e.onChange,t=e.isSupportedMint,r=e.disabled,a=void 0!==r&&r,o=(0,u.useState)(""),d=(0,c.Z)(o,2),l=d[0],p=d[1],f=(0,s.useMint)().tokenProvider,h=(0,u.useCallback)((0,S.Z)(P().mark((function e(){var r,a;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&!(l.length<3)){e.next=2;break}return e.abrupt("return",n(null));case 2:return e.next=4,f.find(l);case 4:return r=e.sent,a=r.filter((function(e){var n=e.address;return t(n)})),e.abrupt("return",n(a));case 7:case"end":return e.stop()}}),e)}))),[l,f,n,t]);return(0,u.useEffect)((function(){h()}),[h]),(0,v.jsx)(i.Card,{className:"card-child bg-white",bodyStyle:{padding:8},bordered:!1,children:(0,v.jsx)(i.Input,{placeholder:"Search",value:l,size:"small",bordered:!1,suffix:(0,v.jsx)(i.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:l?function(){return p("")}:function(){},icon:(0,v.jsx)(g.Z,{name:l?"close-outline":"search-outline"}),disabled:a}),onChange:function(e){return p(e.target.value)},disabled:a})})},pe=function(e){var n=e.logoURI,t=e.symbol,r=e.name,a=e.onClick,s=e.advanced,o=void 0!==s&&s,c=e.onAdvanced,u=void 0===c?function(){}:c,d=e.active,l=void 0!==d&&d;return(0,v.jsx)(i.Card,{className:"card-child bg-white",bodyStyle:{padding:"8px 16px",cursor:"pointer"},bordered:l,onClick:a,hoverable:!0,children:(0,v.jsxs)(i.Row,{gutter:[16,16],wrap:!1,children:[(0,v.jsx)(i.Col,{flex:"auto",children:(0,v.jsxs)(i.Space,{size:12,style:{marginLeft:-4},children:[(0,v.jsx)(i.Avatar,{src:n,size:32,children:(0,v.jsx)(g.Z,{name:"diamond-outline"})}),(0,v.jsx)(i.Typography.Text,{style:{margin:0},children:t}),(0,v.jsx)(i.Divider,{type:"vertical",style:{margin:0}}),(0,v.jsx)(i.Typography.Text,{type:"secondary",style:{margin:0,fontSize:12},children:r})]})}),(0,v.jsx)(i.Col,{children:o?(0,v.jsx)(i.Button,{type:"text",className:"contained",icon:(0,v.jsx)(g.Z,{name:"arrow-forward-circle-outline"}),style:{marginRight:-7},onClick:function(e){return e.stopPropagation(),u()},children:"View Pools"}):null})]})})},fe=function(e){var n=e.value,t=e.onClick,r=e.active,a=void 0!==r&&r,o=(0,u.useState)(0),d=(0,c.Z)(o,2),l=d[0],p=d[1],f=(0,u.useState)([{},{},{}]),x=(0,c.Z)(f,2),m=x[0],w=x[1],y=(0,s.useMint)().tokenProvider,b=(0,u.useCallback)((0,S.Z)(P().mark((function e(){var t,r,a,s,i;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=n||{}).mint_a,a=t.mint_b,e.next=3,Promise.all([r,a].map((function(e){return T.account.isAddress(e)?y.findByAddress(e):{}})));case 3:return s=e.sent,i=s.map((function(e){return e||{}})),e.abrupt("return",w(i));case 6:case"end":return e.stop()}}),e)}))),[n,y]),j=(0,u.useCallback)((0,S.Z)(P().mark((function e(){var t,r,a,s,i,o,c,u;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=n||{}).reserve_a,a=t.reserve_b,s=[r,a],i=m.map((function(e){return e.decimals})),e.next=5,Promise.all(m.map((function(e){var n=e.extensions;return null!==n&&void 0!==n&&n.coingeckoId?(0,ee.l)(null===n||void 0===n?void 0:n.coingeckoId):{}})));case 5:return o=e.sent,c=o.map((function(e){return e.price})),u=0,[0,1,2].forEach((function(e){s[e]&&i[e]&&c[e]&&(u+=Number(T.utils.undecimalize(s[e],i[e]))*c[e])})),e.abrupt("return",p(u));case 10:case"end":return e.stop()}}),e)}))),[m,n]);return(0,u.useEffect)((function(){b()}),[b]),(0,u.useEffect)((function(){j()}),[j]),(0,v.jsx)(i.Card,{bodyStyle:{padding:"8px 12px",cursor:"pointer",lineHeight:1},bordered:a,onClick:t,hoverable:!0,children:(0,v.jsxs)(i.Space,{size:12,style:{fontSize:12},children:[(0,v.jsx)(i.Avatar.Group,{style:{marginTop:4,marginBottom:4},children:m.map((function(e,n){var t=e.address,r=e.logoURI;return(0,v.jsx)(i.Avatar,{src:r,size:32,style:{backgroundColor:"#2D3355",border:"none"},children:(0,v.jsx)(g.Z,{name:"diamond-outline"})},t+n)}))}),(0,v.jsx)(i.Typography.Text,{children:m.map((function(e){return e.symbol})).join(" \u2022 ")}),(0,v.jsx)(i.Divider,{type:"vertical",style:{margin:0}}),(0,v.jsxs)(i.Space,{size:6,children:[(0,v.jsx)(i.Tooltip,{title:"The TVL here is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,v.jsxs)(i.Space,{size:4,children:[(0,v.jsx)(i.Typography.Text,{type:"secondary",children:(0,v.jsx)(g.Z,{name:"information-circle-outline"})}),(0,v.jsx)(i.Typography.Text,{type:"secondary",children:"TVL:"})]})}),(0,v.jsxs)(i.Typography.Text,{children:["$",(0,h.uR)(l).format("0.[00]a")]})]})]})})},he=["address"],ve=function(e){var n=e.value,t=e.onChange,r=(0,u.useState)(),d=(0,c.Z)(r,2),l=d[0],p=d[1],f=(0,u.useState)([]),h=(0,c.Z)(f,2),x=h[0],w=h[1],y=(0,a.useSelector)((function(e){return e.settings})),b=(0,s.usePool)().pools,j=(0,s.useMint)().tokenProvider,k=(0,u.useMemo)((function(){return b?Object.keys(b).map((function(e){var n=b[e];return[n.mint_a,n.mint_b]})).flat().filter((function(e,n,t){return t.indexOf(e)===n})):[]}),[b]),C=(0,u.useCallback)((function(e){return k.includes(e)}),[k]),Z=(0,u.useCallback)(function(){var e=(0,S.Z)(P().mark((function e(n){var t,r;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return",w(n));case 2:return e.next=4,j.all();case 4:return t=e.sent,r=t.filter((function(e){var n=e.address;return C(n)})),e.abrupt("return",w(r));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[j,C]),A=(0,u.useCallback)((function(e){var n=null===e||void 0===e?void 0:e.address;return T.account.isAddress(n)?Object.keys(b).filter((function(e){var t=b[e];return[t.mint_a,t.mint_b].includes(n)})):[]}),[b]),I=(0,u.useCallback)((function(){var e=A(l);return t({mintInfo:l,poolAddress:void 0,poolAddresses:e})}),[A,l,t]),R=(0,u.useMemo)((function(){return(0,v.jsx)(i.Row,{gutter:[16,16],children:x.map((function(e,r){var a=e.logoURI,s=e.symbol,o=e.name,c=e.address,u=(n.mintInfo||{}).address;return(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(de.ZP,{height:48,overflow:!0,children:(0,v.jsx)(pe,{logoURI:a,symbol:s,name:o,onClick:function(){return function(e){var n=A(e);return t({mintInfo:e,poolAddress:void 0,poolAddresses:n})}(e)},advanced:y.advanced,onAdvanced:function(){return p(e)},active:u===c})})},o+r)}))})}),[A,t,x,n,y.advanced]),z=(0,u.useMemo)((function(){return(0,v.jsx)(i.Row,{gutter:[16,16],children:A(l).map((function(e){return(0,o.Z)({address:e},b[e])})).map((function(e){var n=e.address,t=(0,m.Z)(e,he),r=(l||{}).address;return{address:n,point:W(r,t)}})).sort(_).map((function(e,r){var a=e.address,s=n.poolAddress,o=b[a];return(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(de.ZP,{height:56,overflow:!0,children:(0,v.jsx)(fe,{value:o,onClick:function(){return function(e){var n=A(l);return t({mintInfo:l,poolAddress:e,poolAddresses:n})}(a)},active:a===s})})},a+r)}))})}),[A,l,b,t,n]);return(0,v.jsxs)(i.Row,{gutter:[16,16],children:[(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(i.Typography.Title,{level:5,children:"Token Selection"})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(le,{onChange:Z,isSupportedMint:C,disabled:Boolean(l)})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsxs)(i.Row,{gutter:[16,16],style:{height:300,overflow:"auto"},children:[l?(0,v.jsx)(i.Col,{span:24,children:(0,v.jsxs)(i.Row,{gutter:[8,8],wrap:!1,align:"middle",children:[(0,v.jsx)(i.Col,{flex:"auto",children:(0,v.jsx)(i.Button,{type:"text",className:"contained",icon:(0,v.jsx)(g.Z,{name:"arrow-back-outline"}),onClick:function(){return p(void 0)},children:"Back"})}),(0,v.jsx)(i.Col,{children:(0,v.jsx)(i.Typography.Text,{type:"secondary",children:"Choose one favorite pool or"})}),(0,v.jsx)(i.Col,{children:(0,v.jsx)(i.Button,{type:"primary",icon:(0,v.jsx)(g.Z,{name:"sparkles-outline"}),onClick:I,children:"Auto"})})]})}):null,(0,v.jsx)(i.Col,{span:24,children:l?z:R}),(0,v.jsx)(i.Col,{span:24})]})})]})},xe=function(e){var n=e.value,t=e.onChange,r=(0,u.useState)(!1),a=(0,c.Z)(r,2),s=a[0],o=a[1];(0,u.useEffect)((function(){s&&setTimeout(de.be,500)}),[s]);var d=(null===n||void 0===n?void 0:n.mintInfo)||{},l=d.logoURI,p=d.symbol;return(0,v.jsxs)(u.Fragment,{children:[(0,v.jsxs)(i.Space,{style:{marginLeft:-6,cursor:"pointer"},onClick:function(){return o(!0)},children:[(0,v.jsx)(i.Avatar,{size:24,src:l,children:(0,v.jsx)(g.Z,{name:"diamond-outline"})}),(0,v.jsx)(i.Typography.Text,{type:"secondary",style:{margin:0},children:p||"TOKEN"}),(0,v.jsx)(i.Divider,{type:"vertical",style:{marginLeft:4}})]}),(0,v.jsx)(i.Modal,{visible:s,onCancel:function(){return o(!1)},closeIcon:(0,v.jsx)(g.Z,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,v.jsx)(i.Row,{gutter:[16,16],children:(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(ve,{value:n,onChange:function(e){return o(!1),t(e)}})})})})]})},me=["max","onChange"],ge=(0,u.forwardRef)((function(e,n){var t,a=e.max,s=e.onChange,d=(0,m.Z)(e,me),l=(0,u.useState)(""),p=(0,c.Z)(l,2),f=p[0],h=p[1],x=(0,u.useState)(null),w=(0,c.Z)(x,2),y=w[0],b=w[1],j=(0,u.useRef)(n),k=(0,u.useCallback)((function(e){var n=function(e){r&&(clearTimeout(r),r=void 0),h(e),r=setTimeout((function(){return h("")}),500)};return/^\d*(\.\d*)?$/.test(e)?a&&parseFloat(e)>parseFloat(a)?n("Not enough balance"):s(e):n("Invalid character")}),[a,s]);return null===j||void 0===j||null===(t=j.current)||void 0===t||t.setSelectionRange(y,y),(0,v.jsx)(i.Tooltip,{title:(0,v.jsxs)(i.Space,{children:[(0,v.jsx)(g.Z,{name:"warning"}),f]}),visible:!!f,children:(0,v.jsx)(i.Input,(0,o.Z)((0,o.Z)({},d),{},{onChange:function(e){b(e.target.selectionStart),k(e.target.value||"")},ref:j}))})})),we="#F9575E",ye=function(){var e,n,t=(0,a.useDispatch)(),r=(0,a.useSelector)((function(e){return e.bid})),d=(0,a.useSelector)((function(e){return e.settings})),l=(0,u.useState)(),p=(0,c.Z)(l,2),f=p[0],x=p[1],m=(0,s.useAccount)().accounts,w=(0,s.useWallet)().wallet,y=w.lamports,b=w.address,j=(0,u.useMemo)((function(){return{mintInfo:r.mintInfo,poolAddress:r.poolAddress,poolAddresses:r.poolAddresses}}),[r]),k=(0,u.useMemo)((function(){if(!m)return"0";var e=m[r.accountAddress],n=r.mintInfo;if(!n||!e)return"0";var t=(null===e||void 0===e?void 0:e.amount)||BigInt(0);if(n.address!==T.DEFAULT_WSOL)return T.utils.undecimalize(t,n.decimals);var a=T.utils.decimalize(.01,n.decimals),s=y+t-a;return s<=t?T.utils.undecimalize(t,n.decimals):T.utils.undecimalize(s,n.decimals)}),[m,r,y]),C=(0,u.useCallback)((function(e){return t(ce({amount:e,prioritized:!0}))}),[t]),Z=function(){var e=(0,S.Z)(P().mark((function e(n){var r,a,s,i;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=window.sentre.splt,a=n.mintInfo||{},s=a.address,T.account.isAddress(s)){e.next=4;break}return e.abrupt("return",t(ce((0,o.Z)({},n))));case 4:return e.next=6,r.deriveAssociatedAddress(b,s);case 6:return i=e.sent,e.abrupt("return",t(ce((0,o.Z)({accountAddress:i},n))));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),A=(0,u.useMemo)((function(){var e=(j||{}).mintInfo,n=r.amount;if(f&&e&&n){var t,a=e.address;f.has(a)&&(t=f.get(a));var s=(t||{}).price;return Number(n)*(s||0)}}),[r,f,j]);return(0,u.useEffect)((function(){d.advanced||t(ce({poolAddress:void 0}))}),[d,t]),(0,u.useEffect)((function(){var e=(j||{}).mintInfo;e&&(0,S.Z)(P().mark((function n(){var t;return P().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ae.getMintInfos([e.address]);case 2:t=n.sent,x(t);case 4:case"end":return n.stop()}}),n)})))()}),[j]),(0,v.jsxs)(i.Row,{gutter:[8,8],children:[(0,v.jsx)(i.Col,{flex:"auto",children:(0,v.jsx)(i.Typography.Text,{children:"From"})}),(0,v.jsx)(i.Col,{children:(0,v.jsxs)(i.Space,{size:4,children:[(0,v.jsx)(i.Typography.Text,{type:"secondary",children:"Supported"}),(0,v.jsx)(i.Tag,{style:{margin:0,borderRadius:4,color:(0,ee.p)(we)},color:(0,ee.p)(we,.2),children:"Wormhole Bridge"})]})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(i.Card,{bordered:!1,className:"card-child card-input",bodyStyle:{padding:4},children:(0,v.jsx)(ge,{placeholder:"0",value:r.amount,onChange:C,prefix:(0,v.jsx)(xe,{value:j,onChange:Z}),suffix:(0,v.jsx)(i.Button,{type:"text",size:"small",style:{fontSize:12,marginRight:-7},onClick:function(){return C(k)},children:"MAX"}),bordered:!1,max:k})})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsxs)(i.Row,{gutter:[4,4],style:{fontSize:12,marginLeft:2},children:[(0,v.jsx)(i.Col,{flex:"auto",children:A?(0,v.jsx)(i.Tooltip,{title:"The estimation is based on CoinGecko API.",children:(0,v.jsxs)(i.Space,{size:4,children:[(0,v.jsx)(g.Z,{name:"information-circle-outline"}),(0,v.jsxs)(i.Typography.Text,{type:"secondary",children:[(0,h.uR)(r.amount).format("0,0.[0000]a")," ",(null===(e=j.mintInfo)||void 0===e?void 0:e.symbol)||"TOKEN"," ~ $",(0,h.uR)(A).format("0,0.[00]a")]})]})}):null}),(0,v.jsx)(i.Col,{children:(0,v.jsxs)(i.Typography.Text,{type:"secondary",children:["Available: ",(0,h.uR)(k||0).format("0,0.[00]")," ",(null===(n=j.mintInfo)||void 0===n?void 0:n.symbol)||"TOKEN"]})})]})})]})},be=["prioritized","reset"],je="sen-swap",ke=(0,se.createAsyncThunk)("".concat(je,"/updateAskData"),function(){var e=(0,S.Z)(P().mark((function e(n,t){var r,a,s,i,c,u,d,l;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.prioritized,a=n.reset,s=(0,m.Z)(n,be),i=t.getState,c=i(),u=c.bid.priority,d=c.ask.priority,l=a?0:r?u+1:d,e.abrupt("return",(0,o.Z)((0,o.Z)({},s),{},{priority:l}));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Ce=(0,se.createSlice)({name:je,initialState:{amount:"",accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:function(e){e.addCase(ke.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}}).reducer,Ze=function(){var e,n,t=(0,a.useDispatch)(),r=(0,a.useSelector)((function(e){return e.ask})),d=(0,a.useSelector)((function(e){return e.settings})),l=(0,u.useState)(),p=(0,c.Z)(l,2),f=p[0],x=p[1],m=(0,s.useAccount)().accounts,w=(0,s.useWallet)().wallet.address,y=(0,u.useMemo)((function(){return{mintInfo:r.mintInfo,poolAddress:r.poolAddress,poolAddresses:r.poolAddresses}}),[r]),b=(0,u.useMemo)((function(){if(!T.account.isAddress(r.accountAddress))return"0";var e=(m[r.accountAddress]||{}).amount,n=(r.mintInfo||{}).decimals;return e&&n?T.utils.undecimalize(e,n):"0"}),[m,r]),j=function(){var e=(0,S.Z)(P().mark((function e(n){var r,a,s,i;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=window.sentre.splt,a=n.mintInfo||{},s=a.address,T.account.isAddress(s)){e.next=4;break}return e.abrupt("return",t(ke((0,o.Z)({},n))));case 4:return e.next=6,r.deriveAssociatedAddress(w,s);case 6:i=e.sent,t(ke((0,o.Z)({accountAddress:i},n)));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=(0,u.useMemo)((function(){var e=y.mintInfo,n=r.amount;if(f&&e&&n){var t,a=e.address;f.has(a)&&(t=f.get(a));var s=(t||{}).price;return Number(n)*(s||0)}}),[r,f,y]);return(0,u.useEffect)((function(){d.advanced||t(ke({poolAddress:void 0}))}),[d,t]),(0,u.useEffect)((function(){var e=(y||{}).mintInfo;e&&(0,S.Z)(P().mark((function n(){var t;return P().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ae.getMintInfos([e.address]);case 2:t=n.sent,x(t);case 4:case"end":return n.stop()}}),n)})))()}),[y]),(0,v.jsxs)(i.Row,{gutter:[8,8],children:[(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(i.Typography.Text,{children:"To"})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(i.Card,{bordered:!1,className:"card-child card-input",bodyStyle:{padding:4},children:(0,v.jsx)(ge,{placeholder:"0",value:r.amount,onChange:function(e){return t(ke({amount:e,prioritized:!0}))},prefix:(0,v.jsx)(xe,{value:y,onChange:j}),bordered:!1})})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsxs)(i.Row,{gutter:[4,4],style:{fontSize:12,marginLeft:2},children:[(0,v.jsx)(i.Col,{flex:"auto",children:k?(0,v.jsx)(i.Tooltip,{title:"The estimation is based on CoinGecko API.",children:(0,v.jsxs)(i.Space,{size:4,children:[(0,v.jsx)(g.Z,{name:"information-circle-outline"}),(0,v.jsxs)(i.Typography.Text,{type:"secondary",children:[(0,h.uR)(r.amount).format("0,0.[0000]a")," ",(null===(e=y.mintInfo)||void 0===e?void 0:e.symbol)||"TOKEN"," ~ $",(0,h.uR)(k).format("0,0.[0]a")]})]})}):null}),(0,v.jsx)(i.Col,{children:(0,v.jsxs)(i.Typography.Text,{type:"secondary",children:["Available: ",(0,h.uR)(b||0).format("0,0.[00]")," ",(null===(n=y.mintInfo)||void 0===n?void 0:n.symbol)||"TOKEN"]})})]})})]})},Ae=function(){return(0,v.jsx)(i.Button,{type:"text",icon:(0,v.jsx)(g.Z,{name:"refresh-outline"})})},Ie=function(e){var n=e.label,t=e.value,r=e.onClick,a=e.active,s=void 0!==a&&a;return(0,v.jsx)(i.Typography.Text,{style:{cursor:"pointer",color:s?"#F9575E":"inherit"},onClick:function(){return r(t)},children:n})},Te=function(e){var n=e.value,t=e.onChange;return(0,v.jsxs)(i.Row,{gutter:[8,8],children:[(0,v.jsx)(i.Col,{span:24,children:(0,v.jsxs)(i.Row,{gutter:[8,8],wrap:!1,children:[(0,v.jsx)(i.Col,{flex:"auto",children:(0,v.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Slippage Tolerance"})}),(0,v.jsx)(i.Col,{children:(0,v.jsx)(i.Tooltip,{placement:"right",title:(0,v.jsxs)("span",{children:["Your transaction will be canceled if the confirmed price breaks the limited range of"," ",(0,v.jsx)("strong",{style:{color:"#f9575e"},children:"".concat(100*n,"%.")})]}),children:(0,v.jsx)(i.Button,{type:"text",shape:"circle",size:"small",icon:(0,v.jsx)(g.Z,{name:"information-circle-outline"})})})})]})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(i.Row,{gutter:[8,8],wrap:!1,justify:"space-between",children:[.001,.005,.01,.05,1].map((function(e,r){return(0,v.jsx)(i.Col,{children:(0,v.jsx)(Ie,{label:1===e?"Freely":"".concat(100*e,"%"),value:e,onClick:t,active:e===n})},r)}))})})]})},Se=function(e){var n=e.value,t=e.onChange;return(0,v.jsxs)(i.Row,{gutter:[8,8],children:[(0,v.jsx)(i.Col,{span:24,children:(0,v.jsxs)(i.Row,{gutter:[8,8],wrap:!1,children:[(0,v.jsx)(i.Col,{flex:"auto",children:(0,v.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Advanced Mode"})}),(0,v.jsx)(i.Col,{children:(0,v.jsx)(i.Switch,{size:"small",checkedChildren:(0,v.jsx)(g.Z,{name:"calculator-outline"}),unCheckedChildren:(0,v.jsx)(g.Z,{name:"sparkles-outline"}),checked:n,onChange:t})})]})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsxs)(i.Typography.Paragraph,{style:{fontSize:12,textAlign:"justify"},children:[(0,v.jsx)(g.Z,{name:"warning-outline"})," This advanced mode will disable the automatic optimization that often results in bad rates and lost funds. Only use this mode if you know what you are doing."," ",(0,v.jsx)("strong",{style:{color:"#f9575e"},children:"The advanced mode will display in the token list."})]})})]})},Re="sen-swap",Pe=(0,se.createAsyncThunk)("".concat(Re,"/updateSettings"),function(){var e=(0,S.Z)(P().mark((function e(n){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),ze=(0,se.createSlice)({name:Re,initialState:{slippage:.01,advanced:!1},reducers:{},extraReducers:function(e){e.addCase(Pe.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}}).reducer,Oe=function(){var e=(0,a.useDispatch)(),n=(0,a.useSelector)((function(e){return e.settings}));return(0,v.jsx)(i.Popover,{placement:"bottomRight",overlayInnerStyle:{width:300},content:(0,v.jsxs)(i.Row,{gutter:[8,8],children:[(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(i.Typography.Title,{level:5,children:"Settings"})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(Te,{value:n.slippage,onChange:function(t){return e(Pe((0,o.Z)((0,o.Z)({},n),{},{slippage:t})))}})}),(0,v.jsx)(i.Divider,{style:{marginTop:8,marginBottom:8}}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(Se,{value:n.advanced,onChange:function(t){return e(Pe((0,o.Z)((0,o.Z)({},n),{},{advanced:t})))}})})]}),trigger:"click",children:(0,v.jsx)(i.Button,{type:"text",shape:"circle",size:"small",icon:(0,v.jsx)(g.Z,{name:"settings-outline"})})})},Ee=function(){return(0,v.jsxs)(i.Row,{gutter:[4,4],justify:"end",align:"middle",children:[(0,v.jsx)(i.Col,{}),(0,v.jsx)(i.Col,{children:(0,v.jsx)(i.Divider,{type:"vertical",style:{padding:0}})}),(0,v.jsx)(i.Col,{children:(0,v.jsx)(Ae,{})}),(0,v.jsx)(i.Col,{children:(0,v.jsx)(Oe,{})})]})},Me="sen-swap",Be={route:{amount:"",amounts:[],hops:[]}},De=(0,se.createAsyncThunk)("".concat(Me,"/updateRouteInfo"),function(){var e=(0,S.Z)(P().mark((function e(n,t){var r,a,s,i;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.route,a=t.getState,s=a(),i=s.route,r){e.next=5;break}return e.abrupt("return",{route:i});case 5:return e.abrupt("return",{route:r});case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Ne=(0,se.createSlice)({name:Me,initialState:Be,reducers:{},extraReducers:function(e){e.addCase(De.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}}).reducer,Le=["amount","priority"],We=["amount","priority"],_e=function(e){var n=e.onChange,t=void 0===n?function(){}:n,r=(0,a.useDispatch)(),d=(0,u.useState)(new L),l=(0,c.Z)(d,2),p=l[0],f=l[1],h=(0,a.useSelector)((function(e){return e.bid})),x=(0,a.useSelector)((function(e){return e.ask})),w=(0,a.useSelector)((function(e){return e.settings})).advanced,y=(0,s.usePool)().pools,b=(0,u.useCallback)((0,S.Z)(P().mark((function e(){var n,t,a,s,i,c,u,d;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.amount,t=h.priority,a=(0,m.Z)(h,Le),s=x.amount,i=x.priority,c=(0,m.Z)(x,We),u=t>i?n:s,d=t>i?ke:ce,e.next=6,r(ce((0,o.Z)((0,o.Z)({},c),{},{amount:"",reset:!0})));case 6:return e.next=8,r(ke((0,o.Z)((0,o.Z)({},a),{},{amount:"",reset:!0})));case 8:return e.next=10,r(d({amount:u,prioritized:!0}));case 10:case"end":return e.stop()}}),e)}))),[r,x,h]),j=(0,u.useCallback)((function(e,n){return T.account.isAddress(e)?[(0,o.Z)({address:e},y[e])]:n.map((function(e){return(0,o.Z)({address:e},y[e])}))}),[y]),k=(0,u.useCallback)((0,S.Z)(P().mark((function e(){var n,t,r,a,s,i,o,c,u,d,l,p,v,m,g,b,k,C;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.poolAddress,t=h.poolAddresses,r=h.mintInfo,a=h.amount,s=h.priority,i=x.poolAddress,o=x.poolAddresses,c=x.mintInfo,u=x.amount,d=x.priority,l=(r||{}).address,p=j(n,t),v=(c||{}).address,m=j(i,o),g=new L,(Number(a)||Number(u))&&T.account.isAddress(l)&&T.account.isAddress(v)&&p.length&&m.length&&r){e.next=9;break}return e.abrupt("return",f(g));case 9:if(b=new Array,k={mints:[l],pools:[]},C=U(y),F(b,C,l,v,k),b.length){e.next=15;break}return e.abrupt("return",f(g));case 15:if(w&&(b=b.filter((function(e){var t=e.pools.length;return(!T.account.isAddress(n)||e.pools[0]===n)&&(!T.account.isAddress(i)||e.pools[t-1]===i)}))),!(d<s)){e.next=22;break}return e.next=19,V(y,b,h,x);case 19:g=e.sent,e.next=25;break;case 22:return e.next=24,G(y,b,h,x);case 24:g=e.sent;case 25:return e.abrupt("return",f(g));case 26:case"end":return e.stop()}}),e)}))),[w,x,h,j,y]),C=(0,u.useCallback)((function(){var e=h.priority,n=x.priority;n<e&&r(ke({amount:p.amount})),e<n&&r(ce({amount:p.amount})),t(p),r(De({route:(0,o.Z)({},p)}))}),[x.priority,p,h.priority,r,t]);return(0,u.useEffect)((function(){C()}),[C]),(0,u.useEffect)((function(){k()}),[k]),(0,v.jsxs)(i.Row,{gutter:[24,24],children:[(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(i.Row,{gutter:[8,8],justify:"end",align:"middle",wrap:!1,children:(0,v.jsx)(i.Col,{children:(0,v.jsx)(Ee,{})})})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(ye,{})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(i.Row,{gutter:[8,8],justify:"center",children:(0,v.jsx)(i.Col,{children:(0,v.jsx)(i.Button,{size:"small",icon:(0,v.jsx)(g.Z,{name:"git-compare-outline"}),onClick:b})})})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(Ze,{})})]})},Ue=function(){return(0,v.jsx)(i.Card,{bordered:!1,className:"card-swap",children:(0,v.jsx)(_e,{onChange:function(){}})})},Fe=function(e){var n=(0,s.useMint)().tokenProvider,t=(0,s.usePool)().pools,r=(0,u.useState)([]),a=(0,c.Z)(r,2),i=a[0],o=a[1],d=(0,u.useCallback)((0,S.Z)(P().mark((function r(){var a,s,i,c,u,d;return P().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return",o([void 0]));case 2:return r.next=4,n.findByAddress(e);case 4:if(!(a=r.sent)){r.next=7;break}return r.abrupt("return",o([a]));case 7:if(s=Object.values(t).find((function(n){return n.mint_lpt===e}))){r.next=10;break}return r.abrupt("return",o([void 0]));case 10:return i=s.mint_a,c=s.mint_b,r.next=13,n.findByAddress(i);case 13:return u=r.sent,r.next=16,n.findByAddress(c);case 16:return d=r.sent,r.abrupt("return",o([u,d]));case 18:case"end":return r.stop()}}),r)}))),[e,t,n]);return(0,u.useEffect)((function(){d()}),[d]),i},qe=function(e){var n=e.mintAddress,t=e.size,r=void 0===t?24:t,a=e.icon,s=void 0===a?(0,v.jsx)(g.Z,{name:"diamond-outline"}):a,o=Fe(n);return(0,v.jsx)(i.Avatar.Group,{style:{display:"block"},children:o.map((function(e,n){return(0,v.jsx)(i.Avatar,{src:null===e||void 0===e?void 0:e.logoURI,size:r,style:{backgroundColor:"#2D3355",border:"none"},children:s},(null===e||void 0===e?void 0:e.address)||n)}))})},Ve=function(){return(0,v.jsx)(i.Card,{bordered:!1,children:(0,v.jsxs)(i.Row,{gutter:[16,16],children:[(0,v.jsx)(i.Col,{span:12,children:(0,v.jsxs)(i.Space,{direction:"vertical",size:4,children:[(0,v.jsx)(qe,{mintAddress:""}),(0,v.jsxs)(i.Space,{children:[(0,v.jsx)(i.Typography.Text,{children:"TVL:"}),(0,v.jsx)(i.Typography.Title,{level:5,children:"18.5 SOL"})]}),(0,v.jsx)(i.Typography.Text,{className:"caption",type:"secondary",children:"~ $1000"})]})}),(0,v.jsx)(i.Col,{span:12,children:(0,v.jsxs)(i.Space,{direction:"vertical",size:4,children:[(0,v.jsx)(qe,{mintAddress:""}),(0,v.jsxs)(i.Space,{children:[(0,v.jsx)(i.Typography.Text,{children:"TVL:"}),(0,v.jsx)(i.Typography.Title,{level:5,children:"18.5 SOL"})]}),(0,v.jsx)(i.Typography.Text,{className:"caption",type:"secondary",children:"~ $1000"})]})})]})})},Ge=function(){return(0,v.jsxs)(i.Row,{gutter:[24,24],children:[(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(Ue,{})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(X,{})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(Ve,{})})]})},Qe=t(4550),He=t.n(Qe),Ke={success:[20,224,65],pending:[212,177,6],error:[215,35,17],failed:[215,35,17]},Je=function(e){var n=e.tag,t=function(e){var t=Ke[n];return"rgba(".concat(t[0],",  ").concat(t[1],", ").concat(t[2],",").concat(e||1,")")};return(0,v.jsx)(i.Tag,{style:{margin:0,borderRadius:4,color:t(),textTransform:"capitalize"},color:t(.1),children:n})},$e=[{title:"TIME",dataIndex:"time"},{title:"TRANSACTION",className:"transaction",dataIndex:"transaction"},{title:"PAID",dataIndex:"paid",render:function(e){return(0,v.jsxs)(i.Space,{children:[(0,v.jsx)(qe,{mintAddress:e}),(0,v.jsx)(i.Typography.Text,{children:"SOL"})," -",(0,v.jsx)(qe,{mintAddress:e}),(0,v.jsx)(i.Typography.Text,{children:"ETH"})]})}},{title:"AMOUNT",dataIndex:"amount"},{title:"STATUS",dataIndex:"status",render:function(e){return(0,v.jsx)(Je,{tag:"success"})}}],Ye=function(){var e={key:0,time:He()().format("DD MMM, YYYY hh:mm"),transaction:"Swap Solana",paid:"Solana - Ethereum",amount:"",status:"success"},n=[1,2,3,4,5,6,7].map((function(n){return e.key=n,e.amount="".concat(n," SOL"),(0,o.Z)({},e)}));return(0,v.jsx)(i.Card,{bordered:!1,children:(0,v.jsxs)(i.Row,{gutter:[16,16],justify:"center",children:[(0,v.jsx)(i.Col,{children:(0,v.jsx)(i.Typography.Text,{children:"Swap history"})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(i.Table,{columns:$e,dataSource:n,pagination:!1,rowClassName:function(e,n){return n%2?"odd-row":"even-row"},scroll:{x:800,y:300}})}),(0,v.jsx)(i.Col,{children:(0,v.jsx)(i.Button,{type:"text",icon:(0,v.jsx)(g.Z,{name:"chevron-down-outline"}),children:"View more"})})]})})},Xe=function(){return(0,v.jsxs)(i.Row,{gutter:[24,24],children:[(0,v.jsx)(i.Col,{lg:8,md:12,xs:24,children:(0,v.jsx)(Ge,{})}),(0,v.jsx)(i.Col,{lg:16,md:12,xs:24,children:(0,v.jsxs)(i.Row,{gutter:[24,24],children:[(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(I,{})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsx)(Ye,{})})]})})]})},en="main",nn=(0,se.createAsyncThunk)("".concat(en,"/increaseCounter"),function(){var e=(0,S.Z)(P().mark((function e(n,t){var r,a,s;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getState,a=r(),s=a.main.counter,e.abrupt("return",{counter:s+1});case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),tn=(0,se.createSlice)({name:en,initialState:{counter:0},reducers:{},extraReducers:function(e){e.addCase(nn.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}}).reducer,rn=t(63805),an=function(){var e=(0,s.useUI)().ui,n=e.width,t=e.infix,r=(0,a.useDispatch)(),o=(0,a.useSelector)((function(e){return e.main})).counter,c=(0,u.useCallback)((function(){return r(nn())}),[r]);return(0,v.jsxs)(i.Row,{gutter:[24,24],children:[(0,v.jsx)(i.Col,{span:24,children:(0,v.jsxs)(i.Space,{align:"center",children:[(0,v.jsx)(g.Z,{name:"apps-outline"}),(0,v.jsx)(i.Typography.Title,{level:4,children:"Widget"})]})}),(0,v.jsx)(i.Col,{span:24,children:(0,v.jsxs)(i.Typography.Text,{children:["Env: ",rn.OB," - ",n,"px - ",t]})}),(0,v.jsx)(i.Col,{children:(0,v.jsxs)(i.Typography.Text,{children:["Counter: ",o]})}),(0,v.jsx)(i.Col,{children:(0,v.jsx)(i.Button,{onClick:c,children:"Increase"})})]})},sn=t(85912),on=(0,se.configureStore)({middleware:function(e){return e(sn.h)},devTools:(0,sn.$)("myapp"),reducer:{main:tn,ask:Ce,bid:ue,settings:ze,route:Ne}});var cn={appId:"senswap",url:"https://github.com/DescartesNetwork/sen-swap/index.js",senhub:"senhub@https://descartesnetwork.github.io/senhub/index.js"},un={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}},dn={manifest:{development:(0,o.Z)({},cn),staging:(0,o.Z)({},cn),production:(0,o.Z)({},cn)}[rn.OB],sol:un[rn.ef]}.manifest.appId,ln=function(){return(0,v.jsx)(s.UIProvider,{appId:dn,children:(0,v.jsx)(s.MintProvider,{children:(0,v.jsx)(s.PoolProvider,{children:(0,v.jsx)(s.AccountProvider,{children:(0,v.jsx)(s.WalletProvider,{children:(0,v.jsx)(a.Provider,{store:on,children:(0,v.jsx)(Xe,{})})})})})})})},pn={size:"small",type:"solid"},fn=function(){return(0,v.jsx)(s.UIProvider,{appId:dn,children:(0,v.jsx)(a.Provider,{store:on,children:(0,v.jsx)(an,{})})})}},31633:function(e,n,t){var r=t(63805),a=t(77566),s=t(77330),i={sol:a.Z[r.ef],register:s.Z[r.OB]};n.Z=i},65090:function(e,n,t){var r=t(4942),a=t(15861),s=t(87757),i=t.n(s),o=t(19289),c=t(95418),u="accounts",d=(0,o.createAsyncThunk)("".concat(u,"/getAccounts"),function(){var e=(0,a.Z)(i().mark((function e(n){var t,r,a,s,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.owner,c.account.isAddress(t)){e.next=3;break}throw new Error("Invalid owner/wallet address");case 3:return r=window.sentre.splt,a=c.account.fromAddress(t),e.next=7,r.connection.getTokenAccountsByOwner(a,{programId:r.spltProgramId});case 7:return s=e.sent,o=s.value,u={},o.forEach((function(e){var n=e.pubkey,t=e.account.data,a=n.toBase58(),s=r.parseAccountData(t);return u[a]=s})),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l=(0,o.createAsyncThunk)("".concat(u,"/getAccount"),function(){var e=(0,a.Z)(i().mark((function e(n,t){var a,s,o,u,d,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.address,s=t.getState,c.account.isAddress(a)){e.next=4;break}throw new Error("Invalid account address");case 4:if(o=s(),!(u=o.accounts[a])){e.next=7;break}return e.abrupt("return",(0,r.Z)({},a,u));case 7:return d=window.sentre.splt,e.next=10,d.getAccountData(a);case 10:return l=e.sent,e.abrupt("return",(0,r.Z)({},a,l));case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),p=(0,o.createAsyncThunk)("".concat(u,"/upsetAccount"),function(){var e=(0,a.Z)(i().mark((function e(n){var t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,a=n.data,c.account.isAddress(t)){e.next=3;break}throw new Error("Invalid address");case 3:if(a){e.next=5;break}throw new Error("Data is empty");case 5:return e.abrupt("return",(0,r.Z)({},t,a));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),f=(0,o.createAsyncThunk)("".concat(u,"/deleteAccount"),function(){var e=(0,a.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,c.account.isAddress(t)){e.next=3;break}throw new Error("Invalid address");case 3:return e.abrupt("return",{address:t});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),h=(0,o.createSlice)({name:u,initialState:{},reducers:{},extraReducers:function(e){e.addCase(d.fulfilled,(function(e,n){return n.payload})).addCase(l.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(p.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(f.fulfilled,(function(e,n){delete e[n.payload.address]}))}});n.ZP=h.reducer},87358:function(e,n,t){var r=t(19289),a=t(85912),s=t(87482),i=t(5105),o=t(58851),c=t(21028),u=t(65090),d=t(33015),l=t(92871),p=t(33361),f=(0,r.configureStore)({middleware:function(e){return e(a.h)},devTools:(0,a.$)("sentre"),reducer:{ui:s.ZP,flags:i.Z,page:o.ZP,wallet:c.ZP,accounts:u.ZP,mints:d.ZP,pools:l.ZP,search:p.ZP}});n.Z=f},33015:function(e,n,t){t.d(n,{ih:function(){return d}});var r=t(4942),a=t(15861),s=t(87757),i=t.n(s),o=t(19289),c=t(95418),u="mints",d=(0,o.createAsyncThunk)("".concat(u,"/getMint"),function(){var e=(0,a.Z)(i().mark((function e(n,t){var a,s,o,u,d,l,p,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.address,s=n.force,o=void 0!==s&&s,u=t.getState,c.account.isAddress(a)){e.next=4;break}throw new Error("Invalid mint address");case 4:if(o){e.next=8;break}if(d=u(),!(l=d.accounts[a])){e.next=8;break}return e.abrupt("return",(0,r.Z)({},a,l));case 8:return p=window.sentre.splt,e.next=11,p.getMintData(a);case 11:return f=e.sent,e.abrupt("return",(0,r.Z)({},a,f));case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),l=(0,o.createAsyncThunk)("".concat(u,"/upsetMint"),function(){var e=(0,a.Z)(i().mark((function e(n){var t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,a=n.data,c.account.isAddress(t)){e.next=3;break}throw new Error("Invalid address");case 3:if(a){e.next=5;break}throw new Error("Data is empty");case 5:return e.abrupt("return",(0,r.Z)({},t,a));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),p=(0,o.createAsyncThunk)("".concat(u,"/deleteMint"),function(){var e=(0,a.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,c.account.isAddress(t)){e.next=3;break}throw new Error("Invalid address");case 3:return e.abrupt("return",{address:t});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),f=(0,o.createSlice)({name:u,initialState:{},reducers:{},extraReducers:function(e){e.addCase(d.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(l.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(p.fulfilled,(function(e,n){delete e[n.payload.address]}))}});n.ZP=f.reducer},58851:function(e,n,t){var r=t(93433),a=t(1413),s=t(15861),i=t(87757),o=t.n(i),c=t(19289),u=t(95418),d=t(3007),l=t(31633).Z.register,p=l.senreg,f=l.extra,h=function(e,n){return n&&Array.isArray(n)?n.filter((function(n){return e[n]})):[]},v=function(){var e=(0,s.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),x="page",m={register:{},appIds:[],widgetIds:[]},g=(0,c.createAsyncThunk)("".concat(x,"/loadRegister"),(0,s.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return n=e.sent,e.abrupt("return",{register:(0,a.Z)((0,a.Z)({},n),f)});case 4:case"end":return e.stop()}}),e)})))),w=(0,c.createAsyncThunk)("".concat(x,"/installManifest"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var s,i,c,d,l,p,f,h,v,x;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.getState,i=s(),c=i.wallet.address,d=i.page,l=d.appIds,p=d.widgetIds,f=d.register,u.account.isAddress(c)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:if(!l.includes(n.appId)){e.next=6;break}throw new Error("Cannot run sandbox for an installed application.");case 6:return(h=(0,r.Z)(l)).push(n.appId),v=(0,r.Z)(p),n.supportedViews.includes("widget")&&v.push(n.appId),(x=(0,a.Z)({},f))[n.appId]=n,e.abrupt("return",{appIds:h,widgetIds:v,register:x});case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),y=(0,c.createAsyncThunk)("".concat(x,"/loadPage"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var r,a,s,i,c,l,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getState,a=r(),s=a.wallet.address,i=a.page.register,u.account.isAddress(s)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:return c=new d.Z(s).createInstance("sentre"),e.t0=h,e.t1=i,e.next=9,c.getItem("appIds");case 9:if(e.t2=e.sent,e.t2){e.next=12;break}e.t2=m.appIds;case 12:return e.t3=e.t2,l=(0,e.t0)(e.t1,e.t3),e.t4=h,e.t5=i,e.next=18,c.getItem("widgetIds");case 18:if(e.t6=e.sent,e.t6){e.next=21;break}e.t6=m.widgetIds;case 21:return e.t7=e.t6,p=(0,e.t4)(e.t5,e.t7),e.abrupt("return",{appIds:l,widgetIds:p});case 24:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),b=(0,c.createAsyncThunk)("".concat(x,"/updatePage"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var r,a,s,i,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getState,a=r(),s=a.wallet.address,i=a.page.register,u.account.isAddress(s)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:return n=h(i,n),c=new d.Z(s),e.next=8,c.createInstance("sentre").setItem("appIds",n);case 8:return e.abrupt("return",{appIds:n});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),j=(0,c.createAsyncThunk)("".concat(x,"/installApp"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var a,s,i,c,l,p,f,h,v,x,m,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getState,c=i(),l=c.wallet.address,p=c.page,f=p.register,h=p.appIds,v=p.widgetIds,u.account.isAddress(l)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:if(!h.includes(n)){e.next=6;break}return e.abrupt("return",{});case 6:return(x=(0,r.Z)(h)).push(n),m=null!==(a=f[n])&&void 0!==a&&null!==(s=a.supportedViews)&&void 0!==s&&s.includes("widget")?[].concat((0,r.Z)(v),[n]):(0,r.Z)(v),g=new d.Z(l),e.next=12,g.createInstance("sentre").setItem("appIds",x);case 12:return e.next=14,g.createInstance("sentre").setItem("widgetIds",m);case 14:return e.abrupt("return",{appIds:x,widgetIds:m});case 15:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),k=(0,c.createAsyncThunk)("".concat(x,"/uninstallApp"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var r,a,s,i,c,l,p,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getState,a=r(),s=a.wallet.address,i=a.page,c=i.appIds,l=i.widgetIds,u.account.isAddress(s)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:if(c.includes(n)){e.next=6;break}return e.abrupt("return",{});case 6:return p=c.filter((function(e){return e!==n})),f=l.filter((function(e){return e!==n})),h=new d.Z(s),e.next=11,h.createInstance("sentre").setItem("appIds",p);case 11:return e.next=13,h.createInstance("sentre").setItem("widgetIds",f);case 13:return e.next=15,h.dropInstance(n);case 15:return e.abrupt("return",{appIds:p,widgetIds:f});case 16:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),C=(0,c.createAsyncThunk)("".concat(x,"/updateDashboard"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var r,a,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getState,a=r(),s=a.wallet.address,u.account.isAddress(s)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:return i=new d.Z(s),e.next=7,i.createInstance("sentre").setItem("widgetIds",n);case 7:return e.abrupt("return",{widgetIds:n});case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),Z=(0,c.createAsyncThunk)("".concat(x,"/addWidgets"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var a,s,i,c,l,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getState,s=a(),i=s.wallet.address,c=s.page.widgetIds,u.account.isAddress(i)){e.next=4;break}throw new Error("Wallet is not connected yet");case 4:return l=[].concat((0,r.Z)(c),(0,r.Z)(n)),p=new d.Z(i),e.next=8,p.createInstance("sentre").setItem("widgetIds",l);case 8:return e.abrupt("return",{widgetIds:l});case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),A=(0,c.createAsyncThunk)("".concat(x,"/removeWidget"),function(){var e=(0,s.Z)(o().mark((function e(n,t){var r,a,s,i,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getState,a=r(),s=a.wallet.address,i=a.page.widgetIds,u.account.isAddress(s)){e.next=4;break}throw new Error("Wallet is not connected yet.");case 4:if(i.includes(n)){e.next=6;break}return e.abrupt("return",{});case 6:return c=i.filter((function(e){return e!==n})),l=new d.Z(s),e.next=10,l.createInstance("sentre").setItem("widgetIds",c);case 10:return e.abrupt("return",{widgetIds:c});case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),I=(0,c.createSlice)({name:x,initialState:m,reducers:{},extraReducers:function(e){e.addCase(g.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(w.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(y.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(b.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(j.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(k.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(C.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(Z.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(A.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}});n.ZP=I.reducer},92871:function(e,n,t){var r=t(4942),a=t(15861),s=t(87757),i=t.n(s),o=t(19289),c=t(95418),u=t(31633).Z.sol.taxmanAddress,d="pools",l=(0,o.createAsyncThunk)("".concat(d,"/getPools"),(0,a.Z)(i().mark((function e(){var n,t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.sentre.swap,e.next=3,n.connection.getProgramAccounts(n.swapProgramId,{filters:[{dataSize:257},{memcmp:{bytes:u,offset:65}}]});case 3:return t=e.sent,r={},t.forEach((function(e){var t=e.pubkey,a=e.account.data,s=t.toBase58(),i=n.parsePoolData(a);r[s]=i})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))),p=(0,o.createAsyncThunk)("".concat(d,"/getPool"),function(){var e=(0,a.Z)(i().mark((function e(n,t){var a,s,o,u,d,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.address,s=t.getState,c.account.isAddress(a)){e.next=4;break}throw new Error("Invalid pool address");case 4:if(o=s(),!(u=o.pools[a])){e.next=7;break}return e.abrupt("return",(0,r.Z)({},a,u));case 7:return d=window.sentre.swap,e.next=10,d.getPoolData(a);case 10:return l=e.sent,e.abrupt("return",(0,r.Z)({},a,l));case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),f=(0,o.createAsyncThunk)("".concat(d,"/upsetPool"),function(){var e=(0,a.Z)(i().mark((function e(n){var t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,a=n.data,c.account.isAddress(t)){e.next=3;break}throw new Error("Invalid pool address");case 3:if(a){e.next=5;break}throw new Error("Data is empty");case 5:return e.abrupt("return",(0,r.Z)({},t,a));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),h=(0,o.createSlice)({name:d,initialState:{},reducers:{},extraReducers:function(e){e.addCase(l.fulfilled,(function(e,n){return n.payload})).addCase(p.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(f.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}});n.ZP=h.reducer},33361:function(e,n,t){var r=t(15861),a=t(87757),s=t.n(a),i=t(19289),o="search",c=(0,i.createAsyncThunk)("".concat(o,"/setValue"),function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{value:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),u=(0,i.createAsyncThunk)("".concat(o,"/setLoading"),function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{loading:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),d=(0,i.createAsyncThunk)("".concat(o,"/setDisabled"),function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{disabled:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l=(0,i.createSlice)({name:o,initialState:{value:"",loading:!1,disabled:!1},reducers:{},extraReducers:function(e){e.addCase(c.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(u.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(d.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}});n.ZP=l.reducer},87482:function(e,n,t){var r=t(15861),a=t(87757),s=t.n(a),i=t(19289),o=function(){var e=window.innerWidth;return e<576?"xs":e<768?"sm":e<992?"md":e<1200?"lg":e<1400?"xl":"xxl"},c="ui",u={theme:function(){var e=(new Date).getHours();return e>=6&&e<18?"light":"dark"}(),width:window.innerWidth,infix:o(),touchable:"ontouchstart"in window||navigator.maxTouchPoints>0,visibleActionCenter:!1},d=(0,i.createAsyncThunk)("".concat(c,"/setTheme"),function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{theme:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l=(0,i.createAsyncThunk)("".concat(c,"/resize"),(0,r.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.innerWidth,t=o(),e.abrupt("return",{width:n,infix:t});case 3:case"end":return e.stop()}}),e)})))),p=(0,i.createAsyncThunk)("".concat(c,"/setVisibleActionCenter"),function(){var e=(0,r.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{visibleActionCenter:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),f=(0,i.createSlice)({name:c,initialState:u,reducers:{},extraReducers:function(e){e.addCase(d.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(l.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(p.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}});n.ZP=f.reducer},21028:function(e,n,t){var r=t(15861),a=t(87757),s=t.n(a),i=t(19289),o=t(95418),c=t(31633),u=function(){var e=(0,r.Z)(s().mark((function e(n){var t,r,a,i,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.Z.sol,r=t.node,a=t.spltAddress,i=t.splataAddress,u=t.swapAddress,window.sentre={wallet:n,lamports:new o.Lamports(r),splt:new o.SPLT(a,i,r),swap:new o.Swap(u,a,i,r)};case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=(0,r.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==(n=window.sentre)&&void 0!==n&&n.wallet&&window.sentre.wallet.disconnect(),e.next=3,u(void 0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l="wallet",p={visible:!1,address:"",lamports:BigInt(0)},f=(0,i.createAsyncThunk)("".concat(l,"/openWallet"),(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{visible:!0});case 1:case"end":return e.stop()}}),e)})))),h=(0,i.createAsyncThunk)("".concat(l,"/closeWallet"),(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{visible:!1});case 1:case"end":return e.stop()}}),e)})))),v=(0,i.createAsyncThunk)("".concat(l,"/connectWallet"),function(){var e=(0,r.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("Invalid wallet instance");case 2:return e.next=4,u(n);case 4:return e.next=6,n.getAddress();case 6:return t=e.sent,e.next=9,window.sentre.lamports.getLamports(t);case 9:return r=e.sent,e.abrupt("return",{address:t,lamports:BigInt(r),visible:!1});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),x=(0,i.createAsyncThunk)("".concat(l,"/updateWallet"),function(){var e=(0,r.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.lamports,e.abrupt("return",{lamports:t});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),m=(0,i.createAsyncThunk)("".concat(l,"/disconnectWallet"),(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))),g=(0,i.createSlice)({name:l,initialState:p,reducers:{},extraReducers:function(e){e.addCase(f.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(h.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(v.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(x.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)})).addCase(m.fulfilled,(function(e,n){var t=n.payload;Object.assign(e,t)}))}});n.ZP=g.reducer},21411:function(e,n,t){t.d(n,{R:function(){return l}});var r=t(15861),a=t(15671),s=t(43144),i=t(87757),o=t.n(i),c=t(15822),u=t(85964),d=t(67751),l=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,null,[{key:"getSingleFlight",value:function(e){var n=JSON.stringify(e);if(this.mapInstance.has(n)){var t=this.mapInstance.get(n);if(t)return t}var r=new p(e);return this.mapInstance.set(n,r),r}},{key:"load",value:function(){var n=(0,r.Z)(o().mark((function n(t,r){var a,s,i,c=arguments;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:{},"object"===typeof t&&(t=JSON.stringify(t)),s=e.getSingleFlight(a),e.mapInstance.set(t,s),i=new u.g(t),n.abrupt("return",s.load(i,r));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}]),e}();l.mapInstance=new Map;var p=function(){function e(n){(0,a.Z)(this,e),this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(c.Dt,n)}return(0,s.Z)(e,[{key:"load",value:function(){var e=(0,r.Z)(o().mark((function e(n,t){var r,a,s,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=d.U.get(n.key))){e.next=3;break}return e.abrupt("return",Promise.resolve(r));case 3:return a=!1,(s=this.mapRequestCalling.get(n.key))||(s=n,a=!0,this.mapRequestCalling.set(s.key,s)),e.abrupt("return",new Promise((function(e,n){if(!s)return n("Not found request!");s.add(e,n),a&&i.fetch(s,t)})));case 7:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(e,n){var t=this;if(!this.validateLimit())return this.addRequestQueue(e,n);this.createTimeLogs(),n().then((function(n){d.U.set(e.key,n,t.config.cache),e.resolves(n)})).catch((function(n){e.rejects(n)})).finally((function(){t.mapRequestCalling.delete(e.key),t.fetchRequestQueue(n)}))}},{key:"fetchRequestQueue",value:function(e){if(this.validateLimit()){var n=this.requestQueue.shift();n&&this.load(n,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}}},{key:"addRequestQueue",value:function(e,n){var t,r=this;this.requestQueue.push(e),this.intervalRequest=setInterval((function(){r.fetchRequestQueue(n)}),null===(t=this.config.limit)||void 0===t?void 0:t.time)}},{key:"validateLimit",value:function(){if(!this.config.limit)return!1;var e=this.timeLogs[0]||0,n=(new Date).getTime();return this.timeLogs.length<this.config.limit.calls||n-e>this.config.limit.time}},{key:"createTimeLogs",value:function(){var e;if(this.config.limit){var n=(new Date).getTime();this.timeLogs.push(n),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}}]),e}()},63805:function(e,n,t){t.d(n,{OB:function(){return a},ef:function(){return s}});var r=t(53933),a="production",s=function(){switch(r.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}}()},34559:function(e,n,t){t.d(n,{sA:function(){return o},kU:function(){return c},uR:function(){return u}});var r=t(95418),a=t(16200),s=t.n(a),i=t(63805),o=function(e){return new Promise((function(n){return setTimeout(n,e)}))},c=function(e){return r.account.isAddress(e)?"https://explorer.solana.com/address/".concat(e,"?cluster=").concat(i.ef):"https://explorer.solana.com/tx/".concat(e,"?cluster=").concat(i.ef)},u=function(e){return e?s()(e):s()("0")}}}]);
//# sourceMappingURL=89.926f2cd9.chunk.js.map