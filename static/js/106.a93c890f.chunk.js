(globalThis.webpackChunksen_swap=globalThis.webpackChunksen_swap||[]).push([[106],{86797:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>_t,Widget:()=>Yt,widgetConfig:()=>Zt});var n=s(55754),o=s(49142),i=s(92950),a=s(45055),r=s(95418),l=s(78589),d=s(4550),c=s.n(d),u=s(76907),h=s.n(u),m=s(21111),p=s.n(m),f=s(16200),g=s.n(f),v=s(63805);const x=(e,t=4,s="...")=>e.substring(0,t)+s+e.substring(e.length-t,e.length),y=e=>r.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${v.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${v.ef}`,j=e=>e&&Number.isFinite(Number(e))?g()(e):g()("0");var b=s(45263);const w=({chartData:e=[],labels:t=[],type:s="line",configs:n,disableAxe:o=!1,chartId:a="sen_chart"})=>{const{backgroundColor:r}=n||{},[l,d]=(0,i.useState)(!1),c=(0,i.useCallback)(((e,t,s)=>({labels:t,datasets:[{...n,data:e,backgroundColor:s}]})),[n]),u=(0,i.useRef)(null),m=(0,i.useCallback)((()=>{var e,t;if(!u||!r)return"#dadada";const n=null===u||void 0===u||null===(e=u.current)||void 0===e||null===(t=e.canvas)||void 0===t?void 0:t.getContext("2d"),o=null===n||void 0===n?void 0:n.createLinearGradient(0,0,0,180);null===o||void 0===o||o.addColorStop(0,r),null===o||void 0===o||o.addColorStop(1,`${r}00`);return"line"===s?o:r}),[r,s]);return(0,i.useEffect)((()=>{var s;const n=u.current,o=null===n||void 0===n||null===(s=n.data.datasets)||void 0===s?void 0:s.find((({data:e})=>e)),i=p()(null===o||void 0===o?void 0:o.data,e);n&&!i&&(n.data=c(e,t,m()),null===n||void 0===n||n.update())}),[e,c,m,t]),(0,b.jsx)("canvas",{id:a,height:"180px",ref:e=>{if(!e)return;const t=e.getContext("2d");t&&!l&&(u.current=new(h())(t,{type:s,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!o}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!o,beginAtZero:!1,maxTicksLimit:8,callback:function(e,t,s){return j(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:(e,t)=>{const s=document.getElementById(a);s&&(s.style.cursor=t[0]?"pointer":"default")}}}}),d(!0))}})};const k={"logo-telegram":s.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"},C=(0,i.forwardRef)((({name:e,className:t,...s},n)=>{const o=t?"anticon "+t:"anticon";return(0,b.jsx)("span",{className:o,...s,children:k[e]?(0,b.jsx)("ion-icon",{ref:n,src:k[e]}):(0,b.jsx)("ion-icon",{ref:n,name:e})})})),S=({icons:e=[],defaultIcon:t=(0,b.jsx)(C,{name:"help-outline"}),...s})=>(0,b.jsx)(l.Avatar.Group,{children:null===e||void 0===e?void 0:e.map(((e,n)=>(0,b.jsx)(l.Avatar,{src:e,style:{backgroundColor:"#2D3355",border:"none"},...s,children:t},n)))}),A=()=>(0,b.jsx)(l.Row,{style:{height:170},align:"middle",justify:"center",children:(0,b.jsx)(l.Col,{children:(0,b.jsx)(l.Empty,{})})});var T=s(20418),I=s(31633);const M={ttl:3e4},R={limit:{calls:10,time:1e3},cache:M};class D{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class B{static set(e,t,s=M){this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),s.ttl)}static get(e){return this.mapCache.get(e)}}B.mapCache=new Map;class z{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new N(e);return this.mapInstance.set(t,s),s}static async load(e,t,s={}){"object"===typeof e&&(e=JSON.stringify(e));let n=z.getSingleFlight(s);z.mapInstance.set(e,n);const o=new D(e);return n.load(o,t)}}z.mapInstance=new Map;class N{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(R,e)}async load(e,t){const s=B.get(e.key);if(s)return Promise.resolve(s);let n=!1,o=this.mapRequestCalling.get(e.key);return o||(o=e,n=!0,this.mapRequestCalling.set(o.key,o)),new Promise(((e,s)=>{if(!o)return s("Not found request!");o.add(e,s),n&&this.fetch(o,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{B.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){if(!this.config.limit)return!1;const e=this.timeLogs[0]||0,t=(new Date).getTime();if(this.timeLogs.length<this.config.limit.calls)return!0;return t-e>this.config.limit.time}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}const P=(e,t)=>{const{mint_a:s,mint_b:n,reserve_a:o,reserve_b:i}=t;return e===s?o:e===n?i:BigInt(0)},L=async()=>{const{sol:{sntrPoolAddress:e,sntrAddress:t}}=I.Z,s={icon:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M/logo.png",symbol:"SNTR",name:"Sentre",address:t,rank:0,price:0,priceChange:0,totalVolume:0};try{var n,o;const i=await(null===(n=window.sentre)||void 0===n||null===(o=n.swap)||void 0===o?void 0:o.getPoolData(e)),{mint_a:a,mint_b:l}=i,d=P(t===a?l:a,i),c=P(t,i);return s.price=Number(r.utils.undecimalize(d,9))/Number(r.utils.undecimalize(c,9)),s}catch(i){return s}},E=async(e="")=>z.load("fetchCGK"+e,"sentre"===e?L:()=>r.utils.parseCGK(e)),q=(e,t)=>{let s=Math.floor(16777215*Math.random());if(e){s=0;for(let t=0;t<e.length;t++)s=e.charCodeAt(t)+((s<<5)-s)}var n=[0,0,0];for(let i=0;i<3;i++){var o=s>>8*i&255;n[i]=o}return`rgba(${n[0]}, 100, ${n[1]},${t||1})`};var F=s(21995),U=s.n(F);new T.Z;const _=async(e,t)=>{try{const s=await U()({method:"get",url:`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&days=${t.days}&interval=${t.interval}`});return s.data.prices.map((e=>({time:e[0],val:e[1]})))}catch(s){return[]}};var Z;!function(e){e.day="day",e.week="week",e.month="month",e.year="year"}(Z||(Z={}));const Y={day:{amount:4,unit:"hours",format:"HH:00"},week:{amount:1,unit:"days",format:"MMM DD"},month:{amount:5,unit:"days",format:"MMM DD"},year:{amount:2,unit:"months",format:"MMM DD"}},W={day:{days:1,interval:"hourly"},week:{days:7,interval:"daily"},month:{days:31,interval:"daily"},year:{days:365,interval:"daily"}},K="#3E8C6A",G=0,H=14,O="TVL",Q="transparent",V="UNKN",J=()=>{var e,t,s,o,a,r,d,u,h;const[m,p]=(0,i.useState)(Z.week),[f,g]=(0,i.useState)([]),v={borderColor:Q,borderRadius:G,pointRadius:G,tooltip:O,pointHitRadius:H,pointHoverRadius:G,backgroundColor:K},x=(0,n.useSelector)((e=>e.bid)),y=(0,n.useSelector)((e=>e.ask)),k=(0,i.useMemo)((()=>{var e,t;return[null===(e=y.mintInfo)||void 0===e?void 0:e.logoURI,null===(t=x.mintInfo)||void 0===t?void 0:t.logoURI]}),[null===(e=y.mintInfo)||void 0===e?void 0:e.logoURI,null===(t=x.mintInfo)||void 0===t?void 0:t.logoURI]),C=(0,i.useMemo)((()=>{var e,t;return[(null===(e=y.mintInfo)||void 0===e?void 0:e.symbol)||V,(null===(t=x.mintInfo)||void 0===t?void 0:t.symbol)||V]}),[null===(s=y.mintInfo)||void 0===s?void 0:s.symbol,null===(o=x.mintInfo)||void 0===o?void 0:o.symbol]),T=(0,i.useCallback)((e=>{const t=[],{format:s,amount:n,unit:o}=Y[m];let i=c()();for(const a of e.reverse()){const e=c()(a.time).format(s);if(e===i.format(s)){let r=e;e===c()().format(s)&&(r=c()().format("HH:mm")),i&&t.unshift({label:r,val:a.val}),i=i.subtract(n,o)}else"00:00"===e&&t.unshift({label:i.format("MMM DD"),val:a.val})}g(t)}),[m]),I=(0,i.useCallback)((e=>{const t=[],{format:s,amount:n,unit:o}=Y[m];let i=c()();for(const a of e.reverse()){const e=c()(a.time).format(s);e!==i.format(s)||(i=i.subtract(n,o),t.unshift({label:e,val:a.val}))}g(t)}),[m]),M=(0,i.useCallback)((async()=>{var e,t,s,n;const o=null===(e=y.mintInfo)||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.coingeckoId,i=null===(s=x.mintInfo)||void 0===s||null===(n=s.extensions)||void 0===n?void 0:n.coingeckoId,a=x.accountAddress===y.accountAddress;if(!o||!i||a)return g([]);const r=W[m],[l,d]=await Promise.all([_(i,r),_(o,r)]),c=[];for(let u=l.length-1;u>=0;u--){const e=l[u],t=d[d.length-l.length+u];e&&t&&c.unshift({time:e.time,val:e.val/t.val})}return m===Z.day?T(c):I(c)}),[y.accountAddress,null===(a=y.mintInfo)||void 0===a||null===(r=a.extensions)||void 0===r?void 0:r.coingeckoId,x.accountAddress,null===(d=x.mintInfo)||void 0===d||null===(u=d.extensions)||void 0===u?void 0:u.coingeckoId,m,I,T]);(0,i.useEffect)((()=>{M()}),[M]);const R=(null===(h=f.at(-1))||void 0===h?void 0:h.val)||0,D=j(R).format(R>1?"0,0.[00]":"0,0.[00000000]");return(0,b.jsx)(l.Card,{bordered:!1,className:"card-swap",bodyStyle:{paddingTop:28},children:(0,b.jsxs)(l.Row,{gutter:[24,24],children:[(0,b.jsx)(l.Col,{flex:"auto",children:(0,b.jsxs)(l.Row,{gutter:[20,20],children:[(0,b.jsx)(l.Col,{flex:"auto",children:(0,b.jsxs)(l.Space,{size:4,align:"center",children:[(0,b.jsx)(S,{icons:k,size:24}),(0,b.jsx)(l.Typography.Text,{children:C.join("/")})]})}),f&&!!f.length&&(0,b.jsx)(l.Col,{children:(0,b.jsxs)(l.Radio.Group,{defaultValue:Z.week,onChange:e=>p(e.target.value),className:"chart-radio-btn",children:[(0,b.jsx)(l.Radio.Button,{value:Z.day,children:"1D"}),(0,b.jsx)(l.Radio.Button,{value:Z.week,children:"1W"}),(0,b.jsx)(l.Radio.Button,{value:Z.month,children:"1M"}),(0,b.jsx)(l.Radio.Button,{value:Z.year,children:"1Y"})]})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(l.Typography.Title,{level:2,children:R?D:""})})]})}),(0,b.jsx)(l.Col,{span:24,children:f&&f.length?(0,b.jsx)(w,{chartData:null===f||void 0===f?void 0:f.map((e=>e.val)),labels:null===f||void 0===f?void 0:f.map((e=>e.label)),configs:v}):(0,b.jsx)(A,{})})]})})},X=BigInt(1e9),$=({hops:e,onCallback:t=(()=>{}),disabled:s=!1,wrapAmount:a=BigInt(0),hightImpact:d=!1})=>{const[c,u]=(0,i.useState)(!1),h=(0,n.useSelector)((e=>e.bid)),m=(0,n.useSelector)((e=>e.ask)),{slippage:p}=(0,n.useSelector)((e=>e.settings)),{wallet:{address:f}}=(0,o.useWallet)(),g=(0,i.useCallback)((async()=>{const{swap:t,splt:s,wallet:n}=window.sentre;if(!n)return;const o=await Promise.all(e.map((async({srcMintInfo:{address:e},dstMintInfo:{address:t},poolData:{address:n}})=>({poolAddress:n,srcAddress:await s.deriveAssociatedAddress(f,e),dstAddress:await s.deriveAssociatedAddress(f,t)})))),{srcMintInfo:{decimals:i}}=e[0],a=r.utils.decimalize(h.amount,i),{dstMintInfo:{decimals:l}}=e[e.length-1],d=r.utils.decimalize(m.amount,l)*(X-r.utils.decimalize(p,9))/X;return await t.route(a,d,o,n)}),[e,h,m,p,f]);return(0,b.jsx)(l.Button,{type:"primary",onClick:async()=>{try{u(!0),await(async()=>{if(!a)return;const{swap:e,wallet:t}=window.sentre;return t?await e.wrapSol(a,t):void 0})();const{txId:e}=await g()||{};return window.notify({type:"success",description:"Swap successfully. Click to view details.",onClick:()=>window.open(y(e||""),"_blank")}),t()}catch(e){return window.notify({type:"error",description:e.message})}finally{u(!1)}},disabled:s,loading:c,block:!0,children:d?"Too High Price Impact":"Swap"})},ee=({icons:e=["",""],size:t=24,defaultIcon:s=(0,b.jsx)(C,{size:t,name:"help-outline"})})=>(0,b.jsx)(l.Space,{children:null===e||void 0===e?void 0:e.map(((n,o)=>(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(l.Avatar,{src:n,size:t,children:s}),e.length>o+1&&(0,b.jsx)(C,{name:"chevron-forward-outline"})]},o)))}),te=({bidData:e,askData:t})=>{var s,n;const o=j(Number(null===t||void 0===t?void 0:t.amount)/Number(null===e||void 0===e?void 0:e.amount)).format("0,0.[000000]"),i=`${null===t||void 0===t||null===(s=t.mintInfo)||void 0===s?void 0:s.symbol}/${null===e||void 0===e||null===(n=e.mintInfo)||void 0===n?void 0:n.symbol}`;return(0,b.jsxs)(l.Space,{children:[(0,b.jsx)(l.Typography.Text,{children:o}),(0,b.jsx)(l.Typography.Text,{children:i})]})},se=({value:e=!1,onChange:t=(()=>{}),priceRate:s=(0,b.jsx)(i.Fragment,{})})=>(0,b.jsxs)(l.Space,{size:4,children:[(0,b.jsx)(l.Button,{type:"text",onClick:()=>t(!e),shape:"circle",icon:(0,b.jsx)(C,{name:"swap-horizontal-outline"})}),(0,b.jsx)(l.Typography.Text,{children:s})]}),ne=new T.Z;class oe{constructor(){this.hops=[],this.amounts=[],this.amount=""}}const ie=(e,t)=>{const{mint_a:s,mint_b:n,reserve_a:o,reserve_b:i}=t;if(e===s)return o;if(e===n)return i;throw new Error("Cannot find reserves")},ae=(e,t,s,n,o)=>{const{pools:i,mints:a}=o;if(3===i.length)return;const r=t.get(s);null===r||void 0===r||r.forEach(((o,r)=>{if(i.includes(r))return;let{mint_b:l}=o;if(o.mint_a!==s&&(l=o.mint_a),a.includes(l))return;const d={pools:[...i,r],mints:[...a,l]};l!==n?ae(e,t,l,n,d):e.push(d)}))},re=async(e,t,s,n)=>{var o,i;const a=null===(o=s.mintInfo)||void 0===o?void 0:o.address,l=null===(i=n.mintInfo)||void 0===i?void 0:i.address;if(!r.account.isAddress(a)||!r.account.isAddress(l))return[];const d=[];let c=a,u="";for(const r of t){const t=e[r],{mint_a:s,mint_b:n}=t;if(c!==s&&c!==n)return[];u=c===s?n:s;const o=await ne.findByAddress(c),i=await ne.findByAddress(u);if(!o||!i)return[];const a={poolData:{address:r,...t},srcMintInfo:o,dstMintInfo:i};c=u,d.push(a)}return d},le=r.Swap.oracle,de=(e,t)=>{const{srcMintInfo:{address:s,decimals:n},dstMintInfo:{address:o,decimals:i}}=t,{fee_ratio:a,tax_ratio:l}=t.poolData,d=ie(s,t.poolData),c=ie(o,t.poolData);if(!d||!c)return"0";const{askAmount:u}=le.swap(r.utils.decimalize(e,n),d,c,a,l);return r.utils.undecimalize(u,i)},ce=(e,t)=>{const{srcMintInfo:{address:s,decimals:n},dstMintInfo:{address:o,decimals:i}}=t,{fee_ratio:a,tax_ratio:l}=t.poolData,d=ie(s,t.poolData),c=ie(o,t.poolData),u=le.inverseSwap(r.utils.decimalize(e,i),d,c,a,l);return r.utils.undecimalize(u,n)},ue=()=>{const{route:e}=(0,n.useSelector)((e=>e.route)),t=(0,n.useSelector)((e=>e.bid)),s=(0,n.useSelector)((e=>e.ask)),{amounts:o=[],hops:a=[]}=e||{};return(0,i.useMemo)((()=>{let e=t.amount;return a.forEach(((t,n)=>{const{dstMintInfo:i,srcMintInfo:a,poolData:l}=t,d={...l},c=o[n],u=a.decimals,h=o[n+1]||s.amount,m=i.decimals;a.address===l.mint_a?(d.reserve_a+=r.utils.decimalize(c,u),d.reserve_b-=r.utils.decimalize(h,m)):(d.reserve_b+=r.utils.decimalize(c,u),d.reserve_a-=r.utils.decimalize(h,m)),e=de(e,{...t,poolData:d})})),1-Number(e)/Number(s.amount)}),[o,s.amount,t.amount,a])},he=({label:e="",content:t=""})=>(0,b.jsxs)(l.Row,{children:[(0,b.jsx)(l.Col,{flex:"auto",children:(0,b.jsx)(l.Typography.Text,{type:"secondary",children:e})}),(0,b.jsx)(l.Col,{children:(0,b.jsx)("span",{children:t})})]}),me=()=>{const[e,t]=(0,i.useState)(!1),{slippage:s}=(0,n.useSelector)((e=>e.settings)),{route:o}=(0,n.useSelector)((e=>e.route)),a=(0,n.useSelector)((e=>e.bid)),r=(0,n.useSelector)((e=>e.ask)),d=ue(),{mintInfo:c}=a,u=(0,i.useMemo)((()=>{if(null===o||void 0===o||!o.hops)return;const{logoURI:e}=c||{};let t=[e];for(const s of null===o||void 0===o?void 0:o.hops){const{dstMintInfo:{logoURI:e}}=s;e&&t.push(e)}return t}),[c,null===o||void 0===o?void 0:o.hops]),h=(0,i.useCallback)((()=>a.amount&&r.amount?e?(0,b.jsx)(te,{bidData:r,askData:a}):(0,b.jsx)(te,{bidData:a,askData:r}):(0,b.jsx)(i.Fragment,{})),[r,a,e]);return(0,i.useEffect)((()=>{h()}),[h]),(0,b.jsxs)(l.Row,{gutter:[12,12],children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(he,{label:"Price impact",content:(0,b.jsx)(l.Typography.Text,{type:"danger",children:j(Number(d)).format("0.[0000]%")})})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(he,{label:"Price",content:(0,b.jsx)(se,{priceRate:h(),value:e,onChange:t})})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(he,{label:"Slippage Tolerance",content:j(s).format("0.[00]%")})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(he,{label:"Route",content:(0,b.jsx)(ee,{icons:u})})})]})};var pe=s(19289);const fe=(0,pe.createAsyncThunk)("bid/updateBidData",(async({prioritized:e,reset:t,...s},{getState:n})=>{const{bid:{priority:o},ask:{priority:i}}=n();Number(s.amount)<0&&(s.amount=void 0);const a=t?0:e?i+1:o;return{...s,priority:a}})),ge=(0,pe.createSlice)({name:"bid",initialState:{amount:"",accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:e=>{e.addCase(fe.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,ve=()=>{const e=(0,n.useDispatch)(),{route:t}=(0,n.useSelector)((e=>e.route)),{amount:s,mintInfo:a,accountAddress:d}=(0,n.useSelector)((e=>e.bid)),{amount:c}=(0,n.useSelector)((e=>e.ask)),{advanced:u}=(0,n.useSelector)((e=>e.settings)),{accounts:h}=(0,o.useAccount)(),m=ue(),p=(null===t||void 0===t?void 0:t.hops)||[],f=(0,i.useMemo)((()=>{const{amount:e}=h[d]||{},t=e||BigInt(0);if(!a||!Number(s)||a.address!==r.DEFAULT_WSOL)return BigInt(0);const n=r.utils.decimalize(s,a.decimals);return n<=t?BigInt(0):n-t}),[h,d,s,a]),g=!u&&100*m>12.5,v=g||!p.length||!parseFloat(s)||parseFloat(s)<0||!parseFloat(c)||parseFloat(c)<0;return(0,b.jsx)(l.Card,{bordered:!1,children:(0,b.jsxs)(l.Row,{gutter:[24,24],children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(l.Typography.Title,{level:5,children:"Review & Swap"})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(me,{})}),(0,b.jsx)(l.Col,{span:24})," ",(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)($,{hops:p,wrapAmount:f,disabled:v,hightImpact:g,onCallback:()=>e(fe({amount:"",prioritized:!0}))})})]})})},xe=e=>{const{tokenProvider:t}=(0,o.useMint)(),{pools:s}=(0,o.usePool)(),[n,a]=(0,i.useState)([]),r=(0,i.useCallback)((async()=>{if(!e)return a([void 0]);const n=await t.findByAddress(e);if(n)return a([n]);const o=Object.values(s).find((({mint_lpt:t})=>t===e));if(!o)return a([void 0]);const{mint_a:i,mint_b:r}=o,l=await t.findByAddress(i),d=await t.findByAddress(r);return a([l,d])}),[e,s,t]);return(0,i.useEffect)((()=>{r()}),[r]),n},ye=({mintAddress:e,size:t=24,icon:s=(0,b.jsx)(C,{name:"diamond-outline"})})=>{const n=xe(e);return(0,b.jsx)(l.Avatar.Group,{style:{display:"block"},children:n.map(((e,n)=>(0,b.jsx)(l.Avatar,{src:null===e||void 0===e?void 0:e.logoURI,size:t,style:{backgroundColor:"#2D3355",border:"none"},children:s},(null===e||void 0===e?void 0:e.address)||n)))})},je=({mintAddress:e})=>{const t=xe(e),s=(0,i.useMemo)((()=>t.map((e=>e?e.symbol:"UNKN")).join(" / ")),[t]);return(0,b.jsx)("span",{children:s})},be={address:"",icon:"",name:"TOKEN",price:0,priceChange:0,rank:0,symbol:"TOKEN",totalVolume:0},we=e=>{const[t,s]=(0,i.useState)(be),{tokenProvider:n}=(0,o.useMint)(),a=(0,i.useCallback)((async()=>{if(!e)return s(be);try{var t;const o=await n.findByAddress(e),i=null===o||void 0===o||null===(t=o.extensions)||void 0===t?void 0:t.coingeckoId,a=await E(i);return s(a)}catch(o){return s(be)}}),[e,n]);return(0,i.useEffect)((()=>{a()}),[a]),t},ke=({mintAddress:e="",tvl:t="",symbol:s="",price:n,format:o="0,0.[00]a"})=>(0,b.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,b.jsx)(ye,{mintAddress:e}),(0,b.jsxs)(l.Space,{children:[(0,b.jsx)(l.Typography.Text,{children:"TVL:"}),(0,b.jsx)(l.Typography.Title,{level:5,children:j(t).format(o)}),(0,b.jsx)(l.Typography.Title,{level:5,children:s})]}),(0,b.jsxs)(l.Typography.Text,{className:"caption",type:"secondary",children:["~ $",j(n).format(o)]})]}),Ce=()=>{const{route:e}=(0,n.useSelector)((e=>e.route)),t=(0,n.useSelector)((e=>e.ask.mintInfo)),s=(0,n.useSelector)((e=>e.bid.mintInfo)),o=we(null===t||void 0===t?void 0:t.address),a=we(null===s||void 0===s?void 0:s.address),{dstMintInfo:d,poolData:c}=(null===e||void 0===e?void 0:e.hops.at(-1))||{},{srcMintInfo:u,poolData:h}=(null===e||void 0===e?void 0:e.hops[0])||{},m=(e,t)=>r.account.isAddress(e)&&t?ie(e,t):BigInt(0),p=(0,i.useMemo)((()=>{if(null===d||void 0===d||!d.decimals)return 0;const e=m(null===d||void 0===d?void 0:d.address,c);return Number(r.utils.undecimalize(e,d.decimals))}),[null===d||void 0===d?void 0:d.address,null===d||void 0===d?void 0:d.decimals,c]),f=(0,i.useMemo)((()=>{if(null===u||void 0===u||!u.decimals)return 0;const e=m(null===u||void 0===u?void 0:u.address,h);return Number(r.utils.undecimalize(e,u.decimals))}),[null===u||void 0===u?void 0:u.address,null===u||void 0===u?void 0:u.decimals,h]);return(0,b.jsx)(l.Card,{bordered:!1,children:(0,b.jsxs)(l.Row,{gutter:[16,16],wrap:!1,children:[(0,b.jsx)(l.Col,{span:11,children:(0,b.jsx)(ke,{mintAddress:null===s||void 0===s?void 0:s.address,tvl:f,symbol:null===s||void 0===s?void 0:s.symbol,price:f*a.price})}),(0,b.jsx)(l.Col,{children:(0,b.jsx)(l.Divider,{type:"vertical",style:{height:"100%"}})}),(0,b.jsx)(l.Col,{span:11,children:(0,b.jsx)(ke,{mintAddress:null===t||void 0===t?void 0:t.address,tvl:p,symbol:null===t||void 0===t?void 0:t.symbol,price:p*o.price})})]})})};const Se=s.p+"static/media/sen.f2d012c907167ba613b035621b6423cb.svg",Ae=({spacing:e=4,iconSize:t=20})=>(0,b.jsxs)(l.Space,{size:e,children:[(0,b.jsx)(l.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:"Powered by"}),(0,b.jsx)(l.Avatar,{src:Se,size:t})]}),Te=({label:e,value:t,onClick:s,active:n=!1})=>(0,b.jsx)(l.Typography.Text,{style:{cursor:"pointer",color:n?"#F9575E":"inherit"},onClick:()=>s(t),children:e}),Ie=({value:e,onChange:t})=>(0,b.jsxs)(l.Row,{gutter:[8,8],children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsxs)(l.Row,{gutter:[8,8],wrap:!1,children:[(0,b.jsx)(l.Col,{flex:"auto",children:(0,b.jsx)(l.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Slippage Tolerance"})}),(0,b.jsx)(l.Col,{children:(0,b.jsx)(l.Tooltip,{placement:"right",title:(0,b.jsxs)("span",{children:["Your transaction will be canceled if the confirmed price breaks the limited range of"," ",(0,b.jsx)("strong",{style:{color:"#f9575e"},children:100*e+"%."})]}),children:(0,b.jsx)(l.Button,{type:"text",shape:"circle",size:"small",icon:(0,b.jsx)(C,{name:"information-circle-outline"})})})})]})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(l.Row,{gutter:[8,8],wrap:!1,justify:"space-between",children:[.001,.005,.01,.05,1].map(((s,n)=>(0,b.jsx)(l.Col,{children:(0,b.jsx)(Te,{label:1===s?"Freely":100*s+"%",value:s,onClick:t,active:s===e})},n)))})})]}),Me=({value:e,onChange:t})=>(0,b.jsxs)(l.Row,{gutter:[8,8],children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsxs)(l.Row,{gutter:[8,8],wrap:!1,children:[(0,b.jsx)(l.Col,{flex:"auto",children:(0,b.jsx)(l.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Advanced Mode"})}),(0,b.jsx)(l.Col,{children:(0,b.jsx)(l.Switch,{size:"small",checkedChildren:(0,b.jsx)(C,{name:"calculator-outline"}),unCheckedChildren:(0,b.jsx)(C,{name:"sparkles-outline"}),checked:e,onChange:t})})]})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsxs)(l.Typography.Paragraph,{style:{fontSize:12,textAlign:"justify"},children:[(0,b.jsx)(C,{name:"warning-outline"})," This advanced mode will disable the automatic protection that often results in bad rates and lost funds. Only use this mode if you know what you are doing."]})})]}),Re="settings",De=(0,pe.createAsyncThunk)("settings/updateSettings",(async e=>({...e}))),Be=(0,pe.createSlice)({name:Re,initialState:{slippage:.01,advanced:!1},reducers:{},extraReducers:e=>{e.addCase(De.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,ze=()=>{const e=(0,n.useDispatch)(),{slippage:t,advanced:s}=(0,n.useSelector)((e=>e.settings));return(0,b.jsxs)(l.Row,{gutter:[4,4],justify:"end",align:"middle",wrap:!1,children:[(0,b.jsx)(l.Col,{children:(0,b.jsx)(Ae,{})}),(0,b.jsx)(l.Col,{children:(0,b.jsx)(l.Divider,{type:"vertical",style:{padding:0}})}),(0,b.jsx)(l.Col,{children:(0,b.jsx)(l.Popover,{placement:"bottomRight",overlayInnerStyle:{width:300},content:(0,b.jsxs)(l.Row,{gutter:[8,8],children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(l.Typography.Title,{level:5,children:"Settings"})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(Ie,{value:t,onChange:t=>e(De({slippage:t}))})}),(0,b.jsx)(l.Divider,{style:{marginTop:8,marginBottom:8}}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(Me,{value:s,onChange:t=>e(De({advanced:t}))})})]}),trigger:"click",children:(0,b.jsx)(l.Button,{type:"text",shape:"circle",size:"small",icon:(0,b.jsx)(C,{name:"settings-outline"})})})})]})};var Ne=s(36498);const Pe=({onChange:e,isSupportedMint:t,disabled:s=!1})=>{const[n,a]=(0,i.useState)(""),{tokenProvider:r}=(0,o.useMint)(),d=(0,i.useCallback)((async()=>{if(!n||n.length<3)return e(null);const s=(await r.find(n)).filter((({address:e})=>t(e)));return e(s)}),[n,r,e,t]);return(0,i.useEffect)((()=>{d()}),[d]),(0,b.jsx)(l.Card,{className:"card-child",bodyStyle:{padding:8},bordered:!1,children:(0,b.jsx)(l.Input,{placeholder:"Search",value:n,size:"small",bordered:!1,suffix:(0,b.jsx)(l.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:n?()=>a(""):()=>{},icon:(0,b.jsx)(C,{name:n?"close-outline":"search-outline"}),disabled:s}),onChange:e=>a(e.target.value),disabled:s})})},Le=({logoURI:e,symbol:t,name:s,onClick:n,active:o=!1})=>(0,b.jsx)(l.Card,{className:"card-child"+(o?" active":""),bodyStyle:{padding:"8px 16px",cursor:"pointer"},bordered:o,onClick:n,hoverable:!0,children:(0,b.jsx)(l.Row,{gutter:[16,16],children:(0,b.jsx)(l.Col,{span:24,children:(0,b.jsxs)(l.Space,{size:12,style:{marginLeft:-4},children:[(0,b.jsx)(l.Avatar,{src:e,size:32,style:{backgroundColor:"#2D3355",border:"none"},children:(0,b.jsx)(C,{name:"diamond-outline"})}),(0,b.jsx)(l.Typography.Text,{style:{margin:0},children:t}),(0,b.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,b.jsx)(l.Typography.Text,{type:"secondary",style:{margin:0,fontSize:12},children:s})]})})})}),Ee=({value:e,onChange:t})=>{const[s,n]=(0,i.useState)([]),{pools:a}=(0,o.usePool)(),{tokenProvider:d}=(0,o.useMint)(),c=(0,i.useMemo)((()=>a?Object.keys(a).map((e=>{const{mint_a:t,mint_b:s}=a[e];return[t,s]})).flat().filter(((e,t,s)=>s.indexOf(e)===t)):[]),[a]),u=(0,i.useCallback)((e=>c.includes(e)),[c]),h=(0,i.useCallback)((async e=>{if(e)return n(e);const t=(await d.all()).filter((({address:e})=>u(e)));return n(t)}),[d,u]),m=(0,i.useCallback)((e=>{const t=null===e||void 0===e?void 0:e.address;return r.account.isAddress(t)?Object.keys(a).filter((e=>{const{mint_a:s,mint_b:n}=a[e];return[s,n].includes(t)})):[]}),[a]),p=(0,i.useMemo)((()=>(0,b.jsx)(l.Row,{gutter:[16,16],children:s.map(((s,n)=>{const{logoURI:o,symbol:i,name:a,address:r}=s,{address:d}=e.mintInfo||{};return(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(Ne.ZP,{height:48,overflow:!0,children:(0,b.jsx)(Le,{logoURI:o,symbol:i,name:a,onClick:()=>(e=>{const s=m(e);return t({mintInfo:e,poolAddress:void 0,poolAddresses:s})})(s),active:d===r})})},a+n)}))})),[m,t,s,e]);return(0,b.jsxs)(l.Row,{gutter:[16,16],children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(l.Typography.Title,{level:5,children:"Token Selection"})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(l.Divider,{style:{margin:0}})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(Pe,{onChange:h,isSupportedMint:u})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsxs)(l.Row,{gutter:[16,16],style:{height:300,overflow:"auto"},children:[(0,b.jsx)(l.Col,{span:24,children:p}),(0,b.jsx)(l.Col,{span:24})]})})]})},qe=({value:e,onChange:t})=>{const[s,n]=(0,i.useState)(!1),o=(0,a.useHistory)(),{state:r}=(0,a.useLocation)();(0,i.useEffect)((()=>{s&&setTimeout(Ne.be,500)}),[s]);const{logoURI:d,symbol:c}=(null===e||void 0===e?void 0:e.mintInfo)||{};return(0,b.jsxs)(i.Fragment,{children:[(0,b.jsxs)(l.Space,{style:{cursor:"pointer"},onClick:()=>n(!0),children:[(0,b.jsx)(l.Avatar,{size:24,src:d,style:{backgroundColor:"#2D3355",border:"none"},children:(0,b.jsx)(C,{name:"diamond-outline"})}),(0,b.jsx)(l.Typography.Text,{type:"secondary",style:{margin:0},children:c||"TOKEN"}),(0,b.jsx)(l.Divider,{type:"vertical",style:{marginLeft:4}})]}),(0,b.jsx)(l.Modal,{visible:s,onCancel:()=>n(!1),closeIcon:(0,b.jsx)(C,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,b.jsx)(l.Row,{gutter:[16,16],children:(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(Ee,{value:e,onChange:e=>(n(!1),r&&o.replace({...o.location,state:{}}),t(e))})})})})]})},Fe=(0,pe.createAsyncThunk)("ask/updateAskData",(async({prioritized:e,reset:t,...s},{getState:n})=>{const{bid:{priority:o},ask:{priority:i}}=n();return{...s,priority:t?0:e?o+1:i}})),Ue=(0,pe.createSlice)({name:"ask",initialState:{amount:"",accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:e=>{e.addCase(Fe.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer;let _e;const Ze=(0,i.forwardRef)((({max:e,onChange:t,...s},n)=>{var o;const[a,r]=(0,i.useState)(""),[d,c]=(0,i.useState)(null),u=(0,i.useRef)(n),h=(0,i.useCallback)((s=>{const n=e=>{_e&&(clearTimeout(_e),_e=void 0),r(e),_e=setTimeout((()=>r("")),500)};return/^\d*(\.\d*)?$/.test(s)?e&&parseFloat(s)>parseFloat(e)?n("Not enough balance"):t(s):n("Invalid character")}),[e,t]);return null===u||void 0===u||null===(o=u.current)||void 0===o||o.setSelectionRange(d,d),(0,b.jsx)(l.Tooltip,{title:(0,b.jsxs)(l.Space,{children:[(0,b.jsx)(C,{name:"warning"}),a]}),visible:!!a,children:(0,b.jsx)(l.Input,{...s,onChange:e=>{c(e.target.selectionStart),h(e.target.value||"")},ref:u})})})),Ye=e=>{const[t,s]=(0,i.useState)(0),{tokenProvider:n,getMint:a}=(0,o.useMint)(),r=(0,i.useCallback)((async()=>{if(!e)return s(0);const t=await n.findByAddress(e);if(t)return s(t.decimals);try{const t=await a({address:e});return s(t[e].decimals)}catch(o){}return s(0)}),[a,e,n]);return(0,i.useEffect)((()=>{r()}),[r]),t},We=e=>{const{accounts:t}=(0,o.useAccount)(),{wallet:s}=(0,o.useWallet)(),{amount:n,mint:a}=(0,i.useMemo)((()=>e===s.address?{amount:s.lamports,mint:"11111111111111111111111111111111"}:t[e]||{}),[e,t,s.address,s.lamports]),l=Ye(a);return(0,i.useMemo)((()=>({balance:r.utils.undecimalize(n,l),mint:a,amount:n,decimals:l})),[n,l,a])};const Ke={appId:"sen_swap",url:"https://descartesnetwork.github.io/sen-swap/index.js",senhub:"senhub@https://descartesnetwork.github.io/senhub/index.js"},Ge={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}},He={devnet:{bidDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ"},testnet:{bidDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ"},mainnet:{bidDefault:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",askDefault:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M"}},Oe={devnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"},testnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"},mainnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"}},Qe={manifest:{development:{...Ke},staging:{...Ke},production:{...Ke}}[v.OB],sol:Ge[v.ef],swap:He[v.ef],wormhole:Oe[v.ef]},Ve={accountAddress:"",poolAddresses:[]},Je=e=>{const{wallet:t}=(0,o.useWallet)(),{tokenProvider:s}=(0,o.useMint)(),{pools:n}=(0,o.usePool)(),[a,l]=(0,i.useState)(Ve),d=(0,i.useCallback)((async()=>{if(!r.account.isAddress(e)||!Object.keys(n).length)return l(Ve);const o=await s.findByAddress(e);if(!o)return l(Ve);const{splt:i}=window.sentre,a=await i.deriveAssociatedAddress(t.address,e),d=Object.keys(n).filter((t=>{const{mint_a:s,mint_b:o}=n[t];return[s,o].includes(e)}));l({accountAddress:a,mintInfo:o,poolAddress:"",poolAddresses:d})}),[e,n,s,t.address]);return(0,i.useEffect)((()=>{d()}),[d]),a},Xe=()=>{var e;const t=(0,n.useDispatch)(),{wallet:s}=(0,o.useWallet)(),d=(0,n.useSelector)((e=>e.ask)),{state:c}=(0,a.useLocation)(),{balance:u}=We(d.accountAddress),h=Je(Qe.swap.askDefault),m=null===c||void 0===c?void 0:c.poolAddress;(0,i.useEffect)((()=>{r.account.isAddress(d.accountAddress)||r.account.isAddress(m)||t(Fe(h))}),[d.accountAddress,t,m,h]);const p=(0,i.useMemo)((()=>({mintInfo:d.mintInfo,poolAddresses:d.poolAddresses})),[d]);return(0,b.jsxs)(l.Row,{gutter:[8,8],children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(l.Typography.Text,{children:"To"})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(Ze,{placeholder:"0",value:d.amount,onChange:e=>t(Fe({amount:e,prioritized:!0})),size:"large",prefix:(0,b.jsx)(qe,{value:p,onChange:async e=>{const{splt:n}=window.sentre,{address:o}=e.mintInfo||{};if(!r.account.isAddress(o))return t(Fe({...e}));const i=await n.deriveAssociatedAddress(s.address,o);t(Fe({accountAddress:i,...e}))}})})}),(0,b.jsx)(l.Col,{flex:"auto"}),(0,b.jsx)(l.Col,{className:"caption",children:(0,b.jsxs)(l.Typography.Text,{type:"secondary",children:["Available: ",j(u||0).format("0,0.[00]")," ",(null===(e=p.mintInfo)||void 0===e?void 0:e.symbol)||"TOKEN"]})})]})},$e="#F9575E",et=()=>(0,b.jsxs)(l.Space,{size:4,children:[(0,b.jsx)(l.Tag,{style:{margin:0,borderRadius:4,color:q($e)},color:q($e,.2),children:"Wormhole Bridge"}),(0,b.jsx)(l.Typography.Text,{type:"secondary",children:"Supported"})]});var tt=s(52222),st=s(53933);const nt={mainnet:"worm2ZoG2kUd4vFXhvjh93UUH596ayRfgQ2MgjNMTth",testnet:"Brdguy7BmNB4qwEbcqqMbyV5CyJd2sxQNUn6NEpMSsUb",devnet:"3u8hJUVTA4jH1wYAyUur7FFZVQ8H635K3tSHHF4ssjQ5"},ot={mainnet:"wormDTUJ6AWPNvk59vGQbDvGJmqbDTdgWgAqcLBCgUb",testnet:"A4Us8EhCC76XdGAN17L4KpRNEK423nMivVHZzZqFqqBg",devnet:"DZnkkTmCiFWfYTfT41X3Rd1kDgozqzxWaHqsw6W4x2oe"},it=()=>st.Z.get("network")||"mainnet",at=async e=>{const t=(()=>{const e=it();return{chainId:tt.rQ,tokenBridgeAddress:ot[e],bridgeAddress:nt[e]}})();return(0,tt._b)(window.sentre.splt.connection,t.tokenBridgeAddress,e)},rt=()=>{var e;const t=(0,n.useDispatch)(),{wallet:{address:s,lamports:d}}=(0,o.useWallet)(),c=(0,n.useSelector)((e=>e.bid)),{getMint:u}=(0,o.useMint)(),[h,m]=(0,i.useState)(!1),{balance:p,decimals:f,mint:g,amount:v}=We(c.accountAddress),x=Je(Qe.swap.bidDefault),{state:y}=(0,a.useLocation)(),w=null===y||void 0===y?void 0:y.poolAddress;(0,i.useEffect)((()=>{r.account.isAddress(c.accountAddress)||r.account.isAddress(w)||t(fe(x))}),[c.accountAddress,t,w,x]);const k=(0,i.useMemo)((()=>({mintInfo:c.mintInfo,poolAddresses:c.poolAddresses})),[c]),C=(0,i.useMemo)((()=>{if(g!==r.DEFAULT_WSOL||f<1)return p;const e=r.utils.decimalize(.01,f),t=d+v-e;return t<=v?r.utils.undecimalize(v,f):r.utils.undecimalize(t,f)}),[v,p,f,d,g]),S=(0,i.useCallback)((e=>t(fe({amount:e,prioritized:!0}))),[t]);return(0,i.useEffect)((()=>{(async()=>{var e;const t=null===k||void 0===k||null===(e=k.mintInfo)||void 0===e?void 0:e.address;if(!r.account.isAddress(t))return;const s=await at(t);m(s)})()}),[u,k]),(0,b.jsxs)(l.Row,{gutter:[8,8],children:[(0,b.jsx)(l.Col,{flex:"auto",children:(0,b.jsx)(l.Typography.Text,{children:"From"})}),h&&(0,b.jsx)(l.Col,{children:(0,b.jsx)(et,{})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(Ze,{placeholder:"0",value:c.amount,onChange:S,size:"large",prefix:(0,b.jsx)(qe,{value:k,onChange:async e=>{const{splt:n}=window.sentre,{address:o}=e.mintInfo||{};if(t(fe({amount:"",prioritized:!0})),!r.account.isAddress(o))return t(fe({...e}));const i=await n.deriveAssociatedAddress(s,o);return t(fe({accountAddress:i,...e}))}}),suffix:(0,b.jsx)(l.Button,{type:"text",size:"small",style:{fontSize:12,marginRight:-7},onClick:()=>S(C),children:"MAX"}),max:C})}),(0,b.jsx)(l.Col,{flex:"auto"}),(0,b.jsx)(l.Col,{className:"caption",children:(0,b.jsxs)(l.Typography.Text,{type:"secondary",children:["Available: ",j(C||0).format("0,0.[00]")," ",(null===(e=k.mintInfo)||void 0===e?void 0:e.symbol)||"TOKEN"]})})]})},lt="route",dt={route:{amount:"",amounts:[],hops:[]}},ct=(0,pe.createAsyncThunk)("route/updateRouteInfo",(async({route:e},{getState:t})=>{const{route:s}=t();return e?{route:e}:{route:s}})),ut=(0,pe.createSlice)({name:lt,initialState:dt,reducers:{},extraReducers:e=>{e.addCase(ct.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,ht=({spacing:e=12})=>{const t=(0,n.useDispatch)(),[s,d]=(0,i.useState)(new oe),c=(0,n.useSelector)((e=>e.bid)),u=(0,n.useSelector)((e=>e.ask)),{pools:h}=(0,o.usePool)(),{state:m}=(0,a.useLocation)(),p=null===m||void 0===m?void 0:m.poolAddress,f=null===m||void 0===m?void 0:m.originalRoute,g=(0,i.useCallback)((async()=>{const{amount:e,priority:s,...n}=c,{amount:o,priority:i,...a}=u,r=s>i?e:o,l=s>i?Fe:fe;await t(fe({...a,amount:"",reset:!0})),await t(Fe({...n,amount:"",reset:!0})),await t(l({amount:r,prioritized:!0}))}),[t,u,c]),v=(0,i.useCallback)((async()=>{const{poolAddresses:e,mintInfo:t,amount:s,priority:n}=c,{poolAddresses:o,mintInfo:i,amount:a,priority:l}=u,{address:m}=t||{},g=e.map((e=>({address:e,...h[e]}))),{address:v}=i||{},x=o.map((e=>({address:e,...h[e]})));let y=new oe;if(!Number(s)&&!Number(a)||!r.account.isAddress(m)||!r.account.isAddress(v)||!g.length||!x.length||!t)return d(y);let j=new Array;const b={mints:[m],pools:[]},w=(e=>{const t=new Map;for(const s in e){const n=e[s];1===(null===n||void 0===n?void 0:n.state)&&[n.mint_a,n.mint_b].forEach((e=>{var o;t.has(e)||t.set(e,new Map),null===(o=t.get(e))||void 0===o||o.set(s,n)}))}return t})(h);return ae(j,w,m,v,b),j.length?(f&&(j=j.filter((e=>1===e.pools.length&&e.pools[0]===p))),y=l<n?await(async(e,t,s,n)=>{let o=new oe;for(let i of t){const t=await re(e,i.pools,s,n);if(!t.length)continue;let a=s.amount;const r=new Array;t.forEach((e=>{r.push(a),a=de(a,e)}));const l=Number(o.amount);Number(a)>l&&(o={hops:t,amounts:r,amount:a})}return o})(h,j,c,u):await(async(e,t,s,n)=>{let o=new oe;for(let a of t)try{const t=await re(e,a.pools,s,n);if(!t.length)continue;const i=[...t].reverse();let r=n.amount;const l=new Array;for(const e of i){if(r=ce(r,e),Number(r)<0)break;l.unshift(r)}if(Number(r)<0)continue;const d=Number(o.amount);(!d||Number(r)<d)&&(o={hops:t,amounts:l,amount:r})}catch(i){}return o})(h,j,c,u),d(y)):d(y)}),[u,c,f,p,h]),x=(0,i.useCallback)((()=>{const e=c.priority,n=u.priority;n<e&&t(Fe({amount:s.amount})),e<n&&t(fe({amount:s.amount})),t(ct({route:{...s}}))}),[u.priority,s,c.priority,t]);return(0,i.useEffect)((()=>{x()}),[x]),(0,i.useEffect)((()=>{v()}),[v]),(0,b.jsxs)(l.Row,{gutter:[e,e],justify:"center",children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(rt,{})}),(0,b.jsx)(l.Col,{children:(0,b.jsx)(l.Button,{size:"small",icon:(0,b.jsx)(C,{name:"git-compare-outline"}),onClick:g})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(Xe,{})})]})},mt=()=>(0,b.jsxs)(l.Row,{gutter:[24,24],children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(l.Row,{gutter:[8,8],justify:"end",align:"middle",wrap:!1,children:(0,b.jsx)(l.Col,{children:(0,b.jsx)(ze,{})})})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(ht,{})})]}),pt=()=>(0,b.jsxs)(l.Row,{gutter:[24,24],children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(l.Card,{bordered:!1,className:"card-swap",children:(0,b.jsx)(mt,{})})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(ve,{})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(Ce,{})})]}),ft={success:[20,224,65],pending:[212,177,6],error:[215,35,17],failed:[215,35,17]},gt=({tag:e})=>{const t=t=>{let s=ft[e];return`rgba(${s[0]},  ${s[1]}, ${s[2]},${t||1})`};return(0,b.jsx)(l.Tag,{style:{margin:0,borderRadius:4,color:t(),textTransform:"capitalize"},color:t(.1),children:e})},vt="0,00.[0000]a",xt=[{title:"TIME",dataIndex:"time"},{title:"TRANSACTION",dataIndex:"transactionId",render:e=>(0,b.jsxs)(l.Space,{align:"baseline",children:[(0,b.jsx)(l.Typography.Text,{onClick:()=>window.open(y(e),"_blank"),style:{fontWeight:700,cursor:"pointer"},children:x(e,3,"...")}),(0,b.jsx)(l.Button,{type:"text",size:"small",onClick:()=>window.open(y(e),"_blank"),icon:(0,b.jsx)(C,{name:"open-outline"})})]})},{title:"BID",dataIndex:"bid",render:(e,t)=>t.from?(0,b.jsxs)(l.Space,{size:8,children:[(0,b.jsx)(ye,{mintAddress:t.from}),j(t.amountFrom).format(vt),(0,b.jsx)(je,{mintAddress:t.from})]}):"--"},{title:"ASK",dataIndex:"ask",render:(e,t)=>t.to?(0,b.jsxs)(l.Space,{size:8,children:[(0,b.jsx)(ye,{mintAddress:t.to}),j(t.amountTo).format(vt),(0,b.jsx)(je,{mintAddress:t.to})]}):"--"},{title:"STATUS",dataIndex:"status",width:100,render:(e,t)=>(0,b.jsx)(gt,{tag:t.status})}];class yt{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class jt{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class bt{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}var wt=s(71256);const kt=700;class Ct{constructor(){this.conn=window.sentre.splt.connection}async fetchSignatures(e,t,s=700){s>kt&&(s=kt);const n={limit:s,before:t};return this.conn.getConfirmedSignaturesForAddress2(e,n)}async fetchConfirmTransaction(e){let t=[];const s=[];for(let o=0;o<=e.length/150;o++){const t=150*o,n=e.slice(t,t+150);s.push(this.conn.getParsedConfirmedTransactions(n))}const n=await Promise.all(s);for(const o of n)t=t.concat(o);return t}async fetchTransactions(e,t){const s=(new Date).getTime()/1e3;let{secondFrom:n,secondTo:o,lastSignature:i,limit:a}=t;n=Math.floor(n||0),o=Math.floor(o||s);const r=new wt.PublicKey(e);let l=[],d=!1;for(;!d;){const e=await this.fetchSignatures(r,i,a);if(null===e||void 0===e||!e.length||d)break;for(const t of e){const e=t.blockTime;if(e&&!(e>o)){if(e<n){d=!0;break}i=t.signature,l.push(t.signature)}}if(a&&l.length>=a)break;if((null===e||void 0===e?void 0:e.length)<kt)break}return await this.fetchConfirmTransaction(l)}}let St;!function(e){e.Transfer="transfer"}(St||(St={}));const At=1e3;let Tt;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(Tt||(Tt={}));class It{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const t=new It,s=e*At;return t.setMilliSeconds(s),t}static fromYmd(e){const t=new It,s=c()(e,Tt.YMD).valueOf();return t.setMilliSeconds(s),t}static getListDate(e,t){const s=[];let n=It.fromYmd(e);const o=It.fromYmd(t);for(;n.ymd()<=o.ymd();)s.push(n.ymd()),n=n.addDay();return s}format(e){const t=new Date(this.milliSeconds);return c()(t).format(e)}subtractDay(e=1){const t=c()(this.milliSeconds).subtract(e,"days").valueOf();return It.fromSeconds(t/At)}addDay(e=1){const t=c()(this.milliSeconds).add(e,"days").valueOf();return It.fromSeconds(t/At)}seconds(){return(this.milliSeconds-this.milliSeconds%At)/At}ymd(){return Number(this.format(Tt.YMD))}static today(e=Tt.YMD){return c()().format(e)}}class Mt{constructor(){this.solana=void 0,this.solana=new Ct}async collect(e,t,s){let{lastSignature:n,limit:o}=t,i=!1,a=[],r=n;for(;!i;){const n=await this.solana.fetchTransactions(e,{...t,lastSignature:r});for(const e of n){r=e.transaction.signatures[0];const t=this.parseTransLog(e);t&&a.push(t)}if(!s)break;if(a=a.filter((e=>s(e))),!n.length||i)break;if(o&&a.length>=o){i=!0;break}}return a}parseTransLog(e){var t,s;const{blockTime:n,meta:o,transaction:i}=e;if(!n||!o)return;const{postTokenBalances:a,preTokenBalances:r,postBalances:l,preBalances:d}=o,{signatures:c,message:u}=i,h=(null===(t=o.innerInstructions)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.instructions)||[],m=u.instructions[0]||[],p=new yt;p.signature=c[0],p.blockTime=n,p.time=It.fromSeconds(n).ymd(),p.programId=m.programId.toString();const f=this.parseAccountInfo(u.accountKeys,a||[],r||[],l,d);return this.isParsedInstruction(m)?(p.programTransfer=this.parseAction([m],f),p):(p.actionTransfers=this.parseAction(h,f),p.programInfo={programId:m.programId.toString(),data:m.data},p)}isParsedInstruction(e){return void 0!==e.parsed}parseAction(e,t){const s=[];for(const n of e){if(!this.isParsedInstruction(n))continue;const e=n.parsed||{};if(e.type===St.Transfer){const n=e.info,o=this.parseActionTransfer(n,t);o&&s.push(o)}}return s}parseActionTransfer(e,t){const{source:s,destination:n,amount:o,lamports:i}=e,a=o||i.toString();if(!a||!t.has(s)||!t.has(n))return;const r=new bt;return r.source=t.get(s),r.destination=t.get(n),r.amount=a,r}parseAccountInfo(e,t,s,n,o){const i=new Map;for(const a of t){const{accountIndex:t,mint:s,uiTokenAmount:n}=a,o=new jt;o.address=e[t].pubkey.toString(),o.postBalance=n.amount,o.mint=s,o.decimals=n.decimals,i.set(o.address,o)}for(const a of s){const{accountIndex:t,uiTokenAmount:s}=a,n=e[t].pubkey.toString(),o=i.get(n)||new jt;o.preBalance=s.amount,i.set(o.address,o)}return e.forEach(((e,t)=>{const s=e.pubkey.toString();if(!r.account.isAssociatedAddress(s)){const e=i.get(s)||new jt;e.address=s,e.mint="11111111111111111111111111111111",e.postBalance=String(n[t]||0),e.preBalance=String(o[t]||0),e.decimals=9,i.set(e.address,e)}})),i}}const Rt="history",Dt=e=>!!e.actionTransfers.length,Bt=(0,pe.createAsyncThunk)("history/fetchHistorySwap",(async({lastSignature:e,isLoadMore:t},{getState:s})=>{var n;const{sol:{swapAddress:o}}=I.Z,{history:{historySwap:i}}=s(),a=await(null===(n=window.sentre.wallet)||void 0===n?void 0:n.getAddress());if(!a)throw Error("Loggin first");const l={limit:20,lastSignature:e},d=new Mt,u=await d.collect(a,l,Dt);let h=[];t&&(h=[...i]);for(const x of u){var m,p,f,g,v;const e={},t=x.actionTransfers;let s;const n=t[0];t.length>1&&(s=t.at(-1));if(x.programId!==o)continue;const i=new Date(1e3*x.blockTime);e.time=c()(i).format("MMM DD, YYYY HH:mm"),e.amountFrom=n.destination?Number(r.utils.undecimalize(BigInt(n.amount),n.destination.decimals)):void 0,e.amountTo=null!==(m=s)&&void 0!==m&&m.destination?Number(r.utils.undecimalize(BigInt(s.amount),s.destination.decimals)):void 0,e.from=null===(p=n.destination)||void 0===p?void 0:p.mint,e.to=null===(f=s)||void 0===f||null===(g=f.destination)||void 0===g?void 0:g.mint,e.transactionId=x.signature,e.key=x.signature,e.status=n.destination&&null!==(v=s)&&void 0!==v&&v.destination?"success":"failed",h.push(e)}return{historySwap:h}})),zt=(0,pe.createSlice)({name:Rt,initialState:{historySwap:[]},reducers:{},extraReducers:e=>{e.addCase(Bt.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,Nt=()=>{const[e,t]=(0,i.useState)(5),[s,o]=(0,i.useState)(!1),{historySwap:a}=(0,n.useSelector)((e=>e.history)),r=(0,n.useDispatch)(),d=(0,i.useCallback)((async()=>{o(!0),await r(Bt({})).unwrap(),o(!1)}),[r]);(0,i.useEffect)((()=>{d()}),[d]);const c=(0,i.useMemo)((()=>e>5?{height:"auto"}:{height:462}),[e]);return(0,b.jsx)(l.Card,{bordered:!1,style:{...c},children:(0,b.jsxs)(l.Row,{gutter:[16,24],children:[(0,b.jsx)(l.Col,{flex:"auto",children:(0,b.jsx)(l.Typography.Title,{level:5,children:"Swap history"})}),(0,b.jsx)(l.Col,{children:(0,b.jsx)(l.Button,{onClick:()=>{d(),t(5)},children:"Refresh"})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsxs)(l.Row,{justify:"center",gutter:[16,9],children:[(0,b.jsx)(l.Col,{span:24,style:{minHeight:310},children:(0,b.jsx)(l.Table,{columns:xt,dataSource:a.slice(0,e),loading:s,pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row",scroll:a.length?{x:800}:{}})}),(0,b.jsx)(l.Col,{children:(0,b.jsx)(l.Button,{onClick:()=>{const s=a.slice(0,e).length;if(a.length-s<=15){var n;const e=null===(n=a.at(-1))||void 0===n?void 0:n.transactionId;r(Bt({lastSignature:e,isLoadMore:!0}))}t(e+5)},type:"text",icon:(0,b.jsx)(C,{name:"chevron-down-outline"}),disabled:e>=a.length,children:"View more"})})]})})]})})},Pt=()=>{const{pools:e}=(0,o.usePool)(),t=(0,n.useDispatch)(),{state:s}=(0,a.useLocation)(),[d,c]=(0,i.useState)(""),[u,h]=(0,i.useState)(""),m=Je(d),p=Je(u),f=null===s||void 0===s?void 0:s.poolAddress,g=(0,i.useCallback)((()=>{if(!r.account.isAddress(f))return;const t=e[f];t&&(c(null===t||void 0===t?void 0:t.mint_a),h(null===t||void 0===t?void 0:t.mint_b))}),[f,e]);return(0,i.useEffect)((()=>{g()}),[g]),(0,i.useEffect)((()=>{r.account.isAddress(m.accountAddress)&&r.account.isAddress(p.accountAddress)&&(t(fe(m)),t(Fe(p)))}),[p,m,t]),(0,b.jsxs)(l.Row,{gutter:[24,24],style:{paddingBottom:12},children:[(0,b.jsx)(l.Col,{lg:8,md:12,xs:24,children:(0,b.jsx)(pt,{})}),(0,b.jsx)(l.Col,{lg:16,md:12,xs:24,children:(0,b.jsxs)(l.Row,{gutter:[24,24],children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(J,{})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(Nt,{})})]})})]})},Lt=()=>{var e,t,s,o;const i=(0,n.useSelector)((e=>e.bid)),a=(0,n.useSelector)((e=>e.ask));return(0,b.jsxs)(l.Row,{gutter:[16,24],children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsxs)(l.Row,{align:"middle",justify:"space-between",children:[(0,b.jsx)(l.Col,{children:(0,b.jsxs)(l.Space,{direction:"vertical",children:[(0,b.jsx)(l.Typography.Text,{children:"From"}),(0,b.jsx)(l.Typography.Text,{children:(0,b.jsxs)(l.Space,{children:[(0,b.jsx)(l.Avatar,{src:null===(e=i.mintInfo)||void 0===e?void 0:e.logoURI}),null===(t=i.mintInfo)||void 0===t?void 0:t.symbol]})}),(0,b.jsx)(l.Typography.Title,{level:4,children:i.amount})]})}),(0,b.jsx)(l.Col,{children:(0,b.jsx)(C,{name:"arrow-forward-outline",style:{fontSize:24}})}),(0,b.jsx)(l.Col,{children:(0,b.jsxs)(l.Space,{direction:"vertical",children:[(0,b.jsx)(l.Typography.Text,{children:"To"}),(0,b.jsxs)(l.Space,{children:[(0,b.jsx)(l.Avatar,{src:null===(s=a.mintInfo)||void 0===s?void 0:s.logoURI}),null===(o=a.mintInfo)||void 0===o?void 0:o.symbol]}),(0,b.jsx)(l.Typography.Title,{level:4,children:a.amount})]})})]})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(l.Divider,{style:{margin:0}})}),(0,b.jsx)(l.Col,{children:(0,b.jsx)(me,{})})]})},Et=()=>{const[e,t]=(0,i.useState)(!1),{route:s}=(0,n.useSelector)((e=>e.route)),a=(0,n.useSelector)((e=>e.bid)),d=(0,n.useSelector)((e=>e.ask)),{advanced:c}=(0,n.useSelector)((e=>e.settings)),{accounts:u}=(0,o.useAccount)(),h=ue(),m=(0,i.useMemo)((()=>{const e=a.mintInfo,t=u[a.accountAddress],s=(null===t||void 0===t?void 0:t.amount)||BigInt(0);if(!e||!Number(a.amount))return BigInt(0);if(e.address!==r.DEFAULT_WSOL)return BigInt(0);const n=r.utils.decimalize(a.amount,e.decimals);return n<=s?BigInt(0):n-s}),[u,a.accountAddress,a.amount,a.mintInfo]),p=!c&&100*h>12.5,f=!(null!==s&&void 0!==s&&s.hops.length)||!parseFloat(a.amount)||parseFloat(a.amount)<0||!parseFloat(null===d||void 0===d?void 0:d.amount)||parseFloat(null===d||void 0===d?void 0:d.amount)<0;return(0,b.jsxs)(l.Row,{gutter:[12,12],children:[(0,b.jsx)(l.Col,{span:24,children:(0,b.jsx)(ht,{spacing:12})}),(0,b.jsx)(l.Col,{span:24,children:(0,b.jsxs)(l.Row,{align:"bottom",children:[(0,b.jsx)(l.Col,{flex:"auto",children:(0,b.jsx)(l.Popover,{placement:"bottomLeft",content:(0,b.jsx)(me,{}),trigger:"click",children:(0,b.jsxs)(l.Space,{style:{cursor:"pointer"},direction:"vertical",size:4,children:[(0,b.jsxs)(l.Space,{children:[(0,b.jsx)(l.Typography.Text,{children:(0,b.jsx)(C,{name:"information-circle-outline",style:{color:"#7A7B85"}})}),(0,b.jsx)(l.Typography.Text,{type:"secondary",children:"Price impact"})]}),(0,b.jsxs)(l.Space,{children:[(0,b.jsx)(l.Typography.Text,{style:{color:"#D72311"},children:(0,b.jsx)(C,{name:"arrow-down-outline"})}),(0,b.jsx)(l.Typography.Text,{style:{color:"#D72311"},children:j(Number(h)).format("0.[0000]%")})]})]})})}),(0,b.jsx)(l.Col,{children:(0,b.jsx)(l.Button,{onClick:()=>t(!0),size:"large",block:!0,type:"primary",disabled:f,children:"Review & Swap"})})]})}),(0,b.jsx)(l.Modal,{title:(0,b.jsx)(l.Typography.Title,{level:4,children:" Confirm swap"}),onCancel:()=>t(!1),footer:(0,b.jsx)($,{hops:(null===s||void 0===s?void 0:s.hops)||[],wrapAmount:m,onCallback:()=>t(!1),hightImpact:p,disabled:f||p}),visible:e,children:(0,b.jsx)(Lt,{})})]})};BigInt.prototype.toJSON=function(){return this.toString()};const qt={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e}},Ft=(0,pe.configureStore)({middleware:e=>e(qt),devTools:!1,reducer:{ask:Ue,bid:ge,settings:Be,route:ut,history:zt}}),{manifest:{appId:Ut}}=Qe,_t=()=>(0,b.jsx)(o.UIProvider,{appId:Ut,antd:!0,children:(0,b.jsx)(o.MintProvider,{children:(0,b.jsx)(o.PoolProvider,{children:(0,b.jsx)(o.AccountProvider,{children:(0,b.jsx)(o.WalletProvider,{children:(0,b.jsx)(n.Provider,{store:Ft,children:(0,b.jsx)(Pt,{})})})})})})}),Zt={size:"small",type:"solid"},Yt=()=>(0,b.jsx)(o.UIProvider,{appId:Ut,antd:!0,children:(0,b.jsx)(o.MintProvider,{children:(0,b.jsx)(o.PoolProvider,{children:(0,b.jsx)(o.AccountProvider,{children:(0,b.jsx)(o.WalletProvider,{children:(0,b.jsx)(n.Provider,{store:Ft,children:(0,b.jsx)(Et,{})})})})})})})},31633:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(63805),o=s(77566),i=s(77330);const a={sol:o.Z[n.ef],register:i.Z[n.OB]}},77330:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});const n="senhub",o={sen_swap:{url:"https://descartesnetwork.github.io/sen-swap/index.js",appId:"sen_swap",name:"Sen Swap",author:{name:"Sentre",email:"hi@sentre.io"},supportedViews:"page,widget".split(",").map((e=>e.trim())).filter((e=>["page","widget"].includes(e))),tags:"solana,dapps,sentre".split(",").map((e=>e.trim())),description:"SPLT Swap for SPL tokens",verified:!1}},i={development:{defaultAppId:n,extra:o,senreg:"https://descartesnetwork.github.io/senreg/register.json"},staging:{defaultAppId:n,extra:o,senreg:"https://descartesnetwork.github.io/senreg/register.json"},production:{defaultAppId:n,extra:{},senreg:"https://descartesnetwork.github.io/senreg/register.json"}}},77566:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n={spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},o={devnet:{...n,node:"https://api.devnet.solana.com",chainId:103,sntrAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",sntrPoolAddress:"3EUPL7YQLbU6DNU5LZeQeHPXTf1MigJ2yASXA9rH5Ku4",swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9"},testnet:{...n,node:"https://api.testnet.solana.com",chainId:102,sntrAddress:"",sntrPoolAddress:"",swapAddress:"",taxmanAddress:""},mainnet:{...n,node:"https://api.mainnet-beta.solana.com",chainId:101,sntrAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",sntrPoolAddress:"Aa3WZX7Xunfebp2MuAcz9CNw8TYTDL7mVrmb11rjyVm6",swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}}},20418:(e,t,s)=>{"use strict";s.d(t,{Z:()=>f});var n=s(11796),o=s(67845),i=s(63805),a=s(31633);const r=e=>({symbol:"SOL",name:"Solana",address:"11111111111111111111111111111111",decimals:9,chainId:e,extensions:{coingeckoId:"solana"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"}),l=e=>({symbol:"SNTR",name:"Sentre",address:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",decimals:9,chainId:e,extensions:{coingeckoId:"sentre"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M/logo.png"}),d=[r(103),l(103),{symbol:"wBTC",name:"Wrapped Bitcoin",address:"8jk4eJymMfNZV9mkRNxJEt2VJ3pRvdJvD5FE94GXGBPM",decimals:9,chainId:103,extensions:{coingeckoId:"bitcoin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/qfnqNqs3nCAHjnyCgLRDbBtq4p2MtHZxw8YjSyYhPoL/logo.png"},{symbol:"wETH",name:"Ethereum",address:"27hdcZv7RtuMp75vupThR3T4KLsL61t476eosMdoec4c",decimals:9,chainId:103,extensions:{coingeckoId:"ethereum"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/FeGn77dhg1KXRRFeSwwMiykZnZPw5JXW6naf2aQgZDQf/logo.png"},{symbol:"UNI",name:"Uniswap",address:"FVZFSXu3yn17YdcxLD72TFDUqkdE5xZvcW18EUpRQEbe",decimals:9,chainId:103,extensions:{coingeckoId:"uniswap"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/3MVa4e32PaKmPxYUQ6n8vFkWtCma68Ld7e7fTktWDueQ/logo.png"},{symbol:"USDC",name:"USD Coin",address:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",decimals:9,chainId:103,extensions:{coingeckoId:"usd-coin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"}],{sol:{chainId:c,sntrAddress:u}}=a.Z,h=/[\W_]+/g,m={tokenize:"full",context:!0,minlength:3},p={document:{id:"address",index:[{field:"symbol",...m},{field:"name",...m}]}};const f=class{constructor(){this.tokenMap=void 0,this.engine=void 0,this.chainId=void 0,this.cluster=void 0,this.loading=void 0,this.queue=void 0,this._init=async()=>this.tokenMap.size?[this.tokenMap,this.engine]:new Promise((async e=>{if(this.loading)return this.queue.push(e);this.loading=!0;let t=await(await(new o.DK).resolve()).filterByChainId(this.chainId).getList();for(t.forEach(((e,s)=>{if(e.address===u){const{extensions:n,name:o,symbol:i,...a}=e;t[s]={...a,name:"Sentre",symbol:"SNTR",extensions:{...n,coingeckoId:"sentre"}}}})),"devnet"===this.cluster&&(t=t.concat(d)),t="testnet"===this.cluster?t.concat([l(102),r(102)]):t.concat([r(101)]),t.forEach((e=>this.tokenMap.set(e.address,e))),this.engine=new n.Document(p),this.tokenMap.forEach((({address:e,...t})=>this.engine.add(e,t))),e([this.tokenMap,this.engine]);this.queue.length;)this.queue.shift()([this.tokenMap,this.engine]);this.loading=!1})),this.all=async()=>{const[e]=await this._init();return Array.from(e.values())},this.findByAddress=async e=>{const[t]=await this._init();return t.get(e)},this.find=async(e,t)=>{const[s,n]=await this._init();let o=[];return e.split(h).forEach((e=>n.search(e,t).forEach((({result:e})=>e.forEach((e=>{if(o.findIndex((({address:t})=>t===e))<0){const t=s.get(e);t&&o.push(t)}})))))),o},this.tokenMap=new Map,this.engine=void 0,this.chainId=c,this.cluster=i.ef,this.loading=!1,this.queue=[],this._init()}}},63805:(e,t,s)=>{"use strict";s.d(t,{OB:()=>o,ef:()=>i});var n=s(53933);const o="production",i=(()=>{switch(n.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})()},53933:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});const n="sentre",o=window.localStorage,i=e=>{if(!e)return null;try{return JSON.parse(e)}catch(t){return null}},a={set:(e,t)=>{let s=i(o.getItem(n));s&&"object"===typeof s||(s={}),s[e]=t,o.setItem(n,JSON.stringify(s))},get:e=>{let t=i(o.getItem(n));return t&&"object"===typeof t?t[e]:null},clear:e=>{a.set(e,null)}},r=a},88677:()=>{},46601:()=>{},89214:()=>{},85568:()=>{},34845:()=>{},52361:()=>{},94616:()=>{},33370:()=>{},55024:()=>{}}]);
//# sourceMappingURL=106.a93c890f.chunk.js.map