(globalThis.webpackChunksen_swap=globalThis.webpackChunksen_swap||[]).push([[427],{262:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>ss,Widget:()=>rs,widgetConfig:()=>ns});var n=s(55754),r=s(98846),i=s(92950),a=s(45055),o=s(95418),l=s(99019),d=s(4550),c=s.n(d);const u={"logo-telegram":s.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"};var p=s(45263);const h=(0,i.forwardRef)(((e,t)=>{let{name:s,className:n,...r}=e;const i=n?"anticon "+n:"anticon";return(0,p.jsx)("span",{className:i,...r,children:u[s]?(0,p.jsx)("ion-icon",{ref:t,src:u[s]}):(0,p.jsx)("ion-icon",{ref:t,name:s})})})),m=[void 0],f=e=>{let{mintAddress:t,size:s=24,icon:n=(0,p.jsx)(h,{name:"diamond-outline"}),reversed:a=!1,...d}=e;const[c,u]=(0,i.useState)(m),{tokenProvider:f}=(0,r.useMint)(),{pools:g}=(0,r.usePool)(),x=(0,i.useCallback)((async e=>{const t=await f.findByAddress(e);if(null!==t&&void 0!==t&&t.logoURI)return t.logoURI}),[f]),y=(0,i.useCallback)((async()=>{if(!o.account.isAddress(t))return u(m);const e=Object.values(g).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:s}=e,n=await Promise.all([t,s].map(x));return a&&n.reverse(),u(n)}const s=await x(t);return u([s])}),[t,a,x,g]);return(0,i.useEffect)((()=>{y()}),[y]),1===c.length?(0,p.jsx)(l.Avatar,{src:c[0],size:s,style:{backgroundColor:"#2D3355",border:"none"},...d,children:n}):(0,p.jsx)(l.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},...d,children:c.map(((e,t)=>(0,p.jsx)(l.Avatar,{src:e,size:s,style:{backgroundColor:"#2D3355",border:"none"},children:n},t)))})},g="Unknown Token",x=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[a,l]=(0,i.useState)(g),{tokenProvider:d}=(0,r.useMint)(),{pools:c}=(0,r.usePool)(),u=(0,i.useCallback)((async e=>{const t=await d.findByAddress(e);return null!==t&&void 0!==t&&t.name?t.name:g}),[d]),h=(0,i.useCallback)((async()=>{if(!o.account.isAddress(t))return l(g);const e=Object.values(c).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:r}=e,i=await Promise.all([t,r].map(u));return n&&i.reverse(),l(`${i.join(s)} LP`)}const r=await u(t);return l(r)}),[t,n,u,c,s]);return(0,i.useEffect)((()=>{h()}),[h]),(0,p.jsx)("span",{children:a})},y="TOKN",v=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[a,l]=(0,i.useState)(y),{tokenProvider:d}=(0,r.useMint)(),{pools:c}=(0,r.usePool)(),u=(0,i.useCallback)((async e=>{const t=await d.findByAddress(e);return null!==t&&void 0!==t&&t.symbol?t.symbol:e.substring(0,4)}),[d]),h=(0,i.useCallback)((async()=>{if(!o.account.isAddress(t))return l(y);const e=Object.values(c).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:r}=e,i=await Promise.all([t,r].map(u));return n&&i.reverse(),l(i.join(s))}const r=await u(t);return l(r)}),[t,n,u,c,s]);return(0,i.useEffect)((()=>{h()}),[h]),(0,p.jsx)("span",{children:a})},j=()=>{const{bid:{mintInfo:e},ask:{mintInfo:t}}=(0,n.useSelector)((e=>e)),s=(null===e||void 0===e?void 0:e.address)||"",r=(null===t||void 0===t?void 0:t.address)||"";return(0,p.jsxs)(l.Space,{children:[(0,p.jsxs)(l.Avatar.Group,{children:[(0,p.jsx)(f,{mintAddress:s}),(0,p.jsx)(f,{mintAddress:r})]}),(0,p.jsxs)(l.Typography.Text,{children:[(0,p.jsx)(v,{mintAddress:s})," / ",(0,p.jsx)(v,{mintAddress:r})]})]})};var w=s(76907),b=s.n(w),A=s(21111),k=s.n(A),S=s(34559);const C=e=>{let{chartData:t=[],labels:s=[],type:n="line",configs:r,disableAxe:a=!1,chartId:o="sen_chart"}=e;const{backgroundColor:l}=r||{},[d,c]=(0,i.useState)(!1),u=(0,i.useCallback)(((e,t,s)=>({labels:t,datasets:[{...r,data:e,backgroundColor:s}]})),[r]),h=(0,i.useRef)(null),m=(0,i.useCallback)((()=>{var e,t;if(!h||!l)return"#dadada";const s=null===h||void 0===h||null===(e=h.current)||void 0===e||null===(t=e.canvas)||void 0===t?void 0:t.getContext("2d"),r=null===s||void 0===s?void 0:s.createLinearGradient(0,0,0,180);null===r||void 0===r||r.addColorStop(0,l),null===r||void 0===r||r.addColorStop(1,`${l}00`);return"line"===n?r:l}),[l,n]);return(0,i.useEffect)((()=>{var e;const n=h.current,r=null===n||void 0===n||null===(e=n.data.datasets)||void 0===e?void 0:e.find((e=>{let{data:t}=e;return t})),i=k()(null===r||void 0===r?void 0:r.data,t);n&&!i&&(n.data=u(t,s,m()),null===n||void 0===n||n.update())}),[t,u,m,s]),(0,p.jsx)("canvas",{id:o,height:"180px",ref:e=>{if(!e)return;const t=e.getContext("2d");t&&!d&&(h.current=new(b())(t,{type:n,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!a}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!a,beginAtZero:!1,maxTicksLimit:8,callback:function(e,t,s){return(0,S.uR)(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:(e,t)=>{const s=document.getElementById(o);s&&(s.style.cursor=t[0]?"pointer":"default")}}}}),c(!0))}})},T=()=>(0,p.jsx)(l.Row,{style:{height:170},align:"middle",justify:"center",children:(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Empty,{})})});var I=s(20418),R=s(21995),M=s.n(R);new I.Z;const B=async(e,t)=>{try{const s=await M()({method:"get",url:`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&days=${t.days}&interval=${t.interval}`});return s.data.prices.map((e=>({time:e[0],val:e[1]})))}catch(s){return[]}};var P;!function(e){e.day="day",e.week="week",e.month="month",e.year="year"}(P||(P={}));const D={day:{amount:4,unit:"hours",format:"HH:00"},week:{amount:1,unit:"days",format:"MMM DD"},month:{amount:5,unit:"days",format:"MMM DD"},year:{amount:2,unit:"months",format:"MMM DD"}},z={day:{days:1,interval:"hourly"},week:{days:7,interval:"daily"},month:{days:31,interval:"daily"},year:{days:365,interval:"daily"}},N="#3E8C6A",L=0,E=14,_="TVL",q="transparent",W=()=>{var e,t,s;const[a,o]=(0,i.useState)(P.week),[d,u]=(0,i.useState)([]),h=(0,n.useSelector)((e=>e.bid)),m=(0,n.useSelector)((e=>e.ask)),{tokenProvider:f}=(0,r.useMint)(),g={borderColor:q,borderRadius:L,pointRadius:L,tooltip:_,pointHitRadius:E,pointHoverRadius:L,backgroundColor:N},x=(0,i.useCallback)((e=>{const t=[],{format:s,amount:n,unit:r}=D[a];let i=c()();for(const a of e.reverse()){const e=c()(a.time).format(s);if(e===i.format(s)){let o=e;e===c()().format(s)&&(o=c()().format("HH:mm")),i&&t.unshift({label:o,val:a.val}),i=i.subtract(n,r)}else"00:00"===e&&t.unshift({label:i.format("MMM DD"),val:a.val})}u(t)}),[a]),y=(0,i.useCallback)((e=>{const t=[],{format:s,amount:n,unit:r}=D[a];let i=c()();for(const a of e.reverse()){const e=c()(a.time).format(s);e!==i.format(s)||(i=i.subtract(n,r),t.unshift({label:e,val:a.val}))}u(t)}),[a]),v=(0,i.useCallback)((async()=>{var e,t,s,n;const r=await f.findByAddress((null===(e=h.mintInfo)||void 0===e?void 0:e.address)||""),i=await f.findByAddress((null===(t=m.mintInfo)||void 0===t?void 0:t.address)||""),o=null===r||void 0===r||null===(s=r.extensions)||void 0===s?void 0:s.coingeckoId,l=null===i||void 0===i||null===(n=i.extensions)||void 0===n?void 0:n.coingeckoId,d=h.accountAddress===m.accountAddress;if(!l||!o||d)return u([]);const c=z[a],[p,g]=await Promise.all([B(o,c),B(l,c)]),v=[];for(let a=p.length-1;a>=0;a--){const e=p[a],t=g[g.length-p.length+a];e&&t&&v.unshift({time:e.time,val:e.val/t.val})}return a===P.day?x(v):y(v)}),[m.accountAddress,null===(e=m.mintInfo)||void 0===e?void 0:e.address,h.accountAddress,null===(t=h.mintInfo)||void 0===t?void 0:t.address,a,y,x,f]);(0,i.useEffect)((()=>{v()}),[v]);const w=(null===(s=d[d.length-1])||void 0===s?void 0:s.val)||0,b=(0,S.uR)(w).format(w>1?"0,0.[00]":"0,0.[00000000]");return(0,p.jsx)(l.Card,{bordered:!1,className:"card-swap",bodyStyle:{paddingTop:28},children:(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsxs)(l.Row,{gutter:[20,20],children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsx)(j,{})}),d&&!!d.length&&(0,p.jsx)(l.Col,{children:(0,p.jsxs)(l.Radio.Group,{defaultValue:P.week,onChange:e=>o(e.target.value),className:"chart-radio-btn",children:[(0,p.jsx)(l.Radio.Button,{value:P.day,children:"1D"}),(0,p.jsx)(l.Radio.Button,{value:P.week,children:"1W"}),(0,p.jsx)(l.Radio.Button,{value:P.month,children:"1M"}),(0,p.jsx)(l.Radio.Button,{value:P.year,children:"1Y"})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Title,{level:2,children:w?b:""})})]})}),(0,p.jsx)(l.Col,{span:24,children:d&&d.length?(0,p.jsx)(C,{chartData:null===d||void 0===d?void 0:d.map((e=>e.val)),labels:null===d||void 0===d?void 0:d.map((e=>e.label)),configs:g}):(0,p.jsx)(T,{})})]})})};const F=s.p+"static/media/jupiter-logo.6553c3779ce16057aa846301783447a2.svg",U=e=>{let{spacing:t=4,iconSize:s=20}=e;return(0,p.jsx)(l.Tooltip,{title:"Jupiter Aggregator",children:(0,p.jsxs)(l.Space,{size:t,style:{cursor:"pointer"},children:[(0,p.jsx)(l.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:"Powered by"}),(0,p.jsx)(l.Avatar,{src:F,size:s})]})})};var Y=s(19289);let G;!function(e){e[e.SenSwap=0]="SenSwap",e[e.JupiterAggregator=1]="JupiterAggregator"}(G||(G={}));const H="route",K={platform:G.SenSwap,best:[],amount:BigInt(0),priceImpact:0},O=(0,Y.createAsyncThunk)("route/updateRoute",(async(e,t)=>{let{getState:s}=t;const{route:n}=s();return e?{...n,...e}:{...n}})),Z=(0,Y.createSlice)({name:H,initialState:K,reducers:{},extraReducers:e=>{e.addCase(O.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,J=()=>{const{bid:{mintInfo:e},route:{platform:t,best:s}}=(0,n.useSelector)((e=>e)),r=null===e||void 0===e?void 0:e.address,a=(0,i.useMemo)((()=>{if(!s.length||!o.account.isAddress(r))return[];let e=[r];for(const t of s){const{dstMintAddress:s}=t;o.account.isAddress(s)&&e.push(s)}return e}),[r,s]);return(0,p.jsxs)(l.Space,{children:[null===a||void 0===a?void 0:a.map(((e,t)=>(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(f,{mintAddress:e}),a.length>t+1&&(0,p.jsx)(h,{name:"chevron-forward-outline"})]},t))),t===G.JupiterAggregator&&(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,p.jsx)(U,{})]})]})},Q=()=>{const[e,t]=(0,i.useState)(!1),{bid:{mintInfo:s,amount:r},ask:{mintInfo:a,amount:o}}=(0,n.useSelector)((e=>e)),d=(null===s||void 0===s?void 0:s.address)||"",c=(null===a||void 0===a?void 0:a.address)||"",u=(0,S.uR)(Number(o)/Number(r)).format("0,0.[000000]"),m=(0,S.uR)(Number(r)/Number(o)).format("0,0.[000000]");return(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Button,{type:"text",onClick:()=>t(!e),shape:"circle",icon:(0,p.jsx)(h,{name:"swap-horizontal-outline"})}),(0,p.jsx)(l.Typography.Text,{children:e?m:u}),(0,p.jsxs)(l.Typography.Text,{children:[e?(0,p.jsx)(v,{mintAddress:d}):(0,p.jsx)(v,{mintAddress:c})," / ",e?(0,p.jsx)(v,{mintAddress:c}):(0,p.jsx)(v,{mintAddress:d})]})]})};let V;!function(e){e[e.goodSwap=.01]="goodSwap",e[e.acceptableSwap=.05]="acceptableSwap"}(V||(V={}));const X=e=>e<V.goodSwap?"#14E041":e>V.acceptableSwap?"#D72311":"#FA8C16",$=e=>{let{label:t="",content:s=""}=e;return(0,p.jsxs)(l.Row,{align:"middle",children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsx)(l.Typography.Text,{type:"secondary",children:t})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)("span",{children:s})})]})},ee=()=>{const{route:{priceImpact:e},settings:{slippage:t}}=(0,n.useSelector)((e=>e));return(0,p.jsxs)(l.Row,{gutter:[12,12],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)($,{label:"Price impact",content:(0,p.jsx)(l.Typography.Text,{style:{color:X(e)},children:(0,S.uR)(Number(e)).format("0.[0000]%")})})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)($,{label:"Price",content:(0,p.jsx)(Q,{})})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)($,{label:"Slippage Tolerance",content:(0,S.uR)(t).format("0.[00]%")})}),(0,p.jsx)(l.Col,{span:24,style:{minHeight:24},children:(0,p.jsx)($,{label:"Route",content:(0,p.jsx)(J,{})})})]})};var te=s(42224),se=s(58518);const ne=(0,Y.createAsyncThunk)("bid/updateBidData",(async(e,t)=>{let{prioritized:s,reset:n,...r}=e,{getState:i}=t;const{bid:{priority:a},ask:{priority:o}}=i();Number(r.amount)<0&&(r.amount="");const l=n?0:s?o+1:a;return{...r,priority:l}})),re=(0,Y.createSlice)({name:"bid",initialState:{amount:"",mintInfo:{address:"",decimals:0},accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:e=>{e.addCase(ne.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ie=(0,Y.createAsyncThunk)("ask/updateAskData",(async(e,t)=>{let{prioritized:s,reset:n,...r}=e,{getState:i}=t;const{bid:{priority:a},ask:{priority:o}}=i();Number(r.amount)<0&&(r.amount="");const l=n?0:s?a+1:o;return{...r,priority:l}})),ae=(0,Y.createSlice)({name:"ask",initialState:{amount:"",mintInfo:{address:"",decimals:0},accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:e=>{e.addCase(ie.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,oe=e=>{const[t,s]=(0,i.useState)(void 0),{getDecimals:n}=(0,r.useMint)(),a=(0,i.useCallback)((async()=>{try{const t=await n(e);return s(t)}catch(t){return s(void 0)}}),[e,n]);return(0,i.useEffect)((()=>{a()}),[a]),t},le=(e,t,s)=>o.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(o.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},de=e=>{const{wallet:{address:t,lamports:s}}=(0,r.useWallet)(),{accounts:n}=(0,r.useAccount)(),{amount:i,mint:a}=n[e]||{},l=oe(a)||0;return o.account.isAddress(t)&&o.account.isAddress(e)?e===t?le(o.DEFAULT_EMPTY_ADDRESS,s,9):le(a,i,l):le()},ce=de,ue=()=>{const{route:{best:e},bid:{amount:t,accountAddress:s,mintInfo:{address:a,decimals:l}},ask:{amount:d,mintInfo:{address:c}}}=(0,n.useSelector)((e=>e)),{wallet:{lamports:u}}=(0,r.useWallet)(),{amount:p}=ce(s),h=(0,i.useMemo)((()=>{if(a!==o.DEFAULT_WSOL)return o.utils.undecimalize(p,l);const e=o.utils.decimalize(.01,l),t=u+p-e;return t<=p?o.utils.undecimalize(p,l):o.utils.undecimalize(t,l)}),[p,a,l,u]);return!e.length||!Number(t)||!Number(d)||Number(t)>Number(h)||a===c},pe=e=>{const{pools:t}=(0,r.usePool)(),[s,n]=(0,i.useState)(0),{getMintTotalValue:a}=(()=>{const{tokenProvider:e,getMint:t}=(0,r.useMint)(),{pools:s}=(0,r.usePool)(),n=(0,i.useCallback)((async(t,s)=>{try{var n;const r=await e.findByAddress(t),i=null===r||void 0===r||null===(n=r.extensions)||void 0===n?void 0:n.coingeckoId;if(!i)throw new Error("Cant not find coingeckoId");const a=await(0,S.l$)(i);return Number(o.utils.undecimalize(s,r.decimals))*a.price}catch(r){return 0}}),[e]),a=(0,i.useCallback)((async r=>{let{mintAddress:i,amount:l}=r;if(await e.findByAddress(i))return n(i,l);const d=Object.values(s).find((e=>e.mint_lpt===i));if(!d)return 0;const{reserve_a:c,reserve_b:u,mint_a:p,mint_b:h}=d;if(c*u===BigInt(0))return 0;const{[i]:{supply:m}}=await t({address:i}),{deltaA:f,deltaB:g}=o.Swap.oracle.withdraw(l,m,c,u);return await a({mintAddress:p,amount:f})+await a({mintAddress:h,amount:g})}),[t,n,e,s]);return{getMintTotalValue:a}})(),l=(0,i.useCallback)((async e=>{const s=t[e];if(!s)return 0;const{reserve_a:n,reserve_b:r,mint_a:i,mint_b:o}=s;return await a({mintAddress:i,amount:n})+await a({mintAddress:o,amount:r})}),[a,t]),d=(0,i.useCallback)((async e=>{if(!e)return n(0);const t=await l(e);n(t)}),[l]);return(0,i.useEffect)((()=>{d(e)}),[d,e]),{tvl:s,getTvl:l}},he=BigInt(1e9),me=o.Swap.oracle,fe=(e,t)=>{if(!e)return BigInt(0);const{srcMintAddress:s,dstMintAddress:n,poolData:r}=t,{fee_ratio:i,tax_ratio:a}=r,o=xe(s,r),l=xe(n,r);if(!o||!l)return BigInt(0);const{askAmount:d}=me.swap(e,o,l,i,a);return d},ge=(e,t)=>{if(!e)return BigInt(0);const{srcMintAddress:s,dstMintAddress:n,poolData:r}=t,{fee_ratio:i,tax_ratio:a}=r,o=xe(s,r),l=xe(n,r);if(!o||!l)return BigInt(0);return me.inverseSwap(e,o,l,i,a)},xe=(e,t)=>{const{mint_a:s,mint_b:n,reserve_a:r,reserve_b:i}=t;if(e===s)return r;if(e===n)return i;throw new Error("Cannot find reserves")},ye=(e,t)=>{if(!t)return 0;let s=t,n=1;return e.forEach((e=>{const t=Number(o.utils.undecimalize(((e,t)=>{if(!e)return BigInt(0);const{srcMintAddress:s,dstMintAddress:n,poolData:r}=t,{fee_ratio:i,tax_ratio:a}=r,o=xe(s,r),l=xe(n,r);return o&&l?me.slippage(e,o,l,i,a):BigInt(0)})(s,e),9));n*=1-t;const r=fe(s,e);s=r})),1-n},ve=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=[],i=new Map(e),a=e.get(t);return n>=3||(i.delete(t),null===a||void 0===a||a.forEach(((e,a)=>{const o=t,l=o===e.mint_a?e.mint_b:e.mint_a,d={srcMintAddress:o,dstMintAddress:l,poolData:{...e,address:a}};if(l===s)return r.push([d]);ve(i,l,s,n++).forEach((e=>r.push([d,...e])))}))),r},je=e=>{const[t,s]=(0,i.useState)({platform:G.SenSwap,best:[],amount:BigInt(0),priceImpact:0}),{bid:a,ask:l}=(0,n.useSelector)((e=>e)),{pools:d}=(0,r.usePool)(),c=(0,i.useCallback)((async()=>{const{poolAddresses:t,mintInfo:{address:n},amount:r,priority:i}=a,{poolAddresses:c,mintInfo:{address:u},amount:p,priority:h}=l;let m={platform:G.SenSwap,best:[],amount:BigInt(0),priceImpact:0};if(!Number(r)&&!Number(p)||!o.account.isAddress(n)||!o.account.isAddress(u)||!t.length||!c.length||n===u)return s(m);let f=ve((e=>{const t=new Map;for(const s in e){const n=e[s];1===(null===n||void 0===n?void 0:n.state)&&[n.mint_a,n.mint_b].forEach((e=>{var r;t.has(e)||t.set(e,new Map),null===(r=t.get(e))||void 0===r||r.set(s,n)}))}return t})(d),n,u);return f.length?(o.account.isAddress(e)&&(f=f.filter((t=>1===t.length&&t[0].poolData.address===e))),m=h<i?((e,t)=>{const{amount:s,mintInfo:n}=t;let r={platform:G.SenSwap,best:[],amount:BigInt(0),priceImpact:0};e.forEach((e=>{let t=o.utils.decimalize(s,n.decimals);e.forEach((e=>{t=fe(t,e)}));const i=r.amount;t>i&&(r={platform:G.SenSwap,best:e,amount:t,priceImpact:0})}));const i=o.utils.decimalize(s,n.decimals);return r.priceImpact=ye(r.best,i),r})(f,a):((e,t)=>{let{amount:s,mintInfo:n}=t,r={platform:G.SenSwap,best:[],amount:BigInt(0),priceImpact:0};for(const i of e){const e=[...i].reverse();let t=o.utils.decimalize(s,n.decimals);for(const s of e)if(t=ge(t,s),t<=BigInt(0))break;if(t<=BigInt(0))continue;const a=r.amount;(t<a||!a)&&(r={platform:G.SenSwap,best:i,amount:t,priceImpact:0})}return r.priceImpact=ye(r.best,r.amount),r})(f,l),s(m)):s(m)}),[l,a,e,d]);return(0,i.useEffect)((()=>{c()}),[c]),t},we=e=>{const t=je(e),s=(()=>{const{route:{best:e},bid:{amount:t,mintInfo:{decimals:s}},ask:{amount:a,mintInfo:{decimals:l}},settings:{slippage:d}}=(0,n.useSelector)((e=>e)),{wallet:{address:c}}=(0,r.useWallet)(),u=(0,i.useCallback)((async()=>{const{swap:n,splt:r,wallet:i}=window.sentre;if(!i)throw new Error("Wallet is not connected");const u=await Promise.all(e.map((async e=>{let{srcMintAddress:t,dstMintAddress:s,poolData:{address:n}}=e;return{poolAddress:n,srcAddress:await r.deriveAssociatedAddress(c,t),dstAddress:await r.deriveAssociatedAddress(c,s)}}))),p=o.utils.decimalize(t,s),h=o.utils.decimalize(a,l)*(he-o.utils.decimalize(d,9))/he;return await n.route(p,h,u,i)}),[e,s,l,d,c,t,a]);return u})();return{bestRoute:t,swap:s}};var be=s(63805);const Ae={appId:"sen_swap",url:"https://descartesnetwork.github.io/sen-swap/index.js"},ke={devnet:{node:"https://api.devnet.solana.com",cluster:"devnet",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},testnet:{node:"https://api.testnet.solana.com",cluster:"testnet",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},mainnet:{node:"https://solana-api.projectserum.com",cluster:"mainnet-beta",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}},Se={devnet:{bidDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ"},testnet:{bidDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ"},mainnet:{bidDefault:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",askDefault:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M"}},Ce={devnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"},testnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"},mainnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"}},Te={devnet:{assetsRoute:"/app/sen_assets"},testnet:{assetsRoute:"/app/sen_assets"},mainnet:{assetsRoute:"/app/sen_assets"}},Ie={manifest:{development:{...Ae},staging:{...Ae},production:{...Ae}}[be.OB],sol:ke[be.ef],swap:Se[be.ef],wormhole:Ce[be.ef],route:Te[be.ef]};const Re=class{constructor(e,t){this._wallet=void 0,this.publicKey=void 0,this._wallet=t,this.publicKey=o.account.fromAddress(e)||null}async sendTransaction(e,t,s){return e=await this.signTransaction(e),await t.sendRawTransaction(e.serializeMessage(),s)}async signTransaction(e){return await this._wallet.signTransaction(e)}async signAllTransactions(e){const t=[];for(const s of e){const e=await this.signTransaction(s);t.push(e)}return t}},{sol:{node:Me}}=Ie,Be=new te.Connection(Me),Pe={platform:G.JupiterAggregator,best:[],amount:BigInt(0),priceImpact:0},De=()=>{const{bid:{mintInfo:{address:e,decimals:t},amount:s},ask:{mintInfo:{address:a}},settings:{slippage:l}}=(0,n.useSelector)((e=>e)),{wallet:{address:d}}=(0,r.useWallet)(),c=Number(s)*10**t,u=(0,i.useMemo)((()=>o.account.isAddress(e)?o.account.fromAddress(e):void 0),[e]),p=(0,i.useMemo)((()=>o.account.isAddress(a)?o.account.fromAddress(a):void 0),[a]),{exchange:h,routes:m}=(0,se.useJupiter)({amount:c,inputMint:u,outputMint:p,slippage:100*l,debounceTime:250}),f=(0,i.useCallback)((async()=>{const{sentre:{wallet:e}}=window;if(!e||!o.account.isAddress(d))throw new Error("Wallet is not connected");if(null===m||void 0===m||!m.length)throw new Error("No available route");const t=new Re(d,e),s=await h({wallet:t,route:m[0],confirmationWaiterFactory:async e=>(await Be.confirmTransaction(e,"confirmed"),await Be.getTransaction(e,{commitment:"confirmed"}))});if(s.error)throw new Error(s.error);const{txid:n,outputAddress:r}=s;return{txId:n,dstAddress:r}}),[h,m,d]),g=(0,i.useMemo)((()=>{if(null===m||void 0===m||!m.length)return{...Pe};const{outAmount:e,priceImpactPct:t,marketInfos:s}=m[0],n=s.map((e=>{let{inputMint:t,outputMint:s}=e;return{poolData:{},srcMintAddress:t.toBase58(),dstMintAddress:s.toBase58()}}));return{platform:G.JupiterAggregator,amount:BigInt(e),priceImpact:t,best:n}}),[m]);return{swap:f,bestRoute:g}},ze=e=>{let{onCallback:t=(()=>{}),forceSwap:s=!1}=e;const r=(0,n.useDispatch)(),[d,c]=(0,i.useState)(!1),{route:{priceImpact:u,amount:h},bid:{mintInfo:{decimals:m},priority:f},ask:{mintInfo:{decimals:g},priority:x},settings:{advanced:y}}=(0,n.useSelector)((e=>e)),{wrapAmount:v,wrapSol:j}=(()=>{const{bid:{amount:e,mintInfo:{address:t,decimals:s},accountAddress:r}}=(0,n.useSelector)((e=>e)),{amount:a}=ce(r),l=(0,i.useMemo)((()=>{if(!Number(e)||t!==o.DEFAULT_WSOL)return BigInt(0);const n=o.utils.decimalize(e,s);return n<=a?BigInt(0):n-a}),[a,e,t,s]);return{wrapAmount:l,wrapSol:async()=>{const{swap:e,wallet:t}=window.sentre;if(!t)throw new Error("Wallet is not connected");if(l)return await e.wrapSol(l,t)}}})(),{state:w}=(0,a.useLocation)(),b=ue(),A=(()=>{const{route:{best:e},bid:{amount:t},ask:{amount:s}}=(0,n.useSelector)((e=>e)),[r,a]=(0,i.useState)(!1),{getTvl:o}=pe(),l=(0,i.useCallback)((async()=>{for(const t of e){const e=t.poolData.address;if(await o(e)<1e3)return!1}return!0}),[o,e]),d=(0,i.useCallback)((async()=>{if(!Number(t)&&!Number(s))return a(!0);if(!e.length)return a(!1);const n=await l();return a(!!n)}),[l,e,s,t]);return(0,i.useEffect)((()=>{d()}),[d]),r})(),k=we(null===w||void 0===w?void 0:w.poolAddress),C=De(),T=C.bestRoute.best.length&&f>x,{swap:I,bestRoute:R}=A||!T?k:C,M=(0,i.useCallback)((()=>{x<f&&r(ie({amount:o.utils.undecimalize(h,g)})),f<x&&r(ne({amount:o.utils.undecimalize(h,m)})),r(O({...R}))}),[r,h,R,f,m,x,g]);(0,i.useEffect)((()=>{M()}),[M]);const B=!y&&u>V.acceptableSwap&&!s;return(0,p.jsx)(l.Button,{type:"primary",onClick:async()=>{try{c(!0),v&&await j();const{txId:e}=await I();return window.notify({type:"success",description:"Swap successfully. Click to view details.",onClick:()=>window.open((0,S.kU)(e),"_blank")}),t()}catch(e){return window.notify({type:"error",description:e.message})}finally{return c(!1)}},disabled:b||B,loading:d,block:!0,children:B?"Too High Price Impact":s?"Swap Anyway":"Swap"})},{sol:{node:Ne,cluster:Le}}=Ie,Ee=new te.Connection(Ne),_e=e=>{let{onCallback:t=(()=>{}),forceSwap:s=!1}=e;const{wallet:{address:n}}=(0,r.useWallet)();return(0,p.jsx)(se.JupiterProvider,{connection:Ee,cluster:Le,userPublicKey:new te.PublicKey(n),children:(0,p.jsx)(ze,{onCallback:t,forceSwap:s})})},qe=e=>{var t,s,r,a;let{visible:o=!1,onCancel:d=(()=>{})}=e;const[c,u]=(0,i.useState)(!1),{route:{priceImpact:m},bid:g,ask:x}=(0,n.useSelector)((e=>e)),y=m>V.acceptableSwap;return(0,p.jsx)(l.Modal,{onCancel:()=>d(!1),closeIcon:(0,p.jsx)(h,{name:"close"}),footer:null,visible:o,forceRender:!0,children:(0,p.jsxs)(l.Row,{gutter:[16,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Title,{level:4,children:" Confirm swap"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{align:"middle",justify:"space-between",children:[(0,p.jsx)(l.Col,{children:(0,p.jsxs)(l.Space,{direction:"vertical",children:[(0,p.jsx)(l.Typography.Text,{children:"From"}),(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(f,{mintAddress:null===(t=g.mintInfo)||void 0===t?void 0:t.address}),(0,p.jsx)(l.Typography.Text,{children:(0,p.jsx)(v,{mintAddress:null===(s=g.mintInfo)||void 0===s?void 0:s.address})})]}),(0,p.jsx)(l.Typography.Title,{level:4,children:g.amount})]})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(h,{name:"arrow-forward-outline",style:{fontSize:24}})}),(0,p.jsx)(l.Col,{children:(0,p.jsxs)(l.Space,{direction:"vertical",align:"end",children:[(0,p.jsx)(l.Typography.Text,{children:"To"}),(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(f,{mintAddress:null===(r=x.mintInfo)||void 0===r?void 0:r.address}),(0,p.jsx)(l.Typography.Text,{children:(0,p.jsx)(v,{mintAddress:null===(a=x.mintInfo)||void 0===a?void 0:a.address})})]}),(0,p.jsx)(l.Typography.Title,{level:4,children:x.amount})]})})]})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Card,{bordered:!1,className:"confirm-info",children:(0,p.jsx)(ee,{})})}),y&&(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Checkbox,{checked:c,onChange:()=>u(!c),children:"The price impact is currently high. Tick the checkbox to accept the swap."})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(_e,{onCallback:()=>d(!1),forceSwap:c})})]})})},We=()=>{const[e,t]=(0,i.useState)(!1),s=ue();return(0,p.jsx)(l.Card,{bordered:!1,children:(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Title,{level:5,children:"Review & Swap"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(ee,{})}),(0,p.jsx)(l.Col,{span:24})," ",(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Button,{type:"primary",onClick:()=>t(!0),disabled:s,block:!0,children:"Review & Swap"})}),(0,p.jsx)(qe,{visible:e,onCancel:t})]})})},Fe=e=>{let{mintAddress:t,tvl:s="",price:n,format:r="0,0.[00]a"}=e;return(0,p.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,p.jsx)(f,{mintAddress:t}),(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Typography.Text,{children:"TVL:"}),(0,p.jsx)(l.Typography.Title,{level:5,children:(0,S.uR)(s).format(r)}),(0,p.jsx)(l.Typography.Title,{level:5,children:(0,p.jsx)(v,{mintAddress:t})})]}),(0,p.jsxs)(l.Typography.Text,{className:"caption",type:"secondary",children:["~ $",(0,S.uR)(n).format(r)]})]})},Ue={address:"",icon:"",name:"TOKEN",price:0,priceChange:0,rank:0,symbol:"TOKEN",totalVolume:0},Ye=e=>{const[t,s]=(0,i.useState)(Ue),{tokenProvider:n}=(0,r.useMint)(),a=(0,i.useCallback)((async()=>{if(!e)return s(Ue);try{var t;const r=await n.findByAddress(e),i=null===r||void 0===r||null===(t=r.extensions)||void 0===t?void 0:t.coingeckoId,a=await(0,S.l$)(i);return s(a)}catch(r){return s(Ue)}}),[e,n]);return(0,i.useEffect)((()=>{a()}),[a]),t},Ge=()=>{const{route:{best:e},bid:{mintInfo:t},ask:{mintInfo:s}}=(0,n.useSelector)((e=>e)),r=Ye(t.address),a=Ye(s.address),{poolData:d}=e[0]||{},{poolData:c}=e[e.length-1]||{},u=(e,t)=>{try{return o.account.isAddress(e)&&t?xe(e,t):BigInt(0)}catch(s){return BigInt(0)}},h=(0,i.useMemo)((()=>{if(!t.decimals)return 0;const e=u(t.address,d);return Number(o.utils.undecimalize(e,t.decimals))}),[t,d]),m=(0,i.useMemo)((()=>{if(!s.decimals)return 0;const e=u(s.address,c);return Number(o.utils.undecimalize(e,s.decimals))}),[s,c]),f=!h||!m;return(0,p.jsx)(l.Card,{bordered:!1,className:f?"disabled-swap-pool-info-card":void 0,children:(0,p.jsxs)(l.Row,{gutter:[16,16],wrap:!1,children:[(0,p.jsx)(l.Col,{span:11,children:(0,p.jsx)(Fe,{mintAddress:(null===t||void 0===t?void 0:t.address)||"",tvl:h,price:h*r.price})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Divider,{type:"vertical",style:{height:"100%"}})}),(0,p.jsx)(l.Col,{span:11,children:(0,p.jsx)(Fe,{mintAddress:(null===s||void 0===s?void 0:s.address)||"",tvl:m,price:m*a.price})})]})})};const He=s.p+"static/media/sen.f2d012c907167ba613b035621b6423cb.svg",Ke=e=>{let{spacing:t=4,iconSize:s=20}=e;return(0,p.jsx)(l.Tooltip,{title:"Sentre Protocol",children:(0,p.jsxs)(l.Space,{size:t,style:{cursor:"pointer"},children:[(0,p.jsx)(l.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:"Powered by"}),(0,p.jsx)(l.Avatar,{src:He,size:s})]})})},Oe=e=>{let{label:t,value:s,onClick:n,active:r=!1}=e;return(0,p.jsx)(l.Typography.Text,{style:{cursor:"pointer",color:r?"#F9575E":"inherit"},onClick:()=>n(s),children:t})},Ze=e=>{let{value:t,onChange:s}=e;return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:[8,8],wrap:!1,children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsx)(l.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Slippage Tolerance"})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Tooltip,{placement:"right",title:(0,p.jsxs)("span",{children:["Your transaction will be canceled if the confirmed price breaks the limited range of"," ",(0,p.jsx)("strong",{style:{color:"#f9575e"},children:100*t+"%."})]}),children:(0,p.jsx)(l.Button,{type:"text",shape:"circle",size:"small",icon:(0,p.jsx)(h,{name:"information-circle-outline"})})})})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Row,{gutter:[8,8],wrap:!1,justify:"space-between",children:[.001,.005,.01,.05,1].map(((e,n)=>(0,p.jsx)(l.Col,{children:(0,p.jsx)(Oe,{label:1===e?"Freely":100*e+"%",value:e,onClick:s,active:e===t})},n)))})})]})},Je=e=>{let{value:t,onChange:s}=e;return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{gutter:[8,8],wrap:!1,children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsx)(l.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Advanced Mode"})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Switch,{size:"small",checkedChildren:(0,p.jsx)(h,{name:"calculator-outline"}),unCheckedChildren:(0,p.jsx)(h,{name:"sparkles-outline"}),checked:t,onChange:s})})]})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Typography.Paragraph,{style:{fontSize:12,textAlign:"justify"},children:[(0,p.jsx)(h,{name:"warning-outline"})," This advanced mode will disable the automatic protection that often results in bad rates and lost funds. Only use this mode if you know what you are doing."]})})]})},Qe="settings",Ve=(0,Y.createAsyncThunk)("settings/updateSettings",(async e=>({...e}))),Xe=(0,Y.createSlice)({name:Qe,initialState:{slippage:.01,advanced:!1},reducers:{},extraReducers:e=>{e.addCase(Ve.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,$e=()=>{const e=(0,n.useDispatch)(),{slippage:t,advanced:s}=(0,n.useSelector)((e=>e.settings));return(0,p.jsxs)(l.Row,{gutter:[4,4],justify:"end",align:"middle",wrap:!1,children:[(0,p.jsx)(l.Col,{children:(0,p.jsx)(Ke,{})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Divider,{type:"vertical",style:{padding:0}})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Popover,{placement:"bottomRight",overlayInnerStyle:{width:300},content:(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Title,{level:5,children:"Settings"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Ze,{value:t,onChange:t=>e(Ve({slippage:t}))})}),(0,p.jsx)(l.Divider,{style:{marginTop:8,marginBottom:8}}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Je,{value:s,onChange:t=>e(Ve({advanced:t}))})})]}),trigger:"click",children:(0,p.jsx)(l.Button,{type:"text",shape:"circle",size:"small",icon:(0,p.jsx)(h,{name:"settings-outline"})})})})]})};var et=s(44891);const tt=e=>{let{onChange:t,disabled:s=!1}=e;const[n,a]=(0,i.useState)([]),[o,d]=(0,i.useState)(""),{tokenProvider:c}=(0,r.useMint)(),{pools:u}=(0,r.usePool)(),{accounts:m}=(0,r.useAccount)(),f=(0,i.useCallback)((async()=>{let e={};const t={},s=await c.all();for(const n of s)t[n.address]=!0;for(const n in m){const{mint:s,amount:r}=m[n];t[s]&&r&&(e[s]=!0)}e={...e,...t};return Object.values(u).map((e=>{let{mint_a:t,mint_b:s}=e;return[t,s]})).flat().filter(((e,t,s)=>s.indexOf(e)===t)).forEach((t=>{e[t]||(e[t]=!0)})),a(Object.keys(e))}),[c,u,m]);(0,i.useEffect)((()=>{f()}),[f]);const g=(0,i.useCallback)((async()=>{if(!o||o.length<3)return t(n);const e=(await c.find(o)).filter((e=>{let{address:t}=e;return n.includes(t)})).map((e=>{let{address:t}=e;return t}));return n.forEach((t=>{if(!e.includes(t)&&t.toLowerCase().includes(o.toLowerCase()))return e.push(t)})),t(e)}),[o,t,c,n]);return(0,i.useEffect)((()=>{g()}),[g]),(0,p.jsx)(l.Card,{className:"card-child",bodyStyle:{padding:8},bordered:!1,children:(0,p.jsx)(l.Input,{placeholder:"Search",value:o,size:"small",bordered:!1,suffix:(0,p.jsx)(l.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:o?()=>d(""):()=>{},icon:(0,p.jsx)(h,{name:o?"close-outline":"search-outline"}),disabled:s}),onChange:e=>d(e.target.value),disabled:s})})},st=e=>{let{mintAddress:t,onClick:s,active:n=!1}=e;return(0,p.jsx)(l.Card,{className:"card-child"+(n?" active":""),bodyStyle:{padding:"8px 16px",cursor:"pointer"},bordered:n,onClick:s,hoverable:!0,children:(0,p.jsx)(l.Row,{gutter:[16,16],children:(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Space,{size:12,style:{marginLeft:-4},children:[(0,p.jsx)(f,{mintAddress:t,size:32}),(0,p.jsx)(l.Typography.Text,{style:{margin:0},children:(0,p.jsx)(v,{mintAddress:t})}),(0,p.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,p.jsx)(l.Typography.Text,{type:"secondary",style:{margin:0,fontSize:12},children:(0,p.jsx)(x,{mintAddress:t})})]})})})})},nt=e=>{let{value:t,onChange:s}=e;const[n,a]=(0,i.useState)([]),{address:d}=t.mintInfo||{},{pools:c}=(0,r.usePool)(),{getDecimals:u}=(0,r.useMint)(),h=(0,i.useCallback)((e=>o.account.isAddress(e)?Object.keys(c).filter((t=>{const{mint_a:s,mint_b:n}=c[t];return[s,n].includes(e)})):[]),[c]),m=(0,i.useCallback)((async e=>{const t=h(e),n=await u(e);return s({mintInfo:{address:e,decimals:n},poolAddresses:t})}),[h,s,u]);return(0,p.jsxs)(l.Row,{gutter:[16,16],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Title,{level:5,children:"Token Selection"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Divider,{style:{margin:0}})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(tt,{onChange:a})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Row,{gutter:[16,16],style:{height:300},className:"scrollbar",children:(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Row,{gutter:[16,16],children:n.slice(0,100).map(((e,t)=>(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(et.ZP,{height:48,overflow:!0,children:(0,p.jsx)(st,{mintAddress:e,onClick:()=>m(e),active:d===e})})},t)))})})})})]})},rt=e=>{var t;let{value:s,onChange:n}=e;const[r,o]=(0,i.useState)(!1),d=(0,a.useHistory)(),{state:c}=(0,a.useLocation)();(0,i.useEffect)((()=>{r&&setTimeout(et.be,500)}),[r]);const u=(null===s||void 0===s||null===(t=s.mintInfo)||void 0===t?void 0:t.address)||"";return(0,p.jsxs)(i.Fragment,{children:[(0,p.jsxs)(l.Space,{style:{cursor:"pointer"},onClick:()=>o(!0),children:[(0,p.jsx)(f,{mintAddress:u}),(0,p.jsx)(l.Typography.Text,{type:"secondary",children:(0,p.jsx)(v,{mintAddress:u})}),(0,p.jsx)(l.Divider,{type:"vertical",style:{marginLeft:4}})]}),(0,p.jsx)(l.Modal,{visible:r,onCancel:()=>o(!1),closeIcon:(0,p.jsx)(h,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,p.jsxs)(l.Row,{gutter:[16,16],children:[(0,p.jsx)(l.Col,{span:24}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(nt,{value:s,onChange:e=>(o(!1),c&&d.replace({...d.location,state:{}}),n(e))})})]})})]})};let it;const at=(0,i.forwardRef)(((e,t)=>{var s;let{max:n,onValue:r=(()=>{}),onChange:a=(()=>{}),...o}=e;const[d,c]=(0,i.useState)(""),[u,m]=(0,i.useState)(null),f=(0,i.useRef)(t),g=(0,i.useCallback)((e=>{const t=e=>{it&&(clearTimeout(it),it=void 0),c(e),it=setTimeout((()=>c("")),500)};return/^\d*(\.\d*)?$/.test(e)?n&&parseFloat(e)>parseFloat(n.toString())?t("Not enough balance"):r(e):t("Invalid character")}),[n,r]);return null!==u&&(null===f||void 0===f||null===(s=f.current)||void 0===s||s.setSelectionRange(u,u)),(0,p.jsx)(l.Tooltip,{title:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(h,{name:"warning"}),d]}),visible:!!d,children:(0,p.jsx)(l.Input,{...o,onChange:e=>{a(e),m(e.target.selectionStart),g(e.target.value||"")},ref:f})})})),ot={accountAddress:"",poolAddresses:[]},lt=e=>{const{wallet:t}=(0,r.useWallet)(),{tokenProvider:s}=(0,r.useMint)(),{pools:n}=(0,r.usePool)(),[a,l]=(0,i.useState)(ot),d=(0,i.useCallback)((async()=>{if(!o.account.isAddress(e)||!Object.keys(n).length)return l(ot);const r=await s.findByAddress(e);if(!r)return l(ot);const{splt:i}=window.sentre,a=await i.deriveAssociatedAddress(t.address,e),d=Object.keys(n).filter((t=>{const{mint_a:s,mint_b:r}=n[t];return[s,r].includes(e)}));l({accountAddress:a,mintInfo:r,poolAddresses:d})}),[e,n,s,t.address]);return(0,i.useEffect)((()=>{d()}),[d]),a},dt=()=>{var e;const t=(0,n.useDispatch)(),{wallet:s}=(0,r.useWallet)(),{ask:{amount:d,accountAddress:c,mintInfo:u,poolAddresses:h}}=(0,n.useSelector)((e=>e)),{state:m}=(0,a.useLocation)(),{balance:f}=ce(c),g=lt(Ie.swap.askDefault),x=null===m||void 0===m?void 0:m.poolAddress;(0,i.useEffect)((()=>{o.account.isAddress(c)||o.account.isAddress(x)||t(ie(g))}),[c,t,x,g]);const y=(0,i.useMemo)((()=>({mintInfo:u,poolAddresses:h})),[u,h]);return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Typography.Text,{children:"To"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(at,{placeholder:"0",value:d,onValue:e=>t(ie({amount:e,prioritized:!0})),size:"large",prefix:(0,p.jsx)(rt,{value:y,onChange:async e=>{const{splt:n}=window.sentre,{address:r}=e.mintInfo||{};if(!o.account.isAddress(r))return t(ie({amount:"",prioritized:!0,...e}));const i=await n.deriveAssociatedAddress(s.address,r);t(ie({amount:"",prioritized:!0,accountAddress:i,...e}))}})})}),(0,p.jsx)(l.Col,{flex:"auto"}),(0,p.jsx)(l.Col,{children:(0,p.jsxs)(l.Space,{className:"caption",children:[(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Available:"}),(0,p.jsx)(l.Typography.Text,{type:"secondary",children:(0,S.uR)(f).format("0,0.[00]")}),(0,p.jsx)(l.Typography.Text,{type:"secondary",children:(0,p.jsx)(v,{mintAddress:(null===(e=y.mintInfo)||void 0===e?void 0:e.address)||""})})]})})]})};var ct=s(33920),ut=s(53933);const pt={mainnet:"worm2ZoG2kUd4vFXhvjh93UUH596ayRfgQ2MgjNMTth",testnet:"Brdguy7BmNB4qwEbcqqMbyV5CyJd2sxQNUn6NEpMSsUb",devnet:"3u8hJUVTA4jH1wYAyUur7FFZVQ8H635K3tSHHF4ssjQ5"},ht={mainnet:"wormDTUJ6AWPNvk59vGQbDvGJmqbDTdgWgAqcLBCgUb",testnet:"A4Us8EhCC76XdGAN17L4KpRNEK423nMivVHZzZqFqqBg",devnet:"DZnkkTmCiFWfYTfT41X3Rd1kDgozqzxWaHqsw6W4x2oe"},mt=()=>ut.Z.get("network")||"mainnet",ft=async e=>{const t=(()=>{const e=mt();return{chainId:ct.rQA,tokenBridgeAddress:ht[e],bridgeAddress:pt[e]}})();return(0,ct._bG)(window.sentre.splt.connection,t.tokenBridgeAddress,e)},gt="#F9575E",xt=()=>{const e=(0,i.lazy)((()=>s.e(662).then(s.t.bind(s,31662,23)).then((e=>({default:e.FrameWormhole})))));return(0,p.jsx)(i.Suspense,{fallback:"Loading...",children:(0,p.jsx)(e,{})})},yt=()=>{const[e,t]=(0,i.useState)(!1),{bid:{mintInfo:s}}=(0,n.useSelector)((e=>e)),{address:r}=s||{};return(0,i.useEffect)((()=>{(async()=>{if(!o.account.isAddress(r))return t(!1);const e=await ft(r);t(e)})()}),[r]),e?(0,p.jsx)(l.Popover,{overlayInnerStyle:{background:"transparent",width:375,boxShadow:"none"},trigger:"click",content:(0,p.jsx)(xt,{}),children:(0,p.jsx)(l.Tag,{style:{margin:0,borderRadius:4,color:(0,S.p)(gt),cursor:"pointer"},color:(0,S.p)(gt,.2),children:"Wormhole Bridge"})}):null},{swap:{bidDefault:vt}}=Ie,jt=()=>{var e;const t=(0,n.useDispatch)(),{wallet:{address:s,lamports:d}}=(0,r.useWallet)(),{bid:{amount:c,accountAddress:u,mintInfo:h,poolAddresses:m}}=(0,n.useSelector)((e=>e)),{amount:f}=ce(u),g=lt(vt),{state:x}=(0,a.useLocation)(),y=null===x||void 0===x?void 0:x.poolAddress,{address:j,decimals:w}=h;(0,i.useEffect)((()=>{o.account.isAddress(u)||o.account.isAddress(y)||t(ne(g))}),[u,t,y,g]);const b=(0,i.useMemo)((()=>({mintInfo:h,poolAddresses:m})),[h,m]),A=(0,i.useMemo)((()=>{if(j!==o.DEFAULT_WSOL)return o.utils.undecimalize(f,w);const e=o.utils.decimalize(.01,w),t=d+f-e;return t<=f?o.utils.undecimalize(f,w):o.utils.undecimalize(t,w)}),[f,w,d,j]),k=e=>t(ne({amount:e,prioritized:!0}));return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsx)(l.Typography.Text,{children:"From"})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(yt,{})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(at,{placeholder:"0",value:c,onValue:k,size:"large",prefix:(0,p.jsx)(rt,{value:b,onChange:async e=>{const{splt:n}=window.sentre,{address:r}=e.mintInfo||{};if(!o.account.isAddress(r))return t(ne({amount:"",prioritized:!0,...e}));const i=await n.deriveAssociatedAddress(s,r);return t(ne({amount:"",prioritized:!0,accountAddress:i,...e}))}}),suffix:(0,p.jsx)(l.Button,{type:"text",size:"small",style:{fontSize:12,marginRight:-7},onClick:()=>k(A),children:"MAX"})})}),(0,p.jsx)(l.Col,{flex:"auto"}),(0,p.jsx)(l.Col,{children:(0,p.jsxs)(l.Space,{className:"caption",children:[(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Available:"}),(0,p.jsx)(l.Typography.Text,{type:"secondary",children:(0,S.uR)(A||0).format("0,0.[00]")}),(0,p.jsx)(l.Typography.Text,{type:"secondary",children:(0,p.jsx)(v,{mintAddress:(null===(e=b.mintInfo)||void 0===e?void 0:e.address)||""})})]})})]})},wt=()=>{const e=(0,n.useDispatch)(),{bid:t,ask:s}=(0,n.useSelector)((e=>e)),r=(0,i.useCallback)((async()=>{const{amount:n,priority:r,...i}=t,{amount:a,priority:o,...l}=s,d=r>o?n:a,c=r>o?ie:ne;await e(ne({...l,amount:"",reset:!0})),await e(ie({...i,amount:"",reset:!0})),await e(c({amount:d,prioritized:!0}))}),[e,s,t]);return(0,p.jsxs)(l.Row,{gutter:[12,12],justify:"center",children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(jt,{})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Button,{size:"small",icon:(0,p.jsx)(h,{name:"git-compare-outline"}),onClick:r})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(dt,{})})]})},bt=()=>(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Row,{gutter:[8,8],justify:"end",align:"middle",wrap:!1,children:(0,p.jsx)(l.Col,{children:(0,p.jsx)($e,{})})})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(wt,{})})]}),At=()=>(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(l.Card,{bordered:!1,className:"card-swap",children:(0,p.jsx)(bt,{})})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(We,{})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Ge,{})})]}),kt={success:[20,224,65],pending:[212,177,6],error:[215,35,17],failed:[215,35,17]},St=e=>{let{tag:t}=e;const s=e=>{let s=kt[t];return`rgba(${s[0]},  ${s[1]}, ${s[2]},${e||1})`};return(0,p.jsx)(l.Tag,{style:{margin:0,borderRadius:4,color:s(),textTransform:"capitalize"},color:s(.1),children:t})},Ct="0,00.[0000]a",Tt=[{title:"TIME",dataIndex:"time"},{title:"TRANSACTION",dataIndex:"transactionId",render:e=>(0,p.jsxs)(l.Space,{align:"baseline",children:[(0,p.jsx)(l.Typography.Text,{onClick:()=>window.open((0,S.kU)(e),"_blank"),style:{fontWeight:700,cursor:"pointer"},children:(0,S.Xn)(e,3,"...")}),(0,p.jsx)(l.Button,{type:"text",size:"small",onClick:()=>window.open((0,S.kU)(e),"_blank"),icon:(0,p.jsx)(h,{name:"open-outline"})})]})},{title:"BID",dataIndex:"bid",render:(e,t)=>t.from?(0,p.jsxs)(l.Space,{size:8,children:[(0,p.jsx)(f,{mintAddress:t.from}),(0,S.uR)(t.amountFrom).format(Ct),(0,p.jsx)(v,{mintAddress:t.from})]}):"--"},{title:"ASK",dataIndex:"ask",render:(e,t)=>t.to?(0,p.jsxs)(l.Space,{size:8,children:[(0,p.jsx)(f,{mintAddress:t.to}),(0,S.uR)(t.amountTo).format(Ct),(0,p.jsx)(v,{mintAddress:t.to})]}):"--"},{title:"STATUS",dataIndex:"status",width:100,render:(e,t)=>(0,p.jsx)(St,{tag:t.status})}];var It=s(55852),Rt=s(68532),Mt=s.n(Rt);class Bt{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class Pt{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class Dt{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}const zt=700;class Nt{constructor(){this.conn=window.sentre.splt.connection}async fetchSignatures(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zt;s>zt&&(s=zt);const n={limit:s,before:t};return this.conn.getConfirmedSignaturesForAddress2(e,n)}async fetchConfirmTransaction(e){let t=[];const s=[];for(let r=0;r<=e.length/150;r++){const t=150*r,n=e.slice(t,t+150);s.push(this.conn.getParsedConfirmedTransactions(n))}const n=await Promise.all(s);for(const r of n)t=t.concat(r);return t}async fetchTransactions(e,t){const s=(new Date).getTime()/1e3;let{secondFrom:n,secondTo:r,lastSignature:i,limit:a}=t;n=Math.floor(n||0),r=Math.floor(r||s);const o=new te.PublicKey(e);let l=[],d=!1;for(;!d;){const e=await this.fetchSignatures(o,i,a);if(null===e||void 0===e||!e.length||d)break;for(const t of e){const e=t.blockTime;if(e&&!(e>r)){if(e<n){d=!0;break}i=t.signature,l.push(t.signature)}}if(a&&l.length>=a)break;if((null===e||void 0===e?void 0:e.length)<zt)break}return await this.fetchConfirmTransaction(l)}}let Lt;!function(e){e.Transfer="transfer"}(Lt||(Lt={}));const Et=1e3;let _t;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(_t||(_t={}));class qt{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const t=new qt,s=e*Et;return t.setMilliSeconds(s),t}static fromYmd(e){const t=new qt,s=c()(e,_t.YMD).valueOf();return t.setMilliSeconds(s),t}static getListDate(e,t){const s=[];let n=qt.fromYmd(e);const r=qt.fromYmd(t);for(;n.ymd()<=r.ymd();)s.push(n.ymd()),n=n.addDay();return s}format(e){const t=new Date(this.milliSeconds);return c()(t).format(e)}subtractDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=c()(this.milliSeconds).subtract(e,"days").valueOf();return qt.fromSeconds(t/Et)}addDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=c()(this.milliSeconds).add(e,"days").valueOf();return qt.fromSeconds(t/Et)}seconds(){return(this.milliSeconds-this.milliSeconds%Et)/Et}ymd(){return Number(this.format(_t.YMD))}static today(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t.YMD;return c()().format(e)}}var Wt=s(97429).Buffer;const{struct:Ft}=s(70320),Ut={key:"code",type:"u8"};let Yt;!function(e){e.Route="SWAP"}(Yt||(Yt={}));const Gt={8:Yt.Route};class Ht extends class{constructor(){this.solana=void 0,this.parseAction=e=>"",this.solana=new Nt}async collect(e,t,s){let{lastSignature:n,limit:r}=t,i=!1,a=[],o=n;for(;!i;){const n=await this.solana.fetchTransactions(e,{...t,lastSignature:o});for(const e of n){o=e.transaction.signatures[0];const t=this.parseTransLog(e);t&&a.push(t)}if(!s)break;if(a=a.filter((e=>s(e))),!n.length||i)break;if(r&&a.length>=r){i=!0;break}}return a}parseTransLog(e){var t,s;const{blockTime:n,meta:r,transaction:i}=e;if(!n||!r)return;const{postTokenBalances:a,preTokenBalances:o,postBalances:l,preBalances:d}=r,{signatures:c,message:u}=i,p=(null===(t=r.innerInstructions)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.instructions)||[],h=u.instructions[0]||[],m=new Bt;m.signature=c[0],m.blockTime=n,m.time=qt.fromSeconds(n).ymd(),m.programId=h.programId.toString();const f=this.parseAccountInfo(u.accountKeys,a||[],o||[],l,d);return this.isParsedInstruction(h)?(m.programTransfer=this.parseListActionTransfer([h],f),m):(m.actionTransfers=this.parseListActionTransfer(p,f),m.programInfo={programId:h.programId.toString(),data:h.data},m.actionType=this.parseAction(m),m)}isParsedInstruction(e){return void 0!==e.parsed}parseListActionTransfer(e,t){const s=[];for(const n of e){if(!this.isParsedInstruction(n))continue;const e=n.parsed||{};if(e.type===Lt.Transfer){const n=e.info,r=this.parseActionTransfer(n,t);r&&s.push(r)}}return s}parseActionTransfer(e,t){const{source:s,destination:n,amount:r,lamports:i}=e,a=r||i.toString();if(!a||!t.has(s)||!t.has(n))return;const o=new Dt;return o.source=t.get(s),o.destination=t.get(n),o.amount=a,o}parseAccountInfo(e,t,s,n,r){const i=new Map;for(const a of t){const{accountIndex:t,mint:s,uiTokenAmount:n}=a,r=new Pt;r.address=e[t].pubkey.toString(),r.postBalance=n.amount,r.mint=s,r.decimals=n.decimals,i.set(r.address,r)}for(const a of s){const{accountIndex:t,uiTokenAmount:s}=a,n=e[t].pubkey.toString(),r=i.get(n)||new Pt;r.preBalance=s.amount,i.set(r.address,r)}return e.forEach(((e,t)=>{const s=e.pubkey.toString();if(!o.account.isAssociatedAddress(s)){const e=i.get(s)||new Pt;e.address=s,e.mint="11111111111111111111111111111111",e.postBalance=String(n[t]||0),e.preBalance=String(r[t]||0),e.decimals=9,i.set(e.address,e)}})),i}}{constructor(){super(...arguments),this.parseAction=e=>{var t;const s=null===(t=e.programInfo)||void 0===t?void 0:t.data;if(!s)return"";const n=Mt().decode(s),r=new Ft([Ut]).fromBuffer(Wt.from(n));return Gt[r.code]||""}}}const Kt="history",Ot=e=>!!e.actionTransfers.length&&"SWAP"===e.actionType,Zt=(0,Y.createAsyncThunk)("history/fetchHistorySwap",(async(e,t)=>{var s;let{lastSignature:n,isLoadMore:r}=e,{getState:i}=t;const{sol:{swapAddress:a}}=It.Z,{history:{historySwap:l}}=i(),d=await(null===(s=window.sentre.wallet)||void 0===s?void 0:s.getAddress());if(!d)throw Error("Loggin first");const u={limit:20,lastSignature:n},p=new Ht,h=await p.collect(d,u,Ot);let m=[];r&&(m=[...l]);for(const j of h){var f,g,x,y,v;if(!j.actionType)continue;const e={},t=j.actionTransfers;let s;const n=t[0];t.length>1&&(s=t[t.length-1]);if(j.programId!==a)continue;const r=new Date(1e3*j.blockTime);e.time=c()(r).format("MMM DD, YYYY HH:mm"),e.amountFrom=n.destination?Number(o.utils.undecimalize(BigInt(n.amount),n.destination.decimals)):void 0,e.amountTo=null!==(f=s)&&void 0!==f&&f.destination?Number(o.utils.undecimalize(BigInt(s.amount),s.destination.decimals)):void 0,e.from=null===(g=n.destination)||void 0===g?void 0:g.mint,e.to=null===(x=s)||void 0===x||null===(y=x.destination)||void 0===y?void 0:y.mint,e.transactionId=j.signature,e.key=j.signature,e.status=n.destination&&null!==(v=s)&&void 0!==v&&v.destination?"success":"failed",m.push(e)}return{historySwap:m}})),Jt=(0,Y.createSlice)({name:Kt,initialState:{historySwap:[]},reducers:{},extraReducers:e=>{e.addCase(Zt.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Qt=()=>{const[e,t]=(0,i.useState)(5),[s,r]=(0,i.useState)(!1),{historySwap:a}=(0,n.useSelector)((e=>e.history)),o=(0,n.useDispatch)(),d=(0,i.useCallback)((async()=>{r(!0),await o(Zt({})).unwrap(),r(!1)}),[o]);(0,i.useEffect)((()=>{d()}),[d]);const c=(0,i.useMemo)((()=>e>5?{height:"auto"}:{height:462}),[e]);return(0,p.jsx)(l.Card,{bordered:!1,style:{...c},children:(0,p.jsxs)(l.Row,{gutter:[16,24],children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsx)(l.Typography.Title,{level:5,children:"Swap history"})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Button,{onClick:()=>{d(),t(5)},children:"Refresh"})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{justify:"center",gutter:[16,9],children:[(0,p.jsx)(l.Col,{span:24,style:{minHeight:310},children:(0,p.jsx)(l.Table,{columns:Tt,dataSource:a.slice(0,e),loading:s,pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row",scroll:{x:800}})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Button,{onClick:()=>{const s=a.slice(0,e).length;if(a.length-s<=15){var n;const e=null===(n=a[a.length-1])||void 0===n?void 0:n.transactionId;o(Zt({lastSignature:e,isLoadMore:!0}))}t(e+5)},type:"text",icon:(0,p.jsx)(h,{name:"chevron-down-outline"}),disabled:e>=a.length,children:"View more"})})]})})]})})},Vt=()=>{const{pools:e}=(0,r.usePool)(),t=(0,n.useDispatch)(),{state:s}=(0,a.useLocation)(),[d,c]=(0,i.useState)(""),[u,h]=(0,i.useState)(""),m=lt(d),f=lt(u),g=null===s||void 0===s?void 0:s.poolAddress,x=(0,i.useCallback)((()=>{if(!o.account.isAddress(g))return;const t=e[g];t&&(c(null===t||void 0===t?void 0:t.mint_a),h(null===t||void 0===t?void 0:t.mint_b))}),[g,e]);return(0,i.useEffect)((()=>{x()}),[x]),(0,i.useEffect)((()=>{o.account.isAddress(m.accountAddress)&&o.account.isAddress(f.accountAddress)&&(t(ne(m)),t(ie(f)))}),[f,m,t]),(0,p.jsxs)(l.Row,{gutter:[24,24],style:{paddingBottom:12},children:[(0,p.jsx)(l.Col,{lg:8,md:12,xs:24,children:(0,p.jsx)(At,{})}),(0,p.jsx)(l.Col,{lg:16,md:12,xs:24,children:(0,p.jsxs)(l.Row,{gutter:[24,24],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(W,{})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(Qt,{})})]})})]})},Xt=()=>{const[e,t]=(0,i.useState)(!1),{route:{platform:s,priceImpact:r}}=(0,n.useSelector)((e=>e)),a=ue();return(0,p.jsxs)(l.Row,{gutter:[8,8],children:[(0,p.jsx)(l.Col,{span:24,children:(0,p.jsx)(wt,{})}),(0,p.jsx)(l.Col,{span:24,children:(0,p.jsxs)(l.Row,{align:"bottom",wrap:!1,children:[(0,p.jsx)(l.Col,{flex:"auto",children:(0,p.jsx)(l.Popover,{placement:"bottomLeft",content:(0,p.jsx)(ee,{}),trigger:"click",children:(0,p.jsxs)(l.Space,{style:{cursor:"pointer"},direction:"vertical",size:4,children:[(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Typography.Text,{children:(0,p.jsx)(h,{name:"information-circle-outline",style:{color:"#7A7B85"}})}),(0,p.jsx)(l.Typography.Text,{type:"secondary",children:"Price impact"})]}),(0,p.jsxs)(l.Space,{children:[(0,p.jsx)(l.Typography.Text,{style:{color:X(r)},children:(0,S.uR)(Number(r)).format("0.[0000]%")}),s===G.JupiterAggregator&&(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,p.jsx)(U,{})]})]})]})})}),(0,p.jsx)(l.Col,{children:(0,p.jsx)(l.Button,{onClick:()=>t(!0),type:"primary",disabled:a,block:!0,children:(0,p.jsxs)(l.Space,{children:[(0,p.jsx)("span",{children:"Review"}),(0,p.jsx)(h,{name:"arrow-forward-outline"})]})})})]})}),(0,p.jsx)(qe,{visible:e,onCancel:t})]})};var $t=s(85912);const es=(0,Y.configureStore)({middleware:e=>e($t.h),devTools:(0,$t.$)("sen_swap"),reducer:{ask:ae,bid:re,settings:Xe,route:Z,history:Jt}}),{manifest:{appId:ts}}=Ie,ss=()=>(0,p.jsx)(r.UIProvider,{appId:ts,antd:!0,children:(0,p.jsx)(r.MintProvider,{children:(0,p.jsx)(r.PoolProvider,{children:(0,p.jsx)(r.AccountProvider,{children:(0,p.jsx)(r.WalletProvider,{children:(0,p.jsx)(n.Provider,{store:es,children:(0,p.jsx)(Vt,{})})})})})})}),ns={size:"small",type:"solid"},rs=()=>(0,p.jsx)(r.UIProvider,{appId:ts,antd:!0,children:(0,p.jsx)(r.MintProvider,{children:(0,p.jsx)(r.PoolProvider,{children:(0,p.jsx)(r.AccountProvider,{children:(0,p.jsx)(r.WalletProvider,{children:(0,p.jsx)(n.Provider,{store:es,children:(0,p.jsx)(Xt,{})})})})})})})},55852:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s(63805);const r={spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},i={devnet:{...r,node:"https://api.devnet.solana.com",chainId:103,sntrAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",sntrPoolAddress:"3EUPL7YQLbU6DNU5LZeQeHPXTf1MigJ2yASXA9rH5Ku4",swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9"},testnet:{...r,node:"https://api.testnet.solana.com",chainId:102,sntrAddress:"",sntrPoolAddress:"",swapAddress:"",taxmanAddress:""},mainnet:{...r,node:"https://solana-api.projectserum.com",chainId:101,sntrAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",sntrPoolAddress:"Aa3WZX7Xunfebp2MuAcz9CNw8TYTDL7mVrmb11rjyVm6",swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}};const a="sen_swap",o={[a]:{url:"https://descartesnetwork.github.io/sen-swap/index.js",appId:a,name:"Sen Swap",author:{name:"Sentre",email:"hi@sentre.io"},supportedViews:"page,widget".split(",").map((e=>e.trim())).filter((e=>["page","widget"].includes(e))),tags:"solana,dapps,sentre".split(",").map((e=>e.trim())),description:"SPLT Swap for SPL tokens",verified:!1}},l={development:{defaultAppId:a,extra:o,senreg:"https://descartesnetwork.github.io/senreg/register.json"},staging:{defaultAppId:a,extra:o,senreg:"https://descartesnetwork.github.io/senreg/register.json"},production:{defaultAppId:a,extra:{},senreg:"https://descartesnetwork.github.io/senreg/register.json"}},d={sol:i[n.ef],register:l[n.OB]}},20418:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var n=s(11796),r=s(67845),i=s(63805),a=s(55852);const o=e=>({symbol:"SOL",name:"Solana",address:"11111111111111111111111111111111",decimals:9,chainId:e,extensions:{coingeckoId:"solana"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"}),l=e=>({symbol:"SNTR",name:"Sentre",address:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",decimals:9,chainId:e,extensions:{coingeckoId:"sentre"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M/logo.png"}),d=[o(103),l(103),{symbol:"wBTC",name:"Wrapped Bitcoin",address:"8jk4eJymMfNZV9mkRNxJEt2VJ3pRvdJvD5FE94GXGBPM",decimals:9,chainId:103,extensions:{coingeckoId:"bitcoin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/qfnqNqs3nCAHjnyCgLRDbBtq4p2MtHZxw8YjSyYhPoL/logo.png"},{symbol:"wETH",name:"Ethereum",address:"27hdcZv7RtuMp75vupThR3T4KLsL61t476eosMdoec4c",decimals:9,chainId:103,extensions:{coingeckoId:"ethereum"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/FeGn77dhg1KXRRFeSwwMiykZnZPw5JXW6naf2aQgZDQf/logo.png"},{symbol:"UNI",name:"Uniswap",address:"FVZFSXu3yn17YdcxLD72TFDUqkdE5xZvcW18EUpRQEbe",decimals:9,chainId:103,extensions:{coingeckoId:"uniswap"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/3MVa4e32PaKmPxYUQ6n8vFkWtCma68Ld7e7fTktWDueQ/logo.png"},{symbol:"USDC",name:"USD Coin",address:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",decimals:9,chainId:103,extensions:{coingeckoId:"usd-coin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"}],{sol:{chainId:c}}=a.Z,u=/[\W_]+/g,p={tokenize:"full",context:!0,minlength:3},h={document:{id:"address",index:[{field:"symbol",...p},{field:"name",...p}]}};const m=class{constructor(){this.tokenMap=void 0,this.engine=void 0,this.chainId=void 0,this.cluster=void 0,this.loading=void 0,this.queue=void 0,this._init=async()=>this.tokenMap.size?[this.tokenMap,this.engine]:new Promise((async e=>{if(this.loading)return this.queue.push(e);this.loading=!0;let t=await(await(new r.DK).resolve()).filterByChainId(this.chainId).getList();for("devnet"===this.cluster&&(t=t.concat(d)),t="testnet"===this.cluster?t.concat([l(102),o(102)]):t.concat([o(101)]),t.forEach((e=>this.tokenMap.set(e.address,e))),this.engine=new n.Document(h),this.tokenMap.forEach((e=>{let{address:t,...s}=e;return this.engine.add(t,s)})),e([this.tokenMap,this.engine]);this.queue.length;)this.queue.shift()([this.tokenMap,this.engine]);this.loading=!1})),this.all=async()=>{const[e]=await this._init();return Array.from(e.values())},this.findByAddress=async e=>{const[t]=await this._init();return t.get(e)},this.find=async(e,t)=>{const[s,n]=await this._init();let r=[];return e.split(u).forEach((e=>n.search(e,t).forEach((e=>{let{result:t}=e;return t.forEach((e=>{if(r.findIndex((t=>{let{address:s}=t;return s===e}))<0){const t=s.get(e);t&&r.push(t)}}))})))),r},this.tokenMap=new Map,this.engine=void 0,this.chainId=c,this.cluster=i.ef,this.loading=!1,this.queue=[],this._init()}}},67751:(e,t,s)=>{"use strict";s.d(t,{U:()=>r});var n=s(15822);class r{static set(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.qf;this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),s.ttl)}static get(e){return this.mapCache.get(e)}}r.mapCache=new Map},15822:(e,t,s)=>{"use strict";s.d(t,{qf:()=>n,Dt:()=>r});const n={ttl:3e4},r={limit:{calls:10,time:1e3},cache:n}},21411:(e,t,s)=>{"use strict";s.d(t,{R:()=>a});var n=s(15822),r=s(85964),i=s(67751);class a{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new o(e);return this.mapInstance.set(t,s),s}static async load(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof e&&(e=JSON.stringify(e));let n=a.getSingleFlight(s);a.mapInstance.set(e,n);const i=new r.g(e);return n.load(i,t)}}a.mapInstance=new Map;class o{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(n.Dt,e)}async load(e,t){const s=i.U.get(e.key);if(s)return Promise.resolve(s);let n=!1,r=this.mapRequestCalling.get(e.key);return r||(r=e,n=!0,this.mapRequestCalling.set(r.key,r)),new Promise(((e,s)=>{if(!r)return s("Not found request!");r.add(e,s),n&&this.fetch(r,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{i.U.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){return!0}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}},85964:(e,t,s)=>{"use strict";s.d(t,{g:()=>n});class n{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}},85912:(e,t,s)=>{"use strict";s.d(t,{$:()=>n,h:()=>r});const n=e=>!1;BigInt.prototype.toJSON=function(){return this.toString()};const r={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e}}},63805:(e,t,s)=>{"use strict";s.d(t,{OB:()=>r,ef:()=>i});var n=s(53933);const r="production",i=(()=>{switch(n.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})()},53933:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n="sentre",r=window.localStorage,i=e=>{try{return e?JSON.parse(e):null}catch(t){return null}},a={set:(e,t)=>{let s=i(r.getItem(n));s&&"object"===typeof s||(s={}),s[e]=t,r.setItem(n,JSON.stringify(s))},get:e=>{let t=i(r.getItem(n));return t&&"object"===typeof t?t[e]:null},clear:e=>{a.set(e,null)}},o=a},34559:(e,t,s)=>{"use strict";s.d(t,{sA:()=>l,Xn:()=>d,kU:()=>c,uR:()=>u,p:()=>p,l$:()=>h});var n=s(95418),r=s(16200),i=s.n(r),a=s(63805),o=s(21411);const l=e=>new Promise((t=>setTimeout(t,e))),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.substring(0,t)+s+e.substring(e.length-t,e.length)},c=e=>n.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${a.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${a.ef}`,u=e=>e&&Number.isFinite(Number(e))?i()(e):i()("0"),p=(e,t)=>{let s=Math.floor(16777215*Math.random());if(e){s=0;for(let t=0;t<e.length;t++)s=e.charCodeAt(t)+((s<<5)-s)}var n=[0,0,0];for(let i=0;i<3;i++){var r=s>>8*i&255;n[i]=r}return`rgba(${n[0]}, 100, ${n[1]},${t||1})`},h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.R.load("fetchCGK"+e,(()=>n.utils.parseCGK(e)))}},88677:()=>{},46601:()=>{},89214:()=>{},85568:()=>{},34845:()=>{},52361:()=>{},94616:()=>{},33370:()=>{},55024:()=>{}}]);
//# sourceMappingURL=427.7b421894.chunk.js.map