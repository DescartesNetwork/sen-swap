(globalThis.webpackChunksen_swap=globalThis.webpackChunksen_swap||[]).push([["node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive-src_bootstrap_app_tsx-sr-6b1ed9","node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive"],{90571:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=90571,e.exports=t},98463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactComponent:()=>u,default:()=>p});var n,r,a,i,o,l=s(92950);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},d.apply(this,arguments)}function c(e,t){let{title:s,titleId:c,...u}=e;return l.createElement("svg",d({width:257,height:256,viewBox:"0 0 257 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},u),s?l.createElement("title",{id:c},s):null,n||(n=l.createElement("path",{d:"M0.622803 60C0.622803 26.8629 27.4857 0 60.6228 0H196.623C229.76 0 256.623 26.8629 256.623 60V196C256.623 229.137 229.76 256 196.623 256H60.6228C27.4857 256 0.622803 229.137 0.622803 196V60Z",fill:"url(#paint0_linear_1991_5334)"})),r||(r=l.createElement("path",{opacity:.5,d:"M173.411 88.5162C173.411 85.8961 170.825 53.5885 173.411 74.5451C175.067 72.6924 178.384 68.7581 180.726 68.7581C183.067 68.7581 189.414 66.9054 191.069 68.7581C192.725 70.6108 191.069 85.8961 191.069 88.5162L191.069 167.549C191.069 178.029 187.349 188.08 180.726 195.491C174.103 202.902 165.12 207.065 155.753 207.065C146.387 207.065 137.404 202.902 130.781 195.491C124.158 188.08 120.438 178.029 120.438 167.549L120.438 88.5162C120.438 83.2761 118.577 78.2505 115.266 74.5451C111.954 70.8398 107.463 68.7581 102.78 68.7581C98.0965 68.7581 93.6051 70.8398 90.2936 74.5451C86.9821 78.2505 85.1217 83.276 85.1217 88.5162L85.1217 177.428C85.1217 180.048 84.1915 182.561 82.5358 184.413C80.88 186.266 78.6343 187.307 76.2928 187.307C73.9512 187.307 71.7055 186.266 70.0497 184.413C68.394 182.561 67.4638 180.048 67.4638 177.428L67.4638 88.5162C67.4638 78.0359 71.1846 67.9848 77.8076 60.574C84.4306 53.1633 93.4133 49 102.78 49C112.146 49 121.129 53.1633 127.752 60.574C134.375 67.9848 138.096 78.0359 138.096 88.5162L138.096 167.549C138.096 172.789 139.956 177.814 143.267 181.52C146.579 185.225 151.07 187.307 155.753 187.307C160.437 187.307 164.928 185.225 168.239 181.52C171.551 177.814 173.411 172.789 173.411 167.549L173.411 88.5162Z",fill:"white"})),a||(a=l.createElement("path",{d:"M161.626 95.3311C159.955 97.1241 157.717 98.1163 155.394 98.0939C153.071 98.0714 150.849 97.0362 149.206 95.2112C147.563 93.3861 146.632 90.9172 146.611 88.3363C146.591 85.7554 147.484 83.2689 149.098 81.4124L175.677 51.8821C177.338 50.0367 179.591 49.0001 181.941 49.0001C184.29 49.0001 186.543 50.0367 188.204 51.8821L214.783 81.4124C216.397 83.2689 217.29 85.7554 217.27 88.3363C217.249 90.9172 216.318 93.3861 214.675 95.2112C213.032 97.0362 210.81 98.0714 208.487 98.0939C206.164 98.1163 203.927 97.1241 202.256 95.3311L181.941 72.76L161.626 95.3311Z",fill:"white"})),i||(i=l.createElement("path",{d:"M55.6986 160.846C54.0422 159.005 51.7959 157.971 49.4538 157.971C47.1116 157.971 44.8653 159.005 43.2089 160.846C41.553 162.687 40.6228 165.185 40.6228 167.788C40.6228 170.392 41.553 172.889 43.2089 174.731L69.7075 204.19C71.3639 206.031 73.6101 207.065 75.9523 207.065C78.2944 207.065 80.5407 206.031 82.1971 204.19L108.696 174.731C110.352 172.889 111.282 170.392 111.282 167.788C111.282 165.185 110.352 162.687 108.696 160.846C107.039 159.005 104.793 157.971 102.451 157.971C100.109 157.971 97.8624 159.005 96.206 160.846L75.9523 183.362L55.6986 160.846Z",fill:"white"})),o||(o=l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_1991_5334",x1:.999999,y1:-114739e-11,x2:257,y2:256,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#3E8C6A"}),l.createElement("stop",{offset:1,stopColor:"#5C997E"})))))}const u=l.forwardRef(c),p=s.p+"static/media/logo.d86456fa078e55b87bfac60a8309fe54.svg"},45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return i.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return o.default}});var n=l(s(70854)),r=l(s(27803)),a=l(s(85468)),i=l(s(98463)),o=l(s(83272));function l(e){return e&&e.__esModule?e:{default:e}}const d=[n.default,r.default,a.default];t.h0=d},65702:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>vs,__esModule:()=>ws.X$,logo:()=>ws.jY,panels:()=>ws.h0,readme:()=>ws.ng});var n=s(55754),r=s(49471),a=s(92950),i=s(45055),o=s(12636),l=s(71256),d=s(32671),c=s(4550),u=s.n(c),p=s(69716),m=s(74939),h=s(99370),f=s(45263);const g=()=>{const{bid:{mintInfo:e},ask:{mintInfo:t}}=(0,n.useSelector)((e=>e)),s=(null===e||void 0===e?void 0:e.address)||"",r=(null===t||void 0===t?void 0:t.address)||"";return(0,f.jsxs)(d.Space,{children:[(0,f.jsxs)(d.Avatar.Group,{children:[(0,f.jsx)(m.Z,{mintAddress:r}),(0,f.jsx)(m.Z,{mintAddress:s})]}),(0,f.jsxs)(d.Typography.Text,{children:[(0,f.jsx)(h.Z,{mintAddress:r})," / ",(0,f.jsx)(h.Z,{mintAddress:s})]})]})};var x=s(76907),y=s.n(x),w=s(21111),j=s.n(w);const v=e=>{let{chartData:t=[],labels:s=[],type:n="line",configs:i,disableAxe:o=!1,chartId:l="sen_chart"}=e;const{backgroundColor:d}=i||{},[c,u]=(0,a.useState)(!1),p=(0,a.useCallback)(((e,t,s)=>({labels:t,datasets:[{...i,data:e,backgroundColor:s}]})),[i]),m=(0,a.useRef)(null),h=(0,a.useCallback)((()=>{var e,t;if(!m||!d)return"#dadada";const s=null===m||void 0===m||null===(e=m.current)||void 0===e||null===(t=e.canvas)||void 0===t?void 0:t.getContext("2d"),r=null===s||void 0===s?void 0:s.createLinearGradient(0,0,0,180);null===r||void 0===r||r.addColorStop(0,d),null===r||void 0===r||r.addColorStop(1,`${d}00`);return"line"===n?r:d}),[d,n]);return(0,a.useEffect)((()=>{var e;const n=m.current,r=null===n||void 0===n||null===(e=n.data.datasets)||void 0===e?void 0:e.find((e=>{let{data:t}=e;return t})),a=j()(null===r||void 0===r?void 0:r.data,t);n&&!a&&(n.data=p(t,s,h()),null===n||void 0===n||n.update())}),[t,p,h,s]),(0,f.jsx)("canvas",{id:l,height:"180px",ref:e=>{if(!e)return;const t=e.getContext("2d");t&&!c&&(m.current=new(y())(t,{type:n,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!o}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!o,beginAtZero:!1,maxTicksLimit:8,callback:function(e,t,s){return r.util.numeric(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:(e,t)=>{const s=document.getElementById(l);s&&(s.style.cursor=t[0]?"pointer":"default")}}}}),u(!0))}})},b=()=>(0,f.jsx)(d.Row,{style:{height:170},align:"middle",justify:"center",children:(0,f.jsx)(d.Col,{children:(0,f.jsx)(d.Empty,{})})}),C=s.p+"static/media/coingecko-logo.f8569e1153553894f964.png",A=e=>{let{title:t="Powered by",spacing:s=4,iconSize:n=20}=e;return(0,f.jsxs)(d.Space,{size:s,style:{cursor:"pointer"},children:[(0,f.jsx)(d.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:t}),(0,f.jsx)(d.Tooltip,{title:"CoinGecko",children:(0,f.jsx)(d.Avatar,{src:C,size:n})})]})};var S=s(21995),T=s.n(S);new r.TokenProvider;const k=async(e,t)=>{try{const s=await T()({method:"get",url:`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&days=${t.days}&interval=${t.interval}`});return s.data.prices.map((e=>({time:e[0],val:e[1]})))}catch(s){return[]}};var I;!function(e){e.day="day",e.week="week",e.month="month",e.year="year"}(I||(I={}));const D={day:{amount:4,unit:"hours",format:"HH:00"},week:{amount:1,unit:"days",format:"MMM DD"},month:{amount:5,unit:"days",format:"MMM DD"},year:{amount:2,unit:"months",format:"MMM DD"}},B={day:{days:1,interval:"hourly"},week:{days:7,interval:"daily"},month:{days:31,interval:"daily"},year:{days:365,interval:"daily"}},M="#3E8C6A",R=0,N=14,E="TVL",_="transparent",z=()=>{var e,t,s;const[i,o]=(0,a.useState)(I.week),[l,c]=(0,a.useState)([]),m=(0,n.useSelector)((e=>e.bid)),h=(0,n.useSelector)((e=>e.ask)),x={borderColor:_,borderRadius:R,pointRadius:R,tooltip:E,pointHitRadius:N,pointHoverRadius:R,backgroundColor:M},y=(0,a.useCallback)((e=>{const t=[],{format:s,amount:n,unit:r}=D[i];let a=u()();for(const i of e.reverse()){const e=u()(i.time).format(s);if(e===a.format(s)){let o=e;e===u()().format(s)&&(o=u()().format("HH:mm")),a&&t.unshift({label:o,val:i.val}),a=a.subtract(n,r)}else"00:00"===e&&t.unshift({label:a.format("MMM DD"),val:i.val})}c(t)}),[i]),w=(0,a.useCallback)((e=>{const t=[],{format:s,amount:n,unit:r}=D[i];let a=u()();for(const i of e.reverse()){const e=u()(i.time).format(s);e!==a.format(s)||(a=a.subtract(n,r),t.unshift({label:e,val:i.val}))}c(t)}),[i]),j=(0,a.useCallback)((async()=>{var e,t,s,n;const a=await r.tokenProvider.findByAddress((null===(e=m.mintInfo)||void 0===e?void 0:e.address)||""),o=await r.tokenProvider.findByAddress((null===(t=h.mintInfo)||void 0===t?void 0:t.address)||""),l=null===a||void 0===a||null===(s=a.extensions)||void 0===s?void 0:s.coingeckoId,d=null===o||void 0===o||null===(n=o.extensions)||void 0===n?void 0:n.coingeckoId,u=m.accountAddress===h.accountAddress;if(!d||!l||u)return c([]);const p=B[i],[f,g]=await Promise.all([k(l,p),k(d,p)]),x=[];for(let r=f.length-1;r>=0;r--){const e=f[r],t=g[g.length-f.length+r];e&&t&&x.unshift({time:e.time,val:t.val/e.val})}return i===I.day?y(x):w(x)}),[h.accountAddress,null===(e=h.mintInfo)||void 0===e?void 0:e.address,m.accountAddress,null===(t=m.mintInfo)||void 0===t?void 0:t.address,i,w,y]);(0,a.useEffect)((()=>{j()}),[j]);const C=(null===(s=l[l.length-1])||void 0===s?void 0:s.val)||0,S=r.util.numeric(C).format(C>1?"0,0.[00]":"0,0.[00000000]");return(0,f.jsx)(d.Card,{bordered:!1,className:"card-swap",bodyStyle:{paddingTop:28},children:(0,f.jsxs)(d.Row,{gutter:[24,24],children:[(0,f.jsx)(d.Col,{span:24,children:(0,f.jsxs)(d.Row,{gutter:[20,20],children:[(0,f.jsx)(d.Col,{flex:"auto",children:(0,f.jsxs)(d.Space,{children:[(0,f.jsx)(g,{}),(0,f.jsx)(d.Popover,{content:(0,f.jsx)(A,{title:"Reference Market Price. Powered by"}),children:(0,f.jsx)(d.Button,{type:"text",icon:(0,f.jsx)(p.Z,{name:"information-circle-outline"})})})]})}),l&&!!l.length&&(0,f.jsx)(d.Col,{children:(0,f.jsxs)(d.Radio.Group,{defaultValue:I.week,onChange:e=>o(e.target.value),className:"chart-radio-btn",children:[(0,f.jsx)(d.Radio.Button,{value:I.day,children:"1D"}),(0,f.jsx)(d.Radio.Button,{value:I.week,children:"1W"}),(0,f.jsx)(d.Radio.Button,{value:I.month,children:"1M"}),(0,f.jsx)(d.Radio.Button,{value:I.year,children:"1Y"})]})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(d.Typography.Title,{level:2,children:C?S:""})})]})}),(0,f.jsx)(d.Col,{span:24,children:l&&l.length?(0,f.jsx)(v,{chartData:null===l||void 0===l?void 0:l.map((e=>e.val)),labels:null===l||void 0===l?void 0:l.map((e=>e.label)),configs:x}):(0,f.jsx)(b,{})})]})})};const P=s.p+"static/media/jupiter-logo.6553c3779ce16057aa846301783447a2.svg",L=e=>{let{title:t="Powered by",spacing:s=4,iconSize:n=20}=e;return(0,f.jsxs)(d.Space,{size:s,style:{cursor:"pointer"},children:[(0,f.jsx)(d.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:t}),(0,f.jsx)(d.Tooltip,{title:"Jupiter Aggregator",children:(0,f.jsx)(d.Avatar,{src:P,size:n})})]})};var Z=s(19289);let F;!function(e){e[e.SenSwap=0]="SenSwap",e[e.JupiterAggregator=1]="JupiterAggregator"}(F||(F={}));const O="route",W={platform:F.SenSwap,best:[],amount:BigInt(0),priceImpact:0,loadingJupSwap:!1,loadingSenswap:!1},H=(0,Z.createAsyncThunk)("route/setLoadingJupiterRoute",(async e=>{let{loadingJupSwap:t}=e;return{loadingJupSwap:t}})),J=(0,Z.createAsyncThunk)("route/loadingSenswap",(async e=>{let{loadingSenswap:t}=e;return{loadingSenswap:t}})),Y=(0,Z.createAsyncThunk)("route/updateRoute",(async e=>e?{...e}:{})),U=(0,Z.createSlice)({name:O,initialState:W,reducers:{},extraReducers:e=>{e.addCase(Y.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(H.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(J.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,G=()=>{const{bid:{mintInfo:e},route:{platform:t,best:s}}=(0,n.useSelector)((e=>e)),i=null===e||void 0===e?void 0:e.address,o=(0,a.useMemo)((()=>{if(!s.length||!r.util.isAddress(i))return[];let e=[i];for(const t of s){const{dstMintAddress:s}=t;r.util.isAddress(s)&&e.push(s)}return e}),[i,s]);return(0,f.jsxs)(d.Space,{children:[null===o||void 0===o?void 0:o.map(((e,t)=>(0,f.jsxs)(a.Fragment,{children:[(0,f.jsx)(m.Z,{mintAddress:e}),o.length>t+1&&(0,f.jsx)(p.Z,{name:"chevron-forward-outline"})]},t))),t===F.JupiterAggregator&&(0,f.jsxs)(a.Fragment,{children:[(0,f.jsx)(d.Divider,{type:"vertical",style:{margin:0}}),(0,f.jsx)(L,{})]})]})},K=()=>{const[e,t]=(0,a.useState)(!1),{bid:{mintInfo:s,amount:i},ask:{mintInfo:o,amount:l}}=(0,n.useSelector)((e=>e)),c=(null===s||void 0===s?void 0:s.address)||"",u=(null===o||void 0===o?void 0:o.address)||"",m=r.util.numeric(Number(l)/Number(i)).format("0,0.[000000]"),g=r.util.numeric(Number(i)/Number(l)).format("0,0.[000000]");return(0,f.jsxs)(d.Space,{children:[(0,f.jsx)(d.Button,{type:"text",onClick:()=>t(!e),shape:"circle",icon:(0,f.jsx)(p.Z,{name:"swap-horizontal-outline"})}),(0,f.jsx)(d.Typography.Text,{children:e?g:m}),(0,f.jsxs)(d.Typography.Text,{children:[e?(0,f.jsx)(h.Z,{mintAddress:c}):(0,f.jsx)(h.Z,{mintAddress:u})," / ",e?(0,f.jsx)(h.Z,{mintAddress:u}):(0,f.jsx)(h.Z,{mintAddress:c})]})]})};let q;!function(e){e[e.goodSwap=.01]="goodSwap",e[e.acceptableSwap=.05]="acceptableSwap"}(q||(q={}));const V={Swap:"swap",Pools:"pools"},X=e=>e<q.goodSwap?"#14E041":e>q.acceptableSwap?"#D72311":"#FA8C16";var Q=s(95418);const $=e=>{const[t,s]=(0,a.useState)(void 0),n=(0,r.useGetMintDecimals)(),i=(0,a.useCallback)((async()=>{try{const t=await n({mintAddress:e})||0;return s(t)}catch(t){return s(void 0)}}),[e,n]);return(0,a.useEffect)((()=>{i()}),[i]),t},ee=(e,t,s)=>r.util.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(Q.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},te=e=>{const t=(0,r.useWalletAddress)(),s=(0,r.useWalletBalance)(),n=(0,r.useAccounts)(),{amount:a,mint:i}=n[e]||{},o=$(i)||0;return r.util.isAddress(t)&&r.util.isAddress(e)?e===t?ee(Q.DEFAULT_EMPTY_ADDRESS,BigInt(s),9):ee(i,a,o):ee()},se=te,ne=()=>{const{route:{best:e,loadingJupSwap:t,loadingSenswap:s},bid:{amount:i,accountAddress:o,mintInfo:{address:l,decimals:d}},ask:{amount:c,mintInfo:{address:u}}}=(0,n.useSelector)((e=>e)),p=(0,r.useWalletBalance)(),{amount:m}=se(o),h=(0,a.useMemo)((()=>{if(l!==Q.DEFAULT_WSOL)return Q.utils.undecimalize(m,d);const e=Q.utils.decimalize(.01,d),t=BigInt(p)+BigInt(m)-e;return t<=m?Q.utils.undecimalize(m,d):Q.utils.undecimalize(t,d)}),[m,l,d,p]);return{disabled:!e.length||!Number(i)||!Number(c)||Number(i)>Number(h)||l===u,loading:t||s}},re=e=>{let{label:t="",content:s="",loading:n=!1}=e;return(0,f.jsxs)(d.Row,{align:"middle",children:[(0,f.jsx)(d.Col,{flex:"auto",children:(0,f.jsx)(d.Typography.Text,{type:"secondary",children:t})}),(0,f.jsx)(d.Col,{children:n?(0,f.jsx)(d.Skeleton.Input,{style:{width:150},active:!0,size:"small"}):(0,f.jsx)("span",{children:s})})]})},ae=()=>{const{route:{priceImpact:e},settings:{slippage:t}}=(0,n.useSelector)((e=>e)),{loading:s}=ne();return(0,f.jsxs)(d.Row,{gutter:[12,12],children:[(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(re,{label:"Price impact",content:(0,f.jsx)(d.Typography.Text,{style:{color:X(e)},children:r.util.numeric(Number(e)).format("0.[0000]%")}),loading:s})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(re,{label:"Price",content:(0,f.jsx)(K,{}),loading:s})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(re,{label:"Slippage Tolerance",content:r.util.numeric(t).format("0.[00]%"),loading:s})}),(0,f.jsx)(d.Col,{span:24,style:{minHeight:24},children:(0,f.jsx)(re,{label:"Route",content:(0,f.jsx)(G,{}),loading:s})})]})};var ie=s(93253);const oe={address:"",icon:"",name:"TOKEN",price:0,priceChange:0,rank:0,symbol:"TOKEN",totalVolume:0},le=e=>{const[t,s]=(0,a.useState)(oe),n=(0,a.useCallback)((async()=>{if(!e)return s(oe);try{var t;const n=await r.tokenProvider.findByAddress(e),a=null===n||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.coingeckoId,i=await r.util.fetchCGK(a);return s(i)}catch(n){return s(oe)}}),[e]);return(0,a.useEffect)((()=>{n()}),[n]),t};const de={appId:"sen_swap",url:"https://descartesnetwork.github.io/sen-swap/index.js"},ce={devnet:{cluster:"devnet",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9",get swap(){return new Q.Swap(this.swapAddress,this.spltAddress,this.splataAddress,r.rpc)}},testnet:{cluster:"testnet",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",swapAddress:"",taxmanAddress:"",get swap(){return new Q.Swap(this.swapAddress,this.spltAddress,this.splataAddress,r.rpc)}},mainnet:{cluster:"mainnet-beta",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e",get swap(){return new Q.Swap(this.swapAddress,this.spltAddress,this.splataAddress,r.rpc)}}},ue={devnet:{bidDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ"},testnet:{bidDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ"},mainnet:{bidDefault:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",askDefault:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M"}},pe={devnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"},testnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"},mainnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"}},me={devnet:{assetsRoute:"/app/sen_assets"},testnet:{assetsRoute:"/app/sen_assets"},mainnet:{assetsRoute:"/app/sen_assets"}},he={manifest:{development:{...de},production:{...de}}[r.env],sol:ce[r.net],swap:ue[r.net],wormhole:pe[r.net],route:me[r.net]},{manifest:{appId:fe}}=he,ge="validated_swap_transaction",xe=e=>{let{txId:t=""}=e;const{bid:{amount:s,mintInfo:{address:i}}}=(0,n.useSelector)((e=>e)),o=(0,r.useWalletAddress)(),{price:l}=le(i);return(0,a.useEffect)((()=>{(async()=>{const e=(0,r.createPDB)(o,fe);if(!t||!e)return;const n=await e.getItem(ge)||{txIds:[],amount:0};let a=Number(s)*l;const i=n.txIds;!t||null!==i&&void 0!==i&&i.includes(t)||i.push(t),n.amount&&(a+=n.amount);const d={txIds:i,amount:a};await e.setItem(ge,d)})()}),[s,l,t,o]),(0,f.jsx)(a.Fragment,{})},ye=BigInt(1e9),{sol:{swap:we}}=he,je=()=>{const{route:{best:e},bid:{amount:t,mintInfo:{decimals:s}},ask:{amount:i,mintInfo:{decimals:o}},settings:{slippage:l}}=(0,n.useSelector)((e=>e)),d=(0,r.useWalletAddress)();return(0,a.useCallback)((async()=>{const{solana:n}=window.sentre;if(!n)throw new Error("Wallet is not connected");const a=await Promise.all(e.map((async e=>{let{srcMintAddress:t,dstMintAddress:s,poolData:{address:n}}=e;return{poolAddress:n,srcAddress:await r.splt.deriveAssociatedAddress(d,t),dstAddress:await r.splt.deriveAssociatedAddress(d,s)}}))),c=Q.utils.decimalize(t,s),u=Q.utils.decimalize(i,o)*(ye-Q.utils.decimalize(l,9))/ye;return await we.route(c,u,a,n)}),[e,s,o,l,d,t,i])},ve=Q.Swap.oracle,be=(e,t)=>{if(!e)return BigInt(0);const{srcMintAddress:s,dstMintAddress:n,poolData:r}=t,{fee_ratio:a,tax_ratio:i}=r,o=Ae(s,r),l=Ae(n,r);if(!o||!l)return BigInt(0);const{askAmount:d}=ve.swap(e,o,l,a,i);return d},Ce=(e,t)=>{if(!e)return BigInt(0);const{srcMintAddress:s,dstMintAddress:n,poolData:r}=t,{fee_ratio:a,tax_ratio:i}=r,o=Ae(s,r),l=Ae(n,r);if(!o||!l)return BigInt(0);return ve.inverseSwap(e,o,l,a,i)},Ae=(e,t)=>{const{mint_a:s,mint_b:n,reserve_a:r,reserve_b:a}=t;if(e===s)return r;if(e===n)return a;throw new Error("Cannot find reserves")},Se=(e,t)=>{if(!t)return 0;let s=t,n=1;return e.forEach((e=>{const t=Number(Q.utils.undecimalize(((e,t)=>{if(!e)return BigInt(0);const{srcMintAddress:s,dstMintAddress:n,poolData:r}=t,{fee_ratio:a,tax_ratio:i}=r,o=Ae(s,r),l=Ae(n,r);return o&&l?ve.slippage(e,o,l,a,i):BigInt(0)})(s,e),9));n*=1-t;const r=be(s,e);s=r})),1-n},Te=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=[],a=new Map(e),i=e.get(t);return n>=3||(a.delete(t),null===i||void 0===i||i.forEach(((e,i)=>{const o=t,l=o===e.mint_a?e.mint_b:e.mint_a,d={srcMintAddress:o,dstMintAddress:l,poolData:{...e,address:i}};if(l===s)return r.push([d]);Te(a,l,s,n+1).forEach((e=>r.push([d,...e])))}))),r},ke=()=>({pools:(0,n.useSelector)((e=>e.pools))}),Ie=e=>{const{pools:t}=ke(),[s,n]=(0,a.useState)(0),{getMintTotalValue:i}=(()=>{const{pools:e}=ke(),t=(0,r.useGetMintData)(),s=(0,a.useCallback)((async(e,t)=>{try{var s;const n=await r.tokenProvider.findByAddress(e),a=null===n||void 0===n||null===(s=n.extensions)||void 0===s?void 0:s.coingeckoId;if(!a)throw new Error("Cant not find coingeckoId");const i=await r.util.fetchCGK(a);return Number(Q.utils.undecimalize(t,n.decimals))*i.price}catch(n){return 0}}),[]),n=(0,a.useCallback)((async a=>{let{mintAddress:i,amount:o}=a;if(!o)return 0;if(await r.tokenProvider.findByAddress(i))return s(i,o);const l=Object.values(e).find((e=>e.mint_lpt===i));if(!l)return 0;const{reserve_a:d,reserve_b:c,mint_a:u,mint_b:p}=l;if(d*c===BigInt(0))return 0;const m=await t({mintAddress:i}).then((e=>e?e[i].supply:BigInt(0))),{deltaA:h,deltaB:f}=Q.Swap.oracle.withdraw(o,m,d,c);return await n({mintAddress:u,amount:h})+await n({mintAddress:p,amount:f})}),[t,s,e]);return{getMintTotalValue:n}})(),o=(0,a.useCallback)((async e=>{const s=t[e];if(!s)return 0;const{reserve_a:n,reserve_b:r,mint_a:a,mint_b:o}=s;return await i({mintAddress:a,amount:n})+await i({mintAddress:o,amount:r})}),[i,t]),l=(0,a.useCallback)((async e=>{if(!e)return n(0);const t=await o(e);n(t)}),[o]);return(0,a.useEffect)((()=>{l(e)}),[l,e]),{tvl:s,getTvl:o}},De=e=>{const[t,s]=(0,a.useState)({platform:F.SenSwap,best:[],amount:BigInt(0),priceImpact:0}),{bid:i,ask:o}=(0,n.useSelector)((e=>e)),{pools:l}=ke(),{getTvl:d}=Ie(),c=(0,a.useCallback)((async()=>{const{poolAddresses:t,mintInfo:{address:n},amount:a,priority:c}=i,{poolAddresses:u,mintInfo:{address:p},amount:m,priority:h}=o;let f={platform:F.SenSwap,best:[],amount:BigInt(0),priceImpact:0};if(!Number(a)&&!Number(m)||!r.util.isAddress(n)||!r.util.isAddress(p)||!t.length||!u.length||n===p)return s(f);let g={};await Promise.all(Object.keys(l).map((async e=>{await d(e)<1e3||(g[e]=l[e])})));let x=Te((e=>{const t=new Map;for(const s in e){const n=e[s];1===(null===n||void 0===n?void 0:n.state)&&[n.mint_a,n.mint_b].forEach((e=>{var r;t.has(e)||t.set(e,new Map),null===(r=t.get(e))||void 0===r||r.set(s,n)}))}return t})(g),n,p);return x.length?(r.util.isAddress(e)&&(x=x.filter((t=>1===t.length&&t[0].poolData.address===e))),f=h<c?((e,t)=>{const{amount:s,mintInfo:n}=t;let r={platform:F.SenSwap,best:[],amount:BigInt(0),priceImpact:0};e.forEach((e=>{let t=Q.utils.decimalize(s,n.decimals);e.forEach((e=>{t=be(t,e)}));const a=r.amount;t>a&&(r={platform:F.SenSwap,best:e,amount:t,priceImpact:0})}));const a=Q.utils.decimalize(s,n.decimals);return r.priceImpact=Se(r.best,a),r})(x,i):((e,t)=>{let{amount:s,mintInfo:n}=t,r={platform:F.SenSwap,best:[],amount:BigInt(0),priceImpact:0};for(const a of e){const e=[...a].reverse();let t=Q.utils.decimalize(s,n.decimals);for(const s of e)if(t=Ce(t,s),t<=BigInt(0))break;if(t<=BigInt(0))continue;const i=r.amount;(t<i||!i)&&(r={platform:F.SenSwap,best:a,amount:t,priceImpact:0})}return r.priceImpact=Se(r.best,r.amount),r})(x,o),s(f)):s(f)}),[o,i,e,d,l]);return(0,ie.Z)(c,500,[c]),t},Be=e=>({bestRoute:De(e),swap:je()});const Me=e=>{let{loading:t,disabled:s,children:r,onSwap:o}=e;const{state:l}=(0,i.useLocation)(),c=(0,n.useDispatch)(),{swap:u,bestRoute:p}=Be(null===l||void 0===l?void 0:l.poolAddress),m=(0,a.useCallback)((async()=>{await c(Y({...p})),setTimeout((()=>{c(J({loadingSenswap:!1,loadingJupSwap:!0}))}),500)}),[p,c]);return(0,a.useEffect)((()=>{m()}),[m]),(0,f.jsx)(d.Button,{type:"primary",onClick:()=>o(u),loading:t,disabled:s,block:!0,children:r})},Re=(0,Z.createAsyncThunk)("bid/updateBidData",(async(e,t)=>{let{prioritized:s,reset:n,...r}=e,{getState:a}=t;const{bid:{priority:i},ask:{priority:o}}=a();Number(r.amount)<0&&(r.amount="");const l=n?0:s?o+1:i;return{...r,priority:l}})),Ne=(0,Z.createSlice)({name:"bid",initialState:{amount:"",mintInfo:{address:"",decimals:0},accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:e=>{e.addCase(Re.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Ee=(0,Z.createAsyncThunk)("ask/updateAskData",(async(e,t)=>{let{prioritized:s,reset:n,...r}=e,{getState:a}=t;const{bid:{priority:i},ask:{priority:o}}=a();Number(r.amount)<0&&(r.amount="");const l=n?0:s?i+1:o;return{...r,priority:l}})),_e=(0,Z.createSlice)({name:"ask",initialState:{amount:"",mintInfo:{address:"",decimals:0},accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:e=>{e.addCase(Ee.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{sol:{swap:ze}}=he;const Pe=class{constructor(e,t){this._wallet=void 0,this.publicKey=void 0,this._wallet=t,this.publicKey=Q.account.fromAddress(e)||null}async sendTransaction(e,t,s){return e=await this.signTransaction(e),await t.sendRawTransaction(e.serializeMessage(),s)}async signTransaction(e){return await this._wallet.signTransaction(e)}async signAllTransactions(e){const t=[];for(const s of e){const e=await this.signTransaction(s);t.push(e)}return t}},Le=new l.Connection(r.rpc),Ze={platform:F.JupiterAggregator,best:[],amount:BigInt(0),priceImpact:0};let Fe;const Oe=()=>{const e=(0,n.useDispatch)(),{bid:{mintInfo:{address:t,decimals:s},amount:i},ask:{mintInfo:{address:l}},settings:{slippage:d}}=(0,n.useSelector)((e=>e)),c=(0,r.useWalletAddress)(),u=Number(i)*10**s,p=(0,a.useMemo)((()=>r.util.isAddress(t)?Q.account.fromAddress(t):void 0),[t]),m=(0,a.useMemo)((()=>r.util.isAddress(l)?Q.account.fromAddress(l):void 0),[l]),{exchange:h,routes:f,loading:g,refresh:x}=(0,o.useJupiter)({amount:u,inputMint:p,outputMint:m,slippage:100*d,debounceTime:250}),y=(0,a.useCallback)((async()=>{var e;const{sentre:{solana:t}}=window;if(!t||!r.util.isAddress(c))throw new Error("Wallet is not connected");if(null===f||void 0===f||!f.length)throw new Error("No available route");const s=new Pe(c,t),n=await h({wallet:s,routeInfo:f[0],onTransaction:async e=>(await Le.confirmTransaction(e,"confirmed"),await Le.getTransaction(e,{commitment:"confirmed"}))});if(n.error)throw new Error((null===(e=n.error)||void 0===e?void 0:e.message)||"Unknown Error");const{txid:a,outputAddress:i}=n;return{txId:a,dstAddress:i}}),[h,f,c]),w=(0,a.useMemo)((()=>{if(null===f||void 0===f||!f.length)return{...Ze};const{outAmount:e,priceImpactPct:t,marketInfos:s}=f[0],n=s.map((e=>{let{inputMint:t,outputMint:s}=e;return{poolData:{},srcMintAddress:t.toBase58(),dstMintAddress:s.toBase58()}}));return{platform:F.JupiterAggregator,amount:BigInt(e),priceImpact:t,best:n}}),[f]);return(0,a.useEffect)((()=>{e(H({loadingJupSwap:g}))}),[e,g]),(0,a.useEffect)((()=>{i&&Number(i)>0&&(Fe&&clearTimeout(Fe),Fe=setTimeout((()=>{x()}),1e3))}),[i]),{swap:y,bestRoute:w}};const We=e=>{let{loading:t,disabled:s,children:r,onSwap:i}=e;const{swap:o,bestRoute:l}=Oe(),c=(0,n.useDispatch)(),u=(0,a.useCallback)((()=>{setTimeout((()=>{c(Y({...l}))}),500)}),[l,c]);return(0,a.useEffect)((()=>{u()}),[u]),(0,f.jsx)(d.Button,{type:"primary",onClick:()=>i((()=>o().then((e=>({txId:e.txId,dst:e.dstAddress}))))),loading:t,disabled:s,block:!0,children:r})},He=e=>{let{onCallback:t=(()=>{}),forceSwap:s=!1}=e;const i=(0,n.useDispatch)(),[o,l]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),[u,p]=(0,a.useState)(!1),{route:{priceImpact:m,amount:h,loadingSenswap:g,platform:x},bid:{mintInfo:{decimals:y},priority:w,amount:j},ask:{mintInfo:{decimals:v},priority:b},settings:{advanced:C}}=(0,n.useSelector)((e=>e)),{wrapAmount:A,wrapSol:S}=(()=>{const{bid:{amount:e,mintInfo:{address:t,decimals:s},accountAddress:r}}=(0,n.useSelector)((e=>e)),{amount:i}=se(r),o=(0,a.useMemo)((()=>{if(!Number(e)||t!==Q.DEFAULT_WSOL)return BigInt(0);const n=Q.utils.decimalize(e,s);return n<=i?BigInt(0):n-i}),[i,e,t,s]);return{wrapAmount:o,wrapSol:async()=>{const{solana:e}=window.sentre;if(!e)throw new Error("Wallet is not connected");if(o)return await ze.wrapSol(o,e)}}})(),{disabled:T}=ne(),k=async e=>{try{p(!0),A&&await S();const{txId:s}=await e();return window.notify({type:"success",description:"Swap successfully. Click to view details.",onClick:()=>window.open(r.util.explorer(s),"_blank")}),l(s),i(Re({amount:""})),t()}catch(s){return window.notify({type:"error",description:s.message})}finally{return l(""),p(!1)}},I=(0,a.useCallback)((()=>{b<w&&i(Ee({amount:Q.utils.undecimalize(h,v)}))}),[v,b,h,w,i]);(0,ie.Z)(I,500,[I]);const D=(0,a.useCallback)((()=>{w<b&&i(Re({amount:Q.utils.undecimalize(h,y)}))}),[b,h,y,w,i]);(0,ie.Z)(D,500,[D]);const B=!C&&m>q.acceptableSwap&&!s,M=B?"Too High Price Impact":s?"Swap Anyway":"Swap",R=Number(h),N=(0,a.useCallback)((()=>{const e=!g&&!!Number(j)&&(!R||x===F.JupiterAggregator);c(e)}),[j,g,x,R]);return(0,ie.Z)(N,500,[N]),(0,f.jsxs)(a.Fragment,{children:[d?(0,f.jsx)(We,{onSwap:k,disabled:T||B,loading:u,children:M}):(0,f.jsx)(Me,{onSwap:k,disabled:T||B,loading:u,children:M}),(0,f.jsx)(xe,{txId:o})]})},Je=e=>{var t,s,r,i;let{visible:o=!1,onCancel:l=(()=>{})}=e;const[c,u]=(0,a.useState)(!1),{route:{priceImpact:g},bid:x,ask:y}=(0,n.useSelector)((e=>e)),w=g>q.acceptableSwap,j=(0,a.useCallback)((()=>{l(!1),u(!1)}),[l]);return(0,f.jsx)(d.Modal,{onCancel:j,closeIcon:(0,f.jsx)(p.Z,{name:"close"}),footer:null,open:o,forceRender:!0,children:(0,f.jsxs)(d.Row,{gutter:[16,24],children:[(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(d.Typography.Title,{level:4,children:" Confirm swaps"})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsxs)(d.Row,{align:"middle",justify:"space-between",children:[(0,f.jsx)(d.Col,{children:(0,f.jsxs)(d.Space,{direction:"vertical",children:[(0,f.jsx)(d.Typography.Text,{children:"From"}),(0,f.jsxs)(d.Space,{children:[(0,f.jsx)(m.Z,{mintAddress:null===(t=x.mintInfo)||void 0===t?void 0:t.address}),(0,f.jsx)(d.Typography.Text,{children:(0,f.jsx)(h.Z,{mintAddress:null===(s=x.mintInfo)||void 0===s?void 0:s.address})})]}),(0,f.jsx)(d.Typography.Title,{level:4,children:x.amount})]})}),(0,f.jsx)(d.Col,{children:(0,f.jsx)(p.Z,{name:"arrow-forward-outline",style:{fontSize:24}})}),(0,f.jsx)(d.Col,{children:(0,f.jsxs)(d.Space,{direction:"vertical",align:"end",children:[(0,f.jsx)(d.Typography.Text,{children:"To"}),(0,f.jsxs)(d.Space,{children:[(0,f.jsx)(m.Z,{mintAddress:null===(r=y.mintInfo)||void 0===r?void 0:r.address}),(0,f.jsx)(d.Typography.Text,{children:(0,f.jsx)(h.Z,{mintAddress:null===(i=y.mintInfo)||void 0===i?void 0:i.address})})]}),(0,f.jsx)(d.Typography.Title,{level:4,children:y.amount})]})})]})}),(0,f.jsx)(d.Col,{children:(0,f.jsx)(d.Card,{bordered:!1,className:"confirm-info",children:(0,f.jsx)(ae,{})})}),w&&(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(d.Checkbox,{checked:c,onChange:()=>u(!c),children:"The price impact is currently high. Tick the checkbox to accept the swap."})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(He,{onCallback:j,forceSwap:c})})]})})},Ye=()=>{const[e,t]=(0,a.useState)(!1),{disabled:s,loading:r}=ne(),{enhancement:i}=(0,n.useSelector)((e=>e.settings));return(0,f.jsx)(d.Card,{bordered:!1,children:(0,f.jsxs)(d.Row,{gutter:[24,24],children:[(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(d.Typography.Title,{level:5,children:"Review & Swap"})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(ae,{})}),i&&(0,f.jsx)(d.Col,{span:24})," ",(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(d.Button,{type:"primary",onClick:()=>t(!0),disabled:s,loading:r,block:!0,children:"Review & Swap"})}),(0,f.jsx)(Je,{visible:e,onCancel:t})]})})},Ue=e=>{let{mintAddress:t,tvl:s="",price:n,format:a="0,0.[00]a"}=e;return(0,f.jsxs)(d.Space,{direction:"vertical",size:4,children:[(0,f.jsx)(m.Z,{mintAddress:t}),(0,f.jsxs)(d.Space,{children:[(0,f.jsx)(d.Typography.Text,{children:"TVL:"}),(0,f.jsx)(d.Typography.Title,{level:5,children:r.util.numeric(s).format(a)}),(0,f.jsx)(d.Typography.Title,{level:5,children:(0,f.jsx)(h.Z,{mintAddress:t})})]}),(0,f.jsxs)(d.Typography.Text,{className:"caption",type:"secondary",children:["~ $",r.util.numeric(n).format(a)]})]})};var Ge=s(23008);const Ke=()=>{const{route:{best:e},bid:{mintInfo:t},ask:{mintInfo:s}}=(0,n.useSelector)((e=>e)),r=le(t.address),i=le(s.address),{poolData:o}=e[0]||{},{poolData:l}=e[e.length-1]||{},c=(e,t)=>{try{return Ge.util.isAddress(e)&&t?Ae(e,t):BigInt(0)}catch(s){return BigInt(0)}},u=(0,a.useMemo)((()=>{if(!t.decimals)return 0;const e=c(t.address,o);return Number(Q.utils.undecimalize(e,t.decimals))}),[t,o]),p=(0,a.useMemo)((()=>{if(!s.decimals)return 0;const e=c(s.address,l);return Number(Q.utils.undecimalize(e,s.decimals))}),[s,l]),m=!u||!p;return(0,f.jsx)(d.Card,{bordered:!1,className:m?"disabled-swap-pool-info-card":void 0,children:(0,f.jsxs)(d.Row,{gutter:[16,16],wrap:!1,children:[(0,f.jsx)(d.Col,{span:11,children:(0,f.jsx)(Ue,{mintAddress:(null===t||void 0===t?void 0:t.address)||"",tvl:u,price:u*r.price})}),(0,f.jsx)(d.Col,{children:(0,f.jsx)(d.Divider,{type:"vertical",style:{height:"100%"}})}),(0,f.jsx)(d.Col,{span:11,children:(0,f.jsx)(Ue,{mintAddress:(null===s||void 0===s?void 0:s.address)||"",tvl:p,price:p*i.price})})]})})};var qe=s(33920);const Ve={mainnet:"worm2ZoG2kUd4vFXhvjh93UUH596ayRfgQ2MgjNMTth",testnet:"Brdguy7BmNB4qwEbcqqMbyV5CyJd2sxQNUn6NEpMSsUb",devnet:"3u8hJUVTA4jH1wYAyUur7FFZVQ8H635K3tSHHF4ssjQ5"},Xe={mainnet:"wormDTUJ6AWPNvk59vGQbDvGJmqbDTdgWgAqcLBCgUb",testnet:"A4Us8EhCC76XdGAN17L4KpRNEK423nMivVHZzZqFqqBg",devnet:"DZnkkTmCiFWfYTfT41X3Rd1kDgozqzxWaHqsw6W4x2oe"},Qe=()=>r.storage.get("network")||"mainnet",$e=async e=>{const t=(()=>{const e=Qe();return{chainId:qe.rQA,tokenBridgeAddress:Xe[e],bridgeAddress:Ve[e]}})();return(0,qe._bG)(r.connection,t.tokenBridgeAddress,e)},et="#F9575E",tt=()=>{const e=(0,a.lazy)((()=>s.e("webpack_container_remote_frame_sen_assets_bootstrap").then(s.t.bind(s,31662,23)).then((e=>({default:e.FrameWormhole})))));return(0,f.jsx)(a.Suspense,{fallback:"Loading...",children:(0,f.jsx)(e,{})})},st=()=>{const[e,t]=(0,a.useState)(!1),{bid:{mintInfo:s}}=(0,n.useSelector)((e=>e)),{address:i}=s||{};return(0,a.useEffect)((()=>{(async()=>{if(!r.util.isAddress(i))return t(!1);const e=await $e(i);t(e)})()}),[i]),e?(0,f.jsx)(d.Popover,{overlayInnerStyle:{background:"transparent",width:375,boxShadow:"none"},trigger:"click",content:(0,f.jsx)(tt,{}),children:(0,f.jsx)(d.Tag,{style:{margin:0,borderRadius:4,color:r.util.randomColor(et),cursor:"pointer"},color:r.util.randomColor(et,.2),children:"Wormhole Bridge"})}):null};const nt=s.p+"static/media/sen.f2d012c907167ba613b035621b6423cb.svg",rt=e=>{let{title:t="Powered by",spacing:s=4,iconSize:n=20}=e;return(0,f.jsxs)(d.Space,{size:s,style:{cursor:"pointer"},children:[(0,f.jsx)(d.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:t}),(0,f.jsx)(d.Tooltip,{title:"Sentre Protocol",children:(0,f.jsx)(d.Avatar,{src:nt,size:n})})]})},at=e=>{let{label:t,value:s,onClick:n,active:r=!1}=e;return(0,f.jsx)(d.Typography.Text,{style:{cursor:"pointer",color:r?"#F9575E":"inherit"},onClick:()=>n(s),children:t})},it=e=>{let{value:t,onChange:s}=e;return(0,f.jsxs)(d.Row,{gutter:[8,8],children:[(0,f.jsx)(d.Col,{span:24,children:(0,f.jsxs)(d.Row,{gutter:[8,8],wrap:!1,children:[(0,f.jsx)(d.Col,{flex:"auto",children:(0,f.jsx)(d.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Slippage Tolerance"})}),(0,f.jsx)(d.Col,{children:(0,f.jsx)(d.Tooltip,{placement:"right",title:(0,f.jsxs)("span",{children:["Your transaction will be canceled if the confirmed price breaks the limited range of"," ",(0,f.jsx)("strong",{style:{color:"#f9575e"},children:100*t+"%."})]}),children:(0,f.jsx)(d.Button,{type:"text",shape:"circle",size:"small",icon:(0,f.jsx)(p.Z,{name:"information-circle-outline"})})})})]})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(d.Row,{gutter:[8,8],wrap:!1,justify:"space-between",children:[.001,.005,.01,.05,1].map(((e,n)=>(0,f.jsx)(d.Col,{children:(0,f.jsx)(at,{label:1===e?"Freely":100*e+"%",value:e,onClick:s,active:e===t})},n)))})})]})},ot=e=>{let{value:t,onChange:s}=e;return(0,f.jsxs)(d.Row,{gutter:[8,8],children:[(0,f.jsx)(d.Col,{span:24,children:(0,f.jsxs)(d.Row,{gutter:[8,8],wrap:!1,children:[(0,f.jsx)(d.Col,{flex:"auto",children:(0,f.jsx)(d.Typography.Text,{children:"Advanced Mode"})}),(0,f.jsx)(d.Col,{children:(0,f.jsx)(d.Switch,{size:"small",checked:t,onChange:s})})]})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsxs)(d.Typography.Paragraph,{className:"caption",children:[(0,f.jsx)(p.Z,{name:"warning-outline"})," This advanced mode will disable the automatic protection that often results in bad rates and lost funds. Only use this mode if you know what you are doing."]})})]})},lt="settings",dt=(0,Z.createAsyncThunk)("settings/updateSettings",(async e=>({...e}))),ct=(0,Z.createSlice)({name:lt,initialState:{slippage:.01,advanced:!1,enhancement:!1},reducers:{},extraReducers:e=>{e.addCase(dt.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ut=e=>{let{value:t,onChange:s}=e;return(0,f.jsxs)(d.Row,{gutter:[8,8],children:[(0,f.jsx)(d.Col,{span:24,children:(0,f.jsxs)(d.Row,{gutter:[8,8],wrap:!1,children:[(0,f.jsx)(d.Col,{flex:"auto",children:(0,f.jsx)(d.Typography.Text,{children:"Enhancement UI"})}),(0,f.jsx)(d.Col,{children:(0,f.jsx)(d.Switch,{size:"small",checked:t,onChange:s})})]})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(d.Typography.Paragraph,{className:"caption",children:"Take advantage of all the familiar tools."})})]})},pt=()=>{const e=(0,n.useDispatch)(),{slippage:t,advanced:s,enhancement:r}=(0,n.useSelector)((e=>e.settings));return(0,f.jsxs)(d.Row,{gutter:[4,4],justify:"end",align:"middle",wrap:!1,children:[(0,f.jsx)(d.Col,{children:(0,f.jsx)(rt,{})}),(0,f.jsx)(d.Col,{children:(0,f.jsx)(d.Divider,{type:"vertical",style:{padding:0}})}),(0,f.jsx)(d.Col,{children:(0,f.jsx)(d.Popover,{placement:"bottomRight",overlayInnerStyle:{width:300},content:(0,f.jsxs)(d.Row,{gutter:[8,8],children:[(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(d.Typography.Title,{level:5,children:"Settings"})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(it,{value:t,onChange:t=>e(dt({slippage:t}))})}),(0,f.jsx)(d.Divider,{style:{margin:0}}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(ot,{value:s,onChange:t=>e(dt({advanced:t}))})}),(0,f.jsx)(d.Divider,{style:{margin:0}}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(ut,{value:r,onChange:t=>e(dt({enhancement:t}))})})]}),trigger:"click",children:(0,f.jsx)(d.Button,{type:"text",shape:"circle",size:"small",icon:(0,f.jsx)(p.Z,{name:"settings-outline"})})})})]})};var mt=s(39295);const ht={accountAddress:"",poolAddresses:[]},ft=e=>{const{pools:t}=ke(),s=(0,r.useWalletAddress)(),[n,i]=(0,a.useState)(ht),o=(0,a.useCallback)((async()=>{if(!r.util.isAddress(e)||!Object.keys(t).length)return i(ht);const n=await r.tokenProvider.findByAddress(e);if(!n)return i(ht);const a=await r.splt.deriveAssociatedAddress(s,e),o=Object.keys(t).filter((s=>{const{mint_a:n,mint_b:r}=t[s];return[n,r].includes(e)}));i({accountAddress:a,mintInfo:n,poolAddresses:o})}),[e,t,s]);return(0,a.useEffect)((()=>{o()}),[o]),n},gt=()=>{var e;const t=(0,n.useDispatch)(),s=(0,r.useWalletAddress)(),{pools:o}=ke(),l=(0,r.useGetMintDecimals)(),c=(0,r.useTheme)(),{ask:{amount:u,accountAddress:p,mintInfo:m,poolAddresses:g}}=(0,n.useSelector)((e=>e)),{state:x}=(0,i.useLocation)(),{balance:y}=se(p),w=ft(he.swap.askDefault),j=null===x||void 0===x?void 0:x.poolAddress;(0,a.useEffect)((()=>{r.util.isAddress(p)||r.util.isAddress(j)||(t(J({loadingSenswap:!0})),t(Ee(w)))}),[p,t,j,w]);const v=(0,a.useMemo)((()=>({mintInfo:m,poolAddresses:g})),[m,g]),b=(0,a.useCallback)((e=>r.util.isAddress(e)?Object.keys(o).filter((t=>{const{mint_a:s,mint_b:n}=o[t];return[s,n].includes(e)})):[]),[o]),C={marginLeft:-7,padding:"3px 8px",borderRadius:8,cursor:"pointer",boxShadow:"dark"===c?"0px 4px 44px rgba(0, 0, 0, 0.42)":"0px 4px 40px rgba(33, 36, 51, 0.18)"};return(0,f.jsxs)(d.Row,{gutter:[0,0],children:[(0,f.jsx)(d.Col,{children:(0,f.jsx)(mt.Z,{value:m.address,onChange:async e=>{const n=b(e),a={mintInfo:{address:e,decimals:await l({mintAddress:e})||0},poolAddresses:n};if(t(J({loadingSenswap:!0})),!r.util.isAddress(e))return t(Ee({amount:"",prioritized:!0,...a}));const i=await r.splt.deriveAssociatedAddress(s,e);return t(Ee({amount:"",prioritized:!0,accountAddress:i,...a}))},style:C})}),(0,f.jsx)(d.Col,{flex:"1",children:(0,f.jsx)(d.InputNumber,{bordered:!1,className:"amount-input",placeholder:"0",value:u,onChange:e=>{t(J({loadingSenswap:!0})),t(Ee({amount:e,prioritized:!0}))},controls:!1,min:"0"})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsxs)(d.Space,{className:"caption",children:[(0,f.jsx)(d.Typography.Text,{type:"secondary",children:"Available:"}),(0,f.jsx)(d.Typography.Text,{type:"secondary",children:r.util.numeric(y).format("0,0.[00]")}),(0,f.jsx)(d.Typography.Text,{type:"secondary",children:(0,f.jsx)(h.Z,{mintAddress:(null===(e=v.mintInfo)||void 0===e?void 0:e.address)||""})})]})})]})},{swap:{bidDefault:xt}}=he;let yt;!function(e){e[e.FIFTY=50]="FIFTY",e[e.HUNDRED=100]="HUNDRED"}(yt||(yt={}));const wt=()=>{var e;const t=(0,n.useDispatch)(),s=(0,r.useWalletAddress)(),o=(0,r.useWalletBalance)(),{pools:l}=ke(),c=(0,r.useGetMintDecimals)(),u=(0,r.useTheme)(),{bid:{amount:p,accountAddress:m,mintInfo:g,poolAddresses:x}}=(0,n.useSelector)((e=>e)),{amount:y}=se(m),w=ft(xt),{state:j}=(0,i.useLocation)(),v=null===j||void 0===j?void 0:j.poolAddress,{address:b,decimals:C}=g,[A,S]=(0,a.useState)(0);(0,a.useEffect)((()=>{r.util.isAddress(m)||r.util.isAddress(v)||(t(J({loadingSenswap:!0})),t(Re(w)))}),[m,t,v,w]);const T=(0,a.useMemo)((()=>({mintInfo:g,poolAddresses:x})),[g,x]),k=(0,a.useMemo)((()=>A===yt.HUNDRED?yt.HUNDRED:yt.FIFTY),[A]),I=(0,a.useMemo)((()=>{if(b!==Q.DEFAULT_WSOL)return Q.utils.undecimalize(y,C);const e=Q.utils.decimalize(.01,C),t=BigInt(o)+y-e;return t<=y?Q.utils.undecimalize(y,C):Q.utils.undecimalize(t,C)}),[y,C,o,b]),D=(0,a.useCallback)((e=>(t(J({loadingSenswap:!0})),t(Re({amount:e,prioritized:!0})))),[t]),B=(0,a.useCallback)((e=>{if(!I)return;const t=Number(I);if(t<5/10**6)return D(I);return D(`${t*(e/100)}`)}),[I,D]),M=(0,a.useCallback)((()=>{const e=Number(I),t=Number(p);return S(e&&0!==e?e===t?yt.HUNDRED:e/2===t?yt.FIFTY:0:0)}),[p,I]),R=(0,a.useCallback)((e=>r.util.isAddress(e)?Object.keys(l).filter((t=>{const{mint_a:s,mint_b:n}=l[t];return[s,n].includes(e)})):[]),[l]);(0,a.useEffect)((()=>{M()}),[M]);const N={marginLeft:-7,padding:"3px 8px",borderRadius:8,cursor:"pointer",boxShadow:"dark"===u?"0px 4px 44px rgba(0, 0, 0, 0.42)":"0px 4px 40px rgba(33, 36, 51, 0.18)"};return(0,f.jsxs)(d.Row,{gutter:[0,0],align:"middle",children:[(0,f.jsx)(d.Col,{children:(0,f.jsx)(mt.Z,{value:b,onChange:async e=>{const n=R(e),a={mintInfo:{address:e,decimals:await c({mintAddress:e})||0},poolAddresses:n};if(t(J({loadingSenswap:!0})),!r.util.isAddress(e))return t(Re({amount:"",prioritized:!0,...a}));const i=await r.splt.deriveAssociatedAddress(s,e);return t(Re({amount:"",prioritized:!0,accountAddress:i,...a}))},style:N})}),(0,f.jsx)(d.Col,{flex:"1",children:(0,f.jsx)(d.InputNumber,{bordered:!1,className:"amount-input",placeholder:"0",value:p,onChange:D,controls:!1,min:"0"})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsxs)(d.Row,{align:"middle",children:[(0,f.jsx)(d.Col,{flex:"auto",children:(0,f.jsxs)(d.Space,{className:"caption",children:[(0,f.jsx)(d.Typography.Text,{type:"secondary",children:"Available:"}),(0,f.jsx)(d.Typography.Text,{type:"secondary",style:{cursor:"pointer"},onClick:()=>D(I),children:r.util.numeric(I||0).format("0,0.[00]")}),(0,f.jsx)(d.Typography.Text,{type:"secondary",children:(0,f.jsx)(h.Z,{mintAddress:(null===(e=T.mintInfo)||void 0===e?void 0:e.address)||""})})]})}),(0,f.jsx)(d.Col,{children:(0,f.jsx)(d.Radio.Group,{value:A,buttonStyle:"solid",children:(0,f.jsxs)(d.Space,{children:[(0,f.jsxs)(d.Space,{size:4,direction:"vertical",children:[(0,f.jsx)(d.Radio.Button,{className:"rate-btn",onClick:()=>B(yt.FIFTY),value:k}),(0,f.jsxs)(d.Typography.Text,{type:"secondary",className:"caption",children:[yt.FIFTY,"%"]})]}),(0,f.jsxs)(d.Space,{size:4,direction:"vertical",children:[(0,f.jsx)(d.Radio.Button,{className:"rate-btn",onClick:()=>B(yt.HUNDRED),value:yt.HUNDRED}),(0,f.jsxs)(d.Typography.Text,{type:"secondary",className:"caption",children:[yt.HUNDRED,"%"]})]})]})})})]})})]})},jt=e=>{let{widget:t=!1}=e;const s=(0,n.useDispatch)(),{bid:r,ask:i}=(0,n.useSelector)((e=>e)),o=(0,a.useCallback)((async()=>{const{amount:e,priority:t,...n}=r,{amount:a,priority:o,...l}=i,d=t>o?e:a,c=t>o?Ee:Re;await s(J({loadingSenswap:!0})),await s(Re({...l,amount:"",reset:!0})),await s(Ee({...n,amount:"",reset:!0})),await s(c({amount:d,prioritized:!0}))}),[s,i,r]),l=t?{padding:"16px 16px 40px"}:{padding:"6px 24px 16px"},c=t?{padding:"0 16px 16px"}:{padding:"0 24px 24px"},u=t?{margin:"0 -12px"}:{};return(0,f.jsxs)(d.Row,{gutter:[0,0],justify:"center",style:{...u},children:[(0,f.jsx)(d.Col,{span:24,style:{...l},className:"swap-bid",children:(0,f.jsx)(wt,{})}),(0,f.jsx)(d.Col,{style:{top:-12},children:(0,f.jsx)(d.Button,{className:"btn-switch-type",size:"small",icon:(0,f.jsx)(p.Z,{name:"git-compare-outline"}),onClick:o})}),(0,f.jsx)(d.Col,{span:24,style:{...c},children:(0,f.jsx)(gt,{})})]})},vt=()=>(0,f.jsxs)(d.Row,{gutter:0,children:[(0,f.jsx)(d.Col,{span:24,className:"swap-setting",children:(0,f.jsxs)(d.Row,{children:[(0,f.jsx)(d.Col,{flex:"auto",children:(0,f.jsx)(st,{})}),(0,f.jsx)(d.Col,{children:(0,f.jsx)(pt,{})})]})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(jt,{})})]}),bt=()=>{const{enhancement:e}=(0,n.useSelector)((e=>e.settings));return(0,f.jsxs)(d.Row,{gutter:[24,24],children:[(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(d.Card,{bordered:!1,className:"card-swap",bodyStyle:{padding:0},children:(0,f.jsx)(vt,{})})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(Ye,{})}),e&&(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(Ke,{})})]})},Ct={success:[20,224,65],pending:[212,177,6],error:[215,35,17],failed:[215,35,17]},At=e=>{let{tag:t}=e;const s=e=>{let s=Ct[t];return`rgba(${s[0]},  ${s[1]}, ${s[2]},${e||1})`};return(0,f.jsx)(d.Tag,{style:{margin:0,borderRadius:4,color:s(),textTransform:"capitalize"},color:s(.1),children:t})},St="0,00.[0000]a",Tt=[{title:"TIME",dataIndex:"time"},{title:"TRANSACTION",dataIndex:"transactionId",render:e=>(0,f.jsxs)(d.Space,{align:"baseline",children:[(0,f.jsx)(d.Typography.Text,{onClick:()=>window.open(r.util.explorer(e),"_blank"),style:{fontWeight:700,cursor:"pointer"},children:r.util.shortenAddress(e,3,"...")}),(0,f.jsx)(d.Button,{type:"text",size:"small",onClick:()=>window.open(r.util.explorer(e),"_blank"),icon:(0,f.jsx)(p.Z,{name:"open-outline"})})]})},{title:"BID",dataIndex:"bid",render:(e,t)=>t.from?(0,f.jsxs)(d.Space,{size:8,children:[(0,f.jsx)(m.Z,{mintAddress:t.from}),r.util.numeric(t.amountFrom).format(St),(0,f.jsx)(h.Z,{mintAddress:t.from})]}):"--"},{title:"ASK",dataIndex:"ask",render:(e,t)=>t.to?(0,f.jsxs)(d.Space,{size:8,children:[(0,f.jsx)(m.Z,{mintAddress:t.to}),r.util.numeric(t.amountTo).format(St),(0,f.jsx)(h.Z,{mintAddress:t.to})]}):"--"},{title:"STATUS",dataIndex:"status",width:100,render:(e,t)=>(0,f.jsx)(At,{tag:t.status})}];var kt=s(76026);const It=class{constructor(){this.provider=void 0,this.set=async e=>{const t=new File([JSON.stringify(e)],"file",{type:"application/json"});return await this.provider.put([t])},this.get=async e=>r.DataLoader.load(`ipfs^${e}`,(async()=>{const t=await this.provider.get(e),s=(await(null===t||void 0===t?void 0:t.files())||[])[0],n=new FileReader;return new Promise(((e,t)=>{try{if(!s)throw new Error("Cannot read empty file");n.onload=()=>{var t;const s=null===(t=n.result)||void 0===t?void 0:t.toString();if(!s)throw new Error("Cannot read empty file");return e(JSON.parse(s))},n.readAsText(s)}catch(r){return t(r.message)}}))})),this.provider=new kt.xk({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDIxNDNmRDMwMDU0MmUyMDA4ZEVCNUI5OTAzOTgyREQ4QmUxMGYxMzMiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTY1NjQ2MjI0ODYsIm5hbWUiOiJzZW4tc3dhcCJ9.l3hgMMpDuFMaDcDukoCB6NJ5b-9p0_nZnfbwnp3izG4",endpoint:new URL("https://api.web3.storage")})}},Dt=1e3;let Bt;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(Bt||(Bt={}));class Mt{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const t=new Mt,s=e*Dt;return t.setMilliSeconds(s),t}static fromYmd(e){const t=new Mt,s=u()(e,Bt.YMD).valueOf();return t.setMilliSeconds(s),t}static getListDate(e,t){const s=[];let n=Mt.fromYmd(e);const r=Mt.fromYmd(t);for(;n.ymd()<=r.ymd();)s.push(n.ymd()),n=n.addDay();return s}format(e){const t=new Date(this.milliSeconds);return u()(t).format(e)}subtractDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=u()(this.milliSeconds).subtract(e,"days").valueOf();return Mt.fromSeconds(t/Dt)}addDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=u()(this.milliSeconds).add(e,"days").valueOf();return Mt.fromSeconds(t/Dt)}seconds(){return(this.milliSeconds-this.milliSeconds%Dt)/Dt}ymd(){return Number(this.format(Bt.YMD))}static today(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt.YMD;return u()().format(e)}}var Rt=s(68532),Nt=s.n(Rt);class Et{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class _t{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class zt{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}const Pt=700;class Lt{constructor(){this.conn=r.connection}async fetchSignatures(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pt;s>Pt&&(s=Pt);const n={limit:s,before:t};return this.conn.getConfirmedSignaturesForAddress2(e,n)}async fetchConfirmTransaction(e){let t=[];const s=[];for(let r=0;r<=e.length/200;r++){const t=200*r,n=e.slice(t,t+200);s.push(this.conn.getParsedConfirmedTransactions(n))}const n=await Promise.all(s);for(const r of n)t=t.concat(r);return t}async fetchTransactions(e,t){const s=(new Date).getTime()/1e3;let{secondFrom:n,secondTo:r,lastSignature:a,limit:i}=t;n=Math.floor(n||0),r=Math.floor(r||s);const o=new l.PublicKey(e);let d=[],c=!1;for(;!c;){const e=await this.fetchSignatures(o,a,i);if(null===e||void 0===e||!e.length||c)break;for(const t of e){const e=t.blockTime;if(e&&!(e>r)){if(e<n){c=!0;break}a=t.signature,d.push(t.signature)}}if(i&&d.length>=i)break;if((null===e||void 0===e?void 0:e.length)<Pt)break}return await this.fetchConfirmTransaction(d)}}let Zt;!function(e){e.Transfer="transfer"}(Zt||(Zt={}));var Ft=s(97429).Buffer;const{struct:Ot}=s(70320),Wt={key:"code",type:"u8"};let Ht;!function(e){e.Route="SWAP"}(Ht||(Ht={}));const Jt={8:Ht.Route};class Yt extends class{constructor(){this.parseAction=e=>""}async collect(e,t){const s=new Lt;let n=[];const r=await s.fetchTransactions(e,t);for(const a of r){const e=this.parseTransLog(a);e&&n.push(e)}return n}parseTransLog(e){var t,s;const{blockTime:n,meta:r,transaction:a}=e;if(!n||!r)return;const{postTokenBalances:i,preTokenBalances:o,postBalances:l,preBalances:d}=r,{signatures:c,message:u}=a,p=(null===(t=r.innerInstructions)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.instructions)||[],m=u.instructions[0]||[],h=new Et;h.signature=c[0],h.blockTime=n,h.time=Mt.fromSeconds(n).ymd(),h.programId=m.programId.toString();const f=this.parseAccountInfo(u.accountKeys,i||[],o||[],l,d);return this.isParsedInstruction(m)?(h.programTransfer=this.parseListActionTransfer([m],f),h):(h.actionTransfers=this.parseListActionTransfer(p,f),h.programInfo={programId:m.programId.toString(),data:m.data},h.actionType=this.parseAction(h),h)}isParsedInstruction(e){return void 0!==e.parsed}parseListActionTransfer(e,t){const s=[];for(const n of e){if(!this.isParsedInstruction(n))continue;const e=n.parsed||{};if(e.type===Zt.Transfer){const n=e.info,r=this.parseActionTransfer(n,t);r&&s.push(r)}}return s}parseActionTransfer(e,t){const{source:s,destination:n,amount:r,lamports:a}=e,i=r||a.toString();if(!i||!t.has(s)||!t.has(n))return;const o=new zt;return o.source=t.get(s),o.destination=t.get(n),o.amount=i,o}parseAccountInfo(e,t,s,n,r){const a=new Map;for(const i of t){const{accountIndex:t,mint:s,uiTokenAmount:n}=i,r=new _t;r.address=e[t].pubkey.toString(),r.postBalance=n.amount,r.mint=s,r.decimals=n.decimals,a.set(r.address,r)}for(const i of s){const{accountIndex:t,uiTokenAmount:s}=i,n=e[t].pubkey.toString(),r=a.get(n)||new _t;r.preBalance=s.amount,a.set(r.address,r)}return e.forEach(((e,t)=>{const s=e.pubkey.toString();if(!Q.account.isAssociatedAddress(s)){const e=a.get(s)||new _t;e.address=s,e.mint="11111111111111111111111111111111",e.postBalance=String(n[t]||0),e.preBalance=String(r[t]||0),e.decimals=9,a.set(e.address,e)}})),a}}{constructor(){super(...arguments),this.parseAction=e=>{var t;const s=null===(t=e.programInfo)||void 0===t?void 0:t.data;if(!s)return"";const n=Nt().decode(s),r=new Ot([Wt]).fromBuffer(Ft.from(n));return Jt[r.code]||""}}}const{sol:{swapAddress:Ut},manifest:{appId:Gt}}=he,Kt=`translogs-ipfs:${r.net}`;class qt{constructor(e){this.programId=void 0,this.transLogService=new Yt,this.fetchTransLog=async(e,t)=>{const s=new It;let n=[];const r=await this.getPDB(),a=await r.getItem(Kt);a&&(n=await s.get(a));const i=n[0],o=n[n.length-1];if(i&&o){const[s]=await Promise.all([this.transLogService.collect(this.programId,{secondFrom:i.blockTime,secondTo:t})]);n=n.filter((t=>t.blockTime>e)),n=[...s,...n]}else n=await this.transLogService.collect(this.programId,{secondFrom:e,secondTo:t});const l={};for(const u of n)u.actionType===Ht.Route&&u.programId===Ut&&(l[u.signature]=u);const d=Object.values(l).sort(((e,t)=>t.blockTime-e.blockTime)),c=await s.set(d);return await r.setItem(Kt,c),d},this.fetchHistory=async()=>{let e=new Mt;const t=(new Mt).subtractDay(30);return(await this.fetchTransLog(t.seconds(),e.seconds())).sort(((e,t)=>t.blockTime-e.blockTime))},this.programId=e}async getPDB(){var e;const t=await(null===(e=window.sentre.solana)||void 0===e?void 0:e.getAddress());if(!t)throw new Error("Invalid wallet address");const s=(0,r.createPDB)(t,Gt);if(!s)throw new Error("Can not create pdb");return s}}const Vt="history",Xt=(0,Z.createAsyncThunk)("history/fetchHistorySwap",(async()=>{var e;const t=await(null===(e=window.sentre.solana)||void 0===e?void 0:e.getAddress());if(!t)throw Error("Login first");const s=new qt(t),n=await s.fetchHistory();let r=[];for(const o of n){var a,i;const e={},t=o.actionTransfers,s=t[0],n=t[t.length-1];if(!s||!n)continue;const l=new Date(1e3*o.blockTime);e.time=u()(l).format("MMM DD, YYYY HH:mm"),e.amountFrom=s.destination?Number(Q.utils.undecimalize(BigInt(s.amount),s.destination.decimals)):void 0,e.amountTo=null!==n&&void 0!==n&&n.destination?Number(Q.utils.undecimalize(BigInt(n.amount),n.destination.decimals)):void 0,e.from=null===(a=s.destination)||void 0===a?void 0:a.mint,e.to=null===n||void 0===n||null===(i=n.destination)||void 0===i?void 0:i.mint,e.transactionId=o.signature,e.key=o.signature,e.status=s.destination&&null!==n&&void 0!==n&&n.destination?"success":"failed",r.push(e)}return{historySwap:r}})),Qt=(0,Z.createSlice)({name:Vt,initialState:{historySwap:[]},reducers:{},extraReducers:e=>{e.addCase(Xt.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,$t=()=>{const[e,t]=(0,a.useState)(5),[s,r]=(0,a.useState)(!1),{historySwap:i}=(0,n.useSelector)((e=>e.history)),o=(0,n.useDispatch)(),l=(0,a.useCallback)((async()=>{try{r(!0),await o(Xt()).unwrap()}catch(e){return console.warn(e)}finally{r(!1)}}),[o]);(0,a.useEffect)((()=>{l()}),[l]);const c=(0,a.useMemo)((()=>e>5?{height:"auto"}:{height:462}),[e]);return(0,f.jsx)(d.Card,{bordered:!1,style:{...c},children:(0,f.jsxs)(d.Row,{gutter:[16,24],children:[(0,f.jsx)(d.Col,{flex:"auto",children:(0,f.jsx)(d.Typography.Title,{level:5,children:"Swap history"})}),(0,f.jsx)(d.Col,{children:(0,f.jsx)(d.Button,{onClick:()=>{l(),t(5)},children:"Refresh"})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsxs)(d.Row,{justify:"center",gutter:[16,9],children:[(0,f.jsx)(d.Col,{span:24,style:{minHeight:310},children:(0,f.jsx)(d.Table,{columns:Tt,dataSource:i.slice(0,e),loading:s,pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row",scroll:{x:800}})}),(0,f.jsx)(d.Col,{children:(0,f.jsx)(d.Button,{onClick:()=>t(e+5),type:"text",icon:(0,f.jsx)(p.Z,{name:"chevron-down-outline"}),disabled:e>=i.length,children:"View more"})})]})})]})})},{sol:{taxmanAddress:es,swap:ts}}=he,ss="pools",ns=(0,Z.createAsyncThunk)("pools/getPools",(async()=>{const e=await ts.connection.getProgramAccounts(ts.swapProgramId,{filters:[{dataSize:257},{memcmp:{bytes:es,offset:65}}]}),t={};return e.forEach((e=>{let{pubkey:s,account:{data:n}}=e;const r=s.toBase58(),a=ts.parsePoolData(n);t[r]=a})),t})),rs=(0,Z.createAsyncThunk)("pools/getPool",(async(e,t)=>{let{address:s}=e,{getState:n}=t;if(!r.util.isAddress(s))throw new Error("Invalid pool address");const{pools:{[s]:a}}=n();if(a)return{[s]:a};return{[s]:await ts.getPoolData(s)}})),as=(0,Z.createAsyncThunk)("pools/upsetPool",(async e=>{let{address:t,data:s}=e;if(!r.util.isAddress(t))throw new Error("Invalid pool address");if(!s)throw new Error("Data is empty");return{[t]:s}})),is=(0,Z.createSlice)({name:ss,initialState:{},reducers:{},extraReducers:e=>{e.addCase(ns.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(rs.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(as.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{sol:{taxmanAddress:os,swap:ls}}=he;let ds=0;const cs=()=>{const e=(0,n.useDispatch)(),t=(0,r.useWalletAddress)(),s=(0,a.useCallback)((async()=>{try{if(!r.util.isAddress(t))return;await e(ns()).unwrap()}catch(s){return window.notify({type:"error",description:"Cannot fetch data of pools"})}}),[e,t]),i=(0,a.useCallback)((async()=>{if(ds)return console.warn("Already watched");const t=[{memcmp:{bytes:os,offset:65}}];ds=null===ls||void 0===ls?void 0:ls.watch(((t,s)=>{if(t)return console.error(t);const{address:n,data:r}=s;return e(as({address:n,data:r}))}),t)}),[e]);return(0,a.useEffect)((()=>(s(),i(),()=>{(async()=>{try{await ls.unwatch(ds)}catch(e){}})(),ds=0})),[s,i]),(0,f.jsx)(a.Fragment,{})},{sol:{cluster:us}}=he,ps=new l.Connection(r.rpc),ms=()=>{const{pools:e}=ke(),t=(0,r.useWalletAddress)(),s=(0,n.useDispatch)(),{state:c}=(0,i.useLocation)(),[u,p]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[g,x]=(0,a.useState)(V.swap),y=ft(u),w=ft(m),j=null===c||void 0===c?void 0:c.poolAddress,{enhancement:v}=(0,n.useSelector)((e=>e.settings)),b=(0,i.useHistory)(),{to:C}=(0,r.useAppRoute)(),A=(0,a.useCallback)((()=>{if(!r.util.isAddress(j))return;const t=e[j];t&&(p(null===t||void 0===t?void 0:t.mint_a),h(null===t||void 0===t?void 0:t.mint_b))}),[j,e]),S=(0,a.useCallback)((e=>{x(e),b.push("/app/sen_lp?autoInstall=true")}),[b]);return(0,a.useEffect)((()=>{A()}),[A]),(0,a.useEffect)((()=>{r.util.isAddress(y.accountAddress)&&r.util.isAddress(w.accountAddress)&&(s(Re(y)),s(Ee(w)))}),[w,y,s]),(0,f.jsxs)(o.JupiterProvider,{connection:ps,cluster:us,userPublicKey:new l.PublicKey(t),children:[(0,f.jsxs)(d.Row,{gutter:[24,24],style:{paddingBottom:12},justify:v?"start":"center",children:[(0,f.jsx)(d.Col,{xs:24,lg:18,children:(0,f.jsx)(d.Alert,{type:"info",message:(0,f.jsx)(d.Typography.Title,{level:5,children:"Balansol is launched \u2705 Explore Now \u2728"}),description:(0,f.jsxs)(d.Typography.Text,{type:"secondary",children:["Liquidity Provision and Swap are now live on"," ",(0,f.jsx)("span",{style:{fontWeight:900},children:"Balansol"})," with index funds and custom pool weights."," ",(0,f.jsx)("span",{style:{fontWeight:900},children:"Get your LPs for juicy APR farming - Click here to use Balansol now!"})]}),onClick:()=>C("/app/balansol?autoInstall=true",{absolutePath:!0,newWindow:!0}),style:{cursor:"pointer"},showIcon:!0})}),(0,f.jsx)(d.Col,{lg:8,md:12,xs:24,children:(0,f.jsxs)(d.Row,{gutter:[24,24],justify:"center",children:[(0,f.jsx)(d.Col,{children:(0,f.jsx)(d.Segmented,{className:"swap-and-pool",options:Object.keys(V).map((e=>({label:e,value:V[e]}))),value:g,onChange:e=>S(e.toString()),block:!0})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(bt,{})})]})}),v&&(0,f.jsx)(d.Col,{lg:16,md:12,xs:24,children:(0,f.jsxs)(d.Row,{gutter:[24,24],children:[(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)(z,{})}),(0,f.jsx)(d.Col,{span:24,children:(0,f.jsx)($t,{})})]})})]}),(0,f.jsx)(cs,{})]})};var hs=s(48744),fs=s.n(hs),gs=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const xs={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof l.PublicKey||e instanceof fs()||gs.isBuffer(e)}},ys=(0,Z.configureStore)({middleware:e=>e(xs),devTools:!1,reducer:{ask:_e,bid:Ne,settings:ct,route:U,history:Qt,pools:is}});var ws=s(45597);const{manifest:{appId:js}}=he,vs=()=>(0,f.jsx)(r.AntdProvider,{appId:js,children:(0,f.jsx)(n.Provider,{store:ys,children:(0,f.jsx)(ms,{})})})},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.d01acb85618aed04ffea.md"},70854:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel.f392e6e59d78d4991c6b.png"},27803:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.cee91cd1f01b3f9e6f58.png"},85468:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel2.1885f3af18f36ba650f8.png"},55555:()=>{},25129:()=>{},44454:()=>{},46601:()=>{},89214:()=>{},85568:()=>{},34845:()=>{},52361:()=>{},94616:()=>{},33370:()=>{},55024:()=>{}}]);
//# sourceMappingURL=node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive-src_bootstrap_app_tsx-sr-6b1ed9.9328346b.chunk.js.map