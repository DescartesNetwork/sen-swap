(globalThis.webpackChunksen_swap=globalThis.webpackChunksen_swap||[]).push([["src_bootstrap_app_tsx-src_static_images_coingecko-logo_png"],{98463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactComponent:()=>u,default:()=>p});var n,r,a,o,i,l=s(92950);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},d.apply(this,arguments)}function c(e,t){let{title:s,titleId:c,...u}=e;return l.createElement("svg",d({width:257,height:256,viewBox:"0 0 257 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},u),s?l.createElement("title",{id:c},s):null,n||(n=l.createElement("path",{d:"M0.622803 60C0.622803 26.8629 27.4857 0 60.6228 0H196.623C229.76 0 256.623 26.8629 256.623 60V196C256.623 229.137 229.76 256 196.623 256H60.6228C27.4857 256 0.622803 229.137 0.622803 196V60Z",fill:"url(#paint0_linear_1991_5334)"})),r||(r=l.createElement("path",{opacity:.5,d:"M173.411 88.5162C173.411 85.8961 170.825 53.5885 173.411 74.5451C175.067 72.6924 178.384 68.7581 180.726 68.7581C183.067 68.7581 189.414 66.9054 191.069 68.7581C192.725 70.6108 191.069 85.8961 191.069 88.5162L191.069 167.549C191.069 178.029 187.349 188.08 180.726 195.491C174.103 202.902 165.12 207.065 155.753 207.065C146.387 207.065 137.404 202.902 130.781 195.491C124.158 188.08 120.438 178.029 120.438 167.549L120.438 88.5162C120.438 83.2761 118.577 78.2505 115.266 74.5451C111.954 70.8398 107.463 68.7581 102.78 68.7581C98.0965 68.7581 93.6051 70.8398 90.2936 74.5451C86.9821 78.2505 85.1217 83.276 85.1217 88.5162L85.1217 177.428C85.1217 180.048 84.1915 182.561 82.5358 184.413C80.88 186.266 78.6343 187.307 76.2928 187.307C73.9512 187.307 71.7055 186.266 70.0497 184.413C68.394 182.561 67.4638 180.048 67.4638 177.428L67.4638 88.5162C67.4638 78.0359 71.1846 67.9848 77.8076 60.574C84.4306 53.1633 93.4133 49 102.78 49C112.146 49 121.129 53.1633 127.752 60.574C134.375 67.9848 138.096 78.0359 138.096 88.5162L138.096 167.549C138.096 172.789 139.956 177.814 143.267 181.52C146.579 185.225 151.07 187.307 155.753 187.307C160.437 187.307 164.928 185.225 168.239 181.52C171.551 177.814 173.411 172.789 173.411 167.549L173.411 88.5162Z",fill:"white"})),a||(a=l.createElement("path",{d:"M161.626 95.3311C159.955 97.1241 157.717 98.1163 155.394 98.0939C153.071 98.0714 150.849 97.0362 149.206 95.2112C147.563 93.3861 146.632 90.9172 146.611 88.3363C146.591 85.7554 147.484 83.2689 149.098 81.4124L175.677 51.8821C177.338 50.0367 179.591 49.0001 181.941 49.0001C184.29 49.0001 186.543 50.0367 188.204 51.8821L214.783 81.4124C216.397 83.2689 217.29 85.7554 217.27 88.3363C217.249 90.9172 216.318 93.3861 214.675 95.2112C213.032 97.0362 210.81 98.0714 208.487 98.0939C206.164 98.1163 203.927 97.1241 202.256 95.3311L181.941 72.76L161.626 95.3311Z",fill:"white"})),o||(o=l.createElement("path",{d:"M55.6986 160.846C54.0422 159.005 51.7959 157.971 49.4538 157.971C47.1116 157.971 44.8653 159.005 43.2089 160.846C41.553 162.687 40.6228 165.185 40.6228 167.788C40.6228 170.392 41.553 172.889 43.2089 174.731L69.7075 204.19C71.3639 206.031 73.6101 207.065 75.9523 207.065C78.2944 207.065 80.5407 206.031 82.1971 204.19L108.696 174.731C110.352 172.889 111.282 170.392 111.282 167.788C111.282 165.185 110.352 162.687 108.696 160.846C107.039 159.005 104.793 157.971 102.451 157.971C100.109 157.971 97.8624 159.005 96.206 160.846L75.9523 183.362L55.6986 160.846Z",fill:"white"})),i||(i=l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_1991_5334",x1:.999999,y1:-114739e-11,x2:257,y2:256,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#3E8C6A"}),l.createElement("stop",{offset:1,stopColor:"#5C997E"})))))}const u=l.forwardRef(c),p=s.p+"static/media/logo.d86456fa078e55b87bfac60a8309fe54.svg"},45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return o.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return i.default}});var n=l(s(70854)),r=l(s(27803)),a=l(s(85468)),o=l(s(98463)),i=l(s(83272));function l(e){return e&&e.__esModule?e:{default:e}}const d=[n.default,r.default,a.default];t.h0=d},79878:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>Ss,__esModule:()=>Cs.X$,logo:()=>Cs.jY,panels:()=>Cs.h0,readme:()=>Cs.ng});var n=s(55754),r=s(44490),a=s(92950),o=s(45055),i=s(95418),l=s(12636),d=s(71256),c=s(94751),u=s(4550),p=s.n(u),m=s(69716),h=s(45263);const f=[void 0],g=e=>{let{key:t,mintAddress:s,size:n=24,icon:o=(0,h.jsx)(m.Z,{name:"diamond-outline"}),reversed:l=!1,...d}=e;const[u,p]=(0,a.useState)(f),{tokenProvider:g}=(0,r.useMint)(),{pools:x}=(0,r.usePool)(),y=(0,a.useCallback)((async e=>{const t=await g.findByAddress(e);if(null!==t&&void 0!==t&&t.logoURI)return t.logoURI}),[g]),j=(0,a.useCallback)((async()=>{if(!i.account.isAddress(s))return p(f);const e=Object.values(x||{}).find((e=>{let{mint_lpt:t}=e;return t===s}));if(e){const{mint_a:t,mint_b:s}=e,n=await Promise.all([t,s].map(y));return l&&n.reverse(),p(n)}const t=await y(s);return p([t])}),[s,l,y,x]);return(0,a.useEffect)((()=>{j()}),[j]),1===u.length?(0,h.jsx)(c.Avatar,{src:u[0],size:n,style:{backgroundColor:"#2D3355",border:"none"},...d,children:o}):(0,h.jsx)(c.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},...d,children:u.map(((e,t)=>(0,h.jsx)(c.Avatar,{src:e,size:n,style:{backgroundColor:"#2D3355",border:"none"},children:o},t)))})},x="Unknown Token",y=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[o,l]=(0,a.useState)(x),{tokenProvider:d}=(0,r.useMint)(),{pools:c}=(0,r.usePool)(),u=(0,a.useCallback)((async e=>{const t=await d.findByAddress(e);return null!==t&&void 0!==t&&t.name?t.name:x}),[d]),p=(0,a.useCallback)((async()=>{if(!i.account.isAddress(t))return l(x);const e=Object.values(c||{}).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:r}=e,a=await Promise.all([t,r].map(u));return n&&a.reverse(),l(`${a.join(s)} LP`)}const r=await u(t);return l(r)}),[t,n,u,c,s]);return(0,a.useEffect)((()=>{p()}),[p]),(0,h.jsx)("span",{children:o})},j="TOKN",w=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[o,l]=(0,a.useState)(j),{tokenProvider:d}=(0,r.useMint)(),{pools:c}=(0,r.usePool)(),u=(0,a.useCallback)((async e=>{const t=await d.findByAddress(e);return null!==t&&void 0!==t&&t.symbol?t.symbol:e.substring(0,4)}),[d]),p=(0,a.useCallback)((async()=>{if(!i.account.isAddress(t))return l(j);const e=Object.values(c||{}).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:r}=e,a=await Promise.all([t,r].map(u));return n&&a.reverse(),l(a.join(s))}const r=await u(t);return l(r)}),[t,n,u,c,s]);return(0,a.useEffect)((()=>{p()}),[p]),(0,h.jsx)("span",{children:o+" "})};var v=s(58421);const b=e=>{let{mintAddress:t,onClick:s=(()=>{}),active:n=!1}=e;return(0,h.jsx)(c.Card,{bodyStyle:{padding:8,cursor:"pointer"},style:{borderRadius:8,backgroundColor:r.util.randomColor(t,.2)},className:"mint-tag",bordered:Boolean(n),onClick:()=>s(t),children:(0,h.jsxs)(c.Space,{size:8,style:{width:"100%",justifyContent:"center"},children:[(0,h.jsx)(g,{mintAddress:t}),(0,h.jsx)(c.Typography.Text,{ellipsis:!0,style:{color:r.util.randomColor(t)},children:(0,h.jsx)(w,{mintAddress:t})}),n&&(0,h.jsx)(m.Z,{name:"checkmark-outline"})]})})};var C=s(7726);const A={devnet:"https://api.jup.ag/api/tokens/devnet",testnet:"https://api.jup.ag/api/markets/devnet",mainnet:"https://cache.jup.ag/tokens"},S=async()=>{const e=await fetch(A[r.net]).then((e=>e.json())),t=new Map;for(const s of e)t.set(s.address,!0);return{verify:e=>t.has(e)}},k=()=>{const{data:e}=(0,C.Z)("fetchJptTokens",S);return e},T=()=>(0,h.jsx)(c.Tooltip,{title:"Safe to Go",children:(0,h.jsx)(m.Z,{name:"checkmark-circle",style:{color:"#18A0FB",backgroundColor:"#fafafa",borderRadius:6,fontSize:12}})}),I=e=>{let{mintAddress:t,onClick:s=(()=>{})}=e;const n=k();return(0,h.jsx)(c.Card,{bodyStyle:{padding:8},style:{boxShadow:"unset",cursor:"pointer"},bordered:!1,onClick:()=>s(t),children:(0,h.jsxs)(c.Row,{gutter:[16,16],align:"middle",children:[(0,h.jsx)(c.Col,{children:(0,h.jsx)(g,{mintAddress:t,size:36})}),(0,h.jsx)(c.Col,{children:(0,h.jsxs)(c.Space,{direction:"vertical",size:0,children:[(0,h.jsxs)(c.Space,{children:[(0,h.jsx)(c.Typography.Text,{children:(0,h.jsx)(w,{mintAddress:t})}),(null===n||void 0===n?void 0:n.verify(t))&&(0,h.jsx)(T,{})]}),(0,h.jsx)(c.Typography.Text,{type:"secondary",className:"caption",children:(0,h.jsx)(y,{mintAddress:t})})]})})]})})},M=e=>{let{callback:t}=e;return(0,a.useEffect)((()=>{t()}),[t]),(0,h.jsx)(a.Fragment,{})},D=e=>(0,h.jsx)(v.ZP,{overflow:!0,children:(0,h.jsx)(M,{...e})}),R=e=>{const[t,s]=(0,a.useState)([]),{accounts:n}=(0,r.useAccount)(),o=(0,a.useMemo)((()=>{const e=new Map;for(const t of Object.values(n))e.set(t.mint,Number(t.amount.toString()));return e}),[n]),i=(0,a.useCallback)((async e=>{if(!o.size)return s([]);const t=e.sort(((e,t)=>{let s=o.get(e)||-1;return(o.get(t)||-1)-s}));return s(t)}),[o]);return(0,a.useEffect)((()=>{i(e)}),[e,i]),{sortedMints:t,sortMints:i}},B=()=>{const[e,t]=(0,a.useState)([]),{accounts:s}=(0,r.useAccount)(),n=(0,a.useCallback)((async()=>{const e=Object.values(s).map((e=>e.mint));return t(e)}),[s]);return(0,a.useEffect)((()=>{n()}),[n]),e},E=`${r.net}:selected_mints`;let N;let P;const z=e=>{let{value:t="",onChange:s=(()=>{}),visible:n}=e;const[o,i]=(0,a.useState)(""),[l,d]=(0,a.useState)(30),{recommendedMints:u,addRecommendMint:p}=(()=>{const[e,t]=(0,a.useState)([]),s=B(),{sortedMints:n}=R(s),o=(0,a.useCallback)((async()=>{let e=r.storage.get(E)||[];for(const t of n){if(e.length>=8)break;e.includes(t)||e.push(t)}return t(e.slice(0,8))}),[n]),i=(0,a.useCallback)((async e=>{let s=r.storage.get(E)||[];s=s.filter((t=>t!==e));const n=[e,...s].slice(0,8);return r.storage.set(E,n),t(n)}),[]);return(0,a.useEffect)((()=>{o()}),[o]),{recommendedMints:e,addRecommendMint:i}})(),{searchedMints:f,loading:g}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[t,s]=(0,a.useState)(!1),[n,o]=(0,a.useState)([]),{tokenProvider:i}=(0,r.useMint)(),l=k(),d=B(),{sortedMints:c}=R(d),u=(0,a.useCallback)((async()=>{let e=new Set;for(const s of c)await i.findByAddress(s)&&e.add(s);const t=await i.all();for(const s of t)e.add(s.address);return Array.from(e)}),[c,i]),p=(0,a.useCallback)((async()=>{s(!0),N&&clearTimeout(N),N=setTimeout((async()=>{try{if(!e){const e=await u();return o(e)}const t=await i.find(e,0),n=[],r=[];for(const e of t)(null===l||void 0===l?void 0:l.verify(e.address))?n.push(e.address):r.push(e.address);let a=n.concat(r);return a.length||(a=d.filter((t=>t===e))),o(a)}catch(t){}finally{s(!1)}}),e?500:0)}),[u,l,e,d,i]);return(0,a.useEffect)((()=>{p()}),[p]),{searchedMints:n,loading:t}}(o),x=(0,a.useCallback)((e=>{s(e),p(e)}),[s,p]);return(0,a.useEffect)((()=>{d(30);const e=document.getElementById("sentre-token-selection-list");e&&(e.scrollTop=0)}),[o,n]),(0,h.jsxs)(c.Row,{gutter:[32,32],children:[(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(c.Input,{placeholder:"Search token symbol, name, address, ...",suffix:(0,h.jsx)(c.Button,{type:"text",style:{marginRight:-7},icon:(0,h.jsx)(m.Z,{name:o?"close-outline":"search-outline"}),onClick:o?()=>i(""):()=>{},loading:g}),value:o,onChange:e=>i(e.target.value||"")})}),!o.length&&(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(c.Row,{gutter:[8,8],children:u.map((e=>(0,h.jsx)(c.Col,{xs:12,sm:8,md:6,children:(0,h.jsx)(b,{mintAddress:e,onClick:x,active:e===t})},e)))})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(c.Spin,{spinning:g,tip:o.length?"Searching...":"Loading...",children:(0,h.jsx)(c.Row,{gutter:[8,8],style:{maxHeight:360,paddingRight:4,minHeight:50},className:"scrollbar",id:"sentre-token-selection-list",justify:"center",children:f.length||g?f.slice(0,l).map(((e,t)=>(0,h.jsxs)(c.Col,{span:24,children:[(0,h.jsx)(v.ZP,{height:60,overflow:!0,throttle:300,children:(0,h.jsx)(I,{mintAddress:e,onClick:x})}),t===l-5&&(0,h.jsx)(D,{callback:()=>{P&&clearTimeout(P),P=setTimeout((()=>d(l+30)),250)}})]},e+t))):(0,h.jsx)(c.Col,{children:(0,h.jsx)(c.Empty,{style:{padding:40}})})})})})]})},_=e=>{let{value:t="",onChange:s=(()=>{}),style:n={},disabled:r=!1}=e;const[o,i]=(0,a.useState)(!1),l=(0,a.useCallback)((e=>{s(e),i(!1)}),[s]);return(0,h.jsxs)(a.Fragment,{children:[(0,h.jsx)(c.Button,{type:"text",onClick:()=>i(!0),style:{padding:4,...n},disabled:r,children:(0,h.jsxs)(c.Space,{children:[(0,h.jsx)(g,{mintAddress:t}),(0,h.jsx)(w,{mintAddress:t}),(0,h.jsx)(m.Z,{name:"chevron-down-outline"})]})}),(0,h.jsx)(c.Modal,{visible:o,onCancel:()=>i(!1),footer:null,closable:!1,centered:!0,className:"mint-select-modal",destroyOnClose:!0,children:(0,h.jsx)(z,{onChange:l})})]})},L=()=>{const{bid:{mintInfo:e},ask:{mintInfo:t}}=(0,n.useSelector)((e=>e)),s=(null===e||void 0===e?void 0:e.address)||"",r=(null===t||void 0===t?void 0:t.address)||"";return(0,h.jsxs)(c.Space,{children:[(0,h.jsxs)(c.Avatar.Group,{children:[(0,h.jsx)(g,{mintAddress:r}),(0,h.jsx)(g,{mintAddress:s})]}),(0,h.jsxs)(c.Typography.Text,{children:[(0,h.jsx)(w,{mintAddress:r})," / ",(0,h.jsx)(w,{mintAddress:s})]})]})};var F=s(76907),O=s.n(F),W=s(21111),U=s.n(W);const H=e=>{let{chartData:t=[],labels:s=[],type:n="line",configs:o,disableAxe:i=!1,chartId:l="sen_chart"}=e;const{backgroundColor:d}=o||{},[c,u]=(0,a.useState)(!1),p=(0,a.useCallback)(((e,t,s)=>({labels:t,datasets:[{...o,data:e,backgroundColor:s}]})),[o]),m=(0,a.useRef)(null),f=(0,a.useCallback)((()=>{var e,t;if(!m||!d)return"#dadada";const s=null===m||void 0===m||null===(e=m.current)||void 0===e||null===(t=e.canvas)||void 0===t?void 0:t.getContext("2d"),r=null===s||void 0===s?void 0:s.createLinearGradient(0,0,0,180);null===r||void 0===r||r.addColorStop(0,d),null===r||void 0===r||r.addColorStop(1,`${d}00`);return"line"===n?r:d}),[d,n]);return(0,a.useEffect)((()=>{var e;const n=m.current,r=null===n||void 0===n||null===(e=n.data.datasets)||void 0===e?void 0:e.find((e=>{let{data:t}=e;return t})),a=U()(null===r||void 0===r?void 0:r.data,t);n&&!a&&(n.data=p(t,s,f()),null===n||void 0===n||n.update())}),[t,p,f,s]),(0,h.jsx)("canvas",{id:l,height:"180px",ref:e=>{if(!e)return;const t=e.getContext("2d");t&&!c&&(m.current=new(O())(t,{type:n,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!i}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!i,beginAtZero:!1,maxTicksLimit:8,callback:function(e,t,s){return r.util.numeric(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:(e,t)=>{const s=document.getElementById(l);s&&(s.style.cursor=t[0]?"pointer":"default")}}}}),u(!0))}})},J=()=>(0,h.jsx)(c.Row,{style:{height:170},align:"middle",justify:"center",children:(0,h.jsx)(c.Col,{children:(0,h.jsx)(c.Empty,{})})}),Z=s.p+"static/media/coingecko-logo.f8569e1153553894f964.png",Y=e=>{let{title:t="Powered by",spacing:s=4,iconSize:n=20}=e;return(0,h.jsxs)(c.Space,{size:s,style:{cursor:"pointer"},children:[(0,h.jsx)(c.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:t}),(0,h.jsx)(c.Tooltip,{title:"CoinGecko",children:(0,h.jsx)(c.Avatar,{src:Z,size:n})})]})};var G=s(21995),K=s.n(G);new r.TokenProvider;const V=async(e,t)=>{try{const s=await K()({method:"get",url:`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&days=${t.days}&interval=${t.interval}`});return s.data.prices.map((e=>({time:e[0],val:e[1]})))}catch(s){return[]}};var q;!function(e){e.day="day",e.week="week",e.month="month",e.year="year"}(q||(q={}));const X={day:{amount:4,unit:"hours",format:"HH:00"},week:{amount:1,unit:"days",format:"MMM DD"},month:{amount:5,unit:"days",format:"MMM DD"},year:{amount:2,unit:"months",format:"MMM DD"}},Q={day:{days:1,interval:"hourly"},week:{days:7,interval:"daily"},month:{days:31,interval:"daily"},year:{days:365,interval:"daily"}},$="#3E8C6A",ee=0,te=14,se="TVL",ne="transparent",re=()=>{var e,t,s;const[o,i]=(0,a.useState)(q.week),[l,d]=(0,a.useState)([]),u=(0,n.useSelector)((e=>e.bid)),f=(0,n.useSelector)((e=>e.ask)),{tokenProvider:g}=(0,r.useMint)(),x={borderColor:ne,borderRadius:ee,pointRadius:ee,tooltip:se,pointHitRadius:te,pointHoverRadius:ee,backgroundColor:$},y=(0,a.useCallback)((e=>{const t=[],{format:s,amount:n,unit:r}=X[o];let a=p()();for(const o of e.reverse()){const e=p()(o.time).format(s);if(e===a.format(s)){let i=e;e===p()().format(s)&&(i=p()().format("HH:mm")),a&&t.unshift({label:i,val:o.val}),a=a.subtract(n,r)}else"00:00"===e&&t.unshift({label:a.format("MMM DD"),val:o.val})}d(t)}),[o]),j=(0,a.useCallback)((e=>{const t=[],{format:s,amount:n,unit:r}=X[o];let a=p()();for(const o of e.reverse()){const e=p()(o.time).format(s);e!==a.format(s)||(a=a.subtract(n,r),t.unshift({label:e,val:o.val}))}d(t)}),[o]),w=(0,a.useCallback)((async()=>{var e,t,s,n;const r=await g.findByAddress((null===(e=u.mintInfo)||void 0===e?void 0:e.address)||""),a=await g.findByAddress((null===(t=f.mintInfo)||void 0===t?void 0:t.address)||""),i=null===r||void 0===r||null===(s=r.extensions)||void 0===s?void 0:s.coingeckoId,l=null===a||void 0===a||null===(n=a.extensions)||void 0===n?void 0:n.coingeckoId,c=u.accountAddress===f.accountAddress;if(!l||!i||c)return d([]);const p=Q[o],[m,h]=await Promise.all([V(i,p),V(l,p)]),x=[];for(let o=m.length-1;o>=0;o--){const e=m[o],t=h[h.length-m.length+o];e&&t&&x.unshift({time:e.time,val:t.val/e.val})}return o===q.day?y(x):j(x)}),[f.accountAddress,null===(e=f.mintInfo)||void 0===e?void 0:e.address,u.accountAddress,null===(t=u.mintInfo)||void 0===t?void 0:t.address,o,j,y,g]);(0,a.useEffect)((()=>{w()}),[w]);const v=(null===(s=l[l.length-1])||void 0===s?void 0:s.val)||0,b=r.util.numeric(v).format(v>1?"0,0.[00]":"0,0.[00000000]");return(0,h.jsx)(c.Card,{bordered:!1,className:"card-swap",bodyStyle:{paddingTop:28},children:(0,h.jsxs)(c.Row,{gutter:[24,24],children:[(0,h.jsx)(c.Col,{span:24,children:(0,h.jsxs)(c.Row,{gutter:[20,20],children:[(0,h.jsx)(c.Col,{flex:"auto",children:(0,h.jsxs)(c.Space,{children:[(0,h.jsx)(L,{}),(0,h.jsx)(c.Popover,{content:(0,h.jsx)(Y,{title:"Reference Market Price. Powered by"}),children:(0,h.jsx)(c.Button,{type:"text",icon:(0,h.jsx)(m.Z,{name:"information-circle-outline"})})})]})}),l&&!!l.length&&(0,h.jsx)(c.Col,{children:(0,h.jsxs)(c.Radio.Group,{defaultValue:q.week,onChange:e=>i(e.target.value),className:"chart-radio-btn",children:[(0,h.jsx)(c.Radio.Button,{value:q.day,children:"1D"}),(0,h.jsx)(c.Radio.Button,{value:q.week,children:"1W"}),(0,h.jsx)(c.Radio.Button,{value:q.month,children:"1M"}),(0,h.jsx)(c.Radio.Button,{value:q.year,children:"1Y"})]})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(c.Typography.Title,{level:2,children:v?b:""})})]})}),(0,h.jsx)(c.Col,{span:24,children:l&&l.length?(0,h.jsx)(H,{chartData:null===l||void 0===l?void 0:l.map((e=>e.val)),labels:null===l||void 0===l?void 0:l.map((e=>e.label)),configs:x}):(0,h.jsx)(J,{})})]})})};const ae=s.p+"static/media/jupiter-logo.6553c3779ce16057aa846301783447a2.svg",oe=e=>{let{title:t="Powered by",spacing:s=4,iconSize:n=20}=e;return(0,h.jsxs)(c.Space,{size:s,style:{cursor:"pointer"},children:[(0,h.jsx)(c.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:t}),(0,h.jsx)(c.Tooltip,{title:"Jupiter Aggregator",children:(0,h.jsx)(c.Avatar,{src:ae,size:n})})]})};var ie=s(19289);let le;!function(e){e[e.SenSwap=0]="SenSwap",e[e.JupiterAggregator=1]="JupiterAggregator"}(le||(le={}));const de="route",ce={platform:le.SenSwap,best:[],amount:BigInt(0),priceImpact:0,loadingJupSwap:!1,loadingSenswap:!1},ue=(0,ie.createAsyncThunk)("route/setLoadingJupiterRoute",(async e=>{let{loadingJupSwap:t}=e;return{loadingJupSwap:t}})),pe=(0,ie.createAsyncThunk)("route/loadingSenswap",(async e=>{let{loadingSenswap:t}=e;return{loadingSenswap:t}})),me=(0,ie.createAsyncThunk)("route/updateRoute",(async e=>e?{...e}:{})),he=(0,ie.createSlice)({name:de,initialState:ce,reducers:{},extraReducers:e=>{e.addCase(me.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ue.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(pe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,fe=()=>{const{bid:{mintInfo:e},route:{platform:t,best:s}}=(0,n.useSelector)((e=>e)),r=null===e||void 0===e?void 0:e.address,o=(0,a.useMemo)((()=>{if(!s.length||!i.account.isAddress(r))return[];let e=[r];for(const t of s){const{dstMintAddress:s}=t;i.account.isAddress(s)&&e.push(s)}return e}),[r,s]);return(0,h.jsxs)(c.Space,{children:[null===o||void 0===o?void 0:o.map(((e,t)=>(0,h.jsxs)(a.Fragment,{children:[(0,h.jsx)(g,{mintAddress:e}),o.length>t+1&&(0,h.jsx)(m.Z,{name:"chevron-forward-outline"})]},t))),t===le.JupiterAggregator&&(0,h.jsxs)(a.Fragment,{children:[(0,h.jsx)(c.Divider,{type:"vertical",style:{margin:0}}),(0,h.jsx)(oe,{})]})]})},ge=()=>{const[e,t]=(0,a.useState)(!1),{bid:{mintInfo:s,amount:o},ask:{mintInfo:i,amount:l}}=(0,n.useSelector)((e=>e)),d=(null===s||void 0===s?void 0:s.address)||"",u=(null===i||void 0===i?void 0:i.address)||"",p=r.util.numeric(Number(l)/Number(o)).format("0,0.[000000]"),f=r.util.numeric(Number(o)/Number(l)).format("0,0.[000000]");return(0,h.jsxs)(c.Space,{children:[(0,h.jsx)(c.Button,{type:"text",onClick:()=>t(!e),shape:"circle",icon:(0,h.jsx)(m.Z,{name:"swap-horizontal-outline"})}),(0,h.jsx)(c.Typography.Text,{children:e?f:p}),(0,h.jsxs)(c.Typography.Text,{children:[e?(0,h.jsx)(w,{mintAddress:d}):(0,h.jsx)(w,{mintAddress:u})," / ",e?(0,h.jsx)(w,{mintAddress:u}):(0,h.jsx)(w,{mintAddress:d})]})]})};let xe;!function(e){e[e.goodSwap=.01]="goodSwap",e[e.acceptableSwap=.05]="acceptableSwap"}(xe||(xe={}));const ye=e=>e<xe.goodSwap?"#14E041":e>xe.acceptableSwap?"#D72311":"#FA8C16",je=e=>{const[t,s]=(0,a.useState)(void 0),{getDecimals:n}=(0,r.useMint)(),o=(0,a.useCallback)((async()=>{try{const t=await n(e);return s(t)}catch(t){return s(void 0)}}),[e,n]);return(0,a.useEffect)((()=>{o()}),[o]),t},we=(e,t,s)=>i.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(i.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},ve=e=>{const{wallet:{address:t,lamports:s}}=(0,r.useWallet)(),{accounts:n}=(0,r.useAccount)(),{amount:a,mint:o}=n[e]||{},l=je(o)||0;return i.account.isAddress(t)&&i.account.isAddress(e)?e===t?we(i.DEFAULT_EMPTY_ADDRESS,s,9):we(o,a,l):we()},be=ve,Ce=()=>{const{route:{best:e,loadingJupSwap:t,loadingSenswap:s},bid:{amount:o,accountAddress:l,mintInfo:{address:d,decimals:c}},ask:{amount:u,mintInfo:{address:p}}}=(0,n.useSelector)((e=>e)),{wallet:{lamports:m}}=(0,r.useWallet)(),{amount:h}=be(l),f=(0,a.useMemo)((()=>{if(d!==i.DEFAULT_WSOL)return i.utils.undecimalize(h,c);const e=i.utils.decimalize(.01,c),t=m+h-e;return t<=h?i.utils.undecimalize(h,c):i.utils.undecimalize(t,c)}),[h,d,c,m]);return{disabled:!e.length||!Number(o)||!Number(u)||Number(o)>Number(f)||d===p,loading:t||s}},Ae=e=>{let{label:t="",content:s="",loading:n=!1}=e;return(0,h.jsxs)(c.Row,{align:"middle",children:[(0,h.jsx)(c.Col,{flex:"auto",children:(0,h.jsx)(c.Typography.Text,{type:"secondary",children:t})}),(0,h.jsx)(c.Col,{children:n?(0,h.jsx)(c.Skeleton.Input,{style:{width:150},active:!0,size:"small"}):(0,h.jsx)("span",{children:s})})]})},Se=()=>{const{route:{priceImpact:e},settings:{slippage:t}}=(0,n.useSelector)((e=>e)),{loading:s}=Ce();return(0,h.jsxs)(c.Row,{gutter:[12,12],children:[(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(Ae,{label:"Price impact",content:(0,h.jsx)(c.Typography.Text,{style:{color:ye(e)},children:r.util.numeric(Number(e)).format("0.[0000]%")}),loading:s})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(Ae,{label:"Price",content:(0,h.jsx)(ge,{}),loading:s})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(Ae,{label:"Slippage Tolerance",content:r.util.numeric(t).format("0.[00]%"),loading:s})}),(0,h.jsx)(c.Col,{span:24,style:{minHeight:24},children:(0,h.jsx)(Ae,{label:"Route",content:(0,h.jsx)(fe,{}),loading:s})})]})},ke={address:"",icon:"",name:"TOKEN",price:0,priceChange:0,rank:0,symbol:"TOKEN",totalVolume:0},Te=e=>{const[t,s]=(0,a.useState)(ke),{tokenProvider:n}=(0,r.useMint)(),o=(0,a.useCallback)((async()=>{if(!e)return s(ke);try{var t;const a=await n.findByAddress(e),o=null===a||void 0===a||null===(t=a.extensions)||void 0===t?void 0:t.coingeckoId,i=await r.util.fetchCGK(o);return s(i)}catch(a){return s(ke)}}),[e,n]);return(0,a.useEffect)((()=>{o()}),[o]),t};const Ie={appId:"sen_swap",url:"https://descartesnetwork.github.io/sen-swap/index.js"},Me={devnet:{cluster:"devnet",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF"},testnet:{cluster:"testnet",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",swapAddress:""},mainnet:{cluster:"mainnet-beta",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV"}},De={devnet:{bidDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ"},testnet:{bidDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ"},mainnet:{bidDefault:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",askDefault:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M"}},Re={devnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"},testnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"},mainnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"}},Be={devnet:{assetsRoute:"/app/sen_assets"},testnet:{assetsRoute:"/app/sen_assets"},mainnet:{assetsRoute:"/app/sen_assets"}},Ee={manifest:{development:{...Ie},staging:{...Ie},production:{...Ie}}[r.env],sol:Me[r.net],swap:De[r.net],wormhole:Re[r.net],route:Be[r.net]},{manifest:{appId:Ne}}=Ee,Pe="validated_swap_transaction",ze=e=>{let{txId:t=""}=e;const{bid:{amount:s,mintInfo:{address:o}}}=(0,n.useSelector)((e=>e)),{wallet:{address:i}}=(0,r.useWallet)(),{price:l}=Te(o);return(0,a.useEffect)((()=>{(async()=>{const e=(0,r.createPDB)(i,Ne);if(!t||!e)return;const n=await e.getItem(Pe)||{txIds:[],amount:0};let a=Number(s)*l;const o=n.txIds;!t||null!==o&&void 0!==o&&o.includes(t)||o.push(t),n.amount&&(a+=n.amount);const d={txIds:o,amount:a};await e.setItem(Pe,d)})()}),[s,l,t,i]),(0,h.jsx)(a.Fragment,{})},_e=BigInt(1e9),Le=i.Swap.oracle,Fe=(e,t)=>{if(!e)return BigInt(0);const{srcMintAddress:s,dstMintAddress:n,poolData:r}=t,{fee_ratio:a,tax_ratio:o}=r,i=We(s,r),l=We(n,r);if(!i||!l)return BigInt(0);const{askAmount:d}=Le.swap(e,i,l,a,o);return d},Oe=(e,t)=>{if(!e)return BigInt(0);const{srcMintAddress:s,dstMintAddress:n,poolData:r}=t,{fee_ratio:a,tax_ratio:o}=r,i=We(s,r),l=We(n,r);if(!i||!l)return BigInt(0);return Le.inverseSwap(e,i,l,a,o)},We=(e,t)=>{const{mint_a:s,mint_b:n,reserve_a:r,reserve_b:a}=t;if(e===s)return r;if(e===n)return a;throw new Error("Cannot find reserves")},Ue=(e,t)=>{if(!t)return 0;let s=t,n=1;return e.forEach((e=>{const t=Number(i.utils.undecimalize(((e,t)=>{if(!e)return BigInt(0);const{srcMintAddress:s,dstMintAddress:n,poolData:r}=t,{fee_ratio:a,tax_ratio:o}=r,i=We(s,r),l=We(n,r);return i&&l?Le.slippage(e,i,l,a,o):BigInt(0)})(s,e),9));n*=1-t;const r=Fe(s,e);s=r})),1-n},He=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=[],a=new Map(e),o=e.get(t);return n>=3||(a.delete(t),null===o||void 0===o||o.forEach(((e,o)=>{const i=t,l=i===e.mint_a?e.mint_b:e.mint_a,d={srcMintAddress:i,dstMintAddress:l,poolData:{...e,address:o}};if(l===s)return r.push([d]);He(a,l,s,n+1).forEach((e=>r.push([d,...e])))}))),r},Je=e=>{const{pools:t}=(0,r.usePool)(),[s,n]=(0,a.useState)(0),{getMintTotalValue:o}=(()=>{const{tokenProvider:e,getMint:t}=(0,r.useMint)(),{pools:s}=(0,r.usePool)(),n=(0,a.useCallback)((async(t,s)=>{try{var n;const a=await e.findByAddress(t),o=null===a||void 0===a||null===(n=a.extensions)||void 0===n?void 0:n.coingeckoId;if(!o)throw new Error("Cant not find coingeckoId");const l=await r.util.fetchCGK(o);return Number(i.utils.undecimalize(s,a.decimals))*l.price}catch(a){return 0}}),[e]),o=(0,a.useCallback)((async r=>{let{mintAddress:a,amount:l}=r;if(!l)return 0;if(await e.findByAddress(a))return n(a,l);const d=Object.values(s).find((e=>e.mint_lpt===a));if(!d)return 0;const{reserve_a:c,reserve_b:u,mint_a:p,mint_b:m}=d;if(c*u===BigInt(0))return 0;const{[a]:{supply:h}}=await t({address:a}),{deltaA:f,deltaB:g}=i.Swap.oracle.withdraw(l,h,c,u);return await o({mintAddress:p,amount:f})+await o({mintAddress:m,amount:g})}),[t,n,e,s]);return{getMintTotalValue:o}})(),l=(0,a.useCallback)((async e=>{const s=t[e];if(!s)return 0;const{reserve_a:n,reserve_b:r,mint_a:a,mint_b:i}=s;return await o({mintAddress:a,amount:n})+await o({mintAddress:i,amount:r})}),[o,t]),d=(0,a.useCallback)((async e=>{if(!e)return n(0);const t=await l(e);n(t)}),[l]);return(0,a.useEffect)((()=>{d(e)}),[d,e]),{tvl:s,getTvl:l}},Ze=e=>{const[t,s]=(0,a.useState)({platform:le.SenSwap,best:[],amount:BigInt(0),priceImpact:0}),{bid:o,ask:l}=(0,n.useSelector)((e=>e)),{pools:d}=(0,r.usePool)(),{getTvl:c}=Je(),u=(0,a.useCallback)((async()=>{const{poolAddresses:t,mintInfo:{address:n},amount:r,priority:a}=o,{poolAddresses:u,mintInfo:{address:p},amount:m,priority:h}=l;let f={platform:le.SenSwap,best:[],amount:BigInt(0),priceImpact:0};if(!Number(r)&&!Number(m)||!i.account.isAddress(n)||!i.account.isAddress(p)||!t.length||!u.length||n===p)return s(f);let g={};await Promise.all(Object.keys(d).map((async e=>{await c(e)<1e3||(g[e]=d[e])})));let x=He((e=>{const t=new Map;for(const s in e){const n=e[s];1===(null===n||void 0===n?void 0:n.state)&&[n.mint_a,n.mint_b].forEach((e=>{var r;t.has(e)||t.set(e,new Map),null===(r=t.get(e))||void 0===r||r.set(s,n)}))}return t})(g),n,p);return x.length?(i.account.isAddress(e)&&(x=x.filter((t=>1===t.length&&t[0].poolData.address===e))),f=h<a?((e,t)=>{const{amount:s,mintInfo:n}=t;let r={platform:le.SenSwap,best:[],amount:BigInt(0),priceImpact:0};e.forEach((e=>{let t=i.utils.decimalize(s,n.decimals);e.forEach((e=>{t=Fe(t,e)}));const a=r.amount;t>a&&(r={platform:le.SenSwap,best:e,amount:t,priceImpact:0})}));const a=i.utils.decimalize(s,n.decimals);return r.priceImpact=Ue(r.best,a),r})(x,o):((e,t)=>{let{amount:s,mintInfo:n}=t,r={platform:le.SenSwap,best:[],amount:BigInt(0),priceImpact:0};for(const a of e){const e=[...a].reverse();let t=i.utils.decimalize(s,n.decimals);for(const s of e)if(t=Oe(t,s),t<=BigInt(0))break;if(t<=BigInt(0))continue;const o=r.amount;(t<o||!o)&&(r={platform:le.SenSwap,best:a,amount:t,priceImpact:0})}return r.priceImpact=Ue(r.best,r.amount),r})(x,l),s(f)):s(f)}),[l,o,e,c,d]);return(0,a.useEffect)((()=>{u()}),[u]),t},Ye=e=>{const t=Ze(e),s=(()=>{const{route:{best:e},bid:{amount:t,mintInfo:{decimals:s}},ask:{amount:o,mintInfo:{decimals:l}},settings:{slippage:d}}=(0,n.useSelector)((e=>e)),{wallet:{address:c}}=(0,r.useWallet)(),u=(0,a.useCallback)((async()=>{const{swap:n,splt:r,wallet:a}=window.sentre;if(!a)throw new Error("Wallet is not connected");const u=await Promise.all(e.map((async e=>{let{srcMintAddress:t,dstMintAddress:s,poolData:{address:n}}=e;return{poolAddress:n,srcAddress:await r.deriveAssociatedAddress(c,t),dstAddress:await r.deriveAssociatedAddress(c,s)}}))),p=i.utils.decimalize(t,s),m=i.utils.decimalize(o,l)*(_e-i.utils.decimalize(d,9))/_e;return await n.route(p,m,u,a)}),[e,s,l,d,c,t,o]);return u})();return{bestRoute:t,swap:s}};const Ge=e=>{let{loading:t,disabled:s,children:r,onSwap:i}=e;const{state:l}=(0,o.useLocation)(),d=(0,n.useDispatch)(),{swap:u,bestRoute:p}=Ye(null===l||void 0===l?void 0:l.poolAddress),m=(0,a.useCallback)((async()=>{await d(me({...p})),setTimeout((()=>{d(pe({loadingSenswap:!1,loadingJupSwap:!0}))}),500)}),[p,d]);return(0,a.useEffect)((()=>{m()}),[m]),(0,h.jsx)(c.Button,{type:"primary",onClick:()=>i(u),loading:t,disabled:s,block:!0,children:r})},Ke=(0,ie.createAsyncThunk)("bid/updateBidData",(async(e,t)=>{let{prioritized:s,reset:n,...r}=e,{getState:a}=t;const{bid:{priority:o},ask:{priority:i}}=a();Number(r.amount)<0&&(r.amount="");const l=n?0:s?i+1:o;return{...r,priority:l}})),Ve=(0,ie.createSlice)({name:"bid",initialState:{amount:"",mintInfo:{address:"",decimals:0},accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:e=>{e.addCase(Ke.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,qe=(0,ie.createAsyncThunk)("ask/updateAskData",(async(e,t)=>{let{prioritized:s,reset:n,...r}=e,{getState:a}=t;const{bid:{priority:o},ask:{priority:i}}=a();Number(r.amount)<0&&(r.amount="");const l=n?0:s?o+1:i;return{...r,priority:l}})),Xe=(0,ie.createSlice)({name:"ask",initialState:{amount:"",mintInfo:{address:"",decimals:0},accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:e=>{e.addCase(qe.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;const Qe=class{constructor(e,t){this._wallet=void 0,this.publicKey=void 0,this._wallet=t,this.publicKey=i.account.fromAddress(e)||null}async sendTransaction(e,t,s){return e=await this.signTransaction(e),await t.sendRawTransaction(e.serializeMessage(),s)}async signTransaction(e){return await this._wallet.signTransaction(e)}async signAllTransactions(e){const t=[];for(const s of e){const e=await this.signTransaction(s);t.push(e)}return t}},$e=new d.Connection(r.rpc),et={platform:le.JupiterAggregator,best:[],amount:BigInt(0),priceImpact:0};let tt;const st=()=>{const e=(0,n.useDispatch)(),{bid:{mintInfo:{address:t,decimals:s},amount:o},ask:{mintInfo:{address:d}},settings:{slippage:c}}=(0,n.useSelector)((e=>e)),{wallet:{address:u}}=(0,r.useWallet)(),p=Number(o)*10**s,m=(0,a.useMemo)((()=>i.account.isAddress(t)?i.account.fromAddress(t):void 0),[t]),h=(0,a.useMemo)((()=>i.account.isAddress(d)?i.account.fromAddress(d):void 0),[d]),{exchange:f,routes:g,loading:x,refresh:y}=(0,l.useJupiter)({amount:p,inputMint:m,outputMint:h,slippage:100*c,debounceTime:250}),j=(0,a.useCallback)((async()=>{var e;const{sentre:{wallet:t}}=window;if(!t||!i.account.isAddress(u))throw new Error("Wallet is not connected");if(null===g||void 0===g||!g.length)throw new Error("No available route");const s=new Qe(u,t),n=await f({wallet:s,routeInfo:g[0],onTransaction:async e=>(await $e.confirmTransaction(e,"confirmed"),await $e.getTransaction(e,{commitment:"confirmed"}))});if(n.error)throw new Error((null===(e=n.error)||void 0===e?void 0:e.message)||"Unknown Error");const{txid:r,outputAddress:a}=n;return{txId:r,dstAddress:a}}),[f,g,u]),w=(0,a.useMemo)((()=>{if(null===g||void 0===g||!g.length)return{...et};const{outAmount:e,priceImpactPct:t,marketInfos:s}=g[0],n=s.map((e=>{let{inputMint:t,outputMint:s}=e;return{poolData:{},srcMintAddress:t.toBase58(),dstMintAddress:s.toBase58()}}));return{platform:le.JupiterAggregator,amount:BigInt(e),priceImpact:t,best:n}}),[g]);return(0,a.useEffect)((()=>{e(ue({loadingJupSwap:x}))}),[e,x]),(0,a.useEffect)((()=>{o&&Number(o)>0&&(tt&&clearTimeout(tt),tt=setTimeout((()=>{y()}),1e3))}),[o]),{swap:j,bestRoute:w}};const nt=e=>{let{loading:t,disabled:s,children:r,onSwap:o}=e;const{swap:i,bestRoute:l}=st(),d=(0,n.useDispatch)(),u=(0,a.useCallback)((()=>{setTimeout((()=>{d(me({...l}))}),500)}),[l,d]);return(0,a.useEffect)((()=>{u()}),[u]),(0,h.jsx)(c.Button,{type:"primary",onClick:()=>o((()=>i().then((e=>({txId:e.txId,dst:e.dstAddress}))))),loading:t,disabled:s,block:!0,children:r})},rt=e=>{let{onCallback:t=(()=>{}),forceSwap:s=!1}=e;const o=(0,n.useDispatch)(),[l,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),{route:{priceImpact:p,amount:m,loadingSenswap:f,platform:g},bid:{mintInfo:{decimals:x},priority:y,amount:j},ask:{mintInfo:{decimals:w},priority:v},settings:{advanced:b}}=(0,n.useSelector)((e=>e)),{wrapAmount:C,wrapSol:A}=(()=>{const{bid:{amount:e,mintInfo:{address:t,decimals:s},accountAddress:r}}=(0,n.useSelector)((e=>e)),{amount:o}=be(r),l=(0,a.useMemo)((()=>{if(!Number(e)||t!==i.DEFAULT_WSOL)return BigInt(0);const n=i.utils.decimalize(e,s);return n<=o?BigInt(0):n-o}),[o,e,t,s]);return{wrapAmount:l,wrapSol:async()=>{const{swap:e,wallet:t}=window.sentre;if(!t)throw new Error("Wallet is not connected");if(l)return await e.wrapSol(l,t)}}})(),{disabled:S}=Ce(),k=async e=>{try{u(!0),C&&await A();const{txId:s}=await e();return window.notify({type:"success",description:"Swap successfully. Click to view details.",onClick:()=>window.open(r.util.explorer(s),"_blank")}),d(s),o(Ke({amount:""})),t()}catch(s){return window.notify({type:"error",description:s.message})}finally{return d(""),u(!1)}},T=(0,a.useCallback)((()=>{v<y&&o(qe({amount:i.utils.undecimalize(m,w)}))}),[w,v,m,y,o]);(0,a.useEffect)((()=>{T()}),[T]);const I=(0,a.useCallback)((()=>{y<v&&o(Ke({amount:i.utils.undecimalize(m,x)}))}),[v,m,x,y,o]);(0,a.useEffect)((()=>{I()}),[I]);const M=!b&&p>xe.acceptableSwap&&!s,D=M?"Too High Price Impact":s?"Swap Anyway":"Swap",R=Number(m),B=!f&&!!Number(j)&&(!R||g===le.JupiterAggregator);return(0,h.jsxs)(a.Fragment,{children:[B?(0,h.jsx)(nt,{onSwap:k,disabled:S||M,loading:c,children:D}):(0,h.jsx)(Ge,{onSwap:k,disabled:S||M,loading:c,children:D}),(0,h.jsx)(ze,{txId:l})]})},at=e=>{var t,s,r,o;let{visible:i=!1,onCancel:l=(()=>{})}=e;const[d,u]=(0,a.useState)(!1),{route:{priceImpact:p},bid:f,ask:x}=(0,n.useSelector)((e=>e)),y=p>xe.acceptableSwap,j=(0,a.useCallback)((()=>{l(!1),u(!1)}),[l]);return(0,h.jsx)(c.Modal,{onCancel:j,closeIcon:(0,h.jsx)(m.Z,{name:"close"}),footer:null,visible:i,forceRender:!0,children:(0,h.jsxs)(c.Row,{gutter:[16,24],children:[(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(c.Typography.Title,{level:4,children:" Confirm swaps"})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsxs)(c.Row,{align:"middle",justify:"space-between",children:[(0,h.jsx)(c.Col,{children:(0,h.jsxs)(c.Space,{direction:"vertical",children:[(0,h.jsx)(c.Typography.Text,{children:"From"}),(0,h.jsxs)(c.Space,{children:[(0,h.jsx)(g,{mintAddress:null===(t=f.mintInfo)||void 0===t?void 0:t.address}),(0,h.jsx)(c.Typography.Text,{children:(0,h.jsx)(w,{mintAddress:null===(s=f.mintInfo)||void 0===s?void 0:s.address})})]}),(0,h.jsx)(c.Typography.Title,{level:4,children:f.amount})]})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(m.Z,{name:"arrow-forward-outline",style:{fontSize:24}})}),(0,h.jsx)(c.Col,{children:(0,h.jsxs)(c.Space,{direction:"vertical",align:"end",children:[(0,h.jsx)(c.Typography.Text,{children:"To"}),(0,h.jsxs)(c.Space,{children:[(0,h.jsx)(g,{mintAddress:null===(r=x.mintInfo)||void 0===r?void 0:r.address}),(0,h.jsx)(c.Typography.Text,{children:(0,h.jsx)(w,{mintAddress:null===(o=x.mintInfo)||void 0===o?void 0:o.address})})]}),(0,h.jsx)(c.Typography.Title,{level:4,children:x.amount})]})})]})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(c.Card,{bordered:!1,className:"confirm-info",children:(0,h.jsx)(Se,{})})}),y&&(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(c.Checkbox,{checked:d,onChange:()=>u(!d),children:"The price impact is currently high. Tick the checkbox to accept the swap."})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(rt,{onCallback:j,forceSwap:d})})]})})},ot=()=>{const[e,t]=(0,a.useState)(!1),{disabled:s,loading:r}=Ce(),{enhancement:o}=(0,n.useSelector)((e=>e.settings));return(0,h.jsx)(c.Card,{bordered:!1,children:(0,h.jsxs)(c.Row,{gutter:[24,24],children:[(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(c.Typography.Title,{level:5,children:"Review & Swap"})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(Se,{})}),o&&(0,h.jsx)(c.Col,{span:24})," ",(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(c.Button,{type:"primary",onClick:()=>t(!0),disabled:s,loading:r,block:!0,children:"Review & Swap"})}),(0,h.jsx)(at,{visible:e,onCancel:t})]})})},it=e=>{let{mintAddress:t,tvl:s="",price:n,format:a="0,0.[00]a"}=e;return(0,h.jsxs)(c.Space,{direction:"vertical",size:4,children:[(0,h.jsx)(g,{mintAddress:t}),(0,h.jsxs)(c.Space,{children:[(0,h.jsx)(c.Typography.Text,{children:"TVL:"}),(0,h.jsx)(c.Typography.Title,{level:5,children:r.util.numeric(s).format(a)}),(0,h.jsx)(c.Typography.Title,{level:5,children:(0,h.jsx)(w,{mintAddress:t})})]}),(0,h.jsxs)(c.Typography.Text,{className:"caption",type:"secondary",children:["~ $",r.util.numeric(n).format(a)]})]})},lt=()=>{const{route:{best:e},bid:{mintInfo:t},ask:{mintInfo:s}}=(0,n.useSelector)((e=>e)),r=Te(t.address),o=Te(s.address),{poolData:l}=e[0]||{},{poolData:d}=e[e.length-1]||{},u=(e,t)=>{try{return i.account.isAddress(e)&&t?We(e,t):BigInt(0)}catch(s){return BigInt(0)}},p=(0,a.useMemo)((()=>{if(!t.decimals)return 0;const e=u(t.address,l);return Number(i.utils.undecimalize(e,t.decimals))}),[t,l]),m=(0,a.useMemo)((()=>{if(!s.decimals)return 0;const e=u(s.address,d);return Number(i.utils.undecimalize(e,s.decimals))}),[s,d]),f=!p||!m;return(0,h.jsx)(c.Card,{bordered:!1,className:f?"disabled-swap-pool-info-card":void 0,children:(0,h.jsxs)(c.Row,{gutter:[16,16],wrap:!1,children:[(0,h.jsx)(c.Col,{span:11,children:(0,h.jsx)(it,{mintAddress:(null===t||void 0===t?void 0:t.address)||"",tvl:p,price:p*r.price})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(c.Divider,{type:"vertical",style:{height:"100%"}})}),(0,h.jsx)(c.Col,{span:11,children:(0,h.jsx)(it,{mintAddress:(null===s||void 0===s?void 0:s.address)||"",tvl:m,price:m*o.price})})]})})};var dt=s(33920);const ct={mainnet:"worm2ZoG2kUd4vFXhvjh93UUH596ayRfgQ2MgjNMTth",testnet:"Brdguy7BmNB4qwEbcqqMbyV5CyJd2sxQNUn6NEpMSsUb",devnet:"3u8hJUVTA4jH1wYAyUur7FFZVQ8H635K3tSHHF4ssjQ5"},ut={mainnet:"wormDTUJ6AWPNvk59vGQbDvGJmqbDTdgWgAqcLBCgUb",testnet:"A4Us8EhCC76XdGAN17L4KpRNEK423nMivVHZzZqFqqBg",devnet:"DZnkkTmCiFWfYTfT41X3Rd1kDgozqzxWaHqsw6W4x2oe"},pt=()=>r.storage.get("network")||"mainnet",mt=async e=>{const t=(()=>{const e=pt();return{chainId:dt.rQA,tokenBridgeAddress:ut[e],bridgeAddress:ct[e]}})();return(0,dt._bG)(window.sentre.splt.connection,t.tokenBridgeAddress,e)},ht="#F9575E",ft=()=>{const e=(0,a.lazy)((()=>s.e("webpack_container_remote_frame_sen_assets_bootstrap").then(s.t.bind(s,31662,23)).then((e=>({default:e.FrameWormhole})))));return(0,h.jsx)(a.Suspense,{fallback:"Loading...",children:(0,h.jsx)(e,{})})},gt=()=>{const[e,t]=(0,a.useState)(!1),{bid:{mintInfo:s}}=(0,n.useSelector)((e=>e)),{address:o}=s||{};return(0,a.useEffect)((()=>{(async()=>{if(!i.account.isAddress(o))return t(!1);const e=await mt(o);t(e)})()}),[o]),e?(0,h.jsx)(c.Popover,{overlayInnerStyle:{background:"transparent",width:375,boxShadow:"none"},trigger:"click",content:(0,h.jsx)(ft,{}),children:(0,h.jsx)(c.Tag,{style:{margin:0,borderRadius:4,color:r.util.randomColor(ht),cursor:"pointer"},color:r.util.randomColor(ht,.2),children:"Wormhole Bridge"})}):null};const xt=s.p+"static/media/sen.f2d012c907167ba613b035621b6423cb.svg",yt=e=>{let{title:t="Powered by",spacing:s=4,iconSize:n=20}=e;return(0,h.jsxs)(c.Space,{size:s,style:{cursor:"pointer"},children:[(0,h.jsx)(c.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:t}),(0,h.jsx)(c.Tooltip,{title:"Sentre Protocol",children:(0,h.jsx)(c.Avatar,{src:xt,size:n})})]})},jt=e=>{let{label:t,value:s,onClick:n,active:r=!1}=e;return(0,h.jsx)(c.Typography.Text,{style:{cursor:"pointer",color:r?"#F9575E":"inherit"},onClick:()=>n(s),children:t})},wt=e=>{let{value:t,onChange:s}=e;return(0,h.jsxs)(c.Row,{gutter:[8,8],children:[(0,h.jsx)(c.Col,{span:24,children:(0,h.jsxs)(c.Row,{gutter:[8,8],wrap:!1,children:[(0,h.jsx)(c.Col,{flex:"auto",children:(0,h.jsx)(c.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Slippage Tolerance"})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(c.Tooltip,{placement:"right",title:(0,h.jsxs)("span",{children:["Your transaction will be canceled if the confirmed price breaks the limited range of"," ",(0,h.jsx)("strong",{style:{color:"#f9575e"},children:100*t+"%."})]}),children:(0,h.jsx)(c.Button,{type:"text",shape:"circle",size:"small",icon:(0,h.jsx)(m.Z,{name:"information-circle-outline"})})})})]})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(c.Row,{gutter:[8,8],wrap:!1,justify:"space-between",children:[.001,.005,.01,.05,1].map(((e,n)=>(0,h.jsx)(c.Col,{children:(0,h.jsx)(jt,{label:1===e?"Freely":100*e+"%",value:e,onClick:s,active:e===t})},n)))})})]})},vt=e=>{let{value:t,onChange:s}=e;return(0,h.jsxs)(c.Row,{gutter:[8,8],children:[(0,h.jsx)(c.Col,{span:24,children:(0,h.jsxs)(c.Row,{gutter:[8,8],wrap:!1,children:[(0,h.jsx)(c.Col,{flex:"auto",children:(0,h.jsx)(c.Typography.Text,{children:"Advanced Mode"})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(c.Switch,{size:"small",checked:t,onChange:s})})]})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsxs)(c.Typography.Paragraph,{className:"caption",children:[(0,h.jsx)(m.Z,{name:"warning-outline"})," This advanced mode will disable the automatic protection that often results in bad rates and lost funds. Only use this mode if you know what you are doing."]})})]})},bt="settings",Ct=(0,ie.createAsyncThunk)("settings/updateSettings",(async e=>({...e}))),At=(0,ie.createSlice)({name:bt,initialState:{slippage:.01,advanced:!1,enhancement:!1},reducers:{},extraReducers:e=>{e.addCase(Ct.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,St=e=>{let{value:t,onChange:s}=e;return(0,h.jsxs)(c.Row,{gutter:[8,8],children:[(0,h.jsx)(c.Col,{span:24,children:(0,h.jsxs)(c.Row,{gutter:[8,8],wrap:!1,children:[(0,h.jsx)(c.Col,{flex:"auto",children:(0,h.jsx)(c.Typography.Text,{children:"Enhancement UI"})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(c.Switch,{size:"small",checked:t,onChange:s})})]})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(c.Typography.Paragraph,{className:"caption",children:"Take advantage of all the familiar tools."})})]})},kt=()=>{const e=(0,n.useDispatch)(),{slippage:t,advanced:s,enhancement:r}=(0,n.useSelector)((e=>e.settings));return(0,h.jsxs)(c.Row,{gutter:[4,4],justify:"end",align:"middle",wrap:!1,children:[(0,h.jsx)(c.Col,{children:(0,h.jsx)(yt,{})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(c.Divider,{type:"vertical",style:{padding:0}})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(c.Popover,{placement:"bottomRight",overlayInnerStyle:{width:300},content:(0,h.jsxs)(c.Row,{gutter:[8,8],children:[(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(c.Typography.Title,{level:5,children:"Settings"})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(wt,{value:t,onChange:t=>e(Ct({slippage:t}))})}),(0,h.jsx)(c.Divider,{style:{margin:0}}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(vt,{value:s,onChange:t=>e(Ct({advanced:t}))})}),(0,h.jsx)(c.Divider,{style:{margin:0}}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(St,{value:r,onChange:t=>e(Ct({enhancement:t}))})})]}),trigger:"click",children:(0,h.jsx)(c.Button,{type:"text",shape:"circle",size:"small",icon:(0,h.jsx)(m.Z,{name:"settings-outline"})})})})]})};let Tt;const It=(0,a.forwardRef)(((e,t)=>{var s;let{max:n,onValue:r=(()=>{}),onChange:o=(()=>{}),...i}=e;const[l,d]=(0,a.useState)(""),[u,p]=(0,a.useState)(null),f=(0,a.useRef)(t),g=(0,a.useCallback)((e=>{const t=e=>{Tt&&(clearTimeout(Tt),Tt=void 0),d(e),Tt=setTimeout((()=>d("")),500)};return/^\d*(\.\d*)?$/.test(e)?n&&parseFloat(e)>parseFloat(n.toString())?t("Not enough balance"):r(e):t("Invalid character")}),[n,r]);return null!==u&&(null===f||void 0===f||null===(s=f.current)||void 0===s||s.setSelectionRange(u,u)),(0,h.jsx)(c.Tooltip,{title:(0,h.jsxs)(c.Space,{children:[(0,h.jsx)(m.Z,{name:"warning"}),l]}),visible:!!l,children:(0,h.jsx)(c.Input,{...i,onChange:e=>{o(e),p(e.target.selectionStart),g(e.target.value||"")},ref:f})})})),Mt={accountAddress:"",poolAddresses:[]},Dt=e=>{const{wallet:t}=(0,r.useWallet)(),{tokenProvider:s}=(0,r.useMint)(),{pools:n}=(0,r.usePool)(),[o,l]=(0,a.useState)(Mt),d=(0,a.useCallback)((async()=>{if(!i.account.isAddress(e)||!Object.keys(n).length)return l(Mt);const r=await s.findByAddress(e);if(!r)return l(Mt);const{splt:a}=window.sentre,o=await a.deriveAssociatedAddress(t.address,e),d=Object.keys(n).filter((t=>{const{mint_a:s,mint_b:r}=n[t];return[s,r].includes(e)}));l({accountAddress:o,mintInfo:r,poolAddresses:d})}),[e,n,s,t.address]);return(0,a.useEffect)((()=>{d()}),[d]),o},Rt=()=>{var e;const t=(0,n.useDispatch)(),{wallet:{address:s}}=(0,r.useWallet)(),{pools:l}=(0,r.usePool)(),{getDecimals:d}=(0,r.useMint)(),{ui:{theme:u}}=(0,r.useUI)(),{ask:{amount:p,accountAddress:m,mintInfo:f,poolAddresses:g}}=(0,n.useSelector)((e=>e)),{state:x}=(0,o.useLocation)(),{balance:y}=be(m),j=Dt(Ee.swap.askDefault),v=null===x||void 0===x?void 0:x.poolAddress;(0,a.useEffect)((()=>{i.account.isAddress(m)||i.account.isAddress(v)||(t(pe({loadingSenswap:!0})),t(qe(j)))}),[m,t,v,j]);const b=(0,a.useMemo)((()=>({mintInfo:f,poolAddresses:g})),[f,g]),C=(0,a.useCallback)((e=>i.account.isAddress(e)?Object.keys(l).filter((t=>{const{mint_a:s,mint_b:n}=l[t];return[s,n].includes(e)})):[]),[l]),A={marginLeft:-7,padding:"3px 8px",borderRadius:8,cursor:"pointer",boxShadow:"dark"===u?"0px 4px 44px rgba(0, 0, 0, 0.42)":"0px 4px 40px rgba(33, 36, 51, 0.18)"};return(0,h.jsxs)(c.Row,{gutter:[0,0],children:[(0,h.jsx)(c.Col,{flex:"auto",children:(0,h.jsx)(_,{value:f.address,onChange:async e=>{const{splt:n}=window.sentre,r=C(e),a={mintInfo:{address:e,decimals:await d(e)},poolAddresses:r};if(t(pe({loadingSenswap:!0})),!i.account.isAddress(e))return t(qe({amount:"",prioritized:!0,...a}));const o=await n.deriveAssociatedAddress(s,e);return t(qe({amount:"",prioritized:!0,accountAddress:o,...a}))},style:A})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(It,{bordered:!1,style:{textAlign:"right",fontSize:24,maxWidth:150,padding:0},placeholder:"0",value:p,onValue:e=>{t(pe({loadingSenswap:!0})),t(qe({amount:e,prioritized:!0}))}})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsxs)(c.Space,{className:"caption",children:[(0,h.jsx)(c.Typography.Text,{type:"secondary",children:"Available:"}),(0,h.jsx)(c.Typography.Text,{type:"secondary",children:r.util.numeric(y).format("0,0.[00]")}),(0,h.jsx)(c.Typography.Text,{type:"secondary",children:(0,h.jsx)(w,{mintAddress:(null===(e=b.mintInfo)||void 0===e?void 0:e.address)||""})})]})})]})},{swap:{bidDefault:Bt}}=Ee;let Et;!function(e){e[e.FIFTY=50]="FIFTY",e[e.HUNDRED=100]="HUNDRED"}(Et||(Et={}));const Nt=()=>{var e;const t=(0,n.useDispatch)(),{wallet:{address:s,lamports:l}}=(0,r.useWallet)(),{pools:d}=(0,r.usePool)(),{getDecimals:u}=(0,r.useMint)(),{ui:{theme:p}}=(0,r.useUI)(),{bid:{amount:m,accountAddress:f,mintInfo:g,poolAddresses:x}}=(0,n.useSelector)((e=>e)),{amount:y}=be(f),j=Dt(Bt),{state:v}=(0,o.useLocation)(),b=null===v||void 0===v?void 0:v.poolAddress,{address:C,decimals:A}=g,[S,k]=(0,a.useState)(0);(0,a.useEffect)((()=>{i.account.isAddress(f)||i.account.isAddress(b)||(t(pe({loadingSenswap:!0})),t(Ke(j)))}),[f,t,b,j]);const T=(0,a.useMemo)((()=>({mintInfo:g,poolAddresses:x})),[g,x]),I=(0,a.useMemo)((()=>S===Et.HUNDRED?Et.HUNDRED:Et.FIFTY),[S]),M=(0,a.useMemo)((()=>{if(C!==i.DEFAULT_WSOL)return i.utils.undecimalize(y,A);const e=i.utils.decimalize(.01,A),t=l+y-e;return t<=y?i.utils.undecimalize(y,A):i.utils.undecimalize(t,A)}),[y,A,l,C]),D=(0,a.useCallback)((e=>(t(pe({loadingSenswap:!0})),t(Ke({amount:e,prioritized:!0})))),[t]),R=(0,a.useCallback)((e=>{if(!M)return;const t=Number(M);if(t<5/10**6)return D(M);return D(`${t*(e/100)}`)}),[M,D]),B=(0,a.useCallback)((()=>{const e=Number(M),t=Number(m);return k(e&&0!==e?e===t?Et.HUNDRED:e/2===t?Et.FIFTY:0:0)}),[m,M]),E=(0,a.useCallback)((e=>i.account.isAddress(e)?Object.keys(d).filter((t=>{const{mint_a:s,mint_b:n}=d[t];return[s,n].includes(e)})):[]),[d]);(0,a.useEffect)((()=>{B()}),[B]);const N={marginLeft:-7,padding:"3px 8px",borderRadius:8,cursor:"pointer",boxShadow:"dark"===p?"0px 4px 44px rgba(0, 0, 0, 0.42)":"0px 4px 40px rgba(33, 36, 51, 0.18)"};return(0,h.jsxs)(c.Row,{gutter:[0,0],align:"middle",children:[(0,h.jsx)(c.Col,{flex:"auto",children:(0,h.jsx)(_,{value:C,onChange:async e=>{const{splt:n}=window.sentre,r=E(e),a={mintInfo:{address:e,decimals:await u(e)},poolAddresses:r};if(t(pe({loadingSenswap:!0})),!i.account.isAddress(e))return t(Ke({amount:"",prioritized:!0,...a}));const o=await n.deriveAssociatedAddress(s,e);return t(Ke({amount:"",prioritized:!0,accountAddress:o,...a}))},style:N})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(It,{bordered:!1,style:{textAlign:"right",fontSize:24,maxWidth:150,padding:0},placeholder:"0",value:m,onValue:D})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsxs)(c.Row,{align:"middle",children:[(0,h.jsx)(c.Col,{flex:"auto",children:(0,h.jsxs)(c.Space,{className:"caption",children:[(0,h.jsx)(c.Typography.Text,{type:"secondary",children:"Available:"}),(0,h.jsx)(c.Typography.Text,{type:"secondary",style:{cursor:"pointer"},onClick:()=>D(M),children:r.util.numeric(M||0).format("0,0.[00]")}),(0,h.jsx)(c.Typography.Text,{type:"secondary",children:(0,h.jsx)(w,{mintAddress:(null===(e=T.mintInfo)||void 0===e?void 0:e.address)||""})})]})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(c.Radio.Group,{value:S,buttonStyle:"solid",children:(0,h.jsxs)(c.Space,{children:[(0,h.jsxs)(c.Space,{size:4,direction:"vertical",children:[(0,h.jsx)(c.Radio.Button,{className:"rate-btn",onClick:()=>R(Et.FIFTY),value:I}),(0,h.jsxs)(c.Typography.Text,{type:"secondary",className:"caption",children:[Et.FIFTY,"%"]})]}),(0,h.jsxs)(c.Space,{size:4,direction:"vertical",children:[(0,h.jsx)(c.Radio.Button,{className:"rate-btn",onClick:()=>R(Et.HUNDRED),value:Et.HUNDRED}),(0,h.jsxs)(c.Typography.Text,{type:"secondary",className:"caption",children:[Et.HUNDRED,"%"]})]})]})})})]})})]})},Pt=e=>{let{widget:t=!1}=e;const s=(0,n.useDispatch)(),{bid:r,ask:o}=(0,n.useSelector)((e=>e)),i=(0,a.useCallback)((async()=>{const{amount:e,priority:t,...n}=r,{amount:a,priority:i,...l}=o,d=t>i?e:a,c=t>i?qe:Ke;await s(pe({loadingSenswap:!0})),await s(Ke({...l,amount:"",reset:!0})),await s(qe({...n,amount:"",reset:!0})),await s(c({amount:d,prioritized:!0}))}),[s,o,r]),l=t?{padding:"16px 16px 40px"}:{padding:"6px 24px 16px"},d=t?{padding:"0 16px 16px"}:{padding:"0 24px 24px"},u=t?{margin:"0 -12px"}:{};return(0,h.jsxs)(c.Row,{gutter:[0,0],justify:"center",style:{...u},children:[(0,h.jsx)(c.Col,{span:24,style:{...l},className:"swap-bid",children:(0,h.jsx)(Nt,{})}),(0,h.jsx)(c.Col,{style:{top:-12},children:(0,h.jsx)(c.Button,{className:"btn-switch-type",size:"small",icon:(0,h.jsx)(m.Z,{name:"git-compare-outline"}),onClick:i})}),(0,h.jsx)(c.Col,{span:24,style:{...d},children:(0,h.jsx)(Rt,{})})]})},zt=()=>(0,h.jsxs)(c.Row,{gutter:0,children:[(0,h.jsx)(c.Col,{span:24,className:"swap-setting",children:(0,h.jsxs)(c.Row,{children:[(0,h.jsx)(c.Col,{flex:"auto",children:(0,h.jsx)(gt,{})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(kt,{})})]})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(Pt,{})})]}),_t=()=>{const{enhancement:e}=(0,n.useSelector)((e=>e.settings));return(0,h.jsxs)(c.Row,{gutter:[24,24],children:[(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(c.Card,{bordered:!1,className:"card-swap",bodyStyle:{padding:0},children:(0,h.jsx)(zt,{})})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(ot,{})}),e&&(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(lt,{})})]})},Lt={success:[20,224,65],pending:[212,177,6],error:[215,35,17],failed:[215,35,17]},Ft=e=>{let{tag:t}=e;const s=e=>{let s=Lt[t];return`rgba(${s[0]},  ${s[1]}, ${s[2]},${e||1})`};return(0,h.jsx)(c.Tag,{style:{margin:0,borderRadius:4,color:s(),textTransform:"capitalize"},color:s(.1),children:t})},Ot="0,00.[0000]a",Wt=[{title:"TIME",dataIndex:"time"},{title:"TRANSACTION",dataIndex:"transactionId",render:e=>(0,h.jsxs)(c.Space,{align:"baseline",children:[(0,h.jsx)(c.Typography.Text,{onClick:()=>window.open(r.util.explorer(e),"_blank"),style:{fontWeight:700,cursor:"pointer"},children:r.util.shortenAddress(e,3,"...")}),(0,h.jsx)(c.Button,{type:"text",size:"small",onClick:()=>window.open(r.util.explorer(e),"_blank"),icon:(0,h.jsx)(m.Z,{name:"open-outline"})})]})},{title:"BID",dataIndex:"bid",render:(e,t)=>t.from?(0,h.jsxs)(c.Space,{size:8,children:[(0,h.jsx)(g,{mintAddress:t.from}),r.util.numeric(t.amountFrom).format(Ot),(0,h.jsx)(w,{mintAddress:t.from})]}):"--"},{title:"ASK",dataIndex:"ask",render:(e,t)=>t.to?(0,h.jsxs)(c.Space,{size:8,children:[(0,h.jsx)(g,{mintAddress:t.to}),r.util.numeric(t.amountTo).format(Ot),(0,h.jsx)(w,{mintAddress:t.to})]}):"--"},{title:"STATUS",dataIndex:"status",width:100,render:(e,t)=>(0,h.jsx)(Ft,{tag:t.status})}];var Ut=s(86558);const Ht=class{constructor(){this.provider=void 0,this.set=async e=>{const t=new File([JSON.stringify(e)],"file",{type:"application/json"});return await this.provider.put([t])},this.get=async e=>r.DataLoader.load(`ipfs^${e}`,(async()=>{const t=await this.provider.get(e),s=(await(null===t||void 0===t?void 0:t.files())||[])[0],n=new FileReader;return new Promise(((e,t)=>{try{if(!s)throw new Error("Cannot read empty file");n.onload=()=>{var t;const s=null===(t=n.result)||void 0===t?void 0:t.toString();if(!s)throw new Error("Cannot read empty file");return e(JSON.parse(s))},n.readAsText(s)}catch(r){return t(r.message)}}))})),this.provider=new Ut.xk({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDIxNDNmRDMwMDU0MmUyMDA4ZEVCNUI5OTAzOTgyREQ4QmUxMGYxMzMiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTY1NjQ2MjI0ODYsIm5hbWUiOiJzZW4tc3dhcCJ9.l3hgMMpDuFMaDcDukoCB6NJ5b-9p0_nZnfbwnp3izG4",endpoint:new URL("https://api.web3.storage")})}},Jt=1e3;let Zt;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(Zt||(Zt={}));class Yt{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const t=new Yt,s=e*Jt;return t.setMilliSeconds(s),t}static fromYmd(e){const t=new Yt,s=p()(e,Zt.YMD).valueOf();return t.setMilliSeconds(s),t}static getListDate(e,t){const s=[];let n=Yt.fromYmd(e);const r=Yt.fromYmd(t);for(;n.ymd()<=r.ymd();)s.push(n.ymd()),n=n.addDay();return s}format(e){const t=new Date(this.milliSeconds);return p()(t).format(e)}subtractDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=p()(this.milliSeconds).subtract(e,"days").valueOf();return Yt.fromSeconds(t/Jt)}addDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=p()(this.milliSeconds).add(e,"days").valueOf();return Yt.fromSeconds(t/Jt)}seconds(){return(this.milliSeconds-this.milliSeconds%Jt)/Jt}ymd(){return Number(this.format(Zt.YMD))}static today(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt.YMD;return p()().format(e)}}var Gt=s(68532),Kt=s.n(Gt);class Vt{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class qt{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class Xt{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}const Qt=700;class $t{constructor(){this.conn=window.sentre.splt.connection}async fetchSignatures(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qt;s>Qt&&(s=Qt);const n={limit:s,before:t};return this.conn.getConfirmedSignaturesForAddress2(e,n)}async fetchConfirmTransaction(e){let t=[];const s=[];for(let r=0;r<=e.length/200;r++){const t=200*r,n=e.slice(t,t+200);s.push(this.conn.getParsedConfirmedTransactions(n))}const n=await Promise.all(s);for(const r of n)t=t.concat(r);return t}async fetchTransactions(e,t){const s=(new Date).getTime()/1e3;let{secondFrom:n,secondTo:r,lastSignature:a,limit:o}=t;n=Math.floor(n||0),r=Math.floor(r||s);const i=new d.PublicKey(e);let l=[],c=!1;for(;!c;){const e=await this.fetchSignatures(i,a,o);if(null===e||void 0===e||!e.length||c)break;for(const t of e){const e=t.blockTime;if(e&&!(e>r)){if(e<n){c=!0;break}a=t.signature,l.push(t.signature)}}if(o&&l.length>=o)break;if((null===e||void 0===e?void 0:e.length)<Qt)break}return await this.fetchConfirmTransaction(l)}}let es;!function(e){e.Transfer="transfer"}(es||(es={}));var ts=s(97429).Buffer;const{struct:ss}=s(70320),ns={key:"code",type:"u8"};let rs;!function(e){e.Route="SWAP"}(rs||(rs={}));const as={8:rs.Route};class os extends class{constructor(){this.parseAction=e=>""}async collect(e,t){const s=new $t;let n=[];const r=await s.fetchTransactions(e,t);for(const a of r){const e=this.parseTransLog(a);e&&n.push(e)}return n}parseTransLog(e){var t,s;const{blockTime:n,meta:r,transaction:a}=e;if(!n||!r)return;const{postTokenBalances:o,preTokenBalances:i,postBalances:l,preBalances:d}=r,{signatures:c,message:u}=a,p=(null===(t=r.innerInstructions)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.instructions)||[],m=u.instructions[0]||[],h=new Vt;h.signature=c[0],h.blockTime=n,h.time=Yt.fromSeconds(n).ymd(),h.programId=m.programId.toString();const f=this.parseAccountInfo(u.accountKeys,o||[],i||[],l,d);return this.isParsedInstruction(m)?(h.programTransfer=this.parseListActionTransfer([m],f),h):(h.actionTransfers=this.parseListActionTransfer(p,f),h.programInfo={programId:m.programId.toString(),data:m.data},h.actionType=this.parseAction(h),h)}isParsedInstruction(e){return void 0!==e.parsed}parseListActionTransfer(e,t){const s=[];for(const n of e){if(!this.isParsedInstruction(n))continue;const e=n.parsed||{};if(e.type===es.Transfer){const n=e.info,r=this.parseActionTransfer(n,t);r&&s.push(r)}}return s}parseActionTransfer(e,t){const{source:s,destination:n,amount:r,lamports:a}=e,o=r||a.toString();if(!o||!t.has(s)||!t.has(n))return;const i=new Xt;return i.source=t.get(s),i.destination=t.get(n),i.amount=o,i}parseAccountInfo(e,t,s,n,r){const a=new Map;for(const o of t){const{accountIndex:t,mint:s,uiTokenAmount:n}=o,r=new qt;r.address=e[t].pubkey.toString(),r.postBalance=n.amount,r.mint=s,r.decimals=n.decimals,a.set(r.address,r)}for(const o of s){const{accountIndex:t,uiTokenAmount:s}=o,n=e[t].pubkey.toString(),r=a.get(n)||new qt;r.preBalance=s.amount,a.set(r.address,r)}return e.forEach(((e,t)=>{const s=e.pubkey.toString();if(!i.account.isAssociatedAddress(s)){const e=a.get(s)||new qt;e.address=s,e.mint="11111111111111111111111111111111",e.postBalance=String(n[t]||0),e.preBalance=String(r[t]||0),e.decimals=9,a.set(e.address,e)}})),a}}{constructor(){super(...arguments),this.parseAction=e=>{var t;const s=null===(t=e.programInfo)||void 0===t?void 0:t.data;if(!s)return"";const n=Kt().decode(s),r=new ss([ns]).fromBuffer(ts.from(n));return as[r.code]||""}}}const{sol:{swapAddress:is},manifest:{appId:ls}}=Ee,ds=`translogs-ipfs:${r.net}`;class cs{constructor(e){this.programId=void 0,this.transLogService=new os,this.fetchTransLog=async(e,t)=>{const s=new Ht;let n=[];const r=await this.getPDB(),a=await r.getItem(ds);a&&(n=await s.get(a));const o=n[0],i=n[n.length-1];if(o&&i){const[s]=await Promise.all([this.transLogService.collect(this.programId,{secondFrom:o.blockTime,secondTo:t})]);n=n.filter((t=>t.blockTime>e)),n=[...s,...n]}else n=await this.transLogService.collect(this.programId,{secondFrom:e,secondTo:t});const l={};for(const u of n)u.actionType===rs.Route&&u.programId===is&&(l[u.signature]=u);const d=Object.values(l).sort(((e,t)=>t.blockTime-e.blockTime)),c=await s.set(d);return await r.setItem(ds,c),d},this.fetchHistory=async()=>{let e=new Yt;const t=(new Yt).subtractDay(30);return(await this.fetchTransLog(t.seconds(),e.seconds())).sort(((e,t)=>t.blockTime-e.blockTime))},this.programId=e}async getPDB(){var e;const t=await(null===(e=window.sentre.wallet)||void 0===e?void 0:e.getAddress());if(!t)throw new Error("Invalid wallet address");const s=(0,r.createPDB)(t,ls);if(!s)throw new Error("Can not create pdb");return s}}const us="history",ps=(0,ie.createAsyncThunk)("history/fetchHistorySwap",(async()=>{var e;const t=await(null===(e=window.sentre.wallet)||void 0===e?void 0:e.getAddress());if(!t)throw Error("Login first");const s=new cs(t),n=await s.fetchHistory();let r=[];for(const l of n){var a,o;const e={},t=l.actionTransfers,s=t[0],n=t[t.length-1];if(!s||!n)continue;const d=new Date(1e3*l.blockTime);e.time=p()(d).format("MMM DD, YYYY HH:mm"),e.amountFrom=s.destination?Number(i.utils.undecimalize(BigInt(s.amount),s.destination.decimals)):void 0,e.amountTo=null!==n&&void 0!==n&&n.destination?Number(i.utils.undecimalize(BigInt(n.amount),n.destination.decimals)):void 0,e.from=null===(a=s.destination)||void 0===a?void 0:a.mint,e.to=null===n||void 0===n||null===(o=n.destination)||void 0===o?void 0:o.mint,e.transactionId=l.signature,e.key=l.signature,e.status=s.destination&&null!==n&&void 0!==n&&n.destination?"success":"failed",r.push(e)}return{historySwap:r}})),ms=(0,ie.createSlice)({name:us,initialState:{historySwap:[]},reducers:{},extraReducers:e=>{e.addCase(ps.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,hs=()=>{const[e,t]=(0,a.useState)(5),[s,r]=(0,a.useState)(!1),{historySwap:o}=(0,n.useSelector)((e=>e.history)),i=(0,n.useDispatch)(),l=(0,a.useCallback)((async()=>{try{r(!0),await i(ps()).unwrap()}catch(e){return console.warn(e)}finally{r(!1)}}),[i]);(0,a.useEffect)((()=>{l()}),[l]);const d=(0,a.useMemo)((()=>e>5?{height:"auto"}:{height:462}),[e]);return(0,h.jsx)(c.Card,{bordered:!1,style:{...d},children:(0,h.jsxs)(c.Row,{gutter:[16,24],children:[(0,h.jsx)(c.Col,{flex:"auto",children:(0,h.jsx)(c.Typography.Title,{level:5,children:"Swap history"})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(c.Button,{onClick:()=>{l(),t(5)},children:"Refresh"})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsxs)(c.Row,{justify:"center",gutter:[16,9],children:[(0,h.jsx)(c.Col,{span:24,style:{minHeight:310},children:(0,h.jsx)(c.Table,{columns:Wt,dataSource:o.slice(0,e),loading:s,pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row",scroll:{x:800}})}),(0,h.jsx)(c.Col,{children:(0,h.jsx)(c.Button,{onClick:()=>t(e+5),type:"text",icon:(0,h.jsx)(m.Z,{name:"chevron-down-outline"}),disabled:e>=o.length,children:"View more"})})]})})]})})},{sol:{cluster:fs}}=Ee,gs=new d.Connection(r.rpc),xs=()=>{const{pools:e}=(0,r.usePool)(),{wallet:{address:t}}=(0,r.useWallet)(),s=(0,n.useDispatch)(),{state:u}=(0,o.useLocation)(),[p,m]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),x=Dt(p),y=Dt(f),j=null===u||void 0===u?void 0:u.poolAddress,{enhancement:w}=(0,n.useSelector)((e=>e.settings)),v=(0,a.useCallback)((()=>{if(!i.account.isAddress(j))return;const t=e[j];t&&(m(null===t||void 0===t?void 0:t.mint_a),g(null===t||void 0===t?void 0:t.mint_b))}),[j,e]);return(0,a.useEffect)((()=>{v()}),[v]),(0,a.useEffect)((()=>{i.account.isAddress(x.accountAddress)&&i.account.isAddress(y.accountAddress)&&(s(Ke(x)),s(qe(y)))}),[y,x,s]),(0,h.jsx)(l.JupiterProvider,{connection:gs,cluster:fs,userPublicKey:new d.PublicKey(t),children:(0,h.jsxs)(c.Row,{gutter:[24,24],style:{paddingBottom:12},justify:w?"start":"center",children:[(0,h.jsx)(c.Col,{lg:8,md:12,xs:24,children:(0,h.jsx)(_t,{})}),w&&(0,h.jsx)(c.Col,{lg:16,md:12,xs:24,children:(0,h.jsxs)(c.Row,{gutter:[24,24],children:[(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(re,{})}),(0,h.jsx)(c.Col,{span:24,children:(0,h.jsx)(hs,{})})]})})]})})};var ys=s(48744),js=s.n(ys),ws=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const vs={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof d.PublicKey||e instanceof js()||ws.isBuffer(e)}},bs=(0,ie.configureStore)({middleware:e=>e(vs),devTools:!1,reducer:{ask:Xe,bid:Ve,settings:At,route:he,history:ms}});var Cs=s(45597);const{manifest:{appId:As}}=Ee,Ss=()=>(0,h.jsx)(r.UIProvider,{appId:As,antd:!0,children:(0,h.jsx)(r.MintProvider,{children:(0,h.jsx)(r.PoolProvider,{children:(0,h.jsx)(r.AccountProvider,{children:(0,h.jsx)(r.WalletProvider,{children:(0,h.jsx)(n.Provider,{store:bs,children:(0,h.jsx)(xs,{})})})})})})})},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.d01acb85618aed04ffea.md"},70854:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel.f392e6e59d78d4991c6b.png"},27803:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.cee91cd1f01b3f9e6f58.png"},85468:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel2.1885f3af18f36ba650f8.png"},55555:()=>{},46601:()=>{},89214:()=>{},85568:()=>{},34845:()=>{},52361:()=>{},94616:()=>{},33370:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx-src_static_images_coingecko-logo_png.5d6ef8dc.chunk.js.map