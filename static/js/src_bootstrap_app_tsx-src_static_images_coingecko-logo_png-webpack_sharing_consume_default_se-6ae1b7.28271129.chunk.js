(globalThis.webpackChunksen_swap=globalThis.webpackChunksen_swap||[]).push([["src_bootstrap_app_tsx-src_static_images_coingecko-logo_png-webpack_sharing_consume_default_se-6ae1b7"],{98463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactComponent:()=>u,default:()=>p});var n,r,a,i,o,l=s(92950);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},d.apply(this,arguments)}function c(e,t){let{title:s,titleId:c,...u}=e;return l.createElement("svg",d({width:257,height:256,viewBox:"0 0 257 256",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},u),s?l.createElement("title",{id:c},s):null,n||(n=l.createElement("path",{d:"M0.622803 60C0.622803 26.8629 27.4857 0 60.6228 0H196.623C229.76 0 256.623 26.8629 256.623 60V196C256.623 229.137 229.76 256 196.623 256H60.6228C27.4857 256 0.622803 229.137 0.622803 196V60Z",fill:"url(#paint0_linear_1991_5334)"})),r||(r=l.createElement("path",{opacity:.5,d:"M173.411 88.5162C173.411 85.8961 170.825 53.5885 173.411 74.5451C175.067 72.6924 178.384 68.7581 180.726 68.7581C183.067 68.7581 189.414 66.9054 191.069 68.7581C192.725 70.6108 191.069 85.8961 191.069 88.5162L191.069 167.549C191.069 178.029 187.349 188.08 180.726 195.491C174.103 202.902 165.12 207.065 155.753 207.065C146.387 207.065 137.404 202.902 130.781 195.491C124.158 188.08 120.438 178.029 120.438 167.549L120.438 88.5162C120.438 83.2761 118.577 78.2505 115.266 74.5451C111.954 70.8398 107.463 68.7581 102.78 68.7581C98.0965 68.7581 93.6051 70.8398 90.2936 74.5451C86.9821 78.2505 85.1217 83.276 85.1217 88.5162L85.1217 177.428C85.1217 180.048 84.1915 182.561 82.5358 184.413C80.88 186.266 78.6343 187.307 76.2928 187.307C73.9512 187.307 71.7055 186.266 70.0497 184.413C68.394 182.561 67.4638 180.048 67.4638 177.428L67.4638 88.5162C67.4638 78.0359 71.1846 67.9848 77.8076 60.574C84.4306 53.1633 93.4133 49 102.78 49C112.146 49 121.129 53.1633 127.752 60.574C134.375 67.9848 138.096 78.0359 138.096 88.5162L138.096 167.549C138.096 172.789 139.956 177.814 143.267 181.52C146.579 185.225 151.07 187.307 155.753 187.307C160.437 187.307 164.928 185.225 168.239 181.52C171.551 177.814 173.411 172.789 173.411 167.549L173.411 88.5162Z",fill:"white"})),a||(a=l.createElement("path",{d:"M161.626 95.3311C159.955 97.1241 157.717 98.1163 155.394 98.0939C153.071 98.0714 150.849 97.0362 149.206 95.2112C147.563 93.3861 146.632 90.9172 146.611 88.3363C146.591 85.7554 147.484 83.2689 149.098 81.4124L175.677 51.8821C177.338 50.0367 179.591 49.0001 181.941 49.0001C184.29 49.0001 186.543 50.0367 188.204 51.8821L214.783 81.4124C216.397 83.2689 217.29 85.7554 217.27 88.3363C217.249 90.9172 216.318 93.3861 214.675 95.2112C213.032 97.0362 210.81 98.0714 208.487 98.0939C206.164 98.1163 203.927 97.1241 202.256 95.3311L181.941 72.76L161.626 95.3311Z",fill:"white"})),i||(i=l.createElement("path",{d:"M55.6986 160.846C54.0422 159.005 51.7959 157.971 49.4538 157.971C47.1116 157.971 44.8653 159.005 43.2089 160.846C41.553 162.687 40.6228 165.185 40.6228 167.788C40.6228 170.392 41.553 172.889 43.2089 174.731L69.7075 204.19C71.3639 206.031 73.6101 207.065 75.9523 207.065C78.2944 207.065 80.5407 206.031 82.1971 204.19L108.696 174.731C110.352 172.889 111.282 170.392 111.282 167.788C111.282 165.185 110.352 162.687 108.696 160.846C107.039 159.005 104.793 157.971 102.451 157.971C100.109 157.971 97.8624 159.005 96.206 160.846L75.9523 183.362L55.6986 160.846Z",fill:"white"})),o||(o=l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_1991_5334",x1:.999999,y1:-114739e-11,x2:257,y2:256,gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#3E8C6A"}),l.createElement("stop",{offset:1,stopColor:"#5C997E"})))))}const u=l.forwardRef(c),p=s.p+"static/media/logo.d86456fa078e55b87bfac60a8309fe54.svg"},45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return i.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return o.default}});var n=l(s(70854)),r=l(s(27803)),a=l(s(85468)),i=l(s(98463)),o=l(s(83272));function l(e){return e&&e.__esModule?e:{default:e}}const d=[n.default,r.default,a.default];t.h0=d},83232:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>rs,__esModule:()=>ss.X$,logo:()=>ss.jY,panels:()=>ss.h0,readme:()=>ss.ng});var n=s(55754),r=s(9746),a=s(92950),i=s(45055),o=s(95418),l=s(12636),d=s(71256),c=s(94751),u=s(4550),p=s.n(u),m=s(69716),h=s(1468),f=s(43738),g=s(45263);const x=()=>{const{bid:{mintInfo:e},ask:{mintInfo:t}}=(0,n.useSelector)((e=>e)),s=(null===e||void 0===e?void 0:e.address)||"",r=(null===t||void 0===t?void 0:t.address)||"";return(0,g.jsxs)(c.Space,{children:[(0,g.jsxs)(c.Avatar.Group,{children:[(0,g.jsx)(h.Z,{mintAddress:r}),(0,g.jsx)(h.Z,{mintAddress:s})]}),(0,g.jsxs)(c.Typography.Text,{children:[(0,g.jsx)(f.Z,{mintAddress:r})," / ",(0,g.jsx)(f.Z,{mintAddress:s})]})]})};var y=s(76907),w=s.n(y),v=s(21111),j=s.n(v);const b=e=>{let{chartData:t=[],labels:s=[],type:n="line",configs:i,disableAxe:o=!1,chartId:l="sen_chart"}=e;const{backgroundColor:d}=i||{},[c,u]=(0,a.useState)(!1),p=(0,a.useCallback)(((e,t,s)=>({labels:t,datasets:[{...i,data:e,backgroundColor:s}]})),[i]),m=(0,a.useRef)(null),h=(0,a.useCallback)((()=>{var e,t;if(!m||!d)return"#dadada";const s=null===m||void 0===m||null===(e=m.current)||void 0===e||null===(t=e.canvas)||void 0===t?void 0:t.getContext("2d"),r=null===s||void 0===s?void 0:s.createLinearGradient(0,0,0,180);null===r||void 0===r||r.addColorStop(0,d),null===r||void 0===r||r.addColorStop(1,`${d}00`);return"line"===n?r:d}),[d,n]);return(0,a.useEffect)((()=>{var e;const n=m.current,r=null===n||void 0===n||null===(e=n.data.datasets)||void 0===e?void 0:e.find((e=>{let{data:t}=e;return t})),a=j()(null===r||void 0===r?void 0:r.data,t);n&&!a&&(n.data=p(t,s,h()),null===n||void 0===n||n.update())}),[t,p,h,s]),(0,g.jsx)("canvas",{id:l,height:"180px",ref:e=>{if(!e)return;const t=e.getContext("2d");t&&!c&&(m.current=new(w())(t,{type:n,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!o}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!o,beginAtZero:!1,maxTicksLimit:8,callback:function(e,t,s){return r.util.numeric(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:(e,t)=>{const s=document.getElementById(l);s&&(s.style.cursor=t[0]?"pointer":"default")}}}}),u(!0))}})},C=()=>(0,g.jsx)(c.Row,{style:{height:170},align:"middle",justify:"center",children:(0,g.jsx)(c.Col,{children:(0,g.jsx)(c.Empty,{})})}),A=s.p+"static/media/coingecko-logo.f8569e1153553894f964.png",S=e=>{let{title:t="Powered by",spacing:s=4,iconSize:n=20}=e;return(0,g.jsxs)(c.Space,{size:s,style:{cursor:"pointer"},children:[(0,g.jsx)(c.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:t}),(0,g.jsx)(c.Tooltip,{title:"CoinGecko",children:(0,g.jsx)(c.Avatar,{src:A,size:n})})]})};var T=s(21995),k=s.n(T);new r.TokenProvider;const I=async(e,t)=>{try{const s=await k()({method:"get",url:`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&days=${t.days}&interval=${t.interval}`});return s.data.prices.map((e=>({time:e[0],val:e[1]})))}catch(s){return[]}};var D;!function(e){e.day="day",e.week="week",e.month="month",e.year="year"}(D||(D={}));const M={day:{amount:4,unit:"hours",format:"HH:00"},week:{amount:1,unit:"days",format:"MMM DD"},month:{amount:5,unit:"days",format:"MMM DD"},year:{amount:2,unit:"months",format:"MMM DD"}},B={day:{days:1,interval:"hourly"},week:{days:7,interval:"daily"},month:{days:31,interval:"daily"},year:{days:365,interval:"daily"}},R="#3E8C6A",N=0,E=14,_="TVL",z="transparent",P=()=>{var e,t,s;const[i,o]=(0,a.useState)(D.week),[l,d]=(0,a.useState)([]),u=(0,n.useSelector)((e=>e.bid)),h=(0,n.useSelector)((e=>e.ask)),{tokenProvider:f}=(0,r.useMint)(),y={borderColor:z,borderRadius:N,pointRadius:N,tooltip:_,pointHitRadius:E,pointHoverRadius:N,backgroundColor:R},w=(0,a.useCallback)((e=>{const t=[],{format:s,amount:n,unit:r}=M[i];let a=p()();for(const i of e.reverse()){const e=p()(i.time).format(s);if(e===a.format(s)){let o=e;e===p()().format(s)&&(o=p()().format("HH:mm")),a&&t.unshift({label:o,val:i.val}),a=a.subtract(n,r)}else"00:00"===e&&t.unshift({label:a.format("MMM DD"),val:i.val})}d(t)}),[i]),v=(0,a.useCallback)((e=>{const t=[],{format:s,amount:n,unit:r}=M[i];let a=p()();for(const i of e.reverse()){const e=p()(i.time).format(s);e!==a.format(s)||(a=a.subtract(n,r),t.unshift({label:e,val:i.val}))}d(t)}),[i]),j=(0,a.useCallback)((async()=>{var e,t,s,n;const r=await f.findByAddress((null===(e=u.mintInfo)||void 0===e?void 0:e.address)||""),a=await f.findByAddress((null===(t=h.mintInfo)||void 0===t?void 0:t.address)||""),o=null===r||void 0===r||null===(s=r.extensions)||void 0===s?void 0:s.coingeckoId,l=null===a||void 0===a||null===(n=a.extensions)||void 0===n?void 0:n.coingeckoId,c=u.accountAddress===h.accountAddress;if(!l||!o||c)return d([]);const p=B[i],[m,g]=await Promise.all([I(o,p),I(l,p)]),x=[];for(let i=m.length-1;i>=0;i--){const e=m[i],t=g[g.length-m.length+i];e&&t&&x.unshift({time:e.time,val:t.val/e.val})}return i===D.day?w(x):v(x)}),[h.accountAddress,null===(e=h.mintInfo)||void 0===e?void 0:e.address,u.accountAddress,null===(t=u.mintInfo)||void 0===t?void 0:t.address,i,v,w,f]);(0,a.useEffect)((()=>{j()}),[j]);const A=(null===(s=l[l.length-1])||void 0===s?void 0:s.val)||0,T=r.util.numeric(A).format(A>1?"0,0.[00]":"0,0.[00000000]");return(0,g.jsx)(c.Card,{bordered:!1,className:"card-swap",bodyStyle:{paddingTop:28},children:(0,g.jsxs)(c.Row,{gutter:[24,24],children:[(0,g.jsx)(c.Col,{span:24,children:(0,g.jsxs)(c.Row,{gutter:[20,20],children:[(0,g.jsx)(c.Col,{flex:"auto",children:(0,g.jsxs)(c.Space,{children:[(0,g.jsx)(x,{}),(0,g.jsx)(c.Popover,{content:(0,g.jsx)(S,{title:"Reference Market Price. Powered by"}),children:(0,g.jsx)(c.Button,{type:"text",icon:(0,g.jsx)(m.Z,{name:"information-circle-outline"})})})]})}),l&&!!l.length&&(0,g.jsx)(c.Col,{children:(0,g.jsxs)(c.Radio.Group,{defaultValue:D.week,onChange:e=>o(e.target.value),className:"chart-radio-btn",children:[(0,g.jsx)(c.Radio.Button,{value:D.day,children:"1D"}),(0,g.jsx)(c.Radio.Button,{value:D.week,children:"1W"}),(0,g.jsx)(c.Radio.Button,{value:D.month,children:"1M"}),(0,g.jsx)(c.Radio.Button,{value:D.year,children:"1Y"})]})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(c.Typography.Title,{level:2,children:A?T:""})})]})}),(0,g.jsx)(c.Col,{span:24,children:l&&l.length?(0,g.jsx)(b,{chartData:null===l||void 0===l?void 0:l.map((e=>e.val)),labels:null===l||void 0===l?void 0:l.map((e=>e.label)),configs:y}):(0,g.jsx)(C,{})})]})})};const L=s.p+"static/media/jupiter-logo.6553c3779ce16057aa846301783447a2.svg",Z=e=>{let{title:t="Powered by",spacing:s=4,iconSize:n=20}=e;return(0,g.jsxs)(c.Space,{size:s,style:{cursor:"pointer"},children:[(0,g.jsx)(c.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:t}),(0,g.jsx)(c.Tooltip,{title:"Jupiter Aggregator",children:(0,g.jsx)(c.Avatar,{src:L,size:n})})]})};var F=s(19289);let O;!function(e){e[e.SenSwap=0]="SenSwap",e[e.JupiterAggregator=1]="JupiterAggregator"}(O||(O={}));const W="route",J={platform:O.SenSwap,best:[],amount:BigInt(0),priceImpact:0,loadingJupSwap:!1,loadingSenswap:!1},U=(0,F.createAsyncThunk)("route/setLoadingJupiterRoute",(async e=>{let{loadingJupSwap:t}=e;return{loadingJupSwap:t}})),H=(0,F.createAsyncThunk)("route/loadingSenswap",(async e=>{let{loadingSenswap:t}=e;return{loadingSenswap:t}})),Y=(0,F.createAsyncThunk)("route/updateRoute",(async e=>e?{...e}:{})),G=(0,F.createSlice)({name:W,initialState:J,reducers:{},extraReducers:e=>{e.addCase(Y.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(U.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(H.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,K=()=>{const{bid:{mintInfo:e},route:{platform:t,best:s}}=(0,n.useSelector)((e=>e)),r=null===e||void 0===e?void 0:e.address,i=(0,a.useMemo)((()=>{if(!s.length||!o.account.isAddress(r))return[];let e=[r];for(const t of s){const{dstMintAddress:s}=t;o.account.isAddress(s)&&e.push(s)}return e}),[r,s]);return(0,g.jsxs)(c.Space,{children:[null===i||void 0===i?void 0:i.map(((e,t)=>(0,g.jsxs)(a.Fragment,{children:[(0,g.jsx)(h.Z,{mintAddress:e}),i.length>t+1&&(0,g.jsx)(m.Z,{name:"chevron-forward-outline"})]},t))),t===O.JupiterAggregator&&(0,g.jsxs)(a.Fragment,{children:[(0,g.jsx)(c.Divider,{type:"vertical",style:{margin:0}}),(0,g.jsx)(Z,{})]})]})},q=()=>{const[e,t]=(0,a.useState)(!1),{bid:{mintInfo:s,amount:i},ask:{mintInfo:o,amount:l}}=(0,n.useSelector)((e=>e)),d=(null===s||void 0===s?void 0:s.address)||"",u=(null===o||void 0===o?void 0:o.address)||"",p=r.util.numeric(Number(l)/Number(i)).format("0,0.[000000]"),h=r.util.numeric(Number(i)/Number(l)).format("0,0.[000000]");return(0,g.jsxs)(c.Space,{children:[(0,g.jsx)(c.Button,{type:"text",onClick:()=>t(!e),shape:"circle",icon:(0,g.jsx)(m.Z,{name:"swap-horizontal-outline"})}),(0,g.jsx)(c.Typography.Text,{children:e?h:p}),(0,g.jsxs)(c.Typography.Text,{children:[e?(0,g.jsx)(f.Z,{mintAddress:d}):(0,g.jsx)(f.Z,{mintAddress:u})," / ",e?(0,g.jsx)(f.Z,{mintAddress:u}):(0,g.jsx)(f.Z,{mintAddress:d})]})]})};let V;!function(e){e[e.goodSwap=.01]="goodSwap",e[e.acceptableSwap=.05]="acceptableSwap"}(V||(V={}));const X=e=>e<V.goodSwap?"#14E041":e>V.acceptableSwap?"#D72311":"#FA8C16",Q=e=>{const[t,s]=(0,a.useState)(void 0),{getDecimals:n}=(0,r.useMint)(),i=(0,a.useCallback)((async()=>{try{const t=await n(e);return s(t)}catch(t){return s(void 0)}}),[e,n]);return(0,a.useEffect)((()=>{i()}),[i]),t},$=(e,t,s)=>o.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(o.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},ee=e=>{const{wallet:{address:t,lamports:s}}=(0,r.useWallet)(),{accounts:n}=(0,r.useAccount)(),{amount:a,mint:i}=n[e]||{},l=Q(i)||0;return o.account.isAddress(t)&&o.account.isAddress(e)?e===t?$(o.DEFAULT_EMPTY_ADDRESS,s,9):$(i,a,l):$()},te=ee,se=()=>{const{route:{best:e,loadingJupSwap:t,loadingSenswap:s},bid:{amount:i,accountAddress:l,mintInfo:{address:d,decimals:c}},ask:{amount:u,mintInfo:{address:p}}}=(0,n.useSelector)((e=>e)),{wallet:{lamports:m}}=(0,r.useWallet)(),{amount:h}=te(l),f=(0,a.useMemo)((()=>{if(d!==o.DEFAULT_WSOL)return o.utils.undecimalize(h,c);const e=o.utils.decimalize(.01,c),t=m+h-e;return t<=h?o.utils.undecimalize(h,c):o.utils.undecimalize(t,c)}),[h,d,c,m]);return{disabled:!e.length||!Number(i)||!Number(u)||Number(i)>Number(f)||d===p,loading:t||s}},ne=e=>{let{label:t="",content:s="",loading:n=!1}=e;return(0,g.jsxs)(c.Row,{align:"middle",children:[(0,g.jsx)(c.Col,{flex:"auto",children:(0,g.jsx)(c.Typography.Text,{type:"secondary",children:t})}),(0,g.jsx)(c.Col,{children:n?(0,g.jsx)(c.Skeleton.Input,{style:{width:150},active:!0,size:"small"}):(0,g.jsx)("span",{children:s})})]})},re=()=>{const{route:{priceImpact:e},settings:{slippage:t}}=(0,n.useSelector)((e=>e)),{loading:s}=se();return(0,g.jsxs)(c.Row,{gutter:[12,12],children:[(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(ne,{label:"Price impact",content:(0,g.jsx)(c.Typography.Text,{style:{color:X(e)},children:r.util.numeric(Number(e)).format("0.[0000]%")}),loading:s})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(ne,{label:"Price",content:(0,g.jsx)(q,{}),loading:s})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(ne,{label:"Slippage Tolerance",content:r.util.numeric(t).format("0.[00]%"),loading:s})}),(0,g.jsx)(c.Col,{span:24,style:{minHeight:24},children:(0,g.jsx)(ne,{label:"Route",content:(0,g.jsx)(K,{}),loading:s})})]})};var ae=s(93253);const ie={address:"",icon:"",name:"TOKEN",price:0,priceChange:0,rank:0,symbol:"TOKEN",totalVolume:0},oe=e=>{const[t,s]=(0,a.useState)(ie),{tokenProvider:n}=(0,r.useMint)(),i=(0,a.useCallback)((async()=>{if(!e)return s(ie);try{var t;const a=await n.findByAddress(e),i=null===a||void 0===a||null===(t=a.extensions)||void 0===t?void 0:t.coingeckoId,o=await r.util.fetchCGK(i);return s(o)}catch(a){return s(ie)}}),[e,n]);return(0,a.useEffect)((()=>{i()}),[i]),t};const le={appId:"sen_swap",url:"https://descartesnetwork.github.io/sen-swap/index.js"},de={devnet:{cluster:"devnet",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF"},testnet:{cluster:"testnet",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",swapAddress:""},mainnet:{cluster:"mainnet-beta",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV"}},ce={devnet:{bidDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ"},testnet:{bidDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ"},mainnet:{bidDefault:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",askDefault:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M"}},ue={devnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"},testnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"},mainnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"}},pe={devnet:{assetsRoute:"/app/sen_assets"},testnet:{assetsRoute:"/app/sen_assets"},mainnet:{assetsRoute:"/app/sen_assets"}},me={manifest:{development:{...le},staging:{...le},production:{...le}}[r.env],sol:de[r.net],swap:ce[r.net],wormhole:ue[r.net],route:pe[r.net]},{manifest:{appId:he}}=me,fe="validated_swap_transaction",ge=e=>{let{txId:t=""}=e;const{bid:{amount:s,mintInfo:{address:i}}}=(0,n.useSelector)((e=>e)),{wallet:{address:o}}=(0,r.useWallet)(),{price:l}=oe(i);return(0,a.useEffect)((()=>{(async()=>{const e=(0,r.createPDB)(o,he);if(!t||!e)return;const n=await e.getItem(fe)||{txIds:[],amount:0};let a=Number(s)*l;const i=n.txIds;!t||null!==i&&void 0!==i&&i.includes(t)||i.push(t),n.amount&&(a+=n.amount);const d={txIds:i,amount:a};await e.setItem(fe,d)})()}),[s,l,t,o]),(0,g.jsx)(a.Fragment,{})},xe=BigInt(1e9),ye=o.Swap.oracle,we=(e,t)=>{if(!e)return BigInt(0);const{srcMintAddress:s,dstMintAddress:n,poolData:r}=t,{fee_ratio:a,tax_ratio:i}=r,o=je(s,r),l=je(n,r);if(!o||!l)return BigInt(0);const{askAmount:d}=ye.swap(e,o,l,a,i);return d},ve=(e,t)=>{if(!e)return BigInt(0);const{srcMintAddress:s,dstMintAddress:n,poolData:r}=t,{fee_ratio:a,tax_ratio:i}=r,o=je(s,r),l=je(n,r);if(!o||!l)return BigInt(0);return ye.inverseSwap(e,o,l,a,i)},je=(e,t)=>{const{mint_a:s,mint_b:n,reserve_a:r,reserve_b:a}=t;if(e===s)return r;if(e===n)return a;throw new Error("Cannot find reserves")},be=(e,t)=>{if(!t)return 0;let s=t,n=1;return e.forEach((e=>{const t=Number(o.utils.undecimalize(((e,t)=>{if(!e)return BigInt(0);const{srcMintAddress:s,dstMintAddress:n,poolData:r}=t,{fee_ratio:a,tax_ratio:i}=r,o=je(s,r),l=je(n,r);return o&&l?ye.slippage(e,o,l,a,i):BigInt(0)})(s,e),9));n*=1-t;const r=we(s,e);s=r})),1-n},Ce=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=[],a=new Map(e),i=e.get(t);return n>=3||(a.delete(t),null===i||void 0===i||i.forEach(((e,i)=>{const o=t,l=o===e.mint_a?e.mint_b:e.mint_a,d={srcMintAddress:o,dstMintAddress:l,poolData:{...e,address:i}};if(l===s)return r.push([d]);Ce(a,l,s,n+1).forEach((e=>r.push([d,...e])))}))),r},Ae=e=>{const{pools:t}=(0,r.usePool)(),[s,n]=(0,a.useState)(0),{getMintTotalValue:i}=(()=>{const{tokenProvider:e,getMint:t}=(0,r.useMint)(),{pools:s}=(0,r.usePool)(),n=(0,a.useCallback)((async(t,s)=>{try{var n;const a=await e.findByAddress(t),i=null===a||void 0===a||null===(n=a.extensions)||void 0===n?void 0:n.coingeckoId;if(!i)throw new Error("Cant not find coingeckoId");const l=await r.util.fetchCGK(i);return Number(o.utils.undecimalize(s,a.decimals))*l.price}catch(a){return 0}}),[e]),i=(0,a.useCallback)((async r=>{let{mintAddress:a,amount:l}=r;if(!l)return 0;if(await e.findByAddress(a))return n(a,l);const d=Object.values(s).find((e=>e.mint_lpt===a));if(!d)return 0;const{reserve_a:c,reserve_b:u,mint_a:p,mint_b:m}=d;if(c*u===BigInt(0))return 0;const{[a]:{supply:h}}=await t({address:a}),{deltaA:f,deltaB:g}=o.Swap.oracle.withdraw(l,h,c,u);return await i({mintAddress:p,amount:f})+await i({mintAddress:m,amount:g})}),[t,n,e,s]);return{getMintTotalValue:i}})(),l=(0,a.useCallback)((async e=>{const s=t[e];if(!s)return 0;const{reserve_a:n,reserve_b:r,mint_a:a,mint_b:o}=s;return await i({mintAddress:a,amount:n})+await i({mintAddress:o,amount:r})}),[i,t]),d=(0,a.useCallback)((async e=>{if(!e)return n(0);const t=await l(e);n(t)}),[l]);return(0,a.useEffect)((()=>{d(e)}),[d,e]),{tvl:s,getTvl:l}},Se=e=>{const[t,s]=(0,a.useState)({platform:O.SenSwap,best:[],amount:BigInt(0),priceImpact:0}),{bid:i,ask:l}=(0,n.useSelector)((e=>e)),{pools:d}=(0,r.usePool)(),{getTvl:c}=Ae(),u=(0,a.useCallback)((async()=>{const{poolAddresses:t,mintInfo:{address:n},amount:r,priority:a}=i,{poolAddresses:u,mintInfo:{address:p},amount:m,priority:h}=l;let f={platform:O.SenSwap,best:[],amount:BigInt(0),priceImpact:0};if(!Number(r)&&!Number(m)||!o.account.isAddress(n)||!o.account.isAddress(p)||!t.length||!u.length||n===p)return s(f);let g={};await Promise.all(Object.keys(d).map((async e=>{await c(e)<1e3||(g[e]=d[e])})));let x=Ce((e=>{const t=new Map;for(const s in e){const n=e[s];1===(null===n||void 0===n?void 0:n.state)&&[n.mint_a,n.mint_b].forEach((e=>{var r;t.has(e)||t.set(e,new Map),null===(r=t.get(e))||void 0===r||r.set(s,n)}))}return t})(g),n,p);return x.length?(o.account.isAddress(e)&&(x=x.filter((t=>1===t.length&&t[0].poolData.address===e))),f=h<a?((e,t)=>{const{amount:s,mintInfo:n}=t;let r={platform:O.SenSwap,best:[],amount:BigInt(0),priceImpact:0};e.forEach((e=>{let t=o.utils.decimalize(s,n.decimals);e.forEach((e=>{t=we(t,e)}));const a=r.amount;t>a&&(r={platform:O.SenSwap,best:e,amount:t,priceImpact:0})}));const a=o.utils.decimalize(s,n.decimals);return r.priceImpact=be(r.best,a),r})(x,i):((e,t)=>{let{amount:s,mintInfo:n}=t,r={platform:O.SenSwap,best:[],amount:BigInt(0),priceImpact:0};for(const a of e){const e=[...a].reverse();let t=o.utils.decimalize(s,n.decimals);for(const s of e)if(t=ve(t,s),t<=BigInt(0))break;if(t<=BigInt(0))continue;const i=r.amount;(t<i||!i)&&(r={platform:O.SenSwap,best:a,amount:t,priceImpact:0})}return r.priceImpact=be(r.best,r.amount),r})(x,l),s(f)):s(f)}),[l,i,e,c,d]);return(0,ae.Z)(u,500,[u]),t},Te=e=>{const t=Se(e),s=(()=>{const{route:{best:e},bid:{amount:t,mintInfo:{decimals:s}},ask:{amount:i,mintInfo:{decimals:l}},settings:{slippage:d}}=(0,n.useSelector)((e=>e)),{wallet:{address:c}}=(0,r.useWallet)(),u=(0,a.useCallback)((async()=>{const{swap:n,splt:r,wallet:a}=window.sentre;if(!a)throw new Error("Wallet is not connected");const u=await Promise.all(e.map((async e=>{let{srcMintAddress:t,dstMintAddress:s,poolData:{address:n}}=e;return{poolAddress:n,srcAddress:await r.deriveAssociatedAddress(c,t),dstAddress:await r.deriveAssociatedAddress(c,s)}}))),p=o.utils.decimalize(t,s),m=o.utils.decimalize(i,l)*(xe-o.utils.decimalize(d,9))/xe;return await n.route(p,m,u,a)}),[e,s,l,d,c,t,i]);return u})();return{bestRoute:t,swap:s}};const ke=e=>{let{loading:t,disabled:s,children:r,onSwap:o}=e;const{state:l}=(0,i.useLocation)(),d=(0,n.useDispatch)(),{swap:u,bestRoute:p}=Te(null===l||void 0===l?void 0:l.poolAddress),m=(0,a.useCallback)((async()=>{await d(Y({...p})),setTimeout((()=>{d(H({loadingSenswap:!1,loadingJupSwap:!0}))}),500)}),[p,d]);return(0,a.useEffect)((()=>{m()}),[m]),(0,g.jsx)(c.Button,{type:"primary",onClick:()=>o(u),loading:t,disabled:s,block:!0,children:r})},Ie=(0,F.createAsyncThunk)("bid/updateBidData",(async(e,t)=>{let{prioritized:s,reset:n,...r}=e,{getState:a}=t;const{bid:{priority:i},ask:{priority:o}}=a();Number(r.amount)<0&&(r.amount="");const l=n?0:s?o+1:i;return{...r,priority:l}})),De=(0,F.createSlice)({name:"bid",initialState:{amount:"",mintInfo:{address:"",decimals:0},accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:e=>{e.addCase(Ie.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Me=(0,F.createAsyncThunk)("ask/updateAskData",(async(e,t)=>{let{prioritized:s,reset:n,...r}=e,{getState:a}=t;const{bid:{priority:i},ask:{priority:o}}=a();Number(r.amount)<0&&(r.amount="");const l=n?0:s?i+1:o;return{...r,priority:l}})),Be=(0,F.createSlice)({name:"ask",initialState:{amount:"",mintInfo:{address:"",decimals:0},accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:e=>{e.addCase(Me.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer;const Re=class{constructor(e,t){this._wallet=void 0,this.publicKey=void 0,this._wallet=t,this.publicKey=o.account.fromAddress(e)||null}async sendTransaction(e,t,s){return e=await this.signTransaction(e),await t.sendRawTransaction(e.serializeMessage(),s)}async signTransaction(e){return await this._wallet.signTransaction(e)}async signAllTransactions(e){const t=[];for(const s of e){const e=await this.signTransaction(s);t.push(e)}return t}},Ne=new d.Connection(r.rpc),Ee={platform:O.JupiterAggregator,best:[],amount:BigInt(0),priceImpact:0};let _e;const ze=()=>{const e=(0,n.useDispatch)(),{bid:{mintInfo:{address:t,decimals:s},amount:i},ask:{mintInfo:{address:d}},settings:{slippage:c}}=(0,n.useSelector)((e=>e)),{wallet:{address:u}}=(0,r.useWallet)(),p=Number(i)*10**s,m=(0,a.useMemo)((()=>o.account.isAddress(t)?o.account.fromAddress(t):void 0),[t]),h=(0,a.useMemo)((()=>o.account.isAddress(d)?o.account.fromAddress(d):void 0),[d]),{exchange:f,routes:g,loading:x,refresh:y}=(0,l.useJupiter)({amount:p,inputMint:m,outputMint:h,slippage:100*c,debounceTime:250}),w=(0,a.useCallback)((async()=>{var e;const{sentre:{wallet:t}}=window;if(!t||!o.account.isAddress(u))throw new Error("Wallet is not connected");if(null===g||void 0===g||!g.length)throw new Error("No available route");const s=new Re(u,t),n=await f({wallet:s,routeInfo:g[0],onTransaction:async e=>(await Ne.confirmTransaction(e,"confirmed"),await Ne.getTransaction(e,{commitment:"confirmed"}))});if(n.error)throw new Error((null===(e=n.error)||void 0===e?void 0:e.message)||"Unknown Error");const{txid:r,outputAddress:a}=n;return{txId:r,dstAddress:a}}),[f,g,u]),v=(0,a.useMemo)((()=>{if(null===g||void 0===g||!g.length)return{...Ee};const{outAmount:e,priceImpactPct:t,marketInfos:s}=g[0],n=s.map((e=>{let{inputMint:t,outputMint:s}=e;return{poolData:{},srcMintAddress:t.toBase58(),dstMintAddress:s.toBase58()}}));return{platform:O.JupiterAggregator,amount:BigInt(e),priceImpact:t,best:n}}),[g]);return(0,a.useEffect)((()=>{e(U({loadingJupSwap:x}))}),[e,x]),(0,a.useEffect)((()=>{i&&Number(i)>0&&(_e&&clearTimeout(_e),_e=setTimeout((()=>{y()}),1e3))}),[i]),{swap:w,bestRoute:v}};const Pe=e=>{let{loading:t,disabled:s,children:r,onSwap:i}=e;const{swap:o,bestRoute:l}=ze(),d=(0,n.useDispatch)(),u=(0,a.useCallback)((()=>{setTimeout((()=>{d(Y({...l}))}),500)}),[l,d]);return(0,a.useEffect)((()=>{u()}),[u]),(0,g.jsx)(c.Button,{type:"primary",onClick:()=>i((()=>o().then((e=>({txId:e.txId,dst:e.dstAddress}))))),loading:t,disabled:s,block:!0,children:r})},Le=e=>{let{onCallback:t=(()=>{}),forceSwap:s=!1}=e;const i=(0,n.useDispatch)(),[l,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!1),{route:{priceImpact:h,amount:f,loadingSenswap:x,platform:y},bid:{mintInfo:{decimals:w},priority:v,amount:j},ask:{mintInfo:{decimals:b},priority:C},settings:{advanced:A}}=(0,n.useSelector)((e=>e)),{wrapAmount:S,wrapSol:T}=(()=>{const{bid:{amount:e,mintInfo:{address:t,decimals:s},accountAddress:r}}=(0,n.useSelector)((e=>e)),{amount:i}=te(r),l=(0,a.useMemo)((()=>{if(!Number(e)||t!==o.DEFAULT_WSOL)return BigInt(0);const n=o.utils.decimalize(e,s);return n<=i?BigInt(0):n-i}),[i,e,t,s]);return{wrapAmount:l,wrapSol:async()=>{const{swap:e,wallet:t}=window.sentre;if(!t)throw new Error("Wallet is not connected");if(l)return await e.wrapSol(l,t)}}})(),{disabled:k}=se(),I=async e=>{try{m(!0),S&&await T();const{txId:s}=await e();return window.notify({type:"success",description:"Swap successfully. Click to view details.",onClick:()=>window.open(r.util.explorer(s),"_blank")}),d(s),i(Ie({amount:""})),t()}catch(s){return window.notify({type:"error",description:s.message})}finally{return d(""),m(!1)}},D=(0,a.useCallback)((()=>{C<v&&i(Me({amount:o.utils.undecimalize(f,b)}))}),[b,C,f,v,i]);(0,ae.Z)(D,500,[D]);const M=(0,a.useCallback)((()=>{v<C&&i(Ie({amount:o.utils.undecimalize(f,w)}))}),[C,f,w,v,i]);(0,ae.Z)(M,500,[M]);const B=!A&&h>V.acceptableSwap&&!s,R=B?"Too High Price Impact":s?"Swap Anyway":"Swap",N=Number(f),E=(0,a.useCallback)((()=>{const e=!x&&!!Number(j)&&(!N||y===O.JupiterAggregator);u(e)}),[j,x,y,N]);return(0,ae.Z)(E,500,[E]),(0,g.jsxs)(a.Fragment,{children:[c?(0,g.jsx)(Pe,{onSwap:I,disabled:k||B,loading:p,children:R}):(0,g.jsx)(ke,{onSwap:I,disabled:k||B,loading:p,children:R}),(0,g.jsx)(ge,{txId:l})]})},Ze=e=>{var t,s,r,i;let{visible:o=!1,onCancel:l=(()=>{})}=e;const[d,u]=(0,a.useState)(!1),{route:{priceImpact:p},bid:x,ask:y}=(0,n.useSelector)((e=>e)),w=p>V.acceptableSwap,v=(0,a.useCallback)((()=>{l(!1),u(!1)}),[l]);return(0,g.jsx)(c.Modal,{onCancel:v,closeIcon:(0,g.jsx)(m.Z,{name:"close"}),footer:null,visible:o,forceRender:!0,children:(0,g.jsxs)(c.Row,{gutter:[16,24],children:[(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(c.Typography.Title,{level:4,children:" Confirm swaps"})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsxs)(c.Row,{align:"middle",justify:"space-between",children:[(0,g.jsx)(c.Col,{children:(0,g.jsxs)(c.Space,{direction:"vertical",children:[(0,g.jsx)(c.Typography.Text,{children:"From"}),(0,g.jsxs)(c.Space,{children:[(0,g.jsx)(h.Z,{mintAddress:null===(t=x.mintInfo)||void 0===t?void 0:t.address}),(0,g.jsx)(c.Typography.Text,{children:(0,g.jsx)(f.Z,{mintAddress:null===(s=x.mintInfo)||void 0===s?void 0:s.address})})]}),(0,g.jsx)(c.Typography.Title,{level:4,children:x.amount})]})}),(0,g.jsx)(c.Col,{children:(0,g.jsx)(m.Z,{name:"arrow-forward-outline",style:{fontSize:24}})}),(0,g.jsx)(c.Col,{children:(0,g.jsxs)(c.Space,{direction:"vertical",align:"end",children:[(0,g.jsx)(c.Typography.Text,{children:"To"}),(0,g.jsxs)(c.Space,{children:[(0,g.jsx)(h.Z,{mintAddress:null===(r=y.mintInfo)||void 0===r?void 0:r.address}),(0,g.jsx)(c.Typography.Text,{children:(0,g.jsx)(f.Z,{mintAddress:null===(i=y.mintInfo)||void 0===i?void 0:i.address})})]}),(0,g.jsx)(c.Typography.Title,{level:4,children:y.amount})]})})]})}),(0,g.jsx)(c.Col,{children:(0,g.jsx)(c.Card,{bordered:!1,className:"confirm-info",children:(0,g.jsx)(re,{})})}),w&&(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(c.Checkbox,{checked:d,onChange:()=>u(!d),children:"The price impact is currently high. Tick the checkbox to accept the swap."})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(Le,{onCallback:v,forceSwap:d})})]})})},Fe=()=>{const[e,t]=(0,a.useState)(!1),{disabled:s,loading:r}=se(),{enhancement:i}=(0,n.useSelector)((e=>e.settings));return(0,g.jsx)(c.Card,{bordered:!1,children:(0,g.jsxs)(c.Row,{gutter:[24,24],children:[(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(c.Typography.Title,{level:5,children:"Review & Swap"})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(re,{})}),i&&(0,g.jsx)(c.Col,{span:24})," ",(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(c.Button,{type:"primary",onClick:()=>t(!0),disabled:s,loading:r,block:!0,children:"Review & Swap"})}),(0,g.jsx)(Ze,{visible:e,onCancel:t})]})})},Oe=e=>{let{mintAddress:t,tvl:s="",price:n,format:a="0,0.[00]a"}=e;return(0,g.jsxs)(c.Space,{direction:"vertical",size:4,children:[(0,g.jsx)(h.Z,{mintAddress:t}),(0,g.jsxs)(c.Space,{children:[(0,g.jsx)(c.Typography.Text,{children:"TVL:"}),(0,g.jsx)(c.Typography.Title,{level:5,children:r.util.numeric(s).format(a)}),(0,g.jsx)(c.Typography.Title,{level:5,children:(0,g.jsx)(f.Z,{mintAddress:t})})]}),(0,g.jsxs)(c.Typography.Text,{className:"caption",type:"secondary",children:["~ $",r.util.numeric(n).format(a)]})]})},We=()=>{const{route:{best:e},bid:{mintInfo:t},ask:{mintInfo:s}}=(0,n.useSelector)((e=>e)),r=oe(t.address),i=oe(s.address),{poolData:l}=e[0]||{},{poolData:d}=e[e.length-1]||{},u=(e,t)=>{try{return o.account.isAddress(e)&&t?je(e,t):BigInt(0)}catch(s){return BigInt(0)}},p=(0,a.useMemo)((()=>{if(!t.decimals)return 0;const e=u(t.address,l);return Number(o.utils.undecimalize(e,t.decimals))}),[t,l]),m=(0,a.useMemo)((()=>{if(!s.decimals)return 0;const e=u(s.address,d);return Number(o.utils.undecimalize(e,s.decimals))}),[s,d]),h=!p||!m;return(0,g.jsx)(c.Card,{bordered:!1,className:h?"disabled-swap-pool-info-card":void 0,children:(0,g.jsxs)(c.Row,{gutter:[16,16],wrap:!1,children:[(0,g.jsx)(c.Col,{span:11,children:(0,g.jsx)(Oe,{mintAddress:(null===t||void 0===t?void 0:t.address)||"",tvl:p,price:p*r.price})}),(0,g.jsx)(c.Col,{children:(0,g.jsx)(c.Divider,{type:"vertical",style:{height:"100%"}})}),(0,g.jsx)(c.Col,{span:11,children:(0,g.jsx)(Oe,{mintAddress:(null===s||void 0===s?void 0:s.address)||"",tvl:m,price:m*i.price})})]})})};var Je=s(33920);const Ue={mainnet:"worm2ZoG2kUd4vFXhvjh93UUH596ayRfgQ2MgjNMTth",testnet:"Brdguy7BmNB4qwEbcqqMbyV5CyJd2sxQNUn6NEpMSsUb",devnet:"3u8hJUVTA4jH1wYAyUur7FFZVQ8H635K3tSHHF4ssjQ5"},He={mainnet:"wormDTUJ6AWPNvk59vGQbDvGJmqbDTdgWgAqcLBCgUb",testnet:"A4Us8EhCC76XdGAN17L4KpRNEK423nMivVHZzZqFqqBg",devnet:"DZnkkTmCiFWfYTfT41X3Rd1kDgozqzxWaHqsw6W4x2oe"},Ye=()=>r.storage.get("network")||"mainnet",Ge=async e=>{const t=(()=>{const e=Ye();return{chainId:Je.rQA,tokenBridgeAddress:He[e],bridgeAddress:Ue[e]}})();return(0,Je._bG)(window.sentre.splt.connection,t.tokenBridgeAddress,e)},Ke="#F9575E",qe=()=>{const e=(0,a.lazy)((()=>s.e("webpack_container_remote_frame_sen_assets_bootstrap").then(s.t.bind(s,31662,23)).then((e=>({default:e.FrameWormhole})))));return(0,g.jsx)(a.Suspense,{fallback:"Loading...",children:(0,g.jsx)(e,{})})},Ve=()=>{const[e,t]=(0,a.useState)(!1),{bid:{mintInfo:s}}=(0,n.useSelector)((e=>e)),{address:i}=s||{};return(0,a.useEffect)((()=>{(async()=>{if(!o.account.isAddress(i))return t(!1);const e=await Ge(i);t(e)})()}),[i]),e?(0,g.jsx)(c.Popover,{overlayInnerStyle:{background:"transparent",width:375,boxShadow:"none"},trigger:"click",content:(0,g.jsx)(qe,{}),children:(0,g.jsx)(c.Tag,{style:{margin:0,borderRadius:4,color:r.util.randomColor(Ke),cursor:"pointer"},color:r.util.randomColor(Ke,.2),children:"Wormhole Bridge"})}):null};const Xe=s.p+"static/media/sen.f2d012c907167ba613b035621b6423cb.svg",Qe=e=>{let{title:t="Powered by",spacing:s=4,iconSize:n=20}=e;return(0,g.jsxs)(c.Space,{size:s,style:{cursor:"pointer"},children:[(0,g.jsx)(c.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:t}),(0,g.jsx)(c.Tooltip,{title:"Sentre Protocol",children:(0,g.jsx)(c.Avatar,{src:Xe,size:n})})]})},$e=e=>{let{label:t,value:s,onClick:n,active:r=!1}=e;return(0,g.jsx)(c.Typography.Text,{style:{cursor:"pointer",color:r?"#F9575E":"inherit"},onClick:()=>n(s),children:t})},et=e=>{let{value:t,onChange:s}=e;return(0,g.jsxs)(c.Row,{gutter:[8,8],children:[(0,g.jsx)(c.Col,{span:24,children:(0,g.jsxs)(c.Row,{gutter:[8,8],wrap:!1,children:[(0,g.jsx)(c.Col,{flex:"auto",children:(0,g.jsx)(c.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Slippage Tolerance"})}),(0,g.jsx)(c.Col,{children:(0,g.jsx)(c.Tooltip,{placement:"right",title:(0,g.jsxs)("span",{children:["Your transaction will be canceled if the confirmed price breaks the limited range of"," ",(0,g.jsx)("strong",{style:{color:"#f9575e"},children:100*t+"%."})]}),children:(0,g.jsx)(c.Button,{type:"text",shape:"circle",size:"small",icon:(0,g.jsx)(m.Z,{name:"information-circle-outline"})})})})]})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(c.Row,{gutter:[8,8],wrap:!1,justify:"space-between",children:[.001,.005,.01,.05,1].map(((e,n)=>(0,g.jsx)(c.Col,{children:(0,g.jsx)($e,{label:1===e?"Freely":100*e+"%",value:e,onClick:s,active:e===t})},n)))})})]})},tt=e=>{let{value:t,onChange:s}=e;return(0,g.jsxs)(c.Row,{gutter:[8,8],children:[(0,g.jsx)(c.Col,{span:24,children:(0,g.jsxs)(c.Row,{gutter:[8,8],wrap:!1,children:[(0,g.jsx)(c.Col,{flex:"auto",children:(0,g.jsx)(c.Typography.Text,{children:"Advanced Mode"})}),(0,g.jsx)(c.Col,{children:(0,g.jsx)(c.Switch,{size:"small",checked:t,onChange:s})})]})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsxs)(c.Typography.Paragraph,{className:"caption",children:[(0,g.jsx)(m.Z,{name:"warning-outline"})," This advanced mode will disable the automatic protection that often results in bad rates and lost funds. Only use this mode if you know what you are doing."]})})]})},st="settings",nt=(0,F.createAsyncThunk)("settings/updateSettings",(async e=>({...e}))),rt=(0,F.createSlice)({name:st,initialState:{slippage:.01,advanced:!1,enhancement:!1},reducers:{},extraReducers:e=>{e.addCase(nt.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,at=e=>{let{value:t,onChange:s}=e;return(0,g.jsxs)(c.Row,{gutter:[8,8],children:[(0,g.jsx)(c.Col,{span:24,children:(0,g.jsxs)(c.Row,{gutter:[8,8],wrap:!1,children:[(0,g.jsx)(c.Col,{flex:"auto",children:(0,g.jsx)(c.Typography.Text,{children:"Enhancement UI"})}),(0,g.jsx)(c.Col,{children:(0,g.jsx)(c.Switch,{size:"small",checked:t,onChange:s})})]})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(c.Typography.Paragraph,{className:"caption",children:"Take advantage of all the familiar tools."})})]})},it=()=>{const e=(0,n.useDispatch)(),{slippage:t,advanced:s,enhancement:r}=(0,n.useSelector)((e=>e.settings));return(0,g.jsxs)(c.Row,{gutter:[4,4],justify:"end",align:"middle",wrap:!1,children:[(0,g.jsx)(c.Col,{children:(0,g.jsx)(Qe,{})}),(0,g.jsx)(c.Col,{children:(0,g.jsx)(c.Divider,{type:"vertical",style:{padding:0}})}),(0,g.jsx)(c.Col,{children:(0,g.jsx)(c.Popover,{placement:"bottomRight",overlayInnerStyle:{width:300},content:(0,g.jsxs)(c.Row,{gutter:[8,8],children:[(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(c.Typography.Title,{level:5,children:"Settings"})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(et,{value:t,onChange:t=>e(nt({slippage:t}))})}),(0,g.jsx)(c.Divider,{style:{margin:0}}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(tt,{value:s,onChange:t=>e(nt({advanced:t}))})}),(0,g.jsx)(c.Divider,{style:{margin:0}}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(at,{value:r,onChange:t=>e(nt({enhancement:t}))})})]}),trigger:"click",children:(0,g.jsx)(c.Button,{type:"text",shape:"circle",size:"small",icon:(0,g.jsx)(m.Z,{name:"settings-outline"})})})})]})};var ot=s(71946);const lt={accountAddress:"",poolAddresses:[]},dt=e=>{const{wallet:t}=(0,r.useWallet)(),{tokenProvider:s}=(0,r.useMint)(),{pools:n}=(0,r.usePool)(),[i,l]=(0,a.useState)(lt),d=(0,a.useCallback)((async()=>{if(!o.account.isAddress(e)||!Object.keys(n).length)return l(lt);const r=await s.findByAddress(e);if(!r)return l(lt);const{splt:a}=window.sentre,i=await a.deriveAssociatedAddress(t.address,e),d=Object.keys(n).filter((t=>{const{mint_a:s,mint_b:r}=n[t];return[s,r].includes(e)}));l({accountAddress:i,mintInfo:r,poolAddresses:d})}),[e,n,s,t.address]);return(0,a.useEffect)((()=>{d()}),[d]),i},ct=()=>{var e;const t=(0,n.useDispatch)(),{wallet:{address:s}}=(0,r.useWallet)(),{pools:l}=(0,r.usePool)(),{getDecimals:d}=(0,r.useMint)(),{ui:{theme:u}}=(0,r.useUI)(),{ask:{amount:p,accountAddress:m,mintInfo:h,poolAddresses:x}}=(0,n.useSelector)((e=>e)),{state:y}=(0,i.useLocation)(),{balance:w}=te(m),v=dt(me.swap.askDefault),j=null===y||void 0===y?void 0:y.poolAddress;(0,a.useEffect)((()=>{o.account.isAddress(m)||o.account.isAddress(j)||(t(H({loadingSenswap:!0})),t(Me(v)))}),[m,t,j,v]);const b=(0,a.useMemo)((()=>({mintInfo:h,poolAddresses:x})),[h,x]),C=(0,a.useCallback)((e=>o.account.isAddress(e)?Object.keys(l).filter((t=>{const{mint_a:s,mint_b:n}=l[t];return[s,n].includes(e)})):[]),[l]),A={marginLeft:-7,padding:"3px 8px",borderRadius:8,cursor:"pointer",boxShadow:"dark"===u?"0px 4px 44px rgba(0, 0, 0, 0.42)":"0px 4px 40px rgba(33, 36, 51, 0.18)"};return(0,g.jsxs)(c.Row,{gutter:[0,0],children:[(0,g.jsx)(c.Col,{children:(0,g.jsx)(ot.Z,{value:h.address,onChange:async e=>{const{splt:n}=window.sentre,r=C(e),a={mintInfo:{address:e,decimals:await d(e)},poolAddresses:r};if(t(H({loadingSenswap:!0})),!o.account.isAddress(e))return t(Me({amount:"",prioritized:!0,...a}));const i=await n.deriveAssociatedAddress(s,e);return t(Me({amount:"",prioritized:!0,accountAddress:i,...a}))},style:A})}),(0,g.jsx)(c.Col,{flex:"1",children:(0,g.jsx)(c.InputNumber,{bordered:!1,className:"amount-input",placeholder:"0",value:p,onChange:e=>{t(H({loadingSenswap:!0})),t(Me({amount:e,prioritized:!0}))},controls:!1,min:"0"})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsxs)(c.Space,{className:"caption",children:[(0,g.jsx)(c.Typography.Text,{type:"secondary",children:"Available:"}),(0,g.jsx)(c.Typography.Text,{type:"secondary",children:r.util.numeric(w).format("0,0.[00]")}),(0,g.jsx)(c.Typography.Text,{type:"secondary",children:(0,g.jsx)(f.Z,{mintAddress:(null===(e=b.mintInfo)||void 0===e?void 0:e.address)||""})})]})})]})},{swap:{bidDefault:ut}}=me;let pt;!function(e){e[e.FIFTY=50]="FIFTY",e[e.HUNDRED=100]="HUNDRED"}(pt||(pt={}));const mt=()=>{var e;const t=(0,n.useDispatch)(),{wallet:{address:s,lamports:l}}=(0,r.useWallet)(),{pools:d}=(0,r.usePool)(),{getDecimals:u}=(0,r.useMint)(),{ui:{theme:p}}=(0,r.useUI)(),{bid:{amount:m,accountAddress:h,mintInfo:x,poolAddresses:y}}=(0,n.useSelector)((e=>e)),{amount:w}=te(h),v=dt(ut),{state:j}=(0,i.useLocation)(),b=null===j||void 0===j?void 0:j.poolAddress,{address:C,decimals:A}=x,[S,T]=(0,a.useState)(0);(0,a.useEffect)((()=>{o.account.isAddress(h)||o.account.isAddress(b)||(t(H({loadingSenswap:!0})),t(Ie(v)))}),[h,t,b,v]);const k=(0,a.useMemo)((()=>({mintInfo:x,poolAddresses:y})),[x,y]),I=(0,a.useMemo)((()=>S===pt.HUNDRED?pt.HUNDRED:pt.FIFTY),[S]),D=(0,a.useMemo)((()=>{if(C!==o.DEFAULT_WSOL)return o.utils.undecimalize(w,A);const e=o.utils.decimalize(.01,A),t=l+w-e;return t<=w?o.utils.undecimalize(w,A):o.utils.undecimalize(t,A)}),[w,A,l,C]),M=(0,a.useCallback)((e=>(t(H({loadingSenswap:!0})),t(Ie({amount:e,prioritized:!0})))),[t]),B=(0,a.useCallback)((e=>{if(!D)return;const t=Number(D);if(t<5/10**6)return M(D);return M(`${t*(e/100)}`)}),[D,M]),R=(0,a.useCallback)((()=>{const e=Number(D),t=Number(m);return T(e&&0!==e?e===t?pt.HUNDRED:e/2===t?pt.FIFTY:0:0)}),[m,D]),N=(0,a.useCallback)((e=>o.account.isAddress(e)?Object.keys(d).filter((t=>{const{mint_a:s,mint_b:n}=d[t];return[s,n].includes(e)})):[]),[d]);(0,a.useEffect)((()=>{R()}),[R]);const E={marginLeft:-7,padding:"3px 8px",borderRadius:8,cursor:"pointer",boxShadow:"dark"===p?"0px 4px 44px rgba(0, 0, 0, 0.42)":"0px 4px 40px rgba(33, 36, 51, 0.18)"};return(0,g.jsxs)(c.Row,{gutter:[0,0],align:"middle",children:[(0,g.jsx)(c.Col,{children:(0,g.jsx)(ot.Z,{value:C,onChange:async e=>{const{splt:n}=window.sentre,r=N(e),a={mintInfo:{address:e,decimals:await u(e)},poolAddresses:r};if(t(H({loadingSenswap:!0})),!o.account.isAddress(e))return t(Ie({amount:"",prioritized:!0,...a}));const i=await n.deriveAssociatedAddress(s,e);return t(Ie({amount:"",prioritized:!0,accountAddress:i,...a}))},style:E})}),(0,g.jsx)(c.Col,{flex:"1",children:(0,g.jsx)(c.InputNumber,{bordered:!1,className:"amount-input",placeholder:"0",value:m,onChange:M,controls:!1,min:"0"})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsxs)(c.Row,{align:"middle",children:[(0,g.jsx)(c.Col,{flex:"auto",children:(0,g.jsxs)(c.Space,{className:"caption",children:[(0,g.jsx)(c.Typography.Text,{type:"secondary",children:"Available:"}),(0,g.jsx)(c.Typography.Text,{type:"secondary",style:{cursor:"pointer"},onClick:()=>M(D),children:r.util.numeric(D||0).format("0,0.[00]")}),(0,g.jsx)(c.Typography.Text,{type:"secondary",children:(0,g.jsx)(f.Z,{mintAddress:(null===(e=k.mintInfo)||void 0===e?void 0:e.address)||""})})]})}),(0,g.jsx)(c.Col,{children:(0,g.jsx)(c.Radio.Group,{value:S,buttonStyle:"solid",children:(0,g.jsxs)(c.Space,{children:[(0,g.jsxs)(c.Space,{size:4,direction:"vertical",children:[(0,g.jsx)(c.Radio.Button,{className:"rate-btn",onClick:()=>B(pt.FIFTY),value:I}),(0,g.jsxs)(c.Typography.Text,{type:"secondary",className:"caption",children:[pt.FIFTY,"%"]})]}),(0,g.jsxs)(c.Space,{size:4,direction:"vertical",children:[(0,g.jsx)(c.Radio.Button,{className:"rate-btn",onClick:()=>B(pt.HUNDRED),value:pt.HUNDRED}),(0,g.jsxs)(c.Typography.Text,{type:"secondary",className:"caption",children:[pt.HUNDRED,"%"]})]})]})})})]})})]})},ht=e=>{let{widget:t=!1}=e;const s=(0,n.useDispatch)(),{bid:r,ask:i}=(0,n.useSelector)((e=>e)),o=(0,a.useCallback)((async()=>{const{amount:e,priority:t,...n}=r,{amount:a,priority:o,...l}=i,d=t>o?e:a,c=t>o?Me:Ie;await s(H({loadingSenswap:!0})),await s(Ie({...l,amount:"",reset:!0})),await s(Me({...n,amount:"",reset:!0})),await s(c({amount:d,prioritized:!0}))}),[s,i,r]),l=t?{padding:"16px 16px 40px"}:{padding:"6px 24px 16px"},d=t?{padding:"0 16px 16px"}:{padding:"0 24px 24px"},u=t?{margin:"0 -12px"}:{};return(0,g.jsxs)(c.Row,{gutter:[0,0],justify:"center",style:{...u},children:[(0,g.jsx)(c.Col,{span:24,style:{...l},className:"swap-bid",children:(0,g.jsx)(mt,{})}),(0,g.jsx)(c.Col,{style:{top:-12},children:(0,g.jsx)(c.Button,{className:"btn-switch-type",size:"small",icon:(0,g.jsx)(m.Z,{name:"git-compare-outline"}),onClick:o})}),(0,g.jsx)(c.Col,{span:24,style:{...d},children:(0,g.jsx)(ct,{})})]})},ft=()=>(0,g.jsxs)(c.Row,{gutter:0,children:[(0,g.jsx)(c.Col,{span:24,className:"swap-setting",children:(0,g.jsxs)(c.Row,{children:[(0,g.jsx)(c.Col,{flex:"auto",children:(0,g.jsx)(Ve,{})}),(0,g.jsx)(c.Col,{children:(0,g.jsx)(it,{})})]})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(ht,{})})]}),gt=()=>{const{enhancement:e}=(0,n.useSelector)((e=>e.settings));return(0,g.jsxs)(c.Row,{gutter:[24,24],children:[(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(c.Card,{bordered:!1,className:"card-swap",bodyStyle:{padding:0},children:(0,g.jsx)(ft,{})})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(Fe,{})}),e&&(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(We,{})})]})},xt={success:[20,224,65],pending:[212,177,6],error:[215,35,17],failed:[215,35,17]},yt=e=>{let{tag:t}=e;const s=e=>{let s=xt[t];return`rgba(${s[0]},  ${s[1]}, ${s[2]},${e||1})`};return(0,g.jsx)(c.Tag,{style:{margin:0,borderRadius:4,color:s(),textTransform:"capitalize"},color:s(.1),children:t})},wt="0,00.[0000]a",vt=[{title:"TIME",dataIndex:"time"},{title:"TRANSACTION",dataIndex:"transactionId",render:e=>(0,g.jsxs)(c.Space,{align:"baseline",children:[(0,g.jsx)(c.Typography.Text,{onClick:()=>window.open(r.util.explorer(e),"_blank"),style:{fontWeight:700,cursor:"pointer"},children:r.util.shortenAddress(e,3,"...")}),(0,g.jsx)(c.Button,{type:"text",size:"small",onClick:()=>window.open(r.util.explorer(e),"_blank"),icon:(0,g.jsx)(m.Z,{name:"open-outline"})})]})},{title:"BID",dataIndex:"bid",render:(e,t)=>t.from?(0,g.jsxs)(c.Space,{size:8,children:[(0,g.jsx)(h.Z,{mintAddress:t.from}),r.util.numeric(t.amountFrom).format(wt),(0,g.jsx)(f.Z,{mintAddress:t.from})]}):"--"},{title:"ASK",dataIndex:"ask",render:(e,t)=>t.to?(0,g.jsxs)(c.Space,{size:8,children:[(0,g.jsx)(h.Z,{mintAddress:t.to}),r.util.numeric(t.amountTo).format(wt),(0,g.jsx)(f.Z,{mintAddress:t.to})]}):"--"},{title:"STATUS",dataIndex:"status",width:100,render:(e,t)=>(0,g.jsx)(yt,{tag:t.status})}];var jt=s(86558);const bt=class{constructor(){this.provider=void 0,this.set=async e=>{const t=new File([JSON.stringify(e)],"file",{type:"application/json"});return await this.provider.put([t])},this.get=async e=>r.DataLoader.load(`ipfs^${e}`,(async()=>{const t=await this.provider.get(e),s=(await(null===t||void 0===t?void 0:t.files())||[])[0],n=new FileReader;return new Promise(((e,t)=>{try{if(!s)throw new Error("Cannot read empty file");n.onload=()=>{var t;const s=null===(t=n.result)||void 0===t?void 0:t.toString();if(!s)throw new Error("Cannot read empty file");return e(JSON.parse(s))},n.readAsText(s)}catch(r){return t(r.message)}}))})),this.provider=new jt.xk({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDIxNDNmRDMwMDU0MmUyMDA4ZEVCNUI5OTAzOTgyREQ4QmUxMGYxMzMiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NTY1NjQ2MjI0ODYsIm5hbWUiOiJzZW4tc3dhcCJ9.l3hgMMpDuFMaDcDukoCB6NJ5b-9p0_nZnfbwnp3izG4",endpoint:new URL("https://api.web3.storage")})}},Ct=1e3;let At;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(At||(At={}));class St{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const t=new St,s=e*Ct;return t.setMilliSeconds(s),t}static fromYmd(e){const t=new St,s=p()(e,At.YMD).valueOf();return t.setMilliSeconds(s),t}static getListDate(e,t){const s=[];let n=St.fromYmd(e);const r=St.fromYmd(t);for(;n.ymd()<=r.ymd();)s.push(n.ymd()),n=n.addDay();return s}format(e){const t=new Date(this.milliSeconds);return p()(t).format(e)}subtractDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=p()(this.milliSeconds).subtract(e,"days").valueOf();return St.fromSeconds(t/Ct)}addDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=p()(this.milliSeconds).add(e,"days").valueOf();return St.fromSeconds(t/Ct)}seconds(){return(this.milliSeconds-this.milliSeconds%Ct)/Ct}ymd(){return Number(this.format(At.YMD))}static today(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At.YMD;return p()().format(e)}}var Tt=s(68532),kt=s.n(Tt);class It{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class Dt{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class Mt{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}const Bt=700;class Rt{constructor(){this.conn=window.sentre.splt.connection}async fetchSignatures(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bt;s>Bt&&(s=Bt);const n={limit:s,before:t};return this.conn.getConfirmedSignaturesForAddress2(e,n)}async fetchConfirmTransaction(e){let t=[];const s=[];for(let r=0;r<=e.length/200;r++){const t=200*r,n=e.slice(t,t+200);s.push(this.conn.getParsedConfirmedTransactions(n))}const n=await Promise.all(s);for(const r of n)t=t.concat(r);return t}async fetchTransactions(e,t){const s=(new Date).getTime()/1e3;let{secondFrom:n,secondTo:r,lastSignature:a,limit:i}=t;n=Math.floor(n||0),r=Math.floor(r||s);const o=new d.PublicKey(e);let l=[],c=!1;for(;!c;){const e=await this.fetchSignatures(o,a,i);if(null===e||void 0===e||!e.length||c)break;for(const t of e){const e=t.blockTime;if(e&&!(e>r)){if(e<n){c=!0;break}a=t.signature,l.push(t.signature)}}if(i&&l.length>=i)break;if((null===e||void 0===e?void 0:e.length)<Bt)break}return await this.fetchConfirmTransaction(l)}}let Nt;!function(e){e.Transfer="transfer"}(Nt||(Nt={}));var Et=s(97429).Buffer;const{struct:_t}=s(70320),zt={key:"code",type:"u8"};let Pt;!function(e){e.Route="SWAP"}(Pt||(Pt={}));const Lt={8:Pt.Route};class Zt extends class{constructor(){this.parseAction=e=>""}async collect(e,t){const s=new Rt;let n=[];const r=await s.fetchTransactions(e,t);for(const a of r){const e=this.parseTransLog(a);e&&n.push(e)}return n}parseTransLog(e){var t,s;const{blockTime:n,meta:r,transaction:a}=e;if(!n||!r)return;const{postTokenBalances:i,preTokenBalances:o,postBalances:l,preBalances:d}=r,{signatures:c,message:u}=a,p=(null===(t=r.innerInstructions)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.instructions)||[],m=u.instructions[0]||[],h=new It;h.signature=c[0],h.blockTime=n,h.time=St.fromSeconds(n).ymd(),h.programId=m.programId.toString();const f=this.parseAccountInfo(u.accountKeys,i||[],o||[],l,d);return this.isParsedInstruction(m)?(h.programTransfer=this.parseListActionTransfer([m],f),h):(h.actionTransfers=this.parseListActionTransfer(p,f),h.programInfo={programId:m.programId.toString(),data:m.data},h.actionType=this.parseAction(h),h)}isParsedInstruction(e){return void 0!==e.parsed}parseListActionTransfer(e,t){const s=[];for(const n of e){if(!this.isParsedInstruction(n))continue;const e=n.parsed||{};if(e.type===Nt.Transfer){const n=e.info,r=this.parseActionTransfer(n,t);r&&s.push(r)}}return s}parseActionTransfer(e,t){const{source:s,destination:n,amount:r,lamports:a}=e,i=r||a.toString();if(!i||!t.has(s)||!t.has(n))return;const o=new Mt;return o.source=t.get(s),o.destination=t.get(n),o.amount=i,o}parseAccountInfo(e,t,s,n,r){const a=new Map;for(const i of t){const{accountIndex:t,mint:s,uiTokenAmount:n}=i,r=new Dt;r.address=e[t].pubkey.toString(),r.postBalance=n.amount,r.mint=s,r.decimals=n.decimals,a.set(r.address,r)}for(const i of s){const{accountIndex:t,uiTokenAmount:s}=i,n=e[t].pubkey.toString(),r=a.get(n)||new Dt;r.preBalance=s.amount,a.set(r.address,r)}return e.forEach(((e,t)=>{const s=e.pubkey.toString();if(!o.account.isAssociatedAddress(s)){const e=a.get(s)||new Dt;e.address=s,e.mint="11111111111111111111111111111111",e.postBalance=String(n[t]||0),e.preBalance=String(r[t]||0),e.decimals=9,a.set(e.address,e)}})),a}}{constructor(){super(...arguments),this.parseAction=e=>{var t;const s=null===(t=e.programInfo)||void 0===t?void 0:t.data;if(!s)return"";const n=kt().decode(s),r=new _t([zt]).fromBuffer(Et.from(n));return Lt[r.code]||""}}}const{sol:{swapAddress:Ft},manifest:{appId:Ot}}=me,Wt=`translogs-ipfs:${r.net}`;class Jt{constructor(e){this.programId=void 0,this.transLogService=new Zt,this.fetchTransLog=async(e,t)=>{const s=new bt;let n=[];const r=await this.getPDB(),a=await r.getItem(Wt);a&&(n=await s.get(a));const i=n[0],o=n[n.length-1];if(i&&o){const[s]=await Promise.all([this.transLogService.collect(this.programId,{secondFrom:i.blockTime,secondTo:t})]);n=n.filter((t=>t.blockTime>e)),n=[...s,...n]}else n=await this.transLogService.collect(this.programId,{secondFrom:e,secondTo:t});const l={};for(const u of n)u.actionType===Pt.Route&&u.programId===Ft&&(l[u.signature]=u);const d=Object.values(l).sort(((e,t)=>t.blockTime-e.blockTime)),c=await s.set(d);return await r.setItem(Wt,c),d},this.fetchHistory=async()=>{let e=new St;const t=(new St).subtractDay(30);return(await this.fetchTransLog(t.seconds(),e.seconds())).sort(((e,t)=>t.blockTime-e.blockTime))},this.programId=e}async getPDB(){var e;const t=await(null===(e=window.sentre.wallet)||void 0===e?void 0:e.getAddress());if(!t)throw new Error("Invalid wallet address");const s=(0,r.createPDB)(t,Ot);if(!s)throw new Error("Can not create pdb");return s}}const Ut="history",Ht=(0,F.createAsyncThunk)("history/fetchHistorySwap",(async()=>{var e;const t=await(null===(e=window.sentre.wallet)||void 0===e?void 0:e.getAddress());if(!t)throw Error("Login first");const s=new Jt(t),n=await s.fetchHistory();let r=[];for(const l of n){var a,i;const e={},t=l.actionTransfers,s=t[0],n=t[t.length-1];if(!s||!n)continue;const d=new Date(1e3*l.blockTime);e.time=p()(d).format("MMM DD, YYYY HH:mm"),e.amountFrom=s.destination?Number(o.utils.undecimalize(BigInt(s.amount),s.destination.decimals)):void 0,e.amountTo=null!==n&&void 0!==n&&n.destination?Number(o.utils.undecimalize(BigInt(n.amount),n.destination.decimals)):void 0,e.from=null===(a=s.destination)||void 0===a?void 0:a.mint,e.to=null===n||void 0===n||null===(i=n.destination)||void 0===i?void 0:i.mint,e.transactionId=l.signature,e.key=l.signature,e.status=s.destination&&null!==n&&void 0!==n&&n.destination?"success":"failed",r.push(e)}return{historySwap:r}})),Yt=(0,F.createSlice)({name:Ut,initialState:{historySwap:[]},reducers:{},extraReducers:e=>{e.addCase(Ht.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Gt=()=>{const[e,t]=(0,a.useState)(5),[s,r]=(0,a.useState)(!1),{historySwap:i}=(0,n.useSelector)((e=>e.history)),o=(0,n.useDispatch)(),l=(0,a.useCallback)((async()=>{try{r(!0),await o(Ht()).unwrap()}catch(e){return console.warn(e)}finally{r(!1)}}),[o]);(0,a.useEffect)((()=>{l()}),[l]);const d=(0,a.useMemo)((()=>e>5?{height:"auto"}:{height:462}),[e]);return(0,g.jsx)(c.Card,{bordered:!1,style:{...d},children:(0,g.jsxs)(c.Row,{gutter:[16,24],children:[(0,g.jsx)(c.Col,{flex:"auto",children:(0,g.jsx)(c.Typography.Title,{level:5,children:"Swap history"})}),(0,g.jsx)(c.Col,{children:(0,g.jsx)(c.Button,{onClick:()=>{l(),t(5)},children:"Refresh"})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsxs)(c.Row,{justify:"center",gutter:[16,9],children:[(0,g.jsx)(c.Col,{span:24,style:{minHeight:310},children:(0,g.jsx)(c.Table,{columns:vt,dataSource:i.slice(0,e),loading:s,pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row",scroll:{x:800}})}),(0,g.jsx)(c.Col,{children:(0,g.jsx)(c.Button,{onClick:()=>t(e+5),type:"text",icon:(0,g.jsx)(m.Z,{name:"chevron-down-outline"}),disabled:e>=i.length,children:"View more"})})]})})]})})},{sol:{cluster:Kt}}=me,qt=new d.Connection(r.rpc),Vt=()=>{const{pools:e}=(0,r.usePool)(),{wallet:{address:t}}=(0,r.useWallet)(),s=(0,n.useDispatch)(),{state:u}=(0,i.useLocation)(),[p,m]=(0,a.useState)(""),[h,f]=(0,a.useState)(""),x=dt(p),y=dt(h),w=null===u||void 0===u?void 0:u.poolAddress,{enhancement:v}=(0,n.useSelector)((e=>e.settings)),j=(0,a.useCallback)((()=>{if(!o.account.isAddress(w))return;const t=e[w];t&&(m(null===t||void 0===t?void 0:t.mint_a),f(null===t||void 0===t?void 0:t.mint_b))}),[w,e]);return(0,a.useEffect)((()=>{j()}),[j]),(0,a.useEffect)((()=>{o.account.isAddress(x.accountAddress)&&o.account.isAddress(y.accountAddress)&&(s(Ie(x)),s(Me(y)))}),[y,x,s]),(0,g.jsx)(l.JupiterProvider,{connection:qt,cluster:Kt,userPublicKey:new d.PublicKey(t),children:(0,g.jsxs)(c.Row,{gutter:[24,24],style:{paddingBottom:12},justify:v?"start":"center",children:[(0,g.jsx)(c.Col,{lg:8,md:12,xs:24,children:(0,g.jsx)(gt,{})}),v&&(0,g.jsx)(c.Col,{lg:16,md:12,xs:24,children:(0,g.jsxs)(c.Row,{gutter:[24,24],children:[(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(P,{})}),(0,g.jsx)(c.Col,{span:24,children:(0,g.jsx)(Gt,{})})]})})]})})};var Xt=s(48744),Qt=s.n(Xt),$t=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const es={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof d.PublicKey||e instanceof Qt()||$t.isBuffer(e)}},ts=(0,F.configureStore)({middleware:e=>e(es),devTools:!1,reducer:{ask:Be,bid:De,settings:rt,route:G,history:Yt}});var ss=s(45597);const{manifest:{appId:ns}}=me,rs=()=>(0,g.jsx)(r.UIProvider,{appId:ns,antd:!0,children:(0,g.jsx)(r.MintProvider,{children:(0,g.jsx)(r.PoolProvider,{children:(0,g.jsx)(r.AccountProvider,{children:(0,g.jsx)(r.WalletProvider,{children:(0,g.jsx)(n.Provider,{store:ts,children:(0,g.jsx)(Vt,{})})})})})})})},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.d01acb85618aed04ffea.md"},70854:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel.f392e6e59d78d4991c6b.png"},27803:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.cee91cd1f01b3f9e6f58.png"},85468:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel2.1885f3af18f36ba650f8.png"},55555:()=>{},46601:()=>{},89214:()=>{},85568:()=>{},34845:()=>{},52361:()=>{},94616:()=>{},33370:()=>{},55024:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx-src_static_images_coingecko-logo_png-webpack_sharing_consume_default_se-6ae1b7.28271129.chunk.js.map