(globalThis.webpackChunksen_swap=globalThis.webpackChunksen_swap||[]).push([[415],{84132:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>Qs,Widget:()=>Hs,widgetConfig:()=>Gs});var n=s(55754),a=s(49142),i=s(78589),r=s(92950),o=s(4550),l=s.n(o),d=s(76907),c=s.n(d),u=s(21111),h=s.n(u),p=s(95418),m=s(16200),f=s.n(m),g=s(63805);const y=(e,t=4,s="...")=>e.substring(0,t)+s+e.substring(e.length-t,e.length),w=e=>p.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${g.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${g.ef}`,v=e=>e&&Number.isFinite(Number(e))?f()(e):f()("0");var x=s(45263);const j=({chartData:e=[],labels:t=[],type:s="line",configs:n,disableAxe:a=!1,chartId:i="sen_chart"})=>{const{backgroundColor:o}=n||{},[l,d]=(0,r.useState)(!1),u=(0,r.useCallback)(((e,t,s)=>({labels:t,datasets:[{...n,data:e,backgroundColor:s}]})),[n]),p=(0,r.useRef)(null),m=(0,r.useCallback)((()=>{var e,t;if(!p||!o)return"#dadada";const n=null===p||void 0===p||null===(e=p.current)||void 0===e||null===(t=e.canvas)||void 0===t?void 0:t.getContext("2d"),a=null===n||void 0===n?void 0:n.createLinearGradient(0,0,0,180);null===a||void 0===a||a.addColorStop(0,o),null===a||void 0===a||a.addColorStop(1,`${o}00`);return"line"===s?a:o}),[o,s]);return(0,r.useEffect)((()=>{var s;const n=p.current,a=null===n||void 0===n||null===(s=n.data.datasets)||void 0===s?void 0:s.find((({data:e})=>e)),i=h()(null===a||void 0===a?void 0:a.data,e);n&&!i&&(n.data=u(e,t,m()),null===n||void 0===n||n.update())}),[e,u,m,t]),(0,x.jsx)("canvas",{id:i,height:"180px",ref:e=>{if(!e)return;const t=e.getContext("2d");t&&!l&&(p.current=new(c())(t,{type:s,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!a}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!a,beginAtZero:!1,maxTicksLimit:8,callback:function(e,t,s){return v(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:(e,t)=>{const s=document.getElementById(i);s&&(s.style.cursor=t[0]?"pointer":"default")}}}}),d(!0))}})};const b={"logo-telegram":s.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"},I=(0,r.forwardRef)((({name:e,className:t,...s},n)=>{const a=t?"anticon "+t:"anticon";return(0,x.jsx)("span",{className:a,...s,children:b[e]?(0,x.jsx)("ion-icon",{ref:n,src:b[e]}):(0,x.jsx)("ion-icon",{ref:n,name:e})})})),C=({icons:e=[],defaultIcon:t=(0,x.jsx)(I,{name:"help-outline"}),...s})=>(0,x.jsx)(i.Avatar.Group,{children:null===e||void 0===e?void 0:e.map(((e,n)=>(0,x.jsx)(i.Avatar,{src:e,style:{backgroundColor:"#2D3355",border:"none"},...s,children:t},n)))}),A=()=>(0,x.jsx)(i.Row,{style:{height:170},align:"middle",justify:"center",children:(0,x.jsx)(i.Col,{children:(0,x.jsx)(i.Empty,{})})});var k=s(11503),S=s(31633),T=s(19289);BigInt.prototype.toJSON=function(){return this.toString()};const R={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e}},D=()=>{const e=window.innerWidth;return e<576?"xs":e<768?"sm":e<992?"md":e<1200?"lg":e<1400?"xl":"xxl"},M="ui",B={theme:(()=>{const e=(new Date).getHours();return e>=6&&e<18?"light":"dark"})(),width:window.innerWidth,infix:D(),touchable:"ontouchstart"in window||navigator.maxTouchPoints>0,visibleActionCenter:!1},P=(0,T.createAsyncThunk)("ui/setTheme",(async e=>({theme:e}))),N=(0,T.createAsyncThunk)("ui/resize",(async()=>({width:window.innerWidth,infix:D()}))),E=(0,T.createAsyncThunk)("ui/setVisibleActionCenter",(async e=>({visibleActionCenter:e}))),z=(0,T.createSlice)({name:M,initialState:B,reducers:{},extraReducers:e=>{e.addCase(P.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(N.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(E.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,L="flags",O=(0,T.createAsyncThunk)("flags/setVisited",(async(e,{getState:t})=>{const{wallet:{address:s},flags:n}=t();if(!p.account.isAddress(s))throw new Error("Wallet is not connected yet");return{...n,visited:e}})),W=(0,T.createSlice)({name:L,initialState:{visited:!0},reducers:{},extraReducers:e=>{e.addCase(O.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer;var _=s(15454),U=s.n(_),F=s(32642),Z=s(97429).Buffer;class q{constructor(){this._ipfs=async()=>{try{return window.ipfs||(window.ipfs=await(0,F.Ue)()),window.ipfs}catch(t){return await(e=500,new Promise((t=>setTimeout(t,e)))),await this._ipfs()}var e},this.get=async e=>{if(!q.isCID(e))throw new Error("Invalid CID");const t=await this._ipfs(),s=await t.cat(e);let n="";for await(const a of s)n+=Z.from(a).toString();return JSON.parse(n)},this.set=async e=>{if(!e)throw new Error("Empty data");const t=JSON.stringify(e),s=await this._ipfs(),{path:n}=await s.add(t);return n}}}q.isCID=e=>{try{return!!e&&F.bf.multihash(e)}catch(t){return!1}};const K=q;class Y{constructor(e){if(this.dbName=void 0,this.driver=void 0,this.ipfs=void 0,this.createInstance=e=>U().createInstance({driver:this.driver,name:this.dbName,storeName:e}),this.dropInstance=async e=>{const t=this.createInstance(e);return await t.clear(),await U().dropInstance({name:this.dbName,storeName:e})},this.all=async()=>{let e={};const t=(await this.createInstance("sentre").getItem("appIds")||[]).flat().concat(["sentre"]);for(const s of t){e[s]={};const t=this.createInstance(s);await t.iterate(((t,n)=>{e[s][n]=t}))}return e},this.fetch=async e=>await this.ipfs.get(e),this.backup=async()=>{const e=await this.all();return await this.ipfs.set(e)},this.restore=async e=>{const t=await this.fetch(e);for(const s in t){const e=await this.createInstance(s);for(const n in t[s]){const a=t[s][n];await e.setItem(n,a)}}return t},!p.account.isAddress(e))throw new Error("Invalid address");this.dbName=e,this.driver=[U().WEBSQL,U().LOCALSTORAGE],this.ipfs=new K}}const Q=Y,{register:{senreg:G,extra:H}}=S.Z,V=(e,t)=>t&&Array.isArray(t)?t.filter((t=>e[t])):[],J="page",X={register:{},appIds:[],widgetIds:[]},$=(0,T.createAsyncThunk)("page/loadRegister",(async()=>({register:{...await(async()=>{try{const e=await fetch(G);return await e.json()}catch(e){return{}}})(),...H}}))),ee=(0,T.createAsyncThunk)("page/installManifest",(async(e,{getState:t})=>{const{wallet:{address:s},page:{appIds:n,widgetIds:a,register:i}}=t();if(!p.account.isAddress(s))throw new Error("Wallet is not connected yet.");if(n.includes(e.appId))throw new Error("Cannot run sandbox for an installed application.");const r=[...n];r.push(e.appId);const o=[...a];e.supportedViews.includes("widget")&&o.push(e.appId);const l={...i};return l[e.appId]=e,{appIds:r,widgetIds:o,register:l}})),te=(0,T.createAsyncThunk)("page/loadPage",(async(e,{getState:t})=>{const{wallet:{address:s},page:{register:n}}=t();if(!p.account.isAddress(s))throw new Error("Wallet is not connected yet.");const a=new Q(s).createInstance("sentre");return{appIds:V(n,await a.getItem("appIds")||X.appIds),widgetIds:V(n,await a.getItem("widgetIds")||X.widgetIds)}})),se=(0,T.createAsyncThunk)("page/updatePage",(async(e,{getState:t})=>{const{wallet:{address:s},page:{register:n}}=t();if(!p.account.isAddress(s))throw new Error("Wallet is not connected yet.");e=V(n,e);const a=new Q(s);return await a.createInstance("sentre").setItem("appIds",e),{appIds:e}})),ne=(0,T.createAsyncThunk)("page/installApp",(async(e,{getState:t})=>{var s,n;const{wallet:{address:a},page:{register:i,appIds:r,widgetIds:o}}=t();if(!p.account.isAddress(a))throw new Error("Wallet is not connected yet.");if(r.includes(e))return{};const l=[...r];l.push(e);const d=null!==(s=i[e])&&void 0!==s&&null!==(n=s.supportedViews)&&void 0!==n&&n.includes("widget")?[...o,e]:[...o],c=new Q(a);return await c.createInstance("sentre").setItem("appIds",l),await c.createInstance("sentre").setItem("widgetIds",d),{appIds:l,widgetIds:d}})),ae=(0,T.createAsyncThunk)("page/uninstallApp",(async(e,{getState:t})=>{const{wallet:{address:s},page:{appIds:n,widgetIds:a}}=t();if(!p.account.isAddress(s))throw new Error("Wallet is not connected yet.");if(!n.includes(e))return{};const i=n.filter((t=>t!==e)),r=a.filter((t=>t!==e)),o=new Q(s);return await o.createInstance("sentre").setItem("appIds",i),await o.createInstance("sentre").setItem("widgetIds",r),await o.dropInstance(e),{appIds:i,widgetIds:r}})),ie=(0,T.createAsyncThunk)("page/updateDashboard",(async(e,{getState:t})=>{const{wallet:{address:s}}=t();if(!p.account.isAddress(s))throw new Error("Wallet is not connected yet.");const n=new Q(s);return await n.createInstance("sentre").setItem("widgetIds",e),{widgetIds:e}})),re=(0,T.createAsyncThunk)("page/addWidgets",(async(e,{getState:t})=>{const{wallet:{address:s},page:{widgetIds:n}}=t();if(!p.account.isAddress(s))throw new Error("Wallet is not connected yet");const a=[...n,...e],i=new Q(s);return await i.createInstance("sentre").setItem("widgetIds",a),{widgetIds:a}})),oe=(0,T.createAsyncThunk)("page/removeWidget",(async(e,{getState:t})=>{const{wallet:{address:s},page:{widgetIds:n}}=t();if(!p.account.isAddress(s))throw new Error("Wallet is not connected yet.");if(!n.includes(e))return{};const a=n.filter((t=>t!==e)),i=new Q(s);return await i.createInstance("sentre").setItem("widgetIds",a),{widgetIds:a}})),le=(0,T.createSlice)({name:J,initialState:X,reducers:{},extraReducers:e=>{e.addCase($.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(ee.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(te.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(se.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(ne.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(ae.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(ie.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(re.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(oe.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,de=async e=>{const{sol:{node:t,spltAddress:s,splataAddress:n,swapAddress:a}}=S.Z;window.sentre={wallet:e,lamports:new p.Lamports(t),splt:new p.SPLT(s,n,t),swap:new p.Swap(a,s,n,t)}},ce="wallet",ue={visible:!1,address:"",lamports:BigInt(0)},he=(0,T.createAsyncThunk)("wallet/openWallet",(async()=>({visible:!0}))),pe=(0,T.createAsyncThunk)("wallet/closeWallet",(async()=>({visible:!1}))),me=(0,T.createAsyncThunk)("wallet/connectWallet",(async e=>{if(!e)throw new Error("Invalid wallet instance");await de(e);const t=await e.getAddress(),s=await window.sentre.lamports.getLamports(t);return{address:t,lamports:BigInt(s),visible:!1}})),fe=(0,T.createAsyncThunk)("wallet/updateWallet",(async({lamports:e})=>({lamports:e}))),ge=(0,T.createAsyncThunk)("wallet/disconnectWallet",(async()=>{await(async()=>{var e;null!==(e=window.sentre)&&void 0!==e&&e.wallet&&window.sentre.wallet.disconnect(),await de(void 0)})(),window.location.reload()})),ye=(0,T.createSlice)({name:ce,initialState:ue,reducers:{},extraReducers:e=>{e.addCase(he.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(pe.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(me.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(fe.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(ge.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,we="accounts",ve=(0,T.createAsyncThunk)("accounts/getAccounts",(async({owner:e})=>{if(!p.account.isAddress(e))throw new Error("Invalid owner/wallet address");const{splt:t}=window.sentre,s=p.account.fromAddress(e),{value:n}=await t.connection.getTokenAccountsByOwner(s,{programId:t.spltProgramId});let a={};return n.forEach((({pubkey:e,account:{data:s}})=>{const n=e.toBase58(),i=t.parseAccountData(s);return a[n]=i})),a})),xe=(0,T.createAsyncThunk)("accounts/getAccount",(async({address:e},{getState:t})=>{if(!p.account.isAddress(e))throw new Error("Invalid account address");const{accounts:{[e]:s}}=t();if(s)return{[e]:s};const{splt:n}=window.sentre;return{[e]:await n.getAccountData(e)}})),je=(0,T.createAsyncThunk)("accounts/upsetAccount",(async({address:e,data:t})=>{if(!p.account.isAddress(e))throw new Error("Invalid address");if(!t)throw new Error("Data is empty");return{[e]:t}})),be=(0,T.createAsyncThunk)("accounts/deleteAccount",(async({address:e})=>{if(!p.account.isAddress(e))throw new Error("Invalid address");return{address:e}})),Ie=(0,T.createSlice)({name:we,initialState:{},reducers:{},extraReducers:e=>{e.addCase(ve.fulfilled,((e,{payload:t})=>t)).addCase(xe.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(je.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(be.fulfilled,((e,{payload:t})=>{delete e[t.address]}))}}).reducer;var Ce=s(33015);const{sol:{taxmanAddress:Ae}}=S.Z,ke="pools",Se=(0,T.createAsyncThunk)("pools/getPools",(async()=>{const{swap:e}=window.sentre,t=await e.connection.getProgramAccounts(e.swapProgramId,{filters:[{dataSize:257},{memcmp:{bytes:Ae,offset:65}}]});let s={};return t.forEach((({pubkey:t,account:{data:n}})=>{const a=t.toBase58(),i=e.parsePoolData(n);s[a]=i})),s})),Te=(0,T.createAsyncThunk)("pools/getPool",(async({address:e},{getState:t})=>{if(!p.account.isAddress(e))throw new Error("Invalid pool address");const{pools:{[e]:s}}=t();if(s)return{[e]:s};const{swap:n}=window.sentre;return{[e]:await n.getPoolData(e)}})),Re=(0,T.createAsyncThunk)("pools/upsetPool",(async({address:e,data:t})=>{if(!p.account.isAddress(e))throw new Error("Invalid pool address");if(!t)throw new Error("Data is empty");return{[e]:t}})),De=(0,T.createSlice)({name:ke,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Se.fulfilled,((e,{payload:t})=>t)).addCase(Te.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(Re.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,Me="search",Be=(0,T.createAsyncThunk)("search/setValue",(async e=>({value:e}))),Pe=(0,T.createAsyncThunk)("search/setLoading",(async e=>({loading:e}))),Ne=(0,T.createAsyncThunk)("search/setDisabled",(async e=>({disabled:e}))),Ee=(0,T.createSlice)({name:Me,initialState:{value:"",loading:!1,disabled:!1},reducers:{},extraReducers:e=>{e.addCase(Be.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(Pe.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(Ne.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,ze=(0,T.configureStore)({middleware:e=>e(R),devTools:!1,reducer:{ui:z,flags:W,page:le,wallet:ye,accounts:Ie,mints:Ce.ZP,pools:De,search:Ee}}),Le={ttl:3e4},Oe={limit:{calls:10,time:1e3},cache:Le};class We{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class _e{static set(e,t,s=Le){this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),s.ttl)}static get(e){return this.mapCache.get(e)}}_e.mapCache=new Map;class Ue{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new Fe(e);return this.mapInstance.set(t,s),s}static async load(e,t,s={}){"object"===typeof e&&(e=JSON.stringify(e));let n=Ue.getSingleFlight(s);Ue.mapInstance.set(e,n);const a=new We(e);return n.load(a,t)}}Ue.mapInstance=new Map;class Fe{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(Oe,e)}async load(e,t){const s=_e.get(e.key);if(s)return Promise.resolve(s);let n=!1,a=this.mapRequestCalling.get(e.key);return a||(a=e,n=!0,this.mapRequestCalling.set(a.key,a)),new Promise(((e,s)=>{if(!a)return s("Not found request!");a.add(e,s),n&&this.fetch(a,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{_e.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){if(!this.config.limit)return!1;const e=this.timeLogs[0]||0,t=(new Date).getTime();if(this.timeLogs.length<this.config.limit.calls)return!0;return t-e>this.config.limit.time}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}const Ze=new k.Z,qe=(e,t)=>{const{mint_a:s,mint_b:n,reserve_a:a,reserve_b:i}=t;return e===s?a:e===n?i:BigInt(0)},Ke=async(e="")=>"sen"===e?(async()=>{const{sol:{senPoolAddress:e,senAddress:t}}=S.Z,s={icon:"",symbol:"SEN",name:"Sen",address:t,rank:0,price:0,priceChange:0,totalVolume:0},n=ze.getState().pools[e];if(!n)return s;const{mint_a:a,mint_b:i}=n,r=t===a?i:a,[o,l]=await Promise.all([r,t].map((e=>Ze.findByAddress(e))));if(!o||!l)return s;const d=qe(r,n),c=qe(t,n);return s.price=Number(p.utils.undecimalize(d,o.decimals))/Number(p.utils.undecimalize(c,l.decimals)),s})():Ue.load("fetchCGK"+e,(()=>p.utils.parseCGK(e))),Ye=(e,t)=>{let s=Math.floor(16777215*Math.random());if(e){s=0;for(let t=0;t<e.length;t++)s=e.charCodeAt(t)+((s<<5)-s)}var n=[0,0,0];for(let i=0;i<3;i++){var a=s>>8*i&255;n[i]=a}return`rgba(${n[0]}, 100, ${n[1]},${t||1})`};var Qe=s(21995),Ge=s.n(Qe);new k.Z;const He=async(e,t)=>{try{const s=await Ge()({method:"get",url:`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&days=${t.days}&interval=${t.interval}`});return s.data.prices.map((e=>({time:e[0],val:e[1]})))}catch(s){return[]}};var Ve;!function(e){e.day="day",e.week="week",e.month="month",e.year="year"}(Ve||(Ve={}));const Je={day:{amount:4,unit:"hours",format:"HH:00"},week:{amount:1,unit:"days",format:"DD.MMM"},month:{amount:5,unit:"days",format:"DD.MMM"},year:{amount:2,unit:"months",format:"DD.MMM"}},Xe={day:{days:1,interval:"hourly"},week:{days:7,interval:"daily"},month:{days:31,interval:"daily"},year:{days:365,interval:"daily"}},$e="#5D6CCF",et=0,tt=14,st="TVL",nt="transparent",at="UNKN",it=()=>{var e,t,s,a,o,d,c,u,h;const[p,m]=(0,r.useState)(Ve.week),[f,g]=(0,r.useState)([]),y={borderColor:nt,borderRadius:et,pointRadius:et,tooltip:st,pointHitRadius:tt,pointHoverRadius:et,backgroundColor:$e},w=(0,n.useSelector)((e=>e.bid)),b=(0,n.useSelector)((e=>e.ask)),I=(0,r.useMemo)((()=>{var e,t;return[null===(e=w.mintInfo)||void 0===e?void 0:e.logoURI,null===(t=b.mintInfo)||void 0===t?void 0:t.logoURI]}),[null===(e=b.mintInfo)||void 0===e?void 0:e.logoURI,null===(t=w.mintInfo)||void 0===t?void 0:t.logoURI]),k=(0,r.useMemo)((()=>{var e,t;return[(null===(e=w.mintInfo)||void 0===e?void 0:e.symbol)||at,(null===(t=b.mintInfo)||void 0===t?void 0:t.symbol)||at]}),[null===(s=b.mintInfo)||void 0===s?void 0:s.symbol,null===(a=w.mintInfo)||void 0===a?void 0:a.symbol]),S=(0,r.useCallback)((e=>{const t=[],{format:s,amount:n,unit:a}=Je[p];let i=l()();for(const r of e.reverse()){const e=l()(r.time).format(s);if(e===i.format(s)){let o=e;e===l()().format(s)&&(o=l()().format("HH:mm")),i&&t.unshift({label:o,val:r.val}),i=i.subtract(n,a)}else"00:00"===e&&t.unshift({label:i.format("DD.MMM"),val:r.val})}g(t)}),[p]),T=(0,r.useCallback)((e=>{const t=[],{format:s,amount:n,unit:a}=Je[p];let i=l()();for(const r of e.reverse()){const e=l()(r.time).format(s);e!==i.format(s)||(i=i.subtract(n,a),t.unshift({label:e,val:r.val}))}g(t)}),[p]),R=(0,r.useCallback)((async()=>{var e,t,s,n;const a=null===(e=b.mintInfo)||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.coingeckoId,i=null===(s=w.mintInfo)||void 0===s||null===(n=s.extensions)||void 0===n?void 0:n.coingeckoId;if(!a||!i)return g([]);const r=Xe[p],[o,l]=await Promise.all([He(i,r),He(a,r)]),d=[];for(let c=o.length-1;c>=0;c--){const e=o[c],t=l[l.length-o.length+c];e&&t&&d.unshift({time:e.time,val:e.val/t.val})}return p===Ve.day?S(d):T(d)}),[null===(o=b.mintInfo)||void 0===o||null===(d=o.extensions)||void 0===d?void 0:d.coingeckoId,null===(c=w.mintInfo)||void 0===c||null===(u=c.extensions)||void 0===u?void 0:u.coingeckoId,p,T,S]);(0,r.useEffect)((()=>{R()}),[R]);const D=(null===(h=f.at(-1))||void 0===h?void 0:h.val)||0,M=v(D).format(D>1?"0,0.[00]":"0,0.[00000000]");return(0,x.jsx)(i.Card,{bordered:!1,className:"card-swap",bodyStyle:{paddingTop:28},children:(0,x.jsxs)(i.Row,{gutter:[24,24],children:[(0,x.jsx)(i.Col,{flex:"auto",children:(0,x.jsxs)(i.Row,{gutter:[20,20],children:[(0,x.jsx)(i.Col,{flex:"auto",children:(0,x.jsxs)(i.Space,{size:4,align:"center",children:[(0,x.jsx)(C,{icons:I,size:24}),(0,x.jsx)(i.Typography.Text,{children:k.join("/")})]})}),f&&!!f.length&&(0,x.jsx)(i.Col,{children:(0,x.jsxs)(i.Radio.Group,{defaultValue:Ve.week,onChange:e=>m(e.target.value),className:"chart-radio-btn",children:[(0,x.jsx)(i.Radio.Button,{value:Ve.day,children:"1D"}),(0,x.jsx)(i.Radio.Button,{value:Ve.week,children:"1W"}),(0,x.jsx)(i.Radio.Button,{value:Ve.month,children:"1M"}),(0,x.jsx)(i.Radio.Button,{value:Ve.year,children:"1Y"})]})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(i.Typography.Title,{level:2,children:D?M:""})})]})}),(0,x.jsx)(i.Col,{span:24,children:f&&f.length?(0,x.jsx)(j,{chartData:null===f||void 0===f?void 0:f.map((e=>e.val)),labels:null===f||void 0===f?void 0:f.map((e=>e.label)),configs:y}):(0,x.jsx)(A,{})})]})})},rt=BigInt(1e9),ot=({hops:e,onCallback:t=(()=>{}),disabled:s=!1,wrapAmount:o=BigInt(0),hightImpact:l=!1})=>{const[d,c]=(0,r.useState)(!1),u=(0,n.useSelector)((e=>e.bid)),h=(0,n.useSelector)((e=>e.ask)),{slippage:m}=(0,n.useSelector)((e=>e.settings)),{wallet:{address:f}}=(0,a.useWallet)(),g=(0,r.useCallback)((async()=>{const{swap:t,splt:s,wallet:n}=window.sentre;if(!n)return;const a=await Promise.all(e.map((async({srcMintInfo:{address:e},dstMintInfo:{address:t},poolData:{address:n}})=>({poolAddress:n,srcAddress:await s.deriveAssociatedAddress(f,e),dstAddress:await s.deriveAssociatedAddress(f,t)})))),{srcMintInfo:{decimals:i}}=e[0],r=p.utils.decimalize(u.amount,i),{dstMintInfo:{decimals:o}}=e[e.length-1],l=p.utils.decimalize(h.amount,o)*(rt-p.utils.decimalize(m,9))/rt;return await t.route(r,l,a,n)}),[e,u,h,m,f]);return(0,x.jsx)(i.Button,{type:"primary",onClick:async()=>{try{c(!0),await(async()=>{if(!o)return;const{swap:e,wallet:t}=window.sentre;return t?await e.wrapSol(o,t):void 0})();const{txId:e}=await g()||{};return window.notify({type:"success",description:"Swap successfully. Click to view details.",onClick:()=>window.open(w(e||""),"_blank")}),t()}catch(e){return window.notify({type:"error",description:e.message})}finally{c(!1)}},disabled:s,loading:d,block:!0,children:l?"Too Hight Price Impact":"Swap"})},lt=({icons:e=["",""],size:t=24,defaultIcon:s=(0,x.jsx)(I,{size:t,name:"help-outline"})})=>(0,x.jsx)(i.Space,{children:null===e||void 0===e?void 0:e.map(((n,a)=>(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(i.Avatar,{src:n,size:t,children:s}),e.length>a+1&&(0,x.jsx)(I,{name:"chevron-forward-outline"})]},a)))}),dt=({bidData:e,askData:t})=>{var s,n;const a=v(Number(null===e||void 0===e?void 0:e.amount)/Number(null===t||void 0===t?void 0:t.amount)).format("0,0.[000000]"),r=`${null===e||void 0===e||null===(s=e.mintInfo)||void 0===s?void 0:s.symbol}/${null===t||void 0===t||null===(n=t.mintInfo)||void 0===n?void 0:n.symbol}`;return(0,x.jsxs)(i.Space,{children:[(0,x.jsx)(i.Typography.Text,{children:a}),(0,x.jsx)(i.Typography.Text,{children:r})]})},ct=({value:e=!1,onChange:t=(()=>{}),priceRate:s=(0,x.jsx)(r.Fragment,{})})=>(0,x.jsxs)(i.Space,{size:4,children:[(0,x.jsx)(i.Button,{type:"text",onClick:()=>t(!e),shape:"circle",icon:(0,x.jsx)(I,{name:"swap-horizontal-outline"})}),(0,x.jsx)(i.Typography.Text,{children:s})]}),ut=new k.Z;class ht{constructor(){this.hops=[],this.amounts=[],this.amount=""}}const pt=(e,t)=>{const{mint_a:s,mint_b:n,reserve_a:a,reserve_b:i}=t;if(e===s)return a;if(e===n)return i;throw new Error("Cannot find reserves")},mt=(e,t,s,n,a)=>{const{pools:i,mints:r}=a;if(3===i.length)return;const o=t.get(s);null===o||void 0===o||o.forEach(((a,o)=>{if(i.includes(o))return;let{mint_b:l}=a;if(a.mint_a!==s&&(l=a.mint_a),r.includes(l))return;const d={pools:[...i,o],mints:[...r,l]};l!==n?mt(e,t,l,n,d):e.push(d)}))},ft=async(e,t,s,n)=>{var a,i;const r=null===(a=s.mintInfo)||void 0===a?void 0:a.address,o=null===(i=n.mintInfo)||void 0===i?void 0:i.address;if(!p.account.isAddress(r)||!p.account.isAddress(o))return[];const l=[];let d=r,c="";for(const u of t){const t=e[u],{mint_a:s,mint_b:n}=t;if(d!==s&&d!==n)return[];c=d===s?n:s;const a=await ut.findByAddress(d),i=await ut.findByAddress(c);if(!a||!i)return[];const r={poolData:{address:u,...t},srcMintInfo:a,dstMintInfo:i};d=c,l.push(r)}return l},gt=p.Swap.oracle,yt=(e,t)=>{const{srcMintInfo:{address:s,decimals:n},dstMintInfo:{address:a,decimals:i}}=t,{fee_ratio:r,tax_ratio:o}=t.poolData,l=pt(s,t.poolData),d=pt(a,t.poolData);if(!l||!d)return"0";const{askAmount:c}=gt.swap(p.utils.decimalize(e,n),l,d,r,o);return p.utils.undecimalize(c,i)},wt=(e,t)=>{const{srcMintInfo:{address:s,decimals:n},dstMintInfo:{address:a,decimals:i}}=t,{fee_ratio:r,tax_ratio:o}=t.poolData,l=pt(s,t.poolData),d=pt(a,t.poolData),c=gt.inverseSwap(p.utils.decimalize(e,i),l,d,r,o);return p.utils.undecimalize(c,n)},vt=()=>{const{route:e}=(0,n.useSelector)((e=>e.route)),t=(0,n.useSelector)((e=>e.bid)),s=(0,n.useSelector)((e=>e.ask)),{amounts:a=[],hops:i=[]}=e||{};return(0,r.useMemo)((()=>{let e=t.amount;return i.forEach(((t,n)=>{const{dstMintInfo:i,srcMintInfo:r,poolData:o}=t,l={...o},d=a[n],c=r.decimals,u=a[n+1]||s.amount,h=i.decimals;r.address===o.mint_a?(l.reserve_a+=p.utils.decimalize(d,c),l.reserve_b-=p.utils.decimalize(u,h)):(l.reserve_b+=p.utils.decimalize(d,c),l.reserve_a-=p.utils.decimalize(u,h)),e=yt(e,{...t,poolData:l})})),1-Number(e)/Number(s.amount)}),[a,s.amount,t.amount,i])},xt=({label:e="",content:t=""})=>(0,x.jsxs)(i.Row,{children:[(0,x.jsx)(i.Col,{flex:"auto",children:(0,x.jsx)(i.Typography.Text,{type:"secondary",children:e})}),(0,x.jsx)(i.Col,{children:(0,x.jsx)("span",{children:t})})]}),jt=()=>{const[e,t]=(0,r.useState)(!1),{slippage:s}=(0,n.useSelector)((e=>e.settings)),{route:a}=(0,n.useSelector)((e=>e.route)),o=(0,n.useSelector)((e=>e.bid)),l=(0,n.useSelector)((e=>e.ask)),d=vt(),{mintInfo:c}=o,u=(0,r.useMemo)((()=>{if(null===a||void 0===a||!a.hops)return;const{logoURI:e}=c||{};let t=[e];for(const s of null===a||void 0===a?void 0:a.hops){const{dstMintInfo:{logoURI:e}}=s;e&&t.push(e)}return t}),[c,null===a||void 0===a?void 0:a.hops]),h=(0,r.useCallback)((()=>o.amount&&l.amount?e?(0,x.jsx)(dt,{bidData:l,askData:o}):(0,x.jsx)(dt,{bidData:o,askData:l}):(0,x.jsx)(r.Fragment,{})),[l,o,e]);return(0,r.useEffect)((()=>{h()}),[h]),(0,x.jsxs)(i.Row,{gutter:[12,12],children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(xt,{label:"Price impact",content:(0,x.jsx)(i.Typography.Text,{type:"danger",children:v(Number(d)).format("0.[0000]%")})})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(xt,{label:"Price",content:(0,x.jsx)(ct,{priceRate:h(),value:e,onChange:t})})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(xt,{label:"Slippage Tolerance",content:v(s).format("0.[00]%")})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(xt,{label:"Route",content:(0,x.jsx)(lt,{icons:u})})})]})},bt=()=>{const{route:e}=(0,n.useSelector)((e=>e.route)),{amount:t,mintInfo:s,accountAddress:o}=(0,n.useSelector)((e=>e.bid)),{amount:l}=(0,n.useSelector)((e=>e.ask)),{advanced:d}=(0,n.useSelector)((e=>e.settings)),{accounts:c}=(0,a.useAccount)(),u=vt(),h=(null===e||void 0===e?void 0:e.hops)||[],m=(0,r.useMemo)((()=>{const{amount:e}=c[o]||{},n=e||BigInt(0);if(!s||!Number(t)||s.address!==p.DEFAULT_WSOL)return BigInt(0);const a=p.utils.decimalize(t,s.decimals);return a<=n?BigInt(0):a-n}),[c,o,t,s]),f=!d&&100*u>12.5,g=f||!h.length||!parseFloat(t)||parseFloat(t)<0||!parseFloat(l)||parseFloat(l)<0;return(0,x.jsx)(i.Card,{bordered:!1,children:(0,x.jsxs)(i.Row,{gutter:[24,24],children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(i.Typography.Title,{level:5,children:"Review & Swap"})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(jt,{})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(ot,{hops:h,wrapAmount:m,disabled:g,hightImpact:f})})]})})},It=e=>{const{tokenProvider:t}=(0,a.useMint)(),{pools:s}=(0,a.usePool)(),[n,i]=(0,r.useState)([]),o=(0,r.useCallback)((async()=>{if(!e)return i([void 0]);const n=await t.findByAddress(e);if(n)return i([n]);const a=Object.values(s).find((({mint_lpt:t})=>t===e));if(!a)return i([void 0]);const{mint_a:r,mint_b:o}=a,l=await t.findByAddress(r),d=await t.findByAddress(o);return i([l,d])}),[e,s,t]);return(0,r.useEffect)((()=>{o()}),[o]),n},Ct=({mintAddress:e,size:t=24,icon:s=(0,x.jsx)(I,{name:"diamond-outline"})})=>{const n=It(e);return(0,x.jsx)(i.Avatar.Group,{style:{display:"block"},children:n.map(((e,n)=>(0,x.jsx)(i.Avatar,{src:null===e||void 0===e?void 0:e.logoURI,size:t,style:{backgroundColor:"#2D3355",border:"none"},children:s},(null===e||void 0===e?void 0:e.address)||n)))})},At=({mintAddress:e})=>{const t=It(e),s=(0,r.useMemo)((()=>t.map((e=>e?e.symbol:"UNKN")).join(" / ")),[t]);return(0,x.jsx)("span",{children:s})},kt={address:"",icon:"",name:"TOKEN",price:0,priceChange:0,rank:0,symbol:"TOKEN",totalVolume:0},St=e=>{const[t,s]=(0,r.useState)(kt),{tokenProvider:n}=(0,a.useMint)(),i=(0,r.useCallback)((async()=>{if(!e)return s(kt);try{var t;const a=await n.findByAddress(e),i=null===a||void 0===a||null===(t=a.extensions)||void 0===t?void 0:t.coingeckoId,r=await Ke(i);return s(r)}catch(a){return s(kt)}}),[e,n]);return(0,r.useEffect)((()=>{i()}),[i]),t},Tt=({mintAddress:e="",tvl:t="",symbol:s="",price:n,format:a="0,0.[00]a"})=>(0,x.jsxs)(i.Space,{direction:"vertical",size:4,children:[(0,x.jsx)(Ct,{mintAddress:e}),(0,x.jsxs)(i.Space,{children:[(0,x.jsx)(i.Typography.Text,{children:"TVL:"}),(0,x.jsx)(i.Typography.Title,{level:5,children:v(t).format(a)}),(0,x.jsx)(i.Typography.Title,{level:5,children:s})]}),(0,x.jsxs)(i.Typography.Text,{className:"caption",type:"secondary",children:["~ $",v(n).format(a)]})]}),Rt=()=>{const{route:e}=(0,n.useSelector)((e=>e.route)),t=(0,n.useSelector)((e=>e.ask.mintInfo)),s=(0,n.useSelector)((e=>e.bid.mintInfo)),a=St(null===t||void 0===t?void 0:t.address),o=St(null===s||void 0===s?void 0:s.address),{dstMintInfo:l,poolData:d}=(null===e||void 0===e?void 0:e.hops.at(-1))||{},{srcMintInfo:c,poolData:u}=(null===e||void 0===e?void 0:e.hops[0])||{},h=(e,t)=>p.account.isAddress(e)&&t?pt(e,t):BigInt(0),m=(0,r.useMemo)((()=>{if(null===l||void 0===l||!l.decimals)return 0;const e=h(null===l||void 0===l?void 0:l.address,d);return Number(p.utils.undecimalize(e,l.decimals))}),[null===l||void 0===l?void 0:l.address,null===l||void 0===l?void 0:l.decimals,d]),f=(0,r.useMemo)((()=>{if(null===c||void 0===c||!c.decimals)return 0;const e=h(null===c||void 0===c?void 0:c.address,u);return Number(p.utils.undecimalize(e,c.decimals))}),[null===c||void 0===c?void 0:c.address,null===c||void 0===c?void 0:c.decimals,u]);return(0,x.jsx)(i.Card,{bordered:!1,children:(0,x.jsxs)(i.Row,{gutter:[16,16],wrap:!1,children:[(0,x.jsx)(i.Col,{span:11,children:(0,x.jsx)(Tt,{mintAddress:null===s||void 0===s?void 0:s.address,tvl:f,symbol:null===s||void 0===s?void 0:s.symbol,price:f*o.price})}),(0,x.jsx)(i.Col,{children:(0,x.jsx)(i.Divider,{type:"vertical",style:{height:"100%"}})}),(0,x.jsx)(i.Col,{span:11,children:(0,x.jsx)(Tt,{mintAddress:null===t||void 0===t?void 0:t.address,tvl:m,symbol:null===t||void 0===t?void 0:t.symbol,price:m*a.price})})]})})};const Dt=s.p+"static/media/sen.f2d012c907167ba613b035621b6423cb.svg",Mt=({spacing:e=4,iconSize:t=20})=>(0,x.jsxs)(i.Space,{size:e,children:[(0,x.jsx)(i.Typography.Text,{style:{fontSize:12,color:"#7A7B85"},children:"Powered by"}),(0,x.jsx)(i.Avatar,{src:Dt,size:t})]}),Bt=({label:e,value:t,onClick:s,active:n=!1})=>(0,x.jsx)(i.Typography.Text,{style:{cursor:"pointer",color:n?"#F9575E":"inherit"},onClick:()=>s(t),children:e}),Pt=({value:e,onChange:t})=>(0,x.jsxs)(i.Row,{gutter:[8,8],children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsxs)(i.Row,{gutter:[8,8],wrap:!1,children:[(0,x.jsx)(i.Col,{flex:"auto",children:(0,x.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Slippage Tolerance"})}),(0,x.jsx)(i.Col,{children:(0,x.jsx)(i.Tooltip,{placement:"right",title:(0,x.jsxs)("span",{children:["Your transaction will be canceled if the confirmed price breaks the limited range of"," ",(0,x.jsx)("strong",{style:{color:"#f9575e"},children:100*e+"%."})]}),children:(0,x.jsx)(i.Button,{type:"text",shape:"circle",size:"small",icon:(0,x.jsx)(I,{name:"information-circle-outline"})})})})]})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(i.Row,{gutter:[8,8],wrap:!1,justify:"space-between",children:[.001,.005,.01,.05,1].map(((s,n)=>(0,x.jsx)(i.Col,{children:(0,x.jsx)(Bt,{label:1===s?"Freely":100*s+"%",value:s,onClick:t,active:s===e})},n)))})})]}),Nt=({value:e,onChange:t})=>(0,x.jsxs)(i.Row,{gutter:[8,8],children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsxs)(i.Row,{gutter:[8,8],wrap:!1,children:[(0,x.jsx)(i.Col,{flex:"auto",children:(0,x.jsx)(i.Typography.Text,{type:"secondary",style:{fontSize:12},children:"Advanced Mode"})}),(0,x.jsx)(i.Col,{children:(0,x.jsx)(i.Switch,{size:"small",checkedChildren:(0,x.jsx)(I,{name:"calculator-outline"}),unCheckedChildren:(0,x.jsx)(I,{name:"sparkles-outline"}),checked:e,onChange:t})})]})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsxs)(i.Typography.Paragraph,{style:{fontSize:12,textAlign:"justify"},children:[(0,x.jsx)(I,{name:"warning-outline"})," This advanced mode will disable the automatic protection that often results in bad rates and lost funds. Only use this mode if you know what you are doing."]})})]}),Et="settings",zt=(0,T.createAsyncThunk)("settings/updateSettings",(async e=>({...e}))),Lt=(0,T.createSlice)({name:Et,initialState:{slippage:.01,advanced:!1},reducers:{},extraReducers:e=>{e.addCase(zt.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,Ot=()=>{const e=(0,n.useDispatch)(),{slippage:t,advanced:s}=(0,n.useSelector)((e=>e.settings));return(0,x.jsxs)(i.Row,{gutter:[4,4],justify:"end",align:"middle",wrap:!1,children:[(0,x.jsx)(i.Col,{children:(0,x.jsx)(Mt,{})}),(0,x.jsx)(i.Col,{children:(0,x.jsx)(i.Divider,{type:"vertical",style:{padding:0}})}),(0,x.jsx)(i.Col,{children:(0,x.jsx)(i.Popover,{placement:"bottomRight",overlayInnerStyle:{width:300},content:(0,x.jsxs)(i.Row,{gutter:[8,8],children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(i.Typography.Title,{level:5,children:"Settings"})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(Pt,{value:t,onChange:t=>e(zt({slippage:t}))})}),(0,x.jsx)(i.Divider,{style:{marginTop:8,marginBottom:8}}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(Nt,{value:s,onChange:t=>e(zt({advanced:t}))})})]}),trigger:"click",children:(0,x.jsx)(i.Button,{type:"text",shape:"circle",size:"small",icon:(0,x.jsx)(I,{name:"settings-outline"})})})})]})};var Wt=s(36498);const _t=({onChange:e,isSupportedMint:t,disabled:s=!1})=>{const[n,o]=(0,r.useState)(""),{tokenProvider:l}=(0,a.useMint)(),d=(0,r.useCallback)((async()=>{if(!n||n.length<3)return e(null);const s=(await l.find(n)).filter((({address:e})=>t(e)));return e(s)}),[n,l,e,t]);return(0,r.useEffect)((()=>{d()}),[d]),(0,x.jsx)(i.Card,{className:"card-child",bodyStyle:{padding:8},bordered:!1,children:(0,x.jsx)(i.Input,{placeholder:"Search",value:n,size:"small",bordered:!1,suffix:(0,x.jsx)(i.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:n?()=>o(""):()=>{},icon:(0,x.jsx)(I,{name:n?"close-outline":"search-outline"}),disabled:s}),onChange:e=>o(e.target.value),disabled:s})})},Ut=({logoURI:e,symbol:t,name:s,onClick:n,active:a=!1})=>(0,x.jsx)(i.Card,{className:"card-child"+(a?" active":""),bodyStyle:{padding:"8px 16px",cursor:"pointer"},bordered:a,onClick:n,hoverable:!0,children:(0,x.jsx)(i.Row,{gutter:[16,16],children:(0,x.jsx)(i.Col,{span:24,children:(0,x.jsxs)(i.Space,{size:12,style:{marginLeft:-4},children:[(0,x.jsx)(i.Avatar,{src:e,size:32,style:{backgroundColor:"#2D3355",border:"none"},children:(0,x.jsx)(I,{name:"diamond-outline"})}),(0,x.jsx)(i.Typography.Text,{style:{margin:0},children:t}),(0,x.jsx)(i.Divider,{type:"vertical",style:{margin:0}}),(0,x.jsx)(i.Typography.Text,{type:"secondary",style:{margin:0,fontSize:12},children:s})]})})})}),Ft=({value:e,onChange:t})=>{const[s,n]=(0,r.useState)([]),{pools:o}=(0,a.usePool)(),{tokenProvider:l}=(0,a.useMint)(),d=(0,r.useMemo)((()=>o?Object.keys(o).map((e=>{const{mint_a:t,mint_b:s}=o[e];return[t,s]})).flat().filter(((e,t,s)=>s.indexOf(e)===t)):[]),[o]),c=(0,r.useCallback)((e=>d.includes(e)),[d]),u=(0,r.useCallback)((async e=>{if(e)return n(e);const t=(await l.all()).filter((({address:e})=>c(e)));return n(t)}),[l,c]),h=(0,r.useCallback)((e=>{const t=null===e||void 0===e?void 0:e.address;return p.account.isAddress(t)?Object.keys(o).filter((e=>{const{mint_a:s,mint_b:n}=o[e];return[s,n].includes(t)})):[]}),[o]),m=(0,r.useMemo)((()=>(0,x.jsx)(i.Row,{gutter:[16,16],children:s.map(((s,n)=>{const{logoURI:a,symbol:r,name:o,address:l}=s,{address:d}=e.mintInfo||{};return(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(Wt.ZP,{height:48,overflow:!0,children:(0,x.jsx)(Ut,{logoURI:a,symbol:r,name:o,onClick:()=>(e=>{const s=h(e);return t({mintInfo:e,poolAddress:void 0,poolAddresses:s})})(s),active:d===l})})},o+n)}))})),[h,t,s,e]);return(0,x.jsxs)(i.Row,{gutter:[16,16],children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(i.Typography.Title,{level:5,children:"Token Selection"})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(i.Divider,{style:{margin:0}})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(_t,{onChange:u,isSupportedMint:c})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsxs)(i.Row,{gutter:[16,16],style:{height:300,overflow:"auto"},children:[(0,x.jsx)(i.Col,{span:24,children:m}),(0,x.jsx)(i.Col,{span:24})]})})]})},Zt=({value:e,onChange:t})=>{const[s,n]=(0,r.useState)(!1);(0,r.useEffect)((()=>{s&&setTimeout(Wt.be,500)}),[s]);const{logoURI:a,symbol:o}=(null===e||void 0===e?void 0:e.mintInfo)||{};return(0,x.jsxs)(r.Fragment,{children:[(0,x.jsxs)(i.Space,{style:{cursor:"pointer"},onClick:()=>n(!0),children:[(0,x.jsx)(i.Avatar,{size:24,src:a,style:{backgroundColor:"#2D3355",border:"none"},children:(0,x.jsx)(I,{name:"diamond-outline"})}),(0,x.jsx)(i.Typography.Text,{type:"secondary",style:{margin:0},children:o||"TOKEN"}),(0,x.jsx)(i.Divider,{type:"vertical",style:{marginLeft:4}})]}),(0,x.jsx)(i.Modal,{visible:s,onCancel:()=>n(!1),closeIcon:(0,x.jsx)(I,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,x.jsx)(i.Row,{gutter:[16,16],children:(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(Ft,{value:e,onChange:e=>(n(!1),t(e))})})})})]})},qt=(0,T.createAsyncThunk)("ask/updateAskData",(async({prioritized:e,reset:t,...s},{getState:n})=>{const{bid:{priority:a},ask:{priority:i}}=n();return{...s,priority:t?0:e?a+1:i}})),Kt=(0,T.createSlice)({name:"ask",initialState:{amount:"",accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:e=>{e.addCase(qt.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer;let Yt;const Qt=(0,r.forwardRef)((({max:e,onChange:t,...s},n)=>{var a;const[o,l]=(0,r.useState)(""),[d,c]=(0,r.useState)(null),u=(0,r.useRef)(n),h=(0,r.useCallback)((s=>{const n=e=>{Yt&&(clearTimeout(Yt),Yt=void 0),l(e),Yt=setTimeout((()=>l("")),500)};return/^\d*(\.\d*)?$/.test(s)?e&&parseFloat(s)>parseFloat(e)?n("Not enough balance"):t(s):n("Invalid character")}),[e,t]);return null===u||void 0===u||null===(a=u.current)||void 0===a||a.setSelectionRange(d,d),(0,x.jsx)(i.Tooltip,{title:(0,x.jsxs)(i.Space,{children:[(0,x.jsx)(I,{name:"warning"}),o]}),visible:!!o,children:(0,x.jsx)(i.Input,{...s,onChange:e=>{c(e.target.selectionStart),h(e.target.value||"")},ref:u})})})),Gt=e=>{const[t,s]=(0,r.useState)(0),{tokenProvider:n,getMint:i}=(0,a.useMint)(),o=(0,r.useCallback)((async()=>{if(!e)return s(0);const t=await n.findByAddress(e);if(t)return s(t.decimals);try{const t=await i({address:e});return s(t[e].decimals)}catch(a){}return s(0)}),[i,e,n]);return(0,r.useEffect)((()=>{o()}),[o]),t},Ht=e=>{const{accounts:t}=(0,a.useAccount)(),{wallet:s}=(0,a.useWallet)(),{amount:n,mint:i}=(0,r.useMemo)((()=>e===s.address?{amount:s.lamports,mint:"11111111111111111111111111111111"}:t[e]||{}),[e,t,s.address,s.lamports]),o=Gt(i);return(0,r.useMemo)((()=>({balance:p.utils.undecimalize(n,o),mint:i,amount:n,decimals:o})),[n,o,i])};const Vt={appId:"sen_swap",url:"https://descartesnetwork.github.io/sen-swap/index.js",senhub:"senhub@https://descartesnetwork.github.io/senhub/index.js"},Jt={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}},Xt={devnet:{bidDefault:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",askDefault:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ"},testnet:{bidDefault:"",askDefault:""},mainnet:{bidDefault:"",askDefault:""}},$t={devnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"},testnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"},mainnet:{wormholeAddress:"rRsXLHe7sBHdyKU3KY3wbcgWvoT1Ntqudf6e9PKusgb"}},es={manifest:{development:{...Vt},staging:{...Vt},production:{...Vt}}[g.OB],sol:Jt[g.ef],swap:Xt[g.ef],wormhole:$t[g.ef]},ts={accountAddress:"",poolAddresses:[]},ss=e=>{const{wallet:t}=(0,a.useWallet)(),{tokenProvider:s}=(0,a.useMint)(),{pools:n}=(0,a.usePool)(),[i,o]=(0,r.useState)(ts),l=(0,r.useCallback)((async()=>{if(!p.account.isAddress(e)||!Object.keys(n).length)return o(ts);const a=await s.findByAddress(e);if(!a)return o(ts);const{splt:i}=window.sentre,r=await i.deriveAssociatedAddress(t.address,e),l=Object.keys(n).filter((t=>{const{mint_a:s,mint_b:a}=n[t];return[s,a].includes(e)}));o({accountAddress:r,mintInfo:a,poolAddress:"",poolAddresses:l})}),[e,n,s,t.address]);return(0,r.useEffect)((()=>{l()}),[l]),i},ns=()=>{var e,t,s;const o=(0,n.useDispatch)(),{wallet:l}=(0,a.useWallet)(),d=(0,n.useSelector)((e=>e.ask)),{balance:c}=Ht(d.accountAddress),u=St(null===(e=d.mintInfo)||void 0===e?void 0:e.address),h=ss(es.swap.askDefault);(0,r.useEffect)((()=>{d.accountAddress||o(qt(h))}),[d.accountAddress,o,h]);const m=(0,r.useMemo)((()=>({mintInfo:d.mintInfo,poolAddresses:d.poolAddresses})),[d]),f=u.price*Number(d.amount);return(0,x.jsxs)(i.Row,{gutter:[8,8],children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(i.Typography.Text,{children:"To"})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(Qt,{placeholder:"0",value:d.amount,onChange:e=>o(qt({amount:e,prioritized:!0})),size:"large",prefix:(0,x.jsx)(Zt,{value:m,onChange:async e=>{const{splt:t}=window.sentre,{address:s}=e.mintInfo||{};if(!p.account.isAddress(s))return o(qt({...e}));const n=await t.deriveAssociatedAddress(l.address,s);o(qt({accountAddress:n,...e}))}})})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsxs)(i.Row,{gutter:[4,4],style:{fontSize:12,marginLeft:2},children:[(0,x.jsx)(i.Col,{flex:"auto",children:u.price?(0,x.jsx)(i.Tooltip,{title:"The estimation is based on CoinGecko API.",children:(0,x.jsxs)(i.Space,{size:4,children:[(0,x.jsx)(I,{name:"information-circle-outline"}),(0,x.jsxs)(i.Typography.Text,{type:"secondary",children:[v(d.amount).format("0,0.[0000]")," ",(null===(t=m.mintInfo)||void 0===t?void 0:t.symbol)||"TOKEN"," ~ $",v(f).format("0,0.[0]a")]})]})}):null}),(0,x.jsx)(i.Col,{children:(0,x.jsxs)(i.Typography.Text,{type:"secondary",children:["Available: ",v(c||0).format("0,0.[00]")," ",(null===(s=m.mintInfo)||void 0===s?void 0:s.symbol)||"TOKEN"]})})]})})]})},as="#F9575E",is=()=>(0,x.jsxs)(i.Space,{size:4,children:[(0,x.jsx)(i.Tag,{style:{margin:0,borderRadius:4,color:Ye(as)},color:Ye(as,.2),children:"Wormhole Bridge"}),(0,x.jsx)(i.Typography.Text,{type:"secondary",children:"Supported"})]}),rs=(0,T.createAsyncThunk)("bid/updateBidData",(async({prioritized:e,reset:t,...s},{getState:n})=>{const{bid:{priority:a},ask:{priority:i}}=n();Number(s.amount)<0&&(s.amount=void 0);const r=t?0:e?i+1:a;return{...s,priority:r}})),os=(0,T.createSlice)({name:"bid",initialState:{amount:"",accountAddress:"",poolAddresses:[],priority:0},reducers:{},extraReducers:e=>{e.addCase(rs.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer;var ls=s(52222),ds=s(53933);const cs={mainnet:"worm2ZoG2kUd4vFXhvjh93UUH596ayRfgQ2MgjNMTth",testnet:"Brdguy7BmNB4qwEbcqqMbyV5CyJd2sxQNUn6NEpMSsUb",devnet:"3u8hJUVTA4jH1wYAyUur7FFZVQ8H635K3tSHHF4ssjQ5"},us={mainnet:"wormDTUJ6AWPNvk59vGQbDvGJmqbDTdgWgAqcLBCgUb",testnet:"A4Us8EhCC76XdGAN17L4KpRNEK423nMivVHZzZqFqqBg",devnet:"DZnkkTmCiFWfYTfT41X3Rd1kDgozqzxWaHqsw6W4x2oe"},hs=()=>ds.Z.get("network")||"mainnet",ps=async e=>{const t=(()=>{const e=hs();return{chainId:ls.rQ,tokenBridgeAddress:us[e],bridgeAddress:cs[e]}})();return(0,ls._b)(window.sentre.splt.connection,t.tokenBridgeAddress,e)},ms=()=>{var e,t,s;const o=(0,n.useDispatch)(),{wallet:{address:l,lamports:d}}=(0,a.useWallet)(),c=(0,n.useSelector)((e=>e.bid)),{getMint:u}=(0,a.useMint)(),[h,m]=(0,r.useState)(!1),{balance:f,decimals:g,mint:y,amount:w}=Ht(c.accountAddress),j=St(null===(e=c.mintInfo)||void 0===e?void 0:e.address),b=ss(es.swap.bidDefault);(0,r.useEffect)((()=>{c.accountAddress||o(rs(b))}),[c.accountAddress,o,b]);const C=(0,r.useMemo)((()=>({mintInfo:c.mintInfo,poolAddresses:c.poolAddresses})),[c]),A=(0,r.useMemo)((()=>{if(y!==p.DEFAULT_WSOL)return f;const e=p.utils.decimalize(.01,g),t=d+w-e;return t<=w?p.utils.undecimalize(w,g):p.utils.undecimalize(t,g)}),[w,f,g,d,y]),k=(0,r.useCallback)((e=>o(rs({amount:e,prioritized:!0}))),[o]),S=j.price*Number(c.amount);return(0,r.useEffect)((()=>{(async()=>{var e;const t=null===C||void 0===C||null===(e=C.mintInfo)||void 0===e?void 0:e.address;if(!p.account.isAddress(t))return;const s=await ps(t);m(s)})()}),[u,C]),(0,x.jsxs)(i.Row,{gutter:[8,8],children:[(0,x.jsx)(i.Col,{flex:"auto",children:(0,x.jsx)(i.Typography.Text,{children:"From"})}),h&&(0,x.jsx)(i.Col,{children:(0,x.jsx)(is,{})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(Qt,{placeholder:"0",value:c.amount,onChange:k,size:"large",prefix:(0,x.jsx)(Zt,{value:C,onChange:async e=>{const{splt:t}=window.sentre,{address:s}=e.mintInfo||{};if(!p.account.isAddress(s))return o(rs({...e}));const n=await t.deriveAssociatedAddress(l,s);return o(rs({accountAddress:n,...e}))}}),suffix:(0,x.jsx)(i.Button,{type:"text",size:"small",style:{fontSize:12,marginRight:-7},onClick:()=>k(f),children:"MAX"}),max:A})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsxs)(i.Row,{gutter:[4,4],style:{fontSize:12,marginLeft:2},children:[(0,x.jsx)(i.Col,{flex:"auto",children:j.price?(0,x.jsx)(i.Tooltip,{title:"The estimation is based on CoinGecko API.",children:(0,x.jsxs)(i.Space,{size:4,children:[(0,x.jsx)(I,{name:"information-circle-outline"}),(0,x.jsxs)(i.Typography.Text,{type:"secondary",children:[v(c.amount).format("0,0.[0000]")," ",(null===(t=C.mintInfo)||void 0===t?void 0:t.symbol)||"TOKEN"," ~ $",v(S).format("0,0.[00]a")]})]})}):null}),(0,x.jsx)(i.Col,{children:(0,x.jsxs)(i.Typography.Text,{type:"secondary",children:["Available: ",v(A||0).format("0,0.[00]")," ",(null===(s=C.mintInfo)||void 0===s?void 0:s.symbol)||"TOKEN"]})})]})})]})},fs="route",gs={route:{amount:"",amounts:[],hops:[]}},ys=(0,T.createAsyncThunk)("route/updateRouteInfo",(async({route:e},{getState:t})=>{const{route:s}=t();return e?{route:e}:{route:s}})),ws=(0,T.createSlice)({name:fs,initialState:gs,reducers:{},extraReducers:e=>{e.addCase(ys.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,vs=({spacing:e=12})=>{const t=(0,n.useDispatch)(),[s,o]=(0,r.useState)(new ht),l=(0,n.useSelector)((e=>e.bid)),d=(0,n.useSelector)((e=>e.ask)),{pools:c}=(0,a.usePool)(),u=(0,r.useCallback)((async()=>{const{amount:e,priority:s,...n}=l,{amount:a,priority:i,...r}=d,o=s>i?e:a,c=s>i?qt:rs;await t(rs({...r,amount:"",reset:!0})),await t(qt({...n,amount:"",reset:!0})),await t(c({amount:o,prioritized:!0}))}),[t,d,l]),h=(0,r.useCallback)((async()=>{const{poolAddresses:e,mintInfo:t,amount:s,priority:n}=l,{poolAddresses:a,mintInfo:i,amount:r,priority:u}=d,{address:h}=t||{},m=e.map((e=>({address:e,...c[e]}))),{address:f}=i||{},g=a.map((e=>({address:e,...c[e]})));let y=new ht;if(!Number(s)&&!Number(r)||!p.account.isAddress(h)||!p.account.isAddress(f)||!m.length||!g.length||!t)return o(y);let w=new Array;const v={mints:[h],pools:[]},x=(e=>{const t=new Map;for(const s in e){const n=e[s];1===(null===n||void 0===n?void 0:n.state)&&[n.mint_a,n.mint_b].forEach((e=>{var a;t.has(e)||t.set(e,new Map),null===(a=t.get(e))||void 0===a||a.set(s,n)}))}return t})(c);return mt(w,x,h,f,v),w.length?(y=u<n?await(async(e,t,s,n)=>{let a=new ht;for(let i of t){const t=await ft(e,i.pools,s,n);if(!t.length)continue;let r=s.amount;const o=new Array;t.forEach((e=>{o.push(r),r=yt(r,e)}));const l=Number(a.amount);Number(r)>l&&(a={hops:t,amounts:o,amount:r})}return a})(c,w,l,d):await(async(e,t,s,n)=>{let a=new ht;for(let r of t)try{const t=await ft(e,r.pools,s,n);if(!t.length)continue;const i=[...t].reverse();let o=n.amount;const l=new Array;for(const e of i){if(o=wt(o,e),Number(o)<0)break;l.unshift(o)}if(Number(o)<0)continue;const d=Number(a.amount);(!d||Number(o)<d)&&(a={hops:t,amounts:l,amount:o})}catch(i){}return a})(c,w,l,d),o(y)):o(y)}),[d,l,c]),m=(0,r.useCallback)((()=>{const e=l.priority,n=d.priority;n<e&&t(qt({amount:s.amount})),e<n&&t(rs({amount:s.amount})),t(ys({route:{...s}}))}),[d.priority,s,l.priority,t]);return(0,r.useEffect)((()=>{m()}),[m]),(0,r.useEffect)((()=>{h()}),[h]),(0,x.jsxs)(i.Row,{gutter:[e,e],justify:"center",children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(ms,{})}),(0,x.jsx)(i.Col,{children:(0,x.jsx)(i.Button,{size:"small",icon:(0,x.jsx)(I,{name:"git-compare-outline"}),onClick:u})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(ns,{})})]})},xs=()=>(0,x.jsxs)(i.Row,{gutter:[24,24],children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(i.Row,{gutter:[8,8],justify:"end",align:"middle",wrap:!1,children:(0,x.jsx)(i.Col,{children:(0,x.jsx)(Ot,{})})})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(vs,{})})]}),js=()=>(0,x.jsxs)(i.Row,{gutter:[24,24],children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(i.Card,{bordered:!1,className:"card-swap",children:(0,x.jsx)(xs,{})})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(bt,{})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(Rt,{})})]}),bs={success:[20,224,65],pending:[212,177,6],error:[215,35,17],failed:[215,35,17]},Is=({tag:e})=>{const t=t=>{let s=bs[e];return`rgba(${s[0]},  ${s[1]}, ${s[2]},${t||1})`};return(0,x.jsx)(i.Tag,{style:{margin:0,borderRadius:4,color:t(),textTransform:"capitalize"},color:t(.1),children:e})},Cs="0,00.[0000]a",As=[{title:"TIME",dataIndex:"time"},{title:"TRANSACTION",dataIndex:"transactionId",render:e=>(0,x.jsxs)(i.Space,{align:"baseline",children:[(0,x.jsx)(i.Typography.Text,{onClick:()=>window.open(w(e),"_blank"),style:{fontWeight:700,cursor:"pointer"},children:y(e,3,"...")}),(0,x.jsx)(i.Button,{type:"text",size:"small",onClick:()=>window.open(w(e),"_blank"),icon:(0,x.jsx)(I,{name:"open-outline"})})]})},{title:"BID",dataIndex:"bid",render:(e,t)=>t.from?(0,x.jsxs)(i.Space,{size:8,children:[(0,x.jsx)(Ct,{mintAddress:t.from}),v(t.amountFrom).format(Cs),(0,x.jsx)(At,{mintAddress:t.from})]}):"--"},{title:"ASK",dataIndex:"ask",render:(e,t)=>t.to?(0,x.jsxs)(i.Space,{size:8,children:[(0,x.jsx)(Ct,{mintAddress:t.to}),v(t.amountTo).format(Cs),(0,x.jsx)(At,{mintAddress:t.to})]}):"--"},{title:"STATUS",dataIndex:"status",width:100,render:(e,t)=>(0,x.jsx)(Is,{tag:t.status})}];class ks{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class Ss{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class Ts{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}var Rs=s(71256);const Ds=700;class Ms{constructor(){this.conn=window.sentre.splt.connection}async fetchSignatures(e,t,s=700){s>Ds&&(s=Ds);const n={limit:s,before:t};return this.conn.getConfirmedSignaturesForAddress2(e,n)}async fetchConfirmTransaction(e){let t=[];const s=[];for(let a=0;a<=e.length/150;a++){const t=150*a,n=e.slice(t,t+150);s.push(this.conn.getParsedConfirmedTransactions(n))}const n=await Promise.all(s);for(const a of n)t=t.concat(a);return t}async fetchTransactions(e,t){const s=(new Date).getTime()/1e3;let{secondFrom:n,secondTo:a,lastSignature:i,limit:r}=t;n=Math.floor(n||0),a=Math.floor(a||s);const o=new Rs.PublicKey(e);let l=[],d=!1;for(;!d;){const e=await this.fetchSignatures(o,i,r);if(null===e||void 0===e||!e.length||d)break;for(const t of e){const e=t.blockTime;if(e&&!(e>a)){if(e<n){d=!0;break}i=t.signature,l.push(t.signature)}}if(r&&l.length>=r)break;if((null===e||void 0===e?void 0:e.length)<Ds)break}return await this.fetchConfirmTransaction(l)}}let Bs;!function(e){e.Transfer="transfer"}(Bs||(Bs={}));const Ps=1e3;let Ns;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(Ns||(Ns={}));class Es{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const t=new Es,s=e*Ps;return t.setMilliSeconds(s),t}static fromYmd(e){const t=new Es,s=l()(e,Ns.YMD).valueOf();return t.setMilliSeconds(s),t}static getListDate(e,t){const s=[];let n=Es.fromYmd(e);const a=Es.fromYmd(t);for(;n.ymd()<=a.ymd();)s.push(n.ymd()),n=n.addDay();return s}format(e){const t=new Date(this.milliSeconds);return l()(t).format(e)}subtractDay(e=1){const t=l()(this.milliSeconds).subtract(e,"days").valueOf();return Es.fromSeconds(t/Ps)}addDay(e=1){const t=l()(this.milliSeconds).add(e,"days").valueOf();return Es.fromSeconds(t/Ps)}seconds(){return(this.milliSeconds-this.milliSeconds%Ps)/Ps}ymd(){return Number(this.format(Ns.YMD))}static today(e=Ns.YMD){return l()().format(e)}}class zs{constructor(){this.solana=void 0,this.solana=new Ms}async collect(e,t,s){let{lastSignature:n,limit:a}=t,i=!1,r=[],o=n;for(;!i;){const n=await this.solana.fetchTransactions(e,{...t,lastSignature:o});for(const e of n){o=e.transaction.signatures[0];const t=this.parseTransLog(e);t&&r.push(t)}if(!s)break;if(r=r.filter((e=>s(e))),!n.length||i)break;if(a&&r.length>=a){i=!0;break}}return r}parseTransLog(e){var t,s;const{blockTime:n,meta:a,transaction:i}=e;if(!n||!a)return;const{postTokenBalances:r,preTokenBalances:o,postBalances:l,preBalances:d}=a,{signatures:c,message:u}=i,h=(null===(t=a.innerInstructions)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.instructions)||[],p=u.instructions[0]||[],m=new ks;m.signature=c[0],m.blockTime=n,m.time=Es.fromSeconds(n).ymd(),m.programId=p.programId.toString();const f=this.parseAccountInfo(u.accountKeys,r||[],o||[],l,d);return this.isParsedInstruction(p)?(m.programTransfer=this.parseAction([p],f),m):(m.actionTransfers=this.parseAction(h,f),m.programInfo={programId:p.programId.toString(),data:p.data},m)}isParsedInstruction(e){return void 0!==e.parsed}parseAction(e,t){const s=[];for(const n of e){if(!this.isParsedInstruction(n))continue;const e=n.parsed||{};if(e.type===Bs.Transfer){const n=e.info,a=this.parseActionTransfer(n,t);a&&s.push(a)}}return s}parseActionTransfer(e,t){const{source:s,destination:n,amount:a,lamports:i}=e,r=a||i.toString();if(!r||!t.has(s)||!t.has(n))return;const o=new Ts;return o.source=t.get(s),o.destination=t.get(n),o.amount=r,o}parseAccountInfo(e,t,s,n,a){const i=new Map;for(const r of t){const{accountIndex:t,mint:s,uiTokenAmount:n}=r,a=new Ss;a.address=e[t].pubkey.toString(),a.postBalance=n.amount,a.mint=s,a.decimals=n.decimals,i.set(a.address,a)}for(const r of s){const{accountIndex:t,uiTokenAmount:s}=r,n=e[t].pubkey.toString(),a=i.get(n)||new Ss;a.preBalance=s.amount,i.set(a.address,a)}return e.forEach(((e,t)=>{const s=e.pubkey.toString();if(!p.account.isAssociatedAddress(s)){const e=i.get(s)||new Ss;e.address=s,e.mint="11111111111111111111111111111111",e.postBalance=String(n[t]||0),e.preBalance=String(a[t]||0),e.decimals=9,i.set(e.address,e)}})),i}}const Ls="history",Os=e=>!!e.actionTransfers.length,Ws=(0,T.createAsyncThunk)("history/fetchHistorySwap",(async({lastSignature:e,isLoadMore:t},{getState:s})=>{var n;const{sol:{swapAddress:a}}=S.Z,{history:{historySwap:i}}=s(),r=await(null===(n=window.sentre.wallet)||void 0===n?void 0:n.getAddress());if(!r)throw Error("Loggin first");const o={limit:20,lastSignature:e},d=new zs,c=await d.collect(r,o,Os);let u=[];t&&(u=[...i]);for(const w of c){var h,m,f,g,y;const e={},t=w.actionTransfers;let s;const n=t[0];t.length>1&&(s=t.at(-1));if(w.programId!==a)continue;const i=new Date(1e3*w.blockTime);e.time=l()(i).format("DD MMM, YYYY hh:mm"),e.amountFrom=n.destination?Number(p.utils.undecimalize(BigInt(n.amount),n.destination.decimals)):void 0,e.amountTo=null!==(h=s)&&void 0!==h&&h.destination?Number(p.utils.undecimalize(BigInt(s.amount),s.destination.decimals)):void 0,e.from=null===(m=n.destination)||void 0===m?void 0:m.mint,e.to=null===(f=s)||void 0===f||null===(g=f.destination)||void 0===g?void 0:g.mint,e.transactionId=w.signature,e.key=w.signature,e.status=n.destination&&null!==(y=s)&&void 0!==y&&y.destination?"success":"failed",u.push(e)}return{historySwap:u}})),_s=(0,T.createSlice)({name:Ls,initialState:{historySwap:[]},reducers:{},extraReducers:e=>{e.addCase(Ws.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,Us=()=>{const[e,t]=(0,r.useState)(5),[s,a]=(0,r.useState)(!1),{historySwap:o}=(0,n.useSelector)((e=>e.history)),l=(0,n.useDispatch)(),d=(0,r.useCallback)((async()=>{a(!0),await l(Ws({})).unwrap(),a(!1)}),[l]);(0,r.useEffect)((()=>{d()}),[d]);return(0,x.jsx)(i.Card,{bordered:!1,style:{height:438},children:(0,x.jsxs)(i.Row,{gutter:[16,24],children:[(0,x.jsx)(i.Col,{flex:"auto",children:(0,x.jsx)(i.Typography.Title,{level:5,children:"Swap history"})}),(0,x.jsx)(i.Col,{children:(0,x.jsx)(i.Button,{onClick:()=>{d(),t(5)},children:"Refresh"})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsxs)(i.Row,{justify:"center",gutter:[16,9],children:[(0,x.jsx)(i.Col,{span:24,style:{height:310},children:(0,x.jsx)(i.Table,{columns:As,dataSource:o.slice(0,e),loading:s,pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row",scroll:o.length?{x:800,y:260}:{}})}),(0,x.jsx)(i.Col,{children:(0,x.jsx)(i.Button,{onClick:()=>{const s=o.slice(0,e).length;if(o.length-s<=15){var n;const e=null===(n=o.at(-1))||void 0===n?void 0:n.transactionId;l(Ws({lastSignature:e,isLoadMore:!0}))}t(e+5)},type:"text",icon:(0,x.jsx)(I,{name:"chevron-down-outline"}),disabled:e>=o.length,children:"View more"})})]})})]})})},Fs=()=>(0,x.jsxs)(i.Row,{gutter:[24,24],children:[(0,x.jsx)(i.Col,{lg:8,md:12,xs:24,children:(0,x.jsx)(js,{})}),(0,x.jsx)(i.Col,{lg:16,md:12,xs:24,children:(0,x.jsxs)(i.Row,{gutter:[24,24],children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(it,{})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(Us,{})})]})})]}),Zs=()=>{var e,t,s,a;const r=(0,n.useSelector)((e=>e.bid)),o=(0,n.useSelector)((e=>e.ask));return(0,x.jsxs)(i.Row,{gutter:[16,24],children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsxs)(i.Row,{align:"middle",justify:"space-between",children:[(0,x.jsx)(i.Col,{children:(0,x.jsxs)(i.Space,{direction:"vertical",children:[(0,x.jsx)(i.Typography.Text,{children:"From"}),(0,x.jsx)(i.Typography.Text,{children:(0,x.jsxs)(i.Space,{children:[(0,x.jsx)(i.Avatar,{src:null===(e=r.mintInfo)||void 0===e?void 0:e.logoURI}),null===(t=r.mintInfo)||void 0===t?void 0:t.symbol]})}),(0,x.jsx)(i.Typography.Title,{level:4,children:r.amount})]})}),(0,x.jsx)(i.Col,{children:(0,x.jsx)(I,{name:"arrow-forward-outline",style:{fontSize:24}})}),(0,x.jsx)(i.Col,{children:(0,x.jsxs)(i.Space,{direction:"vertical",children:[(0,x.jsx)(i.Typography.Text,{children:"To"}),(0,x.jsxs)(i.Space,{children:[(0,x.jsx)(i.Avatar,{src:null===(s=o.mintInfo)||void 0===s?void 0:s.logoURI}),null===(a=o.mintInfo)||void 0===a?void 0:a.symbol]}),(0,x.jsx)(i.Typography.Title,{level:4,children:o.amount})]})})]})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(i.Divider,{style:{margin:0}})}),(0,x.jsx)(i.Col,{children:(0,x.jsx)(jt,{})})]})},qs=()=>{const[e,t]=(0,r.useState)(!1),{route:s}=(0,n.useSelector)((e=>e.route)),o=(0,n.useSelector)((e=>e.bid)),l=(0,n.useSelector)((e=>e.ask)),{advanced:d}=(0,n.useSelector)((e=>e.settings)),{accounts:c}=(0,a.useAccount)(),u=vt(),h=(0,r.useMemo)((()=>{const e=o.mintInfo,t=c[o.accountAddress],s=(null===t||void 0===t?void 0:t.amount)||BigInt(0);if(!e||!Number(o.amount))return BigInt(0);if(e.address!==p.DEFAULT_WSOL)return BigInt(0);const n=p.utils.decimalize(o.amount,e.decimals);return n<=s?BigInt(0):n-s}),[c,o.accountAddress,o.amount,o.mintInfo]),m=!d&&100*u>12.5,f=!(null!==s&&void 0!==s&&s.hops.length)||!parseFloat(o.amount)||parseFloat(o.amount)<0||!parseFloat(null===l||void 0===l?void 0:l.amount)||parseFloat(null===l||void 0===l?void 0:l.amount)<0;return(0,x.jsxs)(i.Row,{gutter:[12,12],children:[(0,x.jsx)(i.Col,{span:24,children:(0,x.jsx)(vs,{spacing:12})}),(0,x.jsx)(i.Col,{span:24,children:(0,x.jsxs)(i.Row,{align:"bottom",children:[(0,x.jsx)(i.Col,{flex:"auto",children:(0,x.jsx)(i.Popover,{placement:"bottomLeft",content:(0,x.jsx)(i.Row,{style:{width:307},children:(0,x.jsx)(i.Col,{children:(0,x.jsx)(jt,{})})}),trigger:"click",children:(0,x.jsxs)(i.Space,{style:{cursor:"pointer"},direction:"vertical",size:4,children:[(0,x.jsxs)(i.Space,{children:[(0,x.jsx)(i.Typography.Text,{children:(0,x.jsx)(I,{name:"information-circle-outline",style:{color:"#7A7B85"}})}),(0,x.jsx)(i.Typography.Text,{type:"secondary",children:"Price impact"})]}),(0,x.jsxs)(i.Space,{children:[(0,x.jsx)(i.Typography.Text,{style:{color:"#D72311"},children:(0,x.jsx)(I,{name:"arrow-down-outline"})}),(0,x.jsx)(i.Typography.Text,{style:{color:"#D72311"},children:v(Number(u)).format("0.[0000]%")})]})]})})}),(0,x.jsx)(i.Col,{children:(0,x.jsx)(i.Button,{onClick:()=>t(!0),size:"large",block:!0,type:"primary",disabled:f,children:"Review & Swap"})})]})}),(0,x.jsx)(i.Modal,{title:(0,x.jsx)(i.Typography.Title,{level:4,children:" Confirm swap"}),onCancel:()=>t(!1),footer:(0,x.jsx)(ot,{hops:(null===s||void 0===s?void 0:s.hops)||[],wrapAmount:h,onCallback:()=>t(!1),hightImpact:m,disabled:f||m}),visible:e,children:(0,x.jsx)(Zs,{})})]})},Ks=(0,T.configureStore)({middleware:e=>e(R),devTools:!1,reducer:{ask:Kt,bid:os,settings:Lt,route:ws,history:_s}}),{manifest:{appId:Ys}}=es,Qs=()=>(0,x.jsx)(a.UIProvider,{appId:Ys,antd:!0,children:(0,x.jsx)(a.MintProvider,{children:(0,x.jsx)(a.PoolProvider,{children:(0,x.jsx)(a.AccountProvider,{children:(0,x.jsx)(a.WalletProvider,{children:(0,x.jsx)(n.Provider,{store:Ks,children:(0,x.jsx)(Fs,{})})})})})})}),Gs={size:"small",type:"solid"},Hs=()=>(0,x.jsx)(a.UIProvider,{appId:Ys,antd:!0,children:(0,x.jsx)(a.MintProvider,{children:(0,x.jsx)(a.PoolProvider,{children:(0,x.jsx)(a.AccountProvider,{children:(0,x.jsx)(a.WalletProvider,{children:(0,x.jsx)(n.Provider,{store:Ks,children:(0,x.jsx)(qs,{})})})})})})})},31633:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(63805),a=s(77566),i=s(77330);const r={sol:a.Z[n.ef],register:i.Z[n.OB]}},77330:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const n={sen_swap:{url:"https://descartesnetwork.github.io/sen-swap/index.js",appId:"sen_swap",name:"Sen Swap",author:{name:"Sentre",email:"hi@sentre.io"},supportedViews:"page,widget".split(",").map((e=>e.trim())).filter((e=>["page","widget"].includes(e))),tags:"solana,dapps,sentre".split(",").map((e=>e.trim())),description:"SPLT Swap for SPL tokens",verified:!1}},a={development:{extra:n,senreg:"https://descartesnetwork.github.io/senreg/register.json"},staging:{extra:n,senreg:"https://descartesnetwork.github.io/senreg/register.json"},production:{extra:{},senreg:"https://descartesnetwork.github.io/senreg/register.json"}}},77566:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const n={spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},a={devnet:{...n,node:"https://api.devnet.solana.com",chainId:103,senAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",senPoolAddress:"3EUPL7YQLbU6DNU5LZeQeHPXTf1MigJ2yASXA9rH5Ku4",swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9"},testnet:{...n,node:"https://api.testnet.solana.com",chainId:102,senAddress:"",senPoolAddress:"",swapAddress:"",taxmanAddress:""},mainnet:{...n,node:"https://api.mainnet-beta.solana.com",chainId:101,senAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",senPoolAddress:"",swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}}},11503:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var n=s(11796),a=s(67845),i=s(63805),r=s(31633),o=s(63845);const{sol:{chainId:l}}=r.Z,d=/[\W_]+/g,c={tokenize:"full",context:!0,minlength:3},u={document:{id:"address",index:[{field:"symbol",...c},{field:"name",...c}]}};const h=class{constructor(){this.tokenMap=void 0,this.engine=void 0,this.chainId=void 0,this.cluster=void 0,this._init=async()=>{if(this.tokenMap.size)return this.tokenMap;let e=await(await(new a.DK).resolve()).filterByChainId(this.chainId).getList();return"devnet"===this.cluster&&(e=e.concat(o.ZP)),e="testnet"===this.cluster?e.concat([(0,o.DO)(102),(0,o.Tz)(102)]):e.concat([(0,o.Tz)(101)]),e.forEach((e=>this.tokenMap.set(e.address,e))),this.tokenMap},this._engine=async()=>{if(this.engine)return this.engine;const e=await this._init();return this.engine=new n.Document(u),e.forEach((({address:e,...t})=>this.engine.add(e,t))),this.engine},this.all=async()=>{const e=await this._init();return Array.from(e.values())},this.findByAddress=async e=>(await this._init()).get(e),this.find=async(e,t)=>{const s=await this._init(),n=await this._engine();let a=[];return e.split(d).forEach((e=>n.search(e,t).forEach((({result:e})=>e.forEach((e=>{if(a.findIndex((({address:t})=>t===e))<0){const t=s.get(e);t&&a.push(t)}})))))),a},this.tokenMap=new Map,this.engine=void 0,this.chainId=l,this.cluster=i.ef,this._init()}}},63845:(e,t,s)=>{"use strict";s.d(t,{Tz:()=>n,DO:()=>a,ZP:()=>i});const n=e=>({symbol:"SOL",name:"Solana",address:"11111111111111111111111111111111",decimals:9,chainId:e,extensions:{coingeckoId:"solana"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"}),a=e=>({symbol:"SEN",name:"Sen",address:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",decimals:9,chainId:e,extensions:{coingeckoId:"sen"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M/logo.png"}),i=[n(103),a(103),{symbol:"wBTC",name:"Wrapped Bitcoin",address:"8jk4eJymMfNZV9mkRNxJEt2VJ3pRvdJvD5FE94GXGBPM",decimals:9,chainId:103,extensions:{coingeckoId:"bitcoin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/qfnqNqs3nCAHjnyCgLRDbBtq4p2MtHZxw8YjSyYhPoL/logo.png"},{symbol:"wETH",name:"Ethereum",address:"27hdcZv7RtuMp75vupThR3T4KLsL61t476eosMdoec4c",decimals:9,chainId:103,extensions:{coingeckoId:"ethereum"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/FeGn77dhg1KXRRFeSwwMiykZnZPw5JXW6naf2aQgZDQf/logo.png"},{symbol:"UNI",name:"Uniswap",address:"FVZFSXu3yn17YdcxLD72TFDUqkdE5xZvcW18EUpRQEbe",decimals:9,chainId:103,extensions:{coingeckoId:"uniswap"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/3MVa4e32PaKmPxYUQ6n8vFkWtCma68Ld7e7fTktWDueQ/logo.png"},{symbol:"USDC",name:"USD Coin",address:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",decimals:9,chainId:103,extensions:{coingeckoId:"usd-coin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"}]},33015:(e,t,s)=>{"use strict";s.d(t,{ih:()=>r,ZP:()=>d});var n=s(19289),a=s(95418);const i="mints",r=(0,n.createAsyncThunk)("mints/getMint",(async({address:e,force:t=!1},{getState:s})=>{if(!a.account.isAddress(e))throw new Error("Invalid mint address");if(!t){const{accounts:{[e]:t}}=s();if(t)return{[e]:t}}const{splt:n}=window.sentre;return{[e]:await n.getMintData(e)}})),o=(0,n.createAsyncThunk)("mints/upsetMint",(async({address:e,data:t})=>{if(!a.account.isAddress(e))throw new Error("Invalid address");if(!t)throw new Error("Data is empty");return{[e]:t}})),l=(0,n.createAsyncThunk)("mints/deleteMint",(async({address:e})=>{if(!a.account.isAddress(e))throw new Error("Invalid address");return{address:e}})),d=(0,n.createSlice)({name:i,initialState:{},reducers:{},extraReducers:e=>{e.addCase(r.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(o.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(l.fulfilled,((e,{payload:t})=>{delete e[t.address]}))}}).reducer},63805:(e,t,s)=>{"use strict";s.d(t,{OB:()=>a,ef:()=>i});var n=s(53933);const a="production",i=(()=>{switch(n.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})()},53933:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n="sentre",a=window.localStorage,i=e=>{if(!e)return null;try{return JSON.parse(e)}catch(t){return null}},r={set:(e,t)=>{let s=i(a.getItem(n));s&&"object"===typeof s||(s={}),s[e]=t,a.setItem(n,JSON.stringify(s))},get:e=>{let t=i(a.getItem(n));return t&&"object"===typeof t?t[e]:null},clear:e=>{r.set(e,null)}},o=r},88677:()=>{},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},88795:()=>{},89408:()=>{},34845:()=>{},57600:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},33370:()=>{},55024:()=>{}}]);
//# sourceMappingURL=415.c854f5d5.chunk.js.map